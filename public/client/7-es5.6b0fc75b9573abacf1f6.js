function _get(t,e,n){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=_superPropBase(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function _superPropBase(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_getPrototypeOf(t)););return t}function _possibleConstructorReturn(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?_assertThisInitialized(t):e}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var n=[],i=!0,r=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(c){r=!0,a=c}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}return n}}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"/RwR":function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var i=n("0IaG"),r=n("fXoL"),a=n("VaLf"),o=n("kmQS"),s=n("NFeN"),c=n("ofXK"),l=n("bTqV");function u(t,e){if(1&t&&(r.Xb(0,"p",9),r.Nc(1),r.Wb()),2&t){var n=r.jc();r.Db(1),r.Oc(n.data.bodyBold)}}var d=function(){var t=function(){function t(e,n,i,r){_classCallCheck(this,t),this.dialogRef=e,this.data=n,this.i18n=i,this.settings=r}return _createClass(t,[{key:"close",value:function(){this.dialogRef.close(!1)}},{key:"ngOnInit",value:function(){this.data.title=this.i18n.t(this.data.title),this.data.body=this.i18n.t(this.data.body),this.data.bodyBold&&(this.data.bodyBold=this.i18n.t(this.data.bodyBold)),this.data.ok=this.i18n.t(this.data.ok?this.data.ok:"Confirm"),this.data.cancel=this.i18n.t(this.data.cancel?this.data.cancel:"Cancel")}},{key:"confirm",value:function(){this.dialogRef.close(!0)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(r.Rb(i.h),r.Rb(i.a),r.Rb(a.a),r.Rb(o.a))},t.\u0275cmp=r.Lb({type:t,selectors:[["confirm-modal"]],decls:14,vars:5,consts:[[1,"modal-header"],["mat-dialog-title","",1,"modal-title"],["type","button","tabindex","-1",1,"close-button","no-style",3,"click"],["svgIcon","close"],["mat-dialog-content","",1,"mat-dialog-contents"],["class","bold",4,"ngIf"],["mat-dialog-actions","",1,"buttons","right","mat-dialog-actions"],["type","button","mat-button","",1,"button","cancel","cancel-button",3,"click"],["type","submit","mat-raised-button","","color","accent","cdkFocusInitial","",1,"button","primary","submit-button",3,"click"],[1,"bold"]],template:function(t,e){1&t&&(r.Xb(0,"div",0),r.Xb(1,"h2",1),r.Nc(2),r.Wb(),r.Xb(3,"button",2),r.fc("click",(function(t){return e.close()})),r.Sb(4,"mat-icon",3),r.Wb(),r.Wb(),r.Xb(5,"div",4),r.Xb(6,"p"),r.Nc(7),r.Wb(),r.Lc(8,u,2,1,"p",5),r.Wb(),r.Xb(9,"div",6),r.Xb(10,"button",7),r.fc("click",(function(t){return e.close()})),r.Nc(11),r.Wb(),r.Xb(12,"button",8),r.fc("click",(function(t){return e.confirm()})),r.Nc(13),r.Wb(),r.Wb()),2&t&&(r.Db(2),r.Oc(e.data.title),r.Db(5),r.Oc(e.data.body),r.Db(1),r.rc("ngIf",e.data.bodyBold),r.Db(3),r.Oc(e.data.cancel),r.Db(2),r.Oc(e.data.ok))},directives:[i.i,s.a,i.f,c.t,i.c,l.b],styles:["[_nghost-%COMP%]{display:block;max-width:500px}.modal-header[_ngcontent-%COMP%]{margin-bottom:10px}.bold[_ngcontent-%COMP%]{font-weight:500}p[_ngcontent-%COMP%]{font-size:1.5rem}"],changeDetection:0}),t}()},"/w9p":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var i=new(n("fXoL").r)("PREVIEW_URL_TRANSFORMER",{factory:function(){return function(t){return t.url}},providedIn:"root"})},"0alx":function(t,e,n){"use strict";var i=n("VKeD");e.isIterable=function(t){return t&&"function"==typeof t[i.iterator]}},"1V5l":function(t,e,n){"use strict";var i=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(var n in _classCallCheck(this,t),this.type="replies",e)this[n]=e[n]},r=n("LRne"),a=n("Kqap"),o=n("NJ9Y"),s=n("JIr8"),c=n("w1tV"),l=n("fXoL"),u=n("apsj"),d=n("LsVx"),h=n("h586"),b=n("i2dy");n.d(e,"a",(function(){return p}));var f,p=((f=function(){function t(e,n,i,r){_classCallCheck(this,t),this.ticketUploads=e,this.tickets=n,this.uploadQueue=i,this.toast=r,this.reset()}return _createClass(t,[{key:"get",value:function(){return this.model}},{key:"set",value:function(t){this.model=t}},{key:"setBody",value:function(t){this.model.body=t}},{key:"setTicketId",value:function(t){this.ticketId=t}},{key:"isEmpty",value:function(){return 0===this.model.body.length&&0===this.model.uploads.length}},{key:"uploadFiles",value:function(t){var e=this;this.uploadQueue.start(t).pipe(Object(a.a)((function(t,e){return[].concat(_toConsumableArray(t),[e.fileEntry])}),[]),Object(o.a)()).subscribe((function(t){e.model.uploads=[].concat(_toConsumableArray(e.model.uploads),_toConsumableArray(t)),e.save()}))}},{key:"detachUpload",value:function(t){var e=this;this.ticketUploads.detach(this.model.id,t.id).subscribe((function(){var n=e.get().uploads.findIndex((function(e){return e.id===t.id}));e.get().uploads.splice(n,1)}))}},{key:"save",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.isEmpty()){var n=this.tickets.saveDraft(this.ticketId,this.getPayload(e),this.model.id).pipe(Object(s.a)((function(){return Object(r.a)({data:t.get()})})),Object(c.a)());return n.subscribe((function(e){t.set(e.data)})),n}}},{key:"delete",value:function(){this.model.id&&this.tickets.deleteDraft(this.model.id).subscribe(),this.reset()}},{key:"getPayload",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign({},{body:this.model.body||null,uploads:this.model.uploads.map((function(t){return t.id}))},t)}},{key:"reset",value:function(){this.set(new i({uploads:[],body:""}))}}]),t}()).\u0275fac=function(t){return new(t||f)(l.bc(u.a),l.bc(d.a),l.bc(h.a),l.bc(b.a))},f.\u0275prov=l.Nb({token:f,factory:f.\u0275fac,providedIn:"root"}),f)},"2KeD":function(t,e,n){"use strict";var i=n("Q1FS"),r=n("zB/H"),a=n("zfKp");e.scheduleObservable=function(t,e){return new i.Observable((function(n){var i=new r.Subscription;return i.add(e.schedule((function(){var r=t[a.observable]();i.add(r.subscribe({next:function(t){i.add(e.schedule((function(){return n.next(t)})))},error:function(t){i.add(e.schedule((function(){return n.error(t)})))},complete:function(){i.add(e.schedule((function(){return n.complete()})))}}))}))),i}))}},"2qMH":function(t,e,n){"use strict";var i=n("Q1FS"),r=n("zB/H");e.scheduleArray=function(t,e){return new i.Observable((function(n){var i=new r.Subscription,a=0;return i.add(e.schedule((function(){a!==t.length?(n.next(t[a++]),n.closed||i.add(this.schedule())):n.complete()}))),i}))}},"2qZP":function(t,e,n){"use strict";n.d(e,"a",(function(){return p}));var i=n("fXoL"),r=n("tSQ/"),a=n("STbY"),o=n("IzEk"),s=n("mWN8"),c=n("twBr"),l=n("LsVx"),u=n("i2dy"),d=n("NFeN"),h=n("Rd8u"),b=n("ofXK");function f(t,e){if(1&t){var n=i.Yb();i.Xb(0,"button",7),i.fc("click",(function(t){i.Cc(n);var r=e.$implicit;return i.jc().assignTicketsTo(r.id)})),i.Nc(1),i.Wb()}if(2&t){var r=e.$implicit,a=i.jc();i.Hb("active",a.ticket&&a.ticket.assigned_to==r.id),i.Db(1),i.Oc(r.email)}}var p=function(){var t=function(){function t(e,n,r,a){_classCallCheck(this,t),this.users=e,this.currentUser=n,this.tickets=r,this.toast=a,this.agents=[],this.assigned=new i.o}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.trigger.menuOpened.pipe(Object(o.a)(1)).subscribe((function(){t.fetchAgents()}))}},{key:"open",value:function(){this.trigger.openMenu()}},{key:"close",value:function(){this.trigger.closeMenu()}},{key:"assignTicketsTo",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.tickets.assign(this.ticketIds?this.ticketIds:[this.ticket.id],e).subscribe((function(){t.ticket&&(t.ticket.assigned_to=e),t.toast.open("Tickets assigned"),t.assigned.emit()}))}},{key:"fetchAgents",value:function(){var t=this;this.users.getAll({permission:r.a,per_page:35}).subscribe((function(e){t.agents=e.filter((function(e){return e.id!==t.currentUser.get("id")}))}))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(i.Rb(s.a),i.Rb(c.a),i.Rb(l.a),i.Rb(u.a))},t.\u0275cmp=i.Lb({type:t,selectors:[["assign-ticket-dropdown"]],viewQuery:function(t,e){var n;1&t&&i.Jc(a.d,!0),2&t&&i.yc(n=i.gc())&&(e.trigger=n.first)},inputs:{ticket:"ticket",ticketIds:"ticketIds"},outputs:{assigned:"assigned"},decls:9,vars:7,consts:[[1,"no-style","toolbar-item",3,"matMenuTriggerFor"],["svgIcon","user-custom"],[1,"assign-ticket-menu",3,"overlapTrigger"],["assignTicketMenu","matMenu"],["mat-menu-item","","trans","",1,"anyone-item",3,"click"],["mat-menu-item","","trans","",1,"me-item",3,"click"],["mat-menu-item","","class","agent-item",3,"active","click",4,"ngFor","ngForOf"],["mat-menu-item","",1,"agent-item",3,"click"]],template:function(t,e){if(1&t&&(i.Xb(0,"button",0),i.Sb(1,"mat-icon",1),i.Wb(),i.Xb(2,"mat-menu",2,3),i.Xb(4,"button",4),i.fc("click",(function(t){return e.assignTicketsTo()})),i.Nc(5,"Anyone"),i.Wb(),i.Xb(6,"button",5),i.fc("click",(function(t){return e.assignTicketsTo(e.currentUser.get("id"))})),i.Nc(7,"Me"),i.Wb(),i.Lc(8,f,2,3,"button",6),i.Wb()),2&t){var n=i.zc(3);i.rc("matMenuTriggerFor",n),i.Db(2),i.rc("overlapTrigger",!1),i.Db(2),i.Hb("active",e.ticket&&!e.ticket.assigned_to),i.Db(2),i.Hb("active",e.ticket&&e.ticket.assigned_to===e.currentUser.get("id")),i.Db(2),i.rc("ngForOf",e.agents)}},directives:[a.d,d.a,a.e,a.b,h.a,b.s],styles:["assign-ticket-dropdown{position:relative;display:inline-block}.assign-ticket-menu.mat-menu-panel{max-height:500px}.assign-ticket-menu.mat-menu-panel .mat-menu-item.active{background-color:var(--be-hover)}"],encapsulation:2}),t}()},"3H9V":function(t,e,n){"use strict";n.d(e,"a",(function(){return T}));var i=n("yS8O"),r=n("aV6R"),a=n("lxqa"),o=n("wZee"),s=(n("bPOv"),n("Yhcd"),n("jpss"),n("XIHC"),n("QWvX"),n("fXoL")),c=n("QGXG"),l=n("twBr"),u=n("LsVx"),d=n("wWhK"),h=n("9C01"),b=n("ofXK"),f=n("STbY"),p=n("Rd8u"),g=n("bTqV"),m=n("NFeN"),v=n("83jf");function y(t,e){if(1&t&&s.Sb(0,"img",22),2&t){var n=s.jc(2).$implicit;s.sc("src",n.user.avatar,s.Fc),s.sc("alt",n.user.email)}}function k(t,e){1&t&&(s.Xb(0,"span",23),s.Nc(1,"You"),s.Wb())}function _(t,e){if(1&t&&(s.Xb(0,"span"),s.Nc(1),s.Wb()),2&t){var n=s.jc(2).$implicit;s.Db(1),s.Oc(n.user.display_name)}}function w(t,e){1&t&&(s.Xb(0,"span",24),s.Nc(1,"replied"),s.Wb())}function x(t,e){1&t&&(s.Xb(0,"span",24),s.Nc(1,"started the conversation"),s.Wb())}function C(t,e){1&t&&(s.Xb(0,"span",24),s.Nc(1,"left a note"),s.Wb())}function D(t,e){1&t&&(s.Xb(0,"span",24),s.Nc(1,"created a draft"),s.Wb())}function S(t,e){if(1&t){var n=s.Yb();s.Xb(0,"span",25),s.Xb(1,"button",26),s.fc("click",(function(t){s.Cc(n);var e=s.jc(2).$implicit;return s.jc().editDraft(e)})),s.Nc(2,"Edit"),s.Wb(),s.Xb(3,"button",27),s.fc("click",(function(t){s.Cc(n);var e=s.jc(2).$implicit;return s.jc().maybeDeleteReply(e)})),s.Nc(4,"Discard"),s.Wb(),s.Wb()}}function O(t,e){if(1&t&&(s.Vb(0),s.Xb(1,"button",28),s.Sb(2,"mat-icon",29),s.Wb(),s.Ub()),2&t){s.jc();var n=s.zc(19);s.Db(1),s.rc("matMenuTriggerFor",n)}}function I(t,e){if(1&t){var n=s.Yb();s.Xb(0,"reply-attachment-list",30),s.fc("detached",(function(t){s.Cc(n);var e=s.jc(2).$implicit;return s.jc().removeAttachment(e,t)})),s.Wb()}if(2&t){var i=s.jc(2).$implicit;s.rc("attachments",i.uploads)}}function R(t,e){if(1&t){var n=s.Yb();s.Xb(0,"div",3),s.Lc(1,y,1,2,"img",4),s.Xb(2,"div",5),s.Xb(3,"div",6),s.Xb(4,"div",7),s.Xb(5,"span",8),s.Lc(6,k,2,0,"span",9),s.Lc(7,_,2,1,"span",10),s.Wb(),s.Nc(8," "),s.Lc(9,w,2,0,"span",11),s.Lc(10,x,2,0,"span",11),s.Lc(11,C,2,0,"span",11),s.Lc(12,D,2,0,"span",11),s.Lc(13,S,5,0,"span",12),s.Wb(),s.Xb(14,"div",13),s.Xb(15,"span",14),s.Nc(16),s.Wb(),s.Lc(17,O,3,1,"ng-container",10),s.Xb(18,"mat-menu",15,16),s.Xb(20,"div",17),s.fc("click",(function(t){s.Cc(n);var e=s.jc().$implicit;return s.jc().update(e)})),s.Nc(21,"Edit"),s.Wb(),s.Xb(22,"div",18),s.fc("click",(function(t){s.Cc(n);var e=s.jc().$implicit;return s.jc().maybeDeleteReply(e)})),s.Nc(23,"Delete"),s.Wb(),s.Xb(24,"div",19),s.fc("click",(function(t){s.Cc(n);var e=s.jc().$implicit;return s.jc().showOriginalEmail(e)})),s.Nc(25,"Show Original"),s.Wb(),s.Wb(),s.Wb(),s.Wb(),s.Sb(26,"div",20),s.Lc(27,I,1,1,"reply-attachment-list",21),s.Wb(),s.Wb()}if(2&t){var i=s.jc(),r=i.$implicit,a=i.last,o=s.jc();s.Hb("bounce",r.animated)("my-reply",r.user_id==o.currentUser.get("id")),s.sc("ngClass",r.type),s.Db(1),s.rc("ngIf",r.user.avatar),s.Db(5),s.rc("ngIf",o.currentUser.get("id")==r.user.id),s.Db(1),s.rc("ngIf",o.currentUser.get("id")!=r.user.id),s.Db(2),s.rc("ngIf",!a&&"replies"===r.type),s.Db(1),s.rc("ngIf",a&&"replies"===r.type),s.Db(1),s.rc("ngIf","notes"==r.type),s.Db(1),s.rc("ngIf","drafts"==r.type),s.Db(1),s.rc("ngIf","drafts"===r.type),s.Db(3),s.Oc(r.created_at_formatted),s.Db(1),s.rc("ngIf",o.currentUser.hasPermission("replies.update")&&"drafts"!==r.type),s.Db(9),s.rc("innerHTML",r.body,s.Dc),s.Db(1),s.rc("ngIf",r.uploads.length)}}function X(t,e){if(1&t&&s.Lc(0,R,28,17,"div",2),2&t){var n=e.$implicit,i=s.jc();s.rc("ngIf",i.currentUser.hasPermission("replies.view")||"notes"!==n.type)}}var T=function(){var t=function(){function t(e,n,i,r,a){_classCallCheck(this,t),this.modal=e,this.currentUser=n,this.tickets=i,this.conversation=r,this.backendEvents=a}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.subscription=this.backendEvents.ticketReplyCreated.subscribe((function(e){t.conversation.get().id===e.ticket_id&&(e.animated=!0,t.conversation.replies.add(e))}))}},{key:"ngOnDestroy",value:function(){this.subscription&&this.subscription.unsubscribe()}},{key:"ngAfterViewInit",value:function(){o&&o.highlightAll()}},{key:"update",value:function(t){var e=this;this.modal.open(r.a,{reply:t},{panelClass:"update-reply-modal-container"}).afterClosed().subscribe((function(t){t&&e.conversation.replies.replace(t)}))}},{key:"maybeDeleteReply",value:function(t){var e=this;this.modal.show(a.a,{reply:t}).afterClosed().subscribe((function(n){n&&e.conversation.replies.delete(t)}))}},{key:"editDraft",value:function(t){this.conversation.setDraft(t),this.conversation.openEditor(),this.conversation.replies.remove(t.id)}},{key:"showOriginalEmail",value:function(t){var e=this,n="show-original-reply-modal-container";this.tickets.getOriginalEmailForReply(t.id).subscribe((function(t){e.modal.open(i.a,{original:t.data},{panelClass:n})}),(function(){e.modal.open(i.a,null,{panelClass:n})}))}},{key:"removeAttachment",value:function(t,e){t.uploads=t.uploads.filter((function(t){return t.id!==e.id})),this.tickets.updateReply(t.id,{uploads:t.uploads}).subscribe((function(){}),(function(){}))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(s.Rb(c.a),s.Rb(l.a),s.Rb(u.a),s.Rb(d.a),s.Rb(h.a))},t.\u0275cmp=s.Lb({type:t,selectors:[["conversation-replies"]],inputs:{textEditor:"textEditor"},decls:2,vars:1,consts:[[1,"thread"],["ngFor","",3,"ngForOf"],["class","reply animated",3,"bounce","ngClass","my-reply",4,"ngIf"],[1,"reply","animated",3,"ngClass"],["class","user-avatar",3,"src","alt",4,"ngIf"],[1,"reply-body"],[1,"message-header"],[1,"customer"],[1,"customer-name"],["trans","",4,"ngIf"],[4,"ngIf"],["class","text-gray action-text","trans","",4,"ngIf"],["class","draft-actions",4,"ngIf"],[1,"meta"],[1,"date"],[1,"reply-actions-menu"],["replyActionsMenu","matMenu"],["mat-menu-item","","trans","",1,"update-reply-button",3,"click"],["mat-menu-item","","trans","",1,"delete-reply-button",3,"click"],["mat-menu-item","","trans","",1,"show-original-reply-button",3,"click"],[1,"message-body",3,"innerHTML"],[3,"attachments","detached",4,"ngIf"],[1,"user-avatar",3,"src","alt"],["trans",""],["trans","",1,"text-gray","action-text"],[1,"draft-actions"],["type","button","trans","",1,"no-style","edit-draft-button",3,"click"],["type","button","trans","",1,"no-style","delete-draft-button",3,"click"],["mat-icon-button","",3,"matMenuTriggerFor"],["svgIcon","more-vert"],[3,"attachments","detached"]],template:function(t,e){1&t&&(s.Xb(0,"div",0),s.Lc(1,X,1,1,"ng-template",1),s.Wb()),2&t&&(s.Db(1),s.rc("ngForOf",e.conversation.replies.get()))},directives:[b.s,b.t,b.q,f.e,f.b,p.a,g.b,f.d,m.a,v.a],styles:["conversation-replies{display:block;width:100%}conversation-replies .reply{display:-webkit-box;display:flex;padding:25px;border-top:1px solid var(--be-divider-default)}conversation-replies .reply.notes{background-color:#fffcea;color:#836f60;border-left:3px solid #c8bcb4}conversation-replies .reply.drafts{border-left:3px solid var(--be-accent-default)}conversation-replies .reply.drafts .customer .text-gray{color:var(--be-accent-default)}conversation-replies .reply:last-of-type{border-bottom:1px solid var(--be-divider-default)}conversation-replies .reply .user-avatar{-webkit-box-flex:0;flex:0 0 50px;display:block;width:50px;height:50px;margin-right:20px;-o-object-fit:cover;object-fit:cover;border-radius:4px}conversation-replies .reply .reply-body{-webkit-box-flex:1;flex:1 1 auto;max-width:calc(100% - 70px)}conversation-replies .reply reply-attachment-list{border-top:1px dotted var(--be-divider-default);margin:20px 0 0;padding-top:20px;display:-webkit-inline-box;display:inline-flex}conversation-replies .reply reply-attachment-list>.attachments-list-item:last-of-type{margin-right:0}conversation-replies .message-header{font-size:1.65rem;margin-bottom:15px;display:-webkit-box;display:flex}conversation-replies .message-header .customer{-webkit-box-flex:1;flex:1 1 auto}conversation-replies .message-header .customer .draft-actions{margin-left:10px;vertical-align:text-bottom}conversation-replies .message-header .customer .draft-actions button{border:1px solid var(--be-divider-default);padding:5px 8px;font-size:1.2rem;border-radius:3px;margin-right:6px}conversation-replies .message-header .customer .draft-actions button:hover{background-color:#f7f7f7}conversation-replies .message-header .meta{-webkit-box-flex:0;flex:0 0 100px;color:var(--be-secondary-text);font-size:1.2rem;font-weight:500;margin-right:5px;text-align:right;white-space:nowrap;line-height:23px}conversation-replies .message-header .customer-name{text-transform:capitalize;font-weight:500;color:var(--be-help-center-title-text)}conversation-replies .message-header .text-gray{color:var(--be-secondary-text)}conversation-replies .message-body{max-width:90%;word-wrap:break-word;overflow-x:hidden}conversation-replies .message-body a:hover{text-decoration:underline}conversation-replies .message-body img{max-width:100%}"],encapsulation:2}),t}()},"45UC":function(t,e,n){"use strict";n.d(e,"a",(function(){return p}));var i=n("wWhK"),r=n("LsVx"),a=n("1V5l"),o=n("KHpT"),s=n("ehXJ"),c=n("/RwR"),l=n("0IaG"),u=n("fXoL"),d=n("QGXG"),h=n("wfim"),b=n("tyNb");function f(t,e){if(1&t){var n=u.Yb();u.Xb(0,"button",4),u.fc("click",(function(t){return u.Cc(n),u.jc().mergeTickets()})),u.Nc(1,"Merge"),u.Wb()}}var p=function(){var t=function(){function t(e,n,i,r,a,o,s){_classCallCheck(this,t),this.dialogRef=e,this.data=n,this.tickets=i,this.modal=r,this.conversation=a,this.tags=o,this.router=s,this.hydrate()}return _createClass(t,[{key:"close",value:function(t){this.dialogRef.close(t)}},{key:"openTicket",value:function(){this.modal.closeAll(),this.router.navigate(["/mailbox/tickets/tag",this.conversation.getStatus().id,"ticket",this.conversation.get().id])}},{key:"mergeTickets",value:function(){var t=this;this.modal.show(c.a,{title:"Merge Tickets",body:"Are you sure you want merge this ticket with the original one behind the pop-ups?",bodyBold:"Merged tickets can not be unmerged.",ok:"Merge"}).afterClosed().subscribe((function(e){e&&t.tickets.merge(t.activeTicketId,t.conversation.get().id).subscribe((function(e){t.close(e),t.tags.refresh()}))}))}},{key:"hydrate",value:function(){var t=this;this.activeTicketId=this.data.activeTicketId,this.tickets.get(this.data.ticketId).subscribe((function(e){t.conversation.init(e.ticket)}))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(u.Rb(l.h),u.Rb(l.a),u.Rb(r.a),u.Rb(d.a),u.Rb(i.a),u.Rb(h.a),u.Rb(b.f))},t.\u0275cmp=u.Lb({type:t,selectors:[["conversation-modal"]],features:[u.Cb([r.a,i.a,a.a,o.a,s.a])],decls:5,vars:3,consts:[[3,"hideSidebar","hideBackButton"],["toolbar-content","",1,"no-style","icon-button","action",3,"click"],["svgIcon","open-in-browser-custom"],["class","merge-button","mat-raised-button","","color","accent","trans","",3,"click",4,"ngIf"],["mat-raised-button","","color","accent","trans","",1,"merge-button",3,"click"]],template:function(t,e){1&t&&(u.Xb(0,"mat-dialog-content"),u.Xb(1,"conversation",0),u.Xb(2,"button",1),u.fc("click",(function(t){return e.openTicket()})),u.Sb(3,"mat-icon",2),u.Wb(),u.Wb(),u.Lc(4,f,2,0,"button",3),u.Wb()),2&t&&(u.Db(1),u.rc("hideSidebar",!0)("hideBackButton",!0),u.Db(3),u.rc("ngIf",e.activeTicketId))},styles:[".conversation-modal-container{width:80%;height:calc(100% - 50px)}.conversation-modal-container .mat-dialog-container,.conversation-modal-container .mat-dialog-content,.conversation-modal-container conversation-modal{height:100%;max-height:100%;margin:0;padding:0}.conversation-modal-container .merge-button{position:absolute;top:10px;left:300px}"],encapsulation:2}),t}()},"5+WD":function(t,e,n){"use strict";var i=n("fXoL"),r=n("ofXK"),a=n("vxfF"),o=n("nLfN"),s=n("8LU1"),c=n("XNiG"),l=n("quSY"),u=n("HDdC"),d=n("D0XW"),h=n("Y7HM");function b(t){var e=t.subscriber,n=t.counter,i=t.period;e.next(n),this.schedule({subscriber:e,counter:n+1,period:i},i)}var f=n("eNwd"),p=n("VRyK"),g=n("JX91"),m=n("1G5W"),v=n("lJxs"),y=n("IzEk"),k=n("vkgz"),_=n("eIep"),w=n("cH1L");function x(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function C(t,e){var n=e?"":"none";x(t.style,{touchAction:e?"":"none",webkitUserDrag:e?"":"none",webkitTapHighlightColor:e?"":"transparent",userSelect:n,msUserSelect:n,webkitUserSelect:n,MozUserSelect:n})}function D(t){var e=t.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(t)*e}function S(t,e){return t.getPropertyValue(e).split(",").map((function(t){return t.trim()}))}n.d(e,"a",(function(){return lt})),n.d(e,"b",(function(){return rt})),n.d(e,"c",(function(){return gt})),n.d(e,"d",(function(){return mt})),n.d(e,"e",(function(){return j}));var O=Object(o.g)({passive:!0}),I=Object(o.g)({passive:!1}),R=function(){function t(e,n,i,r,a,o){var s=this;_classCallCheck(this,t),this._config=n,this._document=i,this._ngZone=r,this._viewportRuler=a,this._dragDropRegistry=o,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._moveEvents=new c.a,this._pointerMoveSubscription=l.a.EMPTY,this._pointerUpSubscription=l.a.EMPTY,this._scrollSubscription=l.a.EMPTY,this._resizeSubscription=l.a.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new c.a,this.started=new c.a,this.released=new c.a,this.ended=new c.a,this.entered=new c.a,this.exited=new c.a,this.dropped=new c.a,this.moved=this._moveEvents.asObservable(),this._pointerDown=function(t){if(s.beforeStarted.next(),s._handles.length){var e=s._handles.find((function(e){var n=t.target;return!!n&&(n===e||e.contains(n))}));!e||s._disabledHandles.has(e)||s.disabled||s._initializeDragSequence(e,t)}else s.disabled||s._initializeDragSequence(s._rootElement,t)},this._pointerMove=function(t){if(t.preventDefault(),s._hasStartedDragging){s._boundaryElement&&(s._previewRect&&(s._previewRect.width||s._previewRect.height)||(s._previewRect=(s._preview||s._rootElement).getBoundingClientRect()));var e=s._getConstrainedPointerPosition(t);if(s._hasMoved=!0,s._updatePointerDirectionDelta(e),s._dropContainer)s._updateActiveDropContainer(e);else{var n=s._activeTransform;n.x=e.x-s._pickupPositionOnPage.x+s._passiveTransform.x,n.y=e.y-s._pickupPositionOnPage.y+s._passiveTransform.y,s._applyRootElementTransform(n.x,n.y),"undefined"!=typeof SVGElement&&s._rootElement instanceof SVGElement&&s._rootElement.setAttribute("transform","translate(".concat(n.x," ").concat(n.y,")"))}s._moveEvents.observers.length&&s._ngZone.run((function(){s._moveEvents.next({source:s,pointerPosition:e,event:t,distance:s._getDragDistance(e),delta:s._pointerDirectionDelta})}))}else{var i=s._getPointerPositionOnPage(t);if(Math.abs(i.x-s._pickupPositionOnPage.x)+Math.abs(i.y-s._pickupPositionOnPage.y)>=s._config.dragStartThreshold){if(!(Date.now()>=s._dragStartTime+s._getDragStartDelay(t)))return void s._endDragSequence(t);s._dropContainer&&s._dropContainer.isDragging()||(s._hasStartedDragging=!0,s._ngZone.run((function(){return s._startDragSequence(t)})))}}},this._pointerUp=function(t){s._endDragSequence(t)},this.withRootElement(e),o.registerDragItem(this)}return _createClass(t,[{key:"getPlaceholderElement",value:function(){return this._placeholder}},{key:"getRootElement",value:function(){return this._rootElement}},{key:"withHandles",value:function(t){return this._handles=t.map((function(t){return Object(s.e)(t)})),this._handles.forEach((function(t){return C(t,!1)})),this._toggleNativeDragInteractions(),this}},{key:"withPreviewTemplate",value:function(t){return this._previewTemplate=t,this}},{key:"withPlaceholderTemplate",value:function(t){return this._placeholderTemplate=t,this}},{key:"withRootElement",value:function(t){var e=Object(s.e)(t);return e!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),e.addEventListener("mousedown",this._pointerDown,I),e.addEventListener("touchstart",this._pointerDown,O),this._initialTransform=void 0,this._rootElement=e),this}},{key:"withBoundaryElement",value:function(t){var e=this;return this._boundaryElement=t?Object(s.e)(t):null,this._resizeSubscription.unsubscribe(),t&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe((function(){return e._containInsideBoundaryOnResize()}))),this}},{key:"dispose",value:function(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&W(this._rootElement),W(this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._boundaryElement=this._rootElement=this._placeholderTemplate=this._previewTemplate=this._anchor=null}},{key:"isDragging",value:function(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}},{key:"reset",value:function(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}},{key:"disableHandle",value:function(t){this._handles.indexOf(t)>-1&&this._disabledHandles.add(t)}},{key:"enableHandle",value:function(t){this._disabledHandles.delete(t)}},{key:"withDirection",value:function(t){return this._direction=t,this}},{key:"_withDropContainer",value:function(t){this._dropContainer=t}},{key:"getFreeDragPosition",value:function(){var t=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:t.x,y:t.y}}},{key:"setFreeDragPosition",value:function(t){return this._activeTransform={x:0,y:0},this._passiveTransform.x=t.x,this._passiveTransform.y=t.y,this._dropContainer||this._applyRootElementTransform(t.x,t.y),this}},{key:"_sortFromLastPointerPosition",value:function(){var t=this._pointerPositionAtLastDirectionChange;t&&this._dropContainer&&this._updateActiveDropContainer(t)}},{key:"_removeSubscriptions",value:function(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}},{key:"_destroyPreview",value:function(){this._preview&&W(this._preview),this._previewRef&&this._previewRef.destroy(),this._preview=this._previewRef=null}},{key:"_destroyPlaceholder",value:function(){this._placeholder&&W(this._placeholder),this._placeholderRef&&this._placeholderRef.destroy(),this._placeholder=this._placeholderRef=null}},{key:"_endDragSequence",value:function(t){var e=this;this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging&&(this.released.next({source:this}),this._dropContainer?(this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then((function(){e._cleanupDragArtifacts(t),e._cleanupCachedDimensions(),e._dragDropRegistry.stopDragging(e)}))):(this._passiveTransform.x=this._activeTransform.x,this._passiveTransform.y=this._activeTransform.y,this._ngZone.run((function(){e.ended.next({source:e,distance:e._getDragDistance(e._getPointerPositionOnPage(t))})})),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this))))}},{key:"_startDragSequence",value:function(t){if(this.started.next({source:this}),L(t)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions(),this._dropContainer){var e=this._rootElement,n=e.parentNode,i=this._preview=this._createPreviewElement(),r=this._placeholder=this._createPlaceholderElement(),a=this._anchor=this._anchor||this._document.createComment("");n.insertBefore(a,e),e.style.display="none",this._document.body.appendChild(n.replaceChild(r,e)),(o=this._document,o.fullscreenElement||o.webkitFullscreenElement||o.mozFullScreenElement||o.msFullscreenElement||o.body).appendChild(i),this._dropContainer.start()}var o}},{key:"_initializeDragSequence",value:function(t,e){var n=this;e.stopPropagation();var i=this.isDragging(),r=L(e),a=!r&&0!==e.button,o=this._rootElement,s=!r&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now();if(e.target&&e.target.draggable&&"mousedown"===e.type&&e.preventDefault(),!(i||a||s)){this._handles.length&&(this._rootElementTapHighlight=o.style.webkitTapHighlightColor,o.style.webkitTapHighlightColor="transparent"),this._hasStartedDragging=this._hasMoved=!1,this._initialContainer=this._dropContainer,this._removeSubscriptions(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scroll.pipe(Object(g.a)(null)).subscribe((function(){n._scrollPosition=n._viewportRuler.getViewportScrollPosition()})),this._boundaryElement&&(this._boundaryRect=this._boundaryElement.getBoundingClientRect()),this._pickupPositionInElement=this._previewTemplate&&this._previewTemplate.template?{x:0,y:0}:this._getPointerPositionInElement(t,e);var c=this._pickupPositionOnPage=this._getPointerPositionOnPage(e);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:c.x,y:c.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,e)}}},{key:"_cleanupDragArtifacts",value:function(t){var e=this;this._rootElement.style.display="",this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._boundaryRect=this._previewRect=void 0,this._ngZone.run((function(){var n=e._dropContainer,i=n.getItemIndex(e),r=e._getPointerPositionOnPage(t),a=e._getDragDistance(e._getPointerPositionOnPage(t)),o=n._isOverContainer(r.x,r.y);e.ended.next({source:e,distance:a}),e.dropped.next({item:e,currentIndex:i,previousIndex:e._initialContainer.getItemIndex(e),container:n,previousContainer:e._initialContainer,isPointerOverContainer:o,distance:a}),n.drop(e,i,e._initialContainer,o,a),e._dropContainer=e._initialContainer}))}},{key:"_updateActiveDropContainer",value:function(t){var e=this,n=t.x,i=t.y,r=this._initialContainer._getSiblingContainerFromPosition(this,n,i);!r&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(n,i)&&(r=this._initialContainer),r&&r!==this._dropContainer&&this._ngZone.run((function(){e.exited.next({item:e,container:e._dropContainer}),e._dropContainer.exit(e),e._dropContainer=r,e._dropContainer.enter(e,n,i),e.entered.next({item:e,container:r,currentIndex:r.getItemIndex(e)})})),this._dropContainer._startScrollingIfNecessary(n,i),this._dropContainer._sortItem(this,n,i,this._pointerDirectionDelta),this._preview.style.transform=X(n-this._pickupPositionInElement.x,i-this._pickupPositionInElement.y)}},{key:"_createPreviewElement",value:function(){var t,e=this._previewTemplate,n=this.previewClass,i=e?e.template:null;if(i){var r=e.viewContainer.createEmbeddedView(i,e.context);t=E(r,this._document),this._previewRef=r,t.style.transform=X(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else{var a=this._rootElement,o=a.getBoundingClientRect();(t=T(a)).style.width="".concat(o.width,"px"),t.style.height="".concat(o.height,"px"),t.style.transform=X(o.left,o.top)}return x(t.style,{pointerEvents:"none",margin:"0",position:"fixed",top:"0",left:"0",zIndex:"1000"}),C(t,!1),t.classList.add("cdk-drag-preview"),t.setAttribute("dir",this._direction),n&&(Array.isArray(n)?n.forEach((function(e){return t.classList.add(e)})):t.classList.add(n)),t}},{key:"_animatePreviewToPlaceholder",value:function(){var t=this;if(!this._hasMoved)return Promise.resolve();var e=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._preview.style.transform=X(e.left,e.top);var n=function(t){var e=getComputedStyle(t),n=S(e,"transition-property"),i=n.find((function(t){return"transform"===t||"all"===t}));if(!i)return 0;var r=n.indexOf(i),a=S(e,"transition-duration"),o=S(e,"transition-delay");return D(a[r])+D(o[r])}(this._preview);return 0===n?Promise.resolve():this._ngZone.runOutsideAngular((function(){return new Promise((function(e){var i=function n(i){(!i||i.target===t._preview&&"transform"===i.propertyName)&&(t._preview.removeEventListener("transitionend",n),e(),clearTimeout(r))},r=setTimeout(i,1.5*n);t._preview.addEventListener("transitionend",i)}))}))}},{key:"_createPlaceholderElement",value:function(){var t,e=this._placeholderTemplate,n=e?e.template:null;return n?(this._placeholderRef=e.viewContainer.createEmbeddedView(n,e.context),t=E(this._placeholderRef,this._document)):t=T(this._rootElement),t.classList.add("cdk-drag-placeholder"),t}},{key:"_getPointerPositionInElement",value:function(t,e){var n=this._rootElement.getBoundingClientRect(),i=t===this._rootElement?null:t,r=i?i.getBoundingClientRect():n,a=L(e)?e.targetTouches[0]:e;return{x:r.left-n.left+(a.pageX-r.left-this._scrollPosition.left),y:r.top-n.top+(a.pageY-r.top-this._scrollPosition.top)}}},{key:"_getPointerPositionOnPage",value:function(t){var e=L(t)?t.touches[0]||t.changedTouches[0]:t;return{x:e.pageX-this._scrollPosition.left,y:e.pageY-this._scrollPosition.top}}},{key:"_getConstrainedPointerPosition",value:function(t){var e=this._getPointerPositionOnPage(t),n=this.constrainPosition?this.constrainPosition(e,this):e,i=this._dropContainer?this._dropContainer.lockAxis:null;if("x"===this.lockAxis||"x"===i?n.y=this._pickupPositionOnPage.y:"y"!==this.lockAxis&&"y"!==i||(n.x=this._pickupPositionOnPage.x),this._boundaryRect){var r=this._pickupPositionInElement,a=r.x,o=r.y,s=this._boundaryRect,c=this._previewRect,l=s.top+o,u=s.bottom-(c.height-o);n.x=P(n.x,s.left+a,s.right-(c.width-a)),n.y=P(n.y,l,u)}return n}},{key:"_updatePointerDirectionDelta",value:function(t){var e=t.x,n=t.y,i=this._pointerDirectionDelta,r=this._pointerPositionAtLastDirectionChange,a=Math.abs(e-r.x),o=Math.abs(n-r.y);return a>this._config.pointerDirectionChangeThreshold&&(i.x=e>r.x?1:-1,r.x=e),o>this._config.pointerDirectionChangeThreshold&&(i.y=n>r.y?1:-1,r.y=n),i}},{key:"_toggleNativeDragInteractions",value:function(){if(this._rootElement&&this._handles){var t=this._handles.length>0||!this.isDragging();t!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=t,C(this._rootElement,t))}}},{key:"_removeRootElementListeners",value:function(t){t.removeEventListener("mousedown",this._pointerDown,I),t.removeEventListener("touchstart",this._pointerDown,O)}},{key:"_applyRootElementTransform",value:function(t,e){var n=X(t,e);null==this._initialTransform&&(this._initialTransform=this._rootElement.style.transform||""),this._rootElement.style.transform=this._initialTransform?n+" "+this._initialTransform:n}},{key:"_getDragDistance",value:function(t){var e=this._pickupPositionOnPage;return e?{x:t.x-e.x,y:t.y-e.y}:{x:0,y:0}}},{key:"_cleanupCachedDimensions",value:function(){this._boundaryRect=this._previewRect=void 0}},{key:"_containInsideBoundaryOnResize",value:function(){var t=this._passiveTransform,e=t.x,n=t.y;if(!(0===e&&0===n||this.isDragging())&&this._boundaryElement){var i=this._boundaryElement.getBoundingClientRect(),r=this._rootElement.getBoundingClientRect();if(!(0===i.width&&0===i.height||0===r.width&&0===r.height)){var a=i.left-r.left,o=r.right-i.right,s=i.top-r.top,c=r.bottom-i.bottom;i.width>r.width?(a>0&&(e+=a),o>0&&(e-=o)):e=0,i.height>r.height?(s>0&&(n+=s),c>0&&(n-=c)):n=0,e===this._passiveTransform.x&&n===this._passiveTransform.y||this.setFreeDragPosition({y:n,x:e})}}}},{key:"_getDragStartDelay",value:function(t){var e=this.dragStartDelay;return"number"==typeof e?e:L(t)?e.touch:e?e.mouse:0}},{key:"disabled",get:function(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)},set:function(t){var e=Object(s.c)(t);e!==this._disabled&&(this._disabled=e,this._toggleNativeDragInteractions())}}]),t}();function X(t,e){return"translate3d(".concat(Math.round(t),"px, ").concat(Math.round(e),"px, 0)")}function T(t){var e=t.cloneNode(!0),n=e.querySelectorAll("[id]"),i=t.querySelectorAll("canvas");e.removeAttribute("id");for(var r=0;r<n.length;r++)n[r].removeAttribute("id");if(i.length)for(var a=e.querySelectorAll("canvas"),o=0;o<i.length;o++){var s=a[o].getContext("2d");s&&s.drawImage(i[o],0,0)}return e}function P(t,e,n){return Math.max(e,Math.min(n,t))}function W(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function L(t){return"t"===t.type[0]}function E(t,e){var n=t.rootNodes[0];if(n.nodeType!==e.ELEMENT_NODE){var i=e.createElement("div");return i.appendChild(n),i}return n}function j(t,e,n){var i=M(e,t.length-1),r=M(n,t.length-1);if(i!==r){for(var a=t[i],o=r<i?-1:1,s=i;s!==r;s+=o)t[s]=t[s+o];t[r]=a}}function M(t,e){return Math.max(0,Math.min(e,t))}var N=function(){function t(e,n,i,r,a){var o=this;_classCallCheck(this,t),this._dragDropRegistry=n,this._ngZone=r,this._viewportRuler=a,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.enterPredicate=function(){return!0},this.beforeStarted=new c.a,this.entered=new c.a,this.exited=new c.a,this.dropped=new c.a,this.sorted=new c.a,this._isDragging=!1,this._itemPositions=[],this._scrollPosition={top:0,left:0},this._viewportScrollPosition={top:0,left:0},this._previousSwap={drag:null,delta:0},this._siblings=[],this._orientation="vertical",this._activeSiblings=new Set,this._direction="ltr",this._viewportScrollSubscription=l.a.EMPTY,this._verticalScrollDirection=0,this._horizontalScrollDirection=0,this._stopScrollTimers=new c.a,this._cachedShadowRoot=null,this._handleScroll=function(){if(o.isDragging()){var t=Object(s.e)(o.element);o._updateAfterScroll(o._scrollPosition,t.scrollTop,t.scrollLeft)}},this._startScrollInterval=function(){o._stopScrolling(),function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d.a;return(!Object(h.a)(t)||t<0)&&(t=0),e&&"function"==typeof e.schedule||(e=d.a),new u.a((function(n){return n.add(e.schedule(b,t,{subscriber:n,counter:0,period:t})),n}))}(0,f.a).pipe(Object(m.a)(o._stopScrollTimers)).subscribe((function(){var t=o._scrollNode;1===o._verticalScrollDirection?V(t,-2):2===o._verticalScrollDirection&&V(t,2),1===o._horizontalScrollDirection?B(t,-2):2===o._horizontalScrollDirection&&B(t,2)}))},this.element=Object(s.e)(e),this._document=i,n.registerDropContainer(this)}return _createClass(t,[{key:"dispose",value:function(){this._stopScrolling(),this._stopScrollTimers.complete(),this._removeListeners(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._dragDropRegistry.removeDropContainer(this)}},{key:"isDragging",value:function(){return this._isDragging}},{key:"start",value:function(){var t=this,e=Object(s.e)(this.element);this.beforeStarted.next(),this._isDragging=!0,this._cacheItems(),this._siblings.forEach((function(e){return e._startReceiving(t)})),this._removeListeners(),this._ngZone.runOutsideAngular((function(){return e.addEventListener("scroll",t._handleScroll)})),this._listenToScrollEvents()}},{key:"enter",value:function(t,e,n){this.start();var i=this.sortingDisabled?this._draggables.indexOf(t):-1;-1===i&&(i=this._getItemIndexFromPointerPosition(t,e,n));var r=this._activeDraggables,a=r.indexOf(t),o=t.getPlaceholderElement(),c=r[i];if(c===t&&(c=r[i+1]),a>-1&&r.splice(a,1),c&&!this._dragDropRegistry.isDragging(c)){var l=c.getRootElement();l.parentElement.insertBefore(o,l),r.splice(i,0,t)}else Object(s.e)(this.element).appendChild(o),r.push(t);o.style.transform="",this._cacheItemPositions(),this.entered.next({item:t,container:this,currentIndex:this.getItemIndex(t)})}},{key:"exit",value:function(t){this._reset(),this.exited.next({item:t,container:this})}},{key:"drop",value:function(t,e,n,i,r){this._reset(),this.dropped.next({item:t,currentIndex:e,previousIndex:n.getItemIndex(t),container:this,previousContainer:n,isPointerOverContainer:i,distance:r})}},{key:"withItems",value:function(t){var e=this;return this._draggables=t,t.forEach((function(t){return t._withDropContainer(e)})),this.isDragging()&&this._cacheItems(),this}},{key:"withDirection",value:function(t){return this._direction=t,this}},{key:"connectedTo",value:function(t){return this._siblings=t.slice(),this}},{key:"withOrientation",value:function(t){return this._orientation=t,this}},{key:"getItemIndex",value:function(t){return this._isDragging?F("horizontal"===this._orientation&&"rtl"===this._direction?this._itemPositions.slice().reverse():this._itemPositions,(function(e){return e.drag===t})):this._draggables.indexOf(t)}},{key:"isReceiving",value:function(){return this._activeSiblings.size>0}},{key:"_sortItem",value:function(t,e,n,i){if(!this.sortingDisabled&&this._isPointerNearDropContainer(e,n)){var r=this._itemPositions,a=this._getItemIndexFromPointerPosition(t,e,n,i);if(!(-1===a&&r.length>0)){var o="horizontal"===this._orientation,s=F(r,(function(e){return e.drag===t})),c=r[a],l=r[s].clientRect,u=c.clientRect,d=s>a?1:-1;this._previousSwap.drag=c.drag,this._previousSwap.delta=o?i.x:i.y;var h=this._getItemOffsetPx(l,u,d),b=this._getSiblingOffsetPx(s,r,d),f=r.slice();j(r,s,a),this.sorted.next({previousIndex:s,currentIndex:a,container:this,item:t}),r.forEach((function(e,n){if(f[n]!==e){var i=e.drag===t,r=i?h:b,a=i?t.getPlaceholderElement():e.drag.getRootElement();e.offset+=r,o?(a.style.transform="translate3d(".concat(Math.round(e.offset),"px, 0, 0)"),A(e.clientRect,0,r)):(a.style.transform="translate3d(0, ".concat(Math.round(e.offset),"px, 0)"),A(e.clientRect,r,0))}}))}}}},{key:"_startScrollingIfNecessary",value:function(t,e){if(!this.autoScrollDisabled){var n,i=0,r=0;if(this._isPointerNearDropContainer(t,e)){var a,o,c=Object(s.e)(this.element);a=function(t,e,n,i){var r=U(e,i),a=Y(e,n),o=0,s=0;if(r){var c=t.scrollTop;1===r?c>0&&(o=1):t.scrollHeight-c>t.clientHeight&&(o=2)}if(a){var l=t.scrollLeft;1===a?l>0&&(s=1):t.scrollWidth-l>t.clientWidth&&(s=2)}return[o,s]}(c,this._clientRect,t,e),i=(o=_slicedToArray(a,2))[0],r=o[1],(i||r)&&(n=c)}if(!i&&!r){var l=this._viewportRuler.getViewportSize(),u=l.width,d=l.height,h={width:u,height:d,top:0,right:u,bottom:d,left:0};i=U(h,e),r=Y(h,t),n=window}!n||i===this._verticalScrollDirection&&r===this._horizontalScrollDirection&&n===this._scrollNode||(this._verticalScrollDirection=i,this._horizontalScrollDirection=r,this._scrollNode=n,(i||r)&&n?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}}},{key:"_stopScrolling",value:function(){this._stopScrollTimers.next()}},{key:"_cacheOwnPosition",value:function(){var t=Object(s.e)(this.element);this._clientRect=H(t),this._scrollPosition={top:t.scrollTop,left:t.scrollLeft}}},{key:"_cacheItemPositions",value:function(){var t=this,e="horizontal"===this._orientation;this._itemPositions=this._activeDraggables.map((function(e){var n=t._dragDropRegistry.isDragging(e)?e.getPlaceholderElement():e.getRootElement();return{drag:e,offset:0,clientRect:H(n)}})).sort((function(t,n){return e?t.clientRect.left-n.clientRect.left:t.clientRect.top-n.clientRect.top}))}},{key:"_reset",value:function(){var t=this;this._isDragging=!1,this._activeDraggables.forEach((function(t){return t.getRootElement().style.transform=""})),this._siblings.forEach((function(e){return e._stopReceiving(t)})),this._activeDraggables=[],this._itemPositions=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._stopScrolling(),this._removeListeners()}},{key:"_getSiblingOffsetPx",value:function(t,e,n){var i="horizontal"===this._orientation,r=e[t].clientRect,a=e[t+-1*n],o=r[i?"width":"height"]*n;if(a){var s=i?"left":"top",c=i?"right":"bottom";-1===n?o-=a.clientRect[s]-r[c]:o+=r[s]-a.clientRect[c]}return o}},{key:"_isPointerNearDropContainer",value:function(t,e){var n=this._clientRect,i=n.top,r=n.right,a=n.bottom,o=n.left,s=.05*n.width,c=.05*n.height;return e>i-c&&e<a+c&&t>o-s&&t<r+s}},{key:"_getItemOffsetPx",value:function(t,e,n){var i="horizontal"===this._orientation,r=i?e.left-t.left:e.top-t.top;return-1===n&&(r+=i?e.width-t.width:e.height-t.height),r}},{key:"_getItemIndexFromPointerPosition",value:function(t,e,n,i){var r=this,a="horizontal"===this._orientation;return F(this._itemPositions,(function(o,s,c){var l=o.drag,u=o.clientRect;if(l===t)return c.length<2;if(i){var d=a?i.x:i.y;if(l===r._previousSwap.drag&&d===r._previousSwap.delta)return!1}return a?e>=Math.floor(u.left)&&e<=Math.floor(u.right):n>=Math.floor(u.top)&&n<=Math.floor(u.bottom)}))}},{key:"_cacheItems",value:function(){this._activeDraggables=this._draggables.slice(),this._cacheItemPositions(),this._cacheOwnPosition()}},{key:"_updateAfterScroll",value:function(t,e,n,i){var r=this,a=t.top-e,o=t.left-n;i&&A(i,a,o),this._itemPositions.forEach((function(t){A(t.clientRect,a,o)})),this._itemPositions.forEach((function(t){var e=t.drag;r._dragDropRegistry.isDragging(e)&&e._sortFromLastPointerPosition()})),t.top=e,t.left=n}},{key:"_removeListeners",value:function(){Object(s.e)(this.element).removeEventListener("scroll",this._handleScroll),this._viewportScrollSubscription.unsubscribe()}},{key:"_isOverContainer",value:function(t,e){return z(this._clientRect,t,e)}},{key:"_getSiblingContainerFromPosition",value:function(t,e,n){return this._siblings.find((function(i){return i._canReceive(t,e,n)}))}},{key:"_canReceive",value:function(t,e,n){if(!z(this._clientRect,e,n)||!this.enterPredicate(t,this))return!1;var i=this._getShadowRoot().elementFromPoint(e,n);if(!i)return!1;var r=Object(s.e)(this.element);return i===r||r.contains(i)}},{key:"_startReceiving",value:function(t){var e=this._activeSiblings;e.has(t)||(e.add(t),this._cacheOwnPosition(),this._listenToScrollEvents())}},{key:"_stopReceiving",value:function(t){this._activeSiblings.delete(t),this._viewportScrollSubscription.unsubscribe()}},{key:"_listenToScrollEvents",value:function(){var t=this;this._viewportScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._viewportScrollSubscription=this._dragDropRegistry.scroll.subscribe((function(){if(t.isDragging()){var e=t._viewportRuler.getViewportScrollPosition();t._updateAfterScroll(t._viewportScrollPosition,e.top,e.left,t._clientRect)}else t.isReceiving()&&t._cacheOwnPosition()}))}},{key:"_getShadowRoot",value:function(){return this._cachedShadowRoot||(this._cachedShadowRoot=function(t){if(Object(o.d)()){var e=t.getRootNode?t.getRootNode():null;if(e instanceof ShadowRoot)return e}return null}(Object(s.e)(this.element))||this._document),this._cachedShadowRoot}}]),t}();function A(t,e,n){t.top+=e,t.bottom=t.top+t.height,t.left+=n,t.right=t.left+t.width}function F(t,e){for(var n=0;n<t.length;n++)if(e(t[n],n,t))return n;return-1}function z(t,e,n){var i=t.top,r=t.bottom,a=t.left,o=t.right;return n>=i&&n<=r&&e>=a&&e<=o}function H(t){var e=t.getBoundingClientRect();return{top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width,height:e.height}}function V(t,e){t===window?t.scrollBy(0,e):t.scrollTop+=e}function B(t,e){t===window?t.scrollBy(e,0):t.scrollLeft+=e}function U(t,e){var n=t.top,i=t.bottom,r=.05*t.height;return e>=n-r&&e<=n+r?1:e>=i-r&&e<=i+r?2:0}function Y(t,e){var n=t.left,i=t.right,r=.05*t.width;return e>=n-r&&e<=n+r?1:e>=i-r&&e<=i+r?2:0}var $,q,K,Q,G,Z,J=Object(o.g)({passive:!1,capture:!0}),tt=(($=function(){function t(e,n){var i=this;_classCallCheck(this,t),this._ngZone=e,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=new Set,this._globalListeners=new Map,this.pointerMove=new c.a,this.pointerUp=new c.a,this.scroll=new c.a,this._preventDefaultWhileDragging=function(t){i._activeDragInstances.size&&t.preventDefault()},this._document=n}return _createClass(t,[{key:"registerDropContainer",value:function(t){this._dropInstances.has(t)||this._dropInstances.add(t)}},{key:"registerDragItem",value:function(t){var e=this;this._dragInstances.add(t),1===this._dragInstances.size&&this._ngZone.runOutsideAngular((function(){e._document.addEventListener("touchmove",e._preventDefaultWhileDragging,J)}))}},{key:"removeDropContainer",value:function(t){this._dropInstances.delete(t)}},{key:"removeDragItem",value:function(t){this._dragInstances.delete(t),this.stopDragging(t),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._preventDefaultWhileDragging,J)}},{key:"startDragging",value:function(t,e){var n=this;if(!this._activeDragInstances.has(t)&&(this._activeDragInstances.add(t),1===this._activeDragInstances.size)){var i=e.type.startsWith("touch"),r=i?"touchend":"mouseup";this._globalListeners.set(i?"touchmove":"mousemove",{handler:function(t){return n.pointerMove.next(t)},options:J}).set(r,{handler:function(t){return n.pointerUp.next(t)},options:!0}).set("scroll",{handler:function(t){return n.scroll.next(t)},options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:J}),this._ngZone.runOutsideAngular((function(){n._globalListeners.forEach((function(t,e){n._document.addEventListener(e,t.handler,t.options)}))}))}}},{key:"stopDragging",value:function(t){this._activeDragInstances.delete(t),0===this._activeDragInstances.size&&this._clearGlobalListeners()}},{key:"isDragging",value:function(t){return this._activeDragInstances.has(t)}},{key:"ngOnDestroy",value:function(){var t=this;this._dragInstances.forEach((function(e){return t.removeDragItem(e)})),this._dropInstances.forEach((function(e){return t.removeDropContainer(e)})),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}},{key:"_clearGlobalListeners",value:function(){var t=this;this._globalListeners.forEach((function(e,n){t._document.removeEventListener(n,e.handler,e.options)})),this._globalListeners.clear()}}]),t}()).\u0275fac=function(t){return new(t||$)(i.bc(i.A),i.bc(r.e))},$.\u0275prov=Object(i.Nb)({factory:function(){return new $(Object(i.bc)(i.A),Object(i.bc)(r.e))},token:$,providedIn:"root"}),$),et={dragStartThreshold:5,pointerDirectionChangeThreshold:5},nt=((q=function(){function t(e,n,i,r){_classCallCheck(this,t),this._document=e,this._ngZone=n,this._viewportRuler=i,this._dragDropRegistry=r}return _createClass(t,[{key:"createDrag",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:et;return new R(t,e,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}},{key:"createDropList",value:function(t){return new N(t,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}}]),t}()).\u0275fac=function(t){return new(t||q)(i.bc(r.e),i.bc(i.A),i.bc(a.d),i.bc(tt))},q.\u0275prov=Object(i.Nb)({factory:function(){return new q(Object(i.bc)(r.e),Object(i.bc)(i.A),Object(i.bc)(a.d),Object(i.bc)(tt))},token:q,providedIn:"root"}),q),it=new i.r("CDK_DRAG_PARENT"),rt=((G=function(){function t(e,n){_classCallCheck(this,t),this.element=e,this._stateChanges=new c.a,this._disabled=!1,this._parentDrag=n,C(e.nativeElement,!1)}return _createClass(t,[{key:"ngOnDestroy",value:function(){this._stateChanges.complete()}},{key:"disabled",get:function(){return this._disabled},set:function(t){this._disabled=Object(s.c)(t),this._stateChanges.next(this)}}]),t}()).\u0275fac=function(t){return new(t||G)(i.Rb(i.l),i.Rb(it,8))},G.\u0275dir=i.Mb({type:G,selectors:[["","cdkDragHandle",""]],hostAttrs:[1,"cdk-drag-handle"],inputs:{disabled:["cdkDragHandleDisabled","disabled"]}}),G),at=((Q=function t(e){_classCallCheck(this,t),this.templateRef=e}).\u0275fac=function(t){return new(t||Q)(i.Rb(i.N))},Q.\u0275dir=i.Mb({type:Q,selectors:[["ng-template","cdkDragPlaceholder",""]],inputs:{data:"data"}}),Q),ot=((K=function t(e){_classCallCheck(this,t),this.templateRef=e}).\u0275fac=function(t){return new(t||K)(i.Rb(i.N))},K.\u0275dir=i.Mb({type:K,selectors:[["ng-template","cdkDragPreview",""]],inputs:{data:"data"}}),K),st=new i.r("CDK_DROP_LIST"),ct=new i.r("CDK_DRAG_CONFIG",{providedIn:"root",factory:function(){return{dragStartThreshold:5,pointerDirectionChangeThreshold:5}}}),lt=((Z=function(){function t(e,n,r,a,o,s,l,d,h){var b=this;_classCallCheck(this,t),this.element=e,this.dropContainer=n,this._document=r,this._ngZone=a,this._viewContainerRef=o,this._dir=l,this._changeDetectorRef=h,this._destroyed=new c.a,this.dragStartDelay=0,this._disabled=!1,this.started=new i.o,this.released=new i.o,this.ended=new i.o,this.entered=new i.o,this.exited=new i.o,this.dropped=new i.o,this.moved=new u.a((function(t){var e=b._dragRef.moved.pipe(Object(v.a)((function(t){return{source:b,pointerPosition:t.pointerPosition,event:t.event,delta:t.delta,distance:t.distance}}))).subscribe(t);return function(){e.unsubscribe()}})),this._dragRef=d.createDrag(e,s),this._dragRef.data=this,this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}return _createClass(t,[{key:"getPlaceholderElement",value:function(){return this._dragRef.getPlaceholderElement()}},{key:"getRootElement",value:function(){return this._dragRef.getRootElement()}},{key:"reset",value:function(){this._dragRef.reset()}},{key:"getFreeDragPosition",value:function(){return this._dragRef.getFreeDragPosition()}},{key:"ngAfterViewInit",value:function(){var t=this;this._ngZone.onStable.asObservable().pipe(Object(y.a)(1),Object(m.a)(this._destroyed)).subscribe((function(){t._updateRootElement(),t._handles.changes.pipe(Object(g.a)(t._handles),Object(k.a)((function(e){var n=e.filter((function(e){return e._parentDrag===t})).map((function(t){return t.element}));t._dragRef.withHandles(n)})),Object(_.a)((function(t){return Object(p.a).apply(void 0,_toConsumableArray(t.map((function(t){return t._stateChanges.pipe(Object(g.a)(t))}))))})),Object(m.a)(t._destroyed)).subscribe((function(e){var n=t._dragRef,i=e.element.nativeElement;e.disabled?n.disableHandle(i):n.enableHandle(i)})),t.freeDragPosition&&t._dragRef.setFreeDragPosition(t.freeDragPosition)}))}},{key:"ngOnChanges",value:function(t){var e=t.rootElementSelector,n=t.freeDragPosition;e&&!e.firstChange&&this._updateRootElement(),n&&!n.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}},{key:"ngOnDestroy",value:function(){this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()}},{key:"_updateRootElement",value:function(){var t=this.element.nativeElement,e=this.rootElementSelector?ut(t,this.rootElementSelector):t;if(e&&e.nodeType!==this._document.ELEMENT_NODE)throw Error("cdkDrag must be attached to an element node. "+'Currently attached to "'.concat(e.nodeName,'".'));this._dragRef.withRootElement(e||t)}},{key:"_getBoundaryElement",value:function(){var t=this.boundaryElement;if(!t)return null;if("string"==typeof t)return ut(this.element.nativeElement,t);var e=Object(s.e)(t);if(Object(i.X)()&&!e.contains(this.element.nativeElement))throw Error("Draggable element is not inside of the node passed into cdkDragBoundary.");return e}},{key:"_syncInputs",value:function(t){var e=this;t.beforeStarted.subscribe((function(){if(!t.isDragging()){var n=e._dir,i=e.dragStartDelay,r=e._placeholderTemplate?{template:e._placeholderTemplate.templateRef,context:e._placeholderTemplate.data,viewContainer:e._viewContainerRef}:null,a=e._previewTemplate?{template:e._previewTemplate.templateRef,context:e._previewTemplate.data,viewContainer:e._viewContainerRef}:null;t.disabled=e.disabled,t.lockAxis=e.lockAxis,t.dragStartDelay="object"==typeof i&&i?i:Object(s.f)(i),t.constrainPosition=e.constrainPosition,t.previewClass=e.previewClass,t.withBoundaryElement(e._getBoundaryElement()).withPlaceholderTemplate(r).withPreviewTemplate(a),n&&t.withDirection(n.value)}}))}},{key:"_handleEvents",value:function(t){var e=this;t.started.subscribe((function(){e.started.emit({source:e}),e._changeDetectorRef.markForCheck()})),t.released.subscribe((function(){e.released.emit({source:e})})),t.ended.subscribe((function(t){e.ended.emit({source:e,distance:t.distance}),e._changeDetectorRef.markForCheck()})),t.entered.subscribe((function(t){e.entered.emit({container:t.container.data,item:e,currentIndex:t.currentIndex})})),t.exited.subscribe((function(t){e.exited.emit({container:t.container.data,item:e})})),t.dropped.subscribe((function(t){e.dropped.emit({previousIndex:t.previousIndex,currentIndex:t.currentIndex,previousContainer:t.previousContainer.data,container:t.container.data,isPointerOverContainer:t.isPointerOverContainer,item:e,distance:t.distance})}))}},{key:"disabled",get:function(){return this._disabled||this.dropContainer&&this.dropContainer.disabled},set:function(t){this._disabled=Object(s.c)(t),this._dragRef.disabled=this._disabled}}]),t}()).\u0275fac=function(t){return new(t||Z)(i.Rb(i.l),i.Rb(st,12),i.Rb(r.e),i.Rb(i.A),i.Rb(i.Q),i.Rb(ct),i.Rb(w.c,8),i.Rb(nt),i.Rb(i.h))},Z.\u0275dir=i.Mb({type:Z,selectors:[["","cdkDrag",""]],contentQueries:function(t,e,n){var r;1&t&&(i.Jb(n,ot,!0),i.Jb(n,at,!0),i.Jb(n,rt,!0)),2&t&&(i.yc(r=i.gc())&&(e._previewTemplate=r.first),i.yc(r=i.gc())&&(e._placeholderTemplate=r.first),i.yc(r=i.gc())&&(e._handles=r))},hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(t,e){2&t&&i.Hb("cdk-drag-disabled",e.disabled)("cdk-drag-dragging",e._dragRef.isDragging())},inputs:{dragStartDelay:["cdkDragStartDelay","dragStartDelay"],disabled:["cdkDragDisabled","disabled"],data:["cdkDragData","data"],lockAxis:["cdkDragLockAxis","lockAxis"],rootElementSelector:["cdkDragRootElement","rootElementSelector"],boundaryElement:["cdkDragBoundary","boundaryElement"],freeDragPosition:["cdkDragFreeDragPosition","freeDragPosition"],constrainPosition:["cdkDragConstrainPosition","constrainPosition"],previewClass:["cdkDragPreviewClass","previewClass"]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],features:[i.Cb([{provide:it,useExisting:Z}]),i.Bb()]}),Z);function ut(t,e){for(var n=t.parentElement;n;){if(n.matches?n.matches(e):n.msMatchesSelector(e))return n;n=n.parentElement}return null}var dt,ht,bt,ft=((bt=function(){function t(){_classCallCheck(this,t),this._items=new Set,this._disabled=!1}return _createClass(t,[{key:"ngOnDestroy",value:function(){this._items.clear()}},{key:"disabled",get:function(){return this._disabled},set:function(t){this._disabled=Object(s.c)(t)}}]),t}()).\u0275fac=function(t){return new(t||bt)},bt.\u0275dir=i.Mb({type:bt,selectors:[["","cdkDropListGroup",""]],inputs:{disabled:["cdkDropListGroupDisabled","disabled"]},exportAs:["cdkDropListGroup"]}),bt),pt=0,gt=((ht=function(){function t(e,n,r,a,o){var s=this;_classCallCheck(this,t),this.element=e,this._changeDetectorRef=r,this._dir=a,this._group=o,this._destroyed=new c.a,this.connectedTo=[],this.orientation="vertical",this.id="cdk-drop-list-".concat(pt++),this._disabled=!1,this.sortingDisabled=!1,this.enterPredicate=function(){return!0},this.autoScrollDisabled=!1,this.dropped=new i.o,this.entered=new i.o,this.exited=new i.o,this.sorted=new i.o,this._dropListRef=n.createDropList(e),this._dropListRef.data=this,this._dropListRef.enterPredicate=function(t,e){return s.enterPredicate(t.data,e.data)},this._setupInputSyncSubscription(this._dropListRef),this._handleEvents(this._dropListRef),t._dropLists.push(this),o&&o._items.add(this)}return _createClass(t,[{key:"ngAfterContentInit",value:function(){var t=this;this._draggables.changes.pipe(Object(g.a)(this._draggables),Object(m.a)(this._destroyed)).subscribe((function(e){t._dropListRef.withItems(e.reduce((function(e,n){return n.dropContainer===t&&e.push(n._dragRef),e}),[]))}))}},{key:"ngOnDestroy",value:function(){var e=t._dropLists.indexOf(this);e>-1&&t._dropLists.splice(e,1),this._group&&this._group._items.delete(this),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}},{key:"start",value:function(){this._dropListRef.start()}},{key:"drop",value:function(t,e,n,i){this._dropListRef.drop(t._dragRef,e,n._dropListRef,i,{x:0,y:0})}},{key:"enter",value:function(t,e,n){this._dropListRef.enter(t._dragRef,e,n)}},{key:"exit",value:function(t){this._dropListRef.exit(t._dragRef)}},{key:"getItemIndex",value:function(t){return this._dropListRef.getItemIndex(t._dragRef)}},{key:"_setupInputSyncSubscription",value:function(e){var n=this;this._dir&&this._dir.change.pipe(Object(g.a)(this._dir.value),Object(m.a)(this._destroyed)).subscribe((function(t){return e.withDirection(t)})),e.beforeStarted.subscribe((function(){var i=Object(s.b)(n.connectedTo).map((function(e){return"string"==typeof e?t._dropLists.find((function(t){return t.id===e})):e}));n._group&&n._group._items.forEach((function(t){-1===i.indexOf(t)&&i.push(t)})),e.disabled=n.disabled,e.lockAxis=n.lockAxis,e.sortingDisabled=Object(s.c)(n.sortingDisabled),e.autoScrollDisabled=Object(s.c)(n.autoScrollDisabled),e.connectedTo(i.filter((function(t){return t&&t!==n})).map((function(t){return t._dropListRef}))).withOrientation(n.orientation)}))}},{key:"_handleEvents",value:function(t){var e=this;t.beforeStarted.subscribe((function(){e._changeDetectorRef.markForCheck()})),t.entered.subscribe((function(t){e.entered.emit({container:e,item:t.item.data,currentIndex:t.currentIndex})})),t.exited.subscribe((function(t){e.exited.emit({container:e,item:t.item.data}),e._changeDetectorRef.markForCheck()})),t.sorted.subscribe((function(t){e.sorted.emit({previousIndex:t.previousIndex,currentIndex:t.currentIndex,container:e,item:t.item.data})})),t.dropped.subscribe((function(t){e.dropped.emit({previousIndex:t.previousIndex,currentIndex:t.currentIndex,previousContainer:t.previousContainer.data,container:t.container.data,item:t.item.data,isPointerOverContainer:t.isPointerOverContainer,distance:t.distance}),e._changeDetectorRef.markForCheck()}))}},{key:"disabled",get:function(){return this._disabled||!!this._group&&this._group.disabled},set:function(t){this._dropListRef.disabled=this._disabled=Object(s.c)(t)}}]),t}()).\u0275fac=function(t){return new(t||ht)(i.Rb(i.l),i.Rb(nt),i.Rb(i.h),i.Rb(w.c,8),i.Rb(ft,12))},ht.\u0275dir=i.Mb({type:ht,selectors:[["","cdkDropList",""],["cdk-drop-list"]],contentQueries:function(t,e,n){var r;1&t&&i.Jb(n,lt,!0),2&t&&i.yc(r=i.gc())&&(e._draggables=r)},hostAttrs:[1,"cdk-drop-list"],hostVars:7,hostBindings:function(t,e){2&t&&(i.ac("id",e.id),i.Hb("cdk-drop-list-disabled",e.disabled)("cdk-drop-list-dragging",e._dropListRef.isDragging())("cdk-drop-list-receiving",e._dropListRef.isReceiving()))},inputs:{connectedTo:["cdkDropListConnectedTo","connectedTo"],orientation:["cdkDropListOrientation","orientation"],id:"id",sortingDisabled:["cdkDropListSortingDisabled","sortingDisabled"],enterPredicate:["cdkDropListEnterPredicate","enterPredicate"],autoScrollDisabled:["cdkDropListAutoScrollDisabled","autoScrollDisabled"],disabled:["cdkDropListDisabled","disabled"],data:["cdkDropListData","data"],lockAxis:["cdkDropListLockAxis","lockAxis"]},outputs:{dropped:"cdkDropListDropped",entered:"cdkDropListEntered",exited:"cdkDropListExited",sorted:"cdkDropListSorted"},exportAs:["cdkDropList"],features:[i.Cb([{provide:ft,useValue:void 0},{provide:st,useExisting:ht}])]}),ht._dropLists=[],ht),mt=((dt=function t(){_classCallCheck(this,t)}).\u0275mod=i.Pb({type:dt}),dt.\u0275inj=i.Ob({factory:function(t){return new(t||dt)},providers:[nt]}),dt)},"6SKC":function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var i=n("4Ait"),r=n("fXoL"),a=function(){var t=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"transform",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;return isNaN(parseFloat(String(t)))||!isFinite(t)?"-":Object(i.a)(t,e)}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=r.Qb({name:"formattedFileSize",type:t,pure:!0}),t}()},"6qA3":function(t,e,n){"use strict";var i=n("OAkW"),r=n("Z5tI"),a=n("poJ0"),o=n("ozli"),s=n("yRPT"),c=n("90cg"),l=n("GMZp"),u=n("VKeD"),d=n("zfKp");e.subscribeTo=function(t){if(t&&"function"==typeof t[d.observable])return o.subscribeToObservable(t);if(s.isArrayLike(t))return i.subscribeToArray(t);if(c.isPromise(t))return r.subscribeToPromise(t);if(t&&"function"==typeof t[u.iterator])return a.subscribeToIterable(t);var e=l.isObject(t)?"an invalid object":"'"+t+"'";throw new TypeError("You provided "+e+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")}},"703J":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var i=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(var n in _classCallCheck(this,t),this.type="custom",e)this[n]=e[n]}},"7LS1":function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));var i=n("2Vo4"),r=n("XNiG"),a=n("vUXK"),o=n("+rOU"),s=n("itxp"),c=n("ZiO8"),l=n("pLZG"),u=n("/w9p"),d=n("fXoL"),h=function(){var t=function(){function t(e,n){_classCallCheck(this,t),this.availablePreviews=e,this.injector=n,this.files=[],this.portal=new i.a(null),this.meta=new i.a({}),this.previewUriTransformer=null,this.download=new r.a}return _createClass(t,[{key:"pagination",value:function(){return this.meta.pipe(Object(l.a)((function(t){return t&&!!t.entry})))}},{key:"getCurrent",value:function(){return this.meta.value.entry}},{key:"getAllEntries",value:function(){return this.files}},{key:"getPortal",value:function(){return this.portal.asObservable()}},{key:"showNext",value:function(){this.meta.value.haveNext&&(this.updateMeta("next"),this.updatePortal())}},{key:"showPrevious",value:function(){this.meta.value.havePrevious&&(this.updateMeta("previous"),this.updatePortal())}},{key:"updateMeta",value:function(t){var e=0;if("string"==typeof t){var n=this.meta.value.pointer;e="next"===t?n+1:n-1}else"number"==typeof t&&(e=t);this.meta.next({pointer:e,entry:this.files[e],total:this.files.length,haveNext:e+1<this.files.length,havePrevious:e-1>-1})}},{key:"updatePortal",value:function(){var t=this.getCurrent();this.portal.next(new o.d(t&&this.availablePreviews[t.type]||c.a,null,this.createInjector()))}},{key:"set",value:function(t,e){t&&0!==t.length&&(this.files=t.filter((function(t){return"folder"!==t.type})),this.updateMeta(e),this.updatePortal())}},{key:"createInjector",value:function(){var t=new WeakMap;return t.set(s.a,this.getCurrent()),this.previewUriTransformer&&t.set(u.a,this.previewUriTransformer),new o.g(this.injector,t)}},{key:"destroy",value:function(){this.meta.next({}),this.files=null,this.portal.next(null)}},{key:"setPreviewUriTransformer",value:function(t){this.previewUriTransformer=t}}]),t}();return t.\u0275fac=function(e){return new(e||t)(d.bc(a.a),d.bc(d.s))},t.\u0275prov=d.Nb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},"7T94":function(t,e,n){"use strict";n.d(e,"a",(function(){return R}));var i=n("cuTO"),r=n("0IaG"),a=n("h586"),o=n("LRne"),s=n("3E0/"),c=n("IzEk"),l=n("fXoL"),u=n("X3Ra"),d=n("ofXK"),h=n("bTqV"),b=n("NFeN"),f=n("3Pt+"),p=n("Rd8u"),g=n("KKQg"),m=n("rG4v"),v=n("83jf"),y=["textEditor"];function k(t,e){1&t&&(l.Xb(0,"span",20),l.Nc(1,"Update Canned Reply"),l.Wb())}function _(t,e){1&t&&(l.Xb(0,"span",20),l.Nc(1,"New Canned Reply"),l.Wb())}function w(t,e){if(1&t&&(l.Xb(0,"div",21),l.Nc(1),l.Wb()),2&t){var n=l.jc();l.Db(1),l.Oc(n.errors.name)}}function x(t,e){if(1&t&&(l.Xb(0,"div",21),l.Nc(1),l.Wb()),2&t){var n=l.jc();l.Db(1),l.Oc(n.errors.shared)}}function C(t,e){if(1&t&&(l.Xb(0,"div",21),l.Nc(1),l.Wb()),2&t){var n=l.jc();l.Db(1),l.Oc(n.errors.body)}}function D(t,e){if(1&t&&(l.Xb(0,"div",21),l.Nc(1),l.Wb()),2&t){var n=l.jc();l.Db(1),l.Oc(n.errors.uploads)}}function S(t,e){if(1&t){var n=l.Yb();l.Xb(0,"reply-attachment-list",22),l.fc("detached",(function(t){return l.Cc(n),l.jc().removeAttachment(t)})),l.Wb()}if(2&t){var i=l.jc();l.rc("attachments",i.attachments)}}function O(t,e){1&t&&(l.Xb(0,"span",20),l.Nc(1,"Update"),l.Wb())}function I(t,e){1&t&&(l.Xb(0,"span",20),l.Nc(1,"Create"),l.Wb())}var R=function(){var t=function(){function t(e,n,r,a){var l=this;_classCallCheck(this,t),this.dialogRef=e,this.data=n,this.cannedReplies=r,this.uploadQueue=a,this.attachments=[],this.model=new i.a,this.errors={},Object(o.a)(null).pipe(Object(s.a)(0),Object(c.a)(1)).subscribe((function(){return l.hydrate()}))}return _createClass(t,[{key:"close",value:function(t){this.dialogRef.close(t),this.textEditor.destroyEditor()}},{key:"confirm",value:function(){var t=this,e=this.getPayload();(this.model.id?this.cannedReplies.update(this.model.id,e):this.cannedReplies.create(e)).subscribe((function(e){t.close(e.data)}),(function(e){return t.errors=e.messages}))}},{key:"getPayload",value:function(){return{name:this.model.name,body:this.textEditor.getContents(),shared:this.model.shared,uploads:this.attachments.map((function(t){return t.id}))}}},{key:"setContents",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.body&&this.textEditor.setContents(t.body),t.uploads&&(this.attachments=t.uploads.slice())}},{key:"hydrate",value:function(){this.data.contents&&this.setContents(this.data.contents),this.data.cannedReply&&(this.model=new i.a(this.data.cannedReply),this.setContents({body:this.model.body,uploads:this.model.uploads}))}},{key:"uploadFiles",value:function(t){var e=this;this.uploadQueue.start(t).subscribe((function(t){e.attachments=[].concat(_toConsumableArray(e.attachments),[t.fileEntry])}))}},{key:"removeAttachment",value:function(t){for(var e=0;e<this.attachments.length;e++)this.attachments[e].id===t.id&&this.attachments.splice(e,1)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(l.Rb(r.h),l.Rb(r.a),l.Rb(u.a),l.Rb(a.a))},t.\u0275cmp=l.Lb({type:t,selectors:[["crupdate-canned-reply-modal"]],viewQuery:function(t,e){var n;1&t&&l.Jc(y,!0),2&t&&l.yc(n=l.gc())&&(e.textEditor=n.first)},features:[l.Cb([a.a])],decls:37,vars:14,consts:[[1,"modal-header"],["mat-dialog-title",""],["trans","",4,"ngIf"],["type","button","mat-icon-button","","tabindex","-1",1,"close-button",3,"click"],["svgIcon","close"],["ngNativeValidate","",3,"ngSubmit"],[1,"many-inputs"],[1,"input-container"],["for","canned-reply-name","trans",""],["type","text","id","canned-reply-name","name","canned-reply-name",3,"ngModel","ngModelChange"],["class","error",4,"ngIf"],["for","shared","trans",""],["id","shared","name","shared",3,"ngModel","ngModelChange"],["trans","",3,"ngValue"],["for","canned-body","trans",""],["id","canned-body","inlineUploadPrefix","ticket_images",3,"minHeight","onFileUpload"],["textEditor",""],[3,"attachments","detached",4,"ngIf"],["mat-button","","type","button","trans","",1,"cancel-button",3,"click"],["type","submit","mat-raised-button","","color","accent",1,"submit-button"],["trans",""],[1,"error"],[3,"attachments","detached"]],template:function(t,e){1&t&&(l.Xb(0,"div",0),l.Xb(1,"h2",1),l.Lc(2,k,2,0,"span",2),l.Lc(3,_,2,0,"span",2),l.Wb(),l.Xb(4,"button",3),l.fc("click",(function(t){return e.close()})),l.Sb(5,"mat-icon",4),l.Wb(),l.Wb(),l.Xb(6,"form",5),l.fc("ngSubmit",(function(t){return e.confirm()})),l.Xb(7,"mat-dialog-content",6),l.Xb(8,"div",7),l.Xb(9,"label",8),l.Nc(10,"Name"),l.Wb(),l.Xb(11,"input",9),l.fc("ngModelChange",(function(t){return e.model.name=t})),l.Wb(),l.Lc(12,w,2,1,"div",10),l.Wb(),l.Xb(13,"div",7),l.Xb(14,"label",11),l.Nc(15,"Shared"),l.Wb(),l.Xb(16,"select",12),l.fc("ngModelChange",(function(t){return e.model.shared=t})),l.Xb(17,"option",13),l.Nc(18,"Yes"),l.Wb(),l.Xb(19,"option",13),l.Nc(20,"No"),l.Wb(),l.Wb(),l.Lc(21,x,2,1,"div",10),l.Wb(),l.Xb(22,"div",7),l.Xb(23,"label",14),l.Nc(24,"Canned Reply Body"),l.Wb(),l.Xb(25,"text-editor",15,16),l.fc("onFileUpload",(function(t){return e.uploadFiles(t)})),l.Wb(),l.Sb(27,"upload-progress-bar"),l.Lc(28,C,2,1,"div",10),l.Lc(29,D,2,1,"div",10),l.Lc(30,S,1,1,"reply-attachment-list",17),l.Wb(),l.Wb(),l.Xb(31,"mat-dialog-actions"),l.Xb(32,"button",18),l.fc("click",(function(t){return e.close()})),l.Nc(33,"Cancel"),l.Wb(),l.Xb(34,"button",19),l.Lc(35,O,2,0,"span",2),l.Lc(36,I,2,0,"span",2),l.Wb(),l.Wb(),l.Wb()),2&t&&(l.Db(2),l.rc("ngIf",e.model.id),l.Db(1),l.rc("ngIf",!e.model.id),l.Db(8),l.rc("ngModel",e.model.name),l.Db(1),l.rc("ngIf",e.errors.name),l.Db(4),l.rc("ngModel",e.model.shared),l.Db(1),l.rc("ngValue",!0),l.Db(2),l.rc("ngValue",!1),l.Db(2),l.rc("ngIf",e.errors.shared),l.Db(4),l.rc("minHeight",300),l.Db(3),l.rc("ngIf",e.errors.body),l.Db(1),l.rc("ngIf",e.errors.uploads),l.Db(1),l.rc("ngIf",e.attachments.length),l.Db(5),l.rc("ngIf",e.model.id),l.Db(1),l.rc("ngIf",!e.model.id))},directives:[r.i,d.t,h.b,b.a,f.u,f.v,r.f,p.a,f.c,f.t,f.w,f.F,f.y,f.I,g.a,m.a,r.c,v.a],styles:[".crupdate-canned-reply-modal-container{width:580px}.crupdate-canned-reply-modal-container reply-attachment-list{margin-top:25px}"],encapsulation:2}),t}()},"83jf":function(t,e,n){"use strict";var i=n("fXoL"),r=n("nPOm"),a=n("tTc1"),o=n("ZfYz"),s=n("7LS1"),c=n("kmQS"),l=n("ofXK"),u=n("bTqV"),d=n("NFeN");function h(t,e){if(1&t){var n=i.Yb();i.Xb(0,"button",3),i.fc("click",(function(t){return i.Cc(n),i.jc().closed.emit(!0)})),i.Sb(1,"mat-icon",4),i.Wb()}}function b(t,e){if(1&t){var n=i.Yb();i.Vb(0),i.Xb(1,"div",9),i.Xb(2,"button",10),i.fc("click",(function(t){return i.Cc(n),i.jc(2).previewFiles.showPrevious()})),i.Sb(3,"mat-icon",11),i.Wb(),i.Xb(4,"span",12),i.Nc(5),i.Wb(),i.Xb(6,"button",13),i.fc("click",(function(t){return i.Cc(n),i.jc(2).previewFiles.showNext()})),i.Sb(7,"mat-icon",14),i.Wb(),i.Wb(),i.Ub()}if(2&t){var r=e.ngIf;i.Db(2),i.rc("disabled",!r.havePrevious),i.Db(3),i.Qc("",r.pointer+1," of ",r.total,""),i.Db(1),i.rc("disabled",!r.haveNext)}}function f(t,e){if(1&t){var n=i.Yb();i.Vb(0),i.Xb(1,"div",5),i.Nc(2),i.Wb(),i.Lc(3,b,8,4,"ng-container",1),i.kc(4,"async"),i.Xb(5,"div",6),i.Xb(6,"button",7),i.fc("click",(function(t){return i.Cc(n),i.jc().downloadFiles()})),i.Sb(7,"mat-icon",8),i.Wb(),i.pc(8),i.Wb(),i.Ub()}if(2&t){var r=e.ngIf,a=i.jc();i.Db(2),i.Pc(" ",r.entry.name," "),i.Db(1),i.rc("ngIf",i.lc(4,3,a.previewFiles.pagination())),i.Db(3),i.rc("disabled",a.disableDownload)}}function p(t,e){if(1&t&&i.Sb(0,"img",17),2&t){var n=i.jc(2);i.rc("src",n.settings.getBaseUrl(!0)+n.settings.get("branding.logo_light"),i.Fc)}}function g(t,e){if(1&t&&(i.Xb(0,"a",15),i.Lc(1,p,1,1,"img",16),i.Wb()),2&t){var n=i.jc();i.Db(1),i.rc("ngIf",n.showLogo&&n.settings.get("branding.logo_light"))}}var m,v,y,k=["*"],_=((m=function(){function t(e,n){_classCallCheck(this,t),this.previewFiles=e,this.settings=n,this.showLogo=!1,this.disableDownload=!1,this.showCloseButton=!1,this.closed=new i.o}return _createClass(t,[{key:"downloadFiles",value:function(){this.previewFiles.download.next()}}]),t}()).\u0275fac=function(t){return new(t||m)(i.Rb(s.a),i.Rb(c.a))},m.\u0275cmp=i.Lb({type:m,selectors:[["file-preview-toolbar"]],inputs:{showLogo:"showLogo",disableDownload:"disableDownload",showCloseButton:"showCloseButton"},outputs:{closed:"closed"},ngContentSelectors:k,decls:4,vars:5,consts:[["mat-icon-button","","class","back-button",3,"click",4,"ngIf"],[4,"ngIf"],["routerLink","/drive","class","logo",4,"ngIf"],["mat-icon-button","",1,"back-button",3,"click"],["svgIcon","arrow-back"],[1,"entry-name"],[1,"actions"],["mat-icon-button","",3,"disabled","click"],["svgIcon","file-download"],[1,"navigation"],["mat-icon-button","",1,"previous",3,"disabled","click"],["svgIcon","keyboard-arrow-left"],[1,"meta"],["mat-icon-button","",1,"next",3,"disabled","click"],["svgIcon","keyboard-arrow-right"],["routerLink","/drive",1,"logo"],[3,"src",4,"ngIf"],[3,"src"]],template:function(t,e){1&t&&(i.qc(),i.Lc(0,h,2,0,"button",0),i.Lc(1,f,9,5,"ng-container",1),i.kc(2,"async"),i.Lc(3,g,2,1,"a",2)),2&t&&(i.rc("ngIf",e.showCloseButton),i.Db(1),i.rc("ngIf",i.lc(2,3,e.previewFiles.pagination())),i.Db(2),i.rc("ngIf",e.showLogo&&e.settings.has("branding.logo_light")))},directives:[l.t,u.b,d.a],pipes:[l.b],styles:["file-preview-toolbar{position:fixed;top:0;left:0;display:-webkit-box;display:flex;width:100%;-webkit-box-align:center;align-items:center;color:var(--be-accent-contrast);height:60px;padding:0 15px;background:-webkit-gradient(linear,left top,left bottom,from(rgba(0,0,0,.65)),to(transparent));background:linear-gradient(180deg,rgba(0,0,0,.65) 0,transparent);z-index:10}@media only screen and (max-width:550px){file-preview-toolbar{padding:0 5px}}file-preview-toolbar .entry-name{display:block;margin-right:25px;margin-left:8px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}@media only screen and (min-width:550px){file-preview-toolbar .entry-name{max-width:calc(50% - 77.5px)}}file-preview-toolbar .entry-name file-icon{display:inline-block;vertical-align:bottom;margin-right:5px}@media only screen and (min-width:550px){file-preview-toolbar .navigation{position:absolute;left:50%;top:50%;margin-right:-50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}}@media only screen and (max-width:550px){file-preview-toolbar .navigation{position:fixed;bottom:10px;left:5px}}file-preview-toolbar .actions{margin-left:auto;white-space:nowrap}file-preview-toolbar .actions a,file-preview-toolbar .actions button{margin:0 5px}file-preview-toolbar .close-button{margin-right:25px}file-preview-toolbar .logo{position:fixed;bottom:15px;right:15px;opacity:.2;width:150px;height:auto}file-preview-toolbar .logo img{width:100%;height:auto}file-preview-toolbar .mat-icon-button[disabled][disabled]{color:#737373}"],encapsulation:2,changeDetection:0}),m),w=n("ovFL"),x=["previewContainer"],C=["moreOptionsButton"],D=((y=function(){function t(e,n,i,r,a){_classCallCheck(this,t),this.el=e,this.overlayRef=n,this.previewFiles=i,this.settings=r,this.data=a,this.entries=[],this.entries=a.entries}return _createClass(t,[{key:"ngOnInit",value:function(){this.data.ticketEntry&&this.previewFiles.setPreviewUriTransformer(this.urlTransformer.bind(this))}},{key:"ngAfterViewInit",value:function(){var t=this;this.bindToDownload(),this.previewContainer.nativeElement.addEventListener("click",(function(e){e.target.closest(".preview-object")||t.overlayRef.close()}))}},{key:"ngOnDestroy",value:function(){this.downloadSub.unsubscribe()}},{key:"closeOverlay",value:function(){this.overlayRef.close()}},{key:"bindToDownload",value:function(){var t=this;this.downloadSub=this.previewFiles.download.subscribe((function(){var e=t.previewFiles.getAllEntries();t.downloadFile(e)}))}},{key:"downloadFile",value:function(t){var e=t.map((function(t){return t.hash})).join(","),n="".concat(this.settings.getBaseUrl(),"secure/uploads/download?hashes=").concat(e);this.data.ticketEntry&&(n+="&ticketEntry=true"),Object(a.a)(n)}},{key:"urlTransformer",value:function(t){return"".concat(t.url,"?ticketEntry=true")}}]),t}()).\u0275fac=function(t){return new(t||y)(i.Rb(i.l),i.Rb(o.a),i.Rb(s.a),i.Rb(c.a),i.Rb(r.a))},y.\u0275cmp=i.Lb({type:y,selectors:[["file-preview-overlay"]],viewQuery:function(t,e){var n;1&t&&(i.Jc(x,!0,i.l),i.Sc(C,!0,i.l)),2&t&&(i.yc(n=i.gc())&&(e.previewContainer=n.first),i.yc(n=i.gc())&&(e.optionsButton=n.first))},decls:3,vars:2,consts:[[3,"showCloseButton","closed"],[3,"files"],["previewContainer",""]],template:function(t,e){1&t&&(i.Xb(0,"file-preview-toolbar",0),i.fc("closed",(function(t){return e.closeOverlay()})),i.Wb(),i.Sb(1,"preview-container",1,2)),2&t&&(i.rc("showCloseButton",!0),i.Db(1),i.rc("files",e.entries))},directives:[_,w.a],styles:["[_nghost-%COMP%]{display:block;width:100vw;height:100vh;background-color:rgba(0,0,0,.9);color:var(--be-accent-contrast);overflow:auto;position:relative}preview-container[_ngcontent-%COMP%]{margin:60px 0;min-height:calc(100% - 120px)}"],changeDetection:0}),y),S=((v=function(){function t(){_classCallCheck(this,t),this.iconsMap={text:"insert-drive-file",audio:"volume-up",video:"videocam",document:"assignment",image:"image"}}return _createClass(t,[{key:"getFileType",value:function(t){return t.split("/")[0]}},{key:"getIconName",value:function(t){var e=this.getFileType(t);return this.iconsMap[e]||this.iconsMap.text}}]),t}()).\u0275fac=function(t){return new(t||v)},v.\u0275prov=i.Nb({token:v,factory:v.\u0275fac,providedIn:"root"}),v),O=n("dz5c"),I=n("h586"),R=n("6SKC");function X(t,e){if(1&t){var n=i.Yb();i.Xb(0,"button",6),i.fc("click",(function(t){i.Cc(n);var e=i.jc().$implicit;return i.jc().detachEntry(e),t.stopPropagation()})),i.Sb(1,"mat-icon",7),i.Wb()}}function T(t,e){if(1&t){var n=i.Yb();i.Xb(0,"div",1),i.fc("click",(function(t){i.Cc(n);var r=e.$implicit;return i.jc().showPreviewOverlay(r)})),i.Sb(1,"mat-icon",2),i.Xb(2,"div",3),i.Nc(3),i.Wb(),i.Xb(4,"div",4),i.Nc(5),i.kc(6,"formattedFileSize"),i.Wb(),i.Lc(7,X,2,0,"button",5),i.Wb()}if(2&t){var r=e.$implicit,a=i.jc();i.Db(1),i.rc("svgIcon",a.mime.getIconName(r.mime))("ngClass",a.mime.getIconName(r.mime)),i.Db(2),i.Oc(r.name),i.Db(2),i.Oc(i.lc(6,5,r.file_size)),i.Db(2),i.rc("ngIf",a.cancelButtonVisible)}}n.d(e,"a",(function(){return W}));var P,W=((P=function(){function t(e,n,r){_classCallCheck(this,t),this.mime=e,this.overlay=n,this.uploadQueue=r,this.cancelButtonVisible=!0,this.detached=new i.o}return _createClass(t,[{key:"detachEntry",value:function(t){var e=this.attachments.findIndex((function(e){return e.id===t.id}));e>-1&&(this.attachments.splice(e,1),this.detached.emit(t))}},{key:"showPreviewOverlay",value:function(t){this.overlay.open(D,{position:"center",origin:"global",data:{entries:[t],ticketEntry:!0}})}}]),t}()).\u0275fac=function(t){return new(t||P)(i.Rb(S),i.Rb(O.a),i.Rb(I.a))},P.\u0275cmp=i.Lb({type:P,selectors:[["reply-attachment-list"]],inputs:{attachments:"attachments",cancelButtonVisible:"cancelButtonVisible"},outputs:{detached:"detached"},decls:1,vars:1,consts:[["class","attachments-list-item",3,"click",4,"ngFor","ngForOf"],[1,"attachments-list-item",3,"click"],[1,"attachment-info","type-icon",3,"svgIcon","ngClass"],[1,"attachment-info","name"],[1,"attachment-info","size"],["class","remove-attachment","type","button","mat-icon-button","",3,"click",4,"ngIf"],["type","button","mat-icon-button","",1,"remove-attachment",3,"click"],["svgIcon","close"]],template:function(t,e){1&t&&i.Lc(0,T,8,7,"div",0),2&t&&i.rc("ngForOf",e.attachments)},directives:[l.s,d.a,l.q,l.t,u.b],pipes:[R.a],styles:["reply-attachment-list{display:-webkit-box;display:flex;flex-wrap:wrap;color:var(--be-secondary-text)}reply-attachment-list .attachments-list-item{border:1px solid var(--be-divider-default);margin:0 10px 10px 0;position:relative;height:45px;line-height:45px;border-radius:3px;-webkit-box-flex:0;flex:0 1 auto;min-width:200px;padding:0 8px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer}reply-attachment-list .attachments-list-item .attachment-info{display:inline-block;vertical-align:middle}reply-attachment-list .attachments-list-item .attachment-info svg{vertical-align:top}reply-attachment-list .attachments-list-item .attachment-info.name{max-width:115px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-weight:500}reply-attachment-list .attachments-list-item .attachment-info.type-icon{margin-right:3px}reply-attachment-list .attachments-list-item .attachment-info.type-icon.image,reply-attachment-list .attachments-list-item .attachment-info.type-icon.videocam,reply-attachment-list .attachments-list-item .attachment-info.type-icon.volume-up{color:#db4437}reply-attachment-list .attachments-list-item .attachment-info.type-icon.insert-drive-file{color:#4285f4}reply-attachment-list .attachments-list-item .attachment-info.type-icon.assignment{color:#0f9d58}reply-attachment-list .attachments-list-item .size{font-size:1.1rem;margin:0 10px 0 5px}"],encapsulation:2,changeDetection:0}),P)},"8RV8":function(t,e,n){"use strict";n.d(e,"a",(function(){return v}));var i=n("0IaG"),r=n("3Pt+"),a=n("Kj3r"),o=n("/uUt"),s=n("eIep"),c=n("JIr8"),l=n("2Vo4"),u=n("LRne"),d=n("fXoL"),h=n("mWN8"),b=n("Rd8u"),f=n("NFeN"),p=n("FBzJ"),g=n("ofXK");function m(t,e){if(1&t){var n=d.Yb();d.Xb(0,"div",9),d.fc("click",(function(t){d.Cc(n);var i=e.$implicit;return d.jc().close(i)})),d.Sb(1,"img",10),d.Xb(2,"div",11),d.Xb(3,"div",12),d.Nc(4),d.Wb(),d.Xb(5,"div",13),d.Nc(6),d.Wb(),d.Wb(),d.Wb()}if(2&t){var i=e.$implicit;d.Db(1),d.rc("src",i.avatar,d.Fc),d.Db(3),d.Oc(i.display_name),d.Db(2),d.Oc(i.email)}}var v=function(){var t=function(){function t(e,n,i){_classCallCheck(this,t),this.dialogRef=e,this.data=n,this.users=i,this.searchFormControl=new r.h,this.loading$=new l.a(!1),this.users$=new l.a([])}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.searchFormControl.valueChanges.pipe(Object(a.a)(250),Object(o.a)(),Object(s.a)((function(e){return t.searchUsers(e)})),Object(c.a)((function(){return Object(u.a)([])}))).subscribe((function(e){t.users$.next(e),t.loading$.next(!1)}))}},{key:"searchUsers",value:function(t){return this.loading$.next(!0),t?this.users.getAll({query:t}):Object(u.a)([])}},{key:"close",value:function(t){this.dialogRef.close(t)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(d.Rb(i.h),d.Rb(i.a),d.Rb(h.a))},t.\u0275cmp=d.Lb({type:t,selectors:[["find-user-modal"]],decls:13,vars:7,consts:[[1,"modal-header"],["mat-dialog-title","","trans",""],["type","button","tabindex","-1",1,"no-style","close-button",3,"click"],["svgIcon","close"],[1,"input-container","search-input-container"],["type","text","placeholder","Search for user by name or email...",3,"formControl"],[1,"small",3,"isVisible"],[1,"users"],["class","user",3,"click",4,"ngFor","ngForOf"],[1,"user",3,"click"],[3,"src"],[1,"meta","overflow-hidden"],[1,"name","overflow-hidden"],[1,"email","overflow-hidden"]],template:function(t,e){1&t&&(d.Xb(0,"div",0),d.Xb(1,"h2",1),d.Nc(2,"Find User"),d.Wb(),d.Xb(3,"button",2),d.fc("click",(function(t){return e.close()})),d.Sb(4,"mat-icon",3),d.Wb(),d.Wb(),d.Xb(5,"mat-dialog-content"),d.Xb(6,"div",4),d.Sb(7,"input",5),d.Sb(8,"loading-indicator",6),d.kc(9,"async"),d.Wb(),d.Xb(10,"div",7),d.Lc(11,m,7,3,"div",8),d.kc(12,"async"),d.Wb(),d.Wb()),2&t&&(d.Db(7),d.rc("formControl",e.searchFormControl),d.Db(1),d.rc("isVisible",d.lc(9,3,e.loading$)),d.Db(3),d.rc("ngForOf",d.lc(12,5,e.users$)))},directives:[i.i,b.a,f.a,i.f,r.c,r.t,r.i,p.a,g.s],pipes:[g.b],styles:["[_nghost-%COMP%]{display:block;width:500px;max-width:100%}.modal-header[_ngcontent-%COMP%]{margin-bottom:15px}.search-input-container[_ngcontent-%COMP%]{width:100%;margin-bottom:30px;position:relative}loading-indicator[_ngcontent-%COMP%]{top:12px;right:12px}.users[_ngcontent-%COMP%]{flex-wrap:wrap;-webkit-box-pack:justify;justify-content:space-between}.user[_ngcontent-%COMP%], .users[_ngcontent-%COMP%]{display:-webkit-box;display:flex}.user[_ngcontent-%COMP%]{width:calc(50% - 10px);flex-shrink:0;min-width:0;margin-bottom:20px;cursor:pointer}.user[_ngcontent-%COMP%]:hover{color:var(--be-accent-default)}.user[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50px;height:50px;flex-shrink:0;margin-right:10px;border-radius:4px;overflow:hidden}.user[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{color:var(--be-text);font-size:1.5rem;margin-bottom:5px}.user[_ngcontent-%COMP%]   .email[_ngcontent-%COMP%]{color:var(--be-secondary-text)}.overflow-hidden[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis}"],changeDetection:0}),t}()},"90cg":function(t,e,n){"use strict";e.isPromise=function(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}},"9AGB":function(t,e,n){"use strict";var i=n("w5QO");function r(t){return t?1===t.length?t[0]:function(e){return t.reduce((function(t,e){return e(t)}),e)}:i.noop}e.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return r(t)},e.pipeFromArray=r},"9VjZ":function(t,e,n){"use strict";n.d(e,"a",(function(){return y}));var i=n("fXoL"),r=n("tyNb"),a=n("oVOl"),o=n("twBr"),s=n("wWhK"),c=n("j/pe"),l=n("pfRy"),u=n("b7Mq"),d=n("qH/R"),h=n("3H9V"),b=n("ofXK"),f=n("FBzJ"),p=n("H4ap");function g(t,e){1&t&&i.Sb(0,"conversation-sidebar")}var m=[[["","toolbar-content",""]]],v=["[toolbar-content]"],y=function(){var t=function(){function t(e,n,i,r,a){_classCallCheck(this,t),this.route=e,this.uploads=n,this.currentUser=i,this.conversation=r,this.el=a,this.hideBackButton=!1,this.hideSidebar=!1}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.route.data.subscribe((function(e){t.conversation.init(e.ticket),t.el.nativeElement.focus()}))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(i.Rb(r.a),i.Rb(a.a),i.Rb(o.a),i.Rb(s.a),i.Rb(i.l))},t.\u0275cmp=i.Lb({type:t,selectors:[["conversation"]],inputs:{hideBackButton:"hideBackButton",hideSidebar:"hideSidebar"},ngContentSelectors:v,decls:10,vars:3,consts:[[1,"conversation-container"],[3,"hideBackButton"],["conversationInfiniteScroll","",1,"ticket-container"],[4,"ngIf"],[1,"overlay",3,"isVisible"]],template:function(t,e){1&t&&(i.qc(m),i.Vb(0),i.Xb(1,"div",0),i.Xb(2,"conversation-toolbar",1),i.pc(3),i.Wb(),i.Xb(4,"div",2),i.Sb(5,"conversation-header"),i.Sb(6,"conversation-text-editor"),i.Sb(7,"conversation-replies"),i.Wb(),i.Wb(),i.Lc(8,g,1,0,"conversation-sidebar",3),i.Ub(),i.Sb(9,"loading-indicator",4)),2&t&&(i.Db(2),i.rc("hideBackButton",e.hideBackButton),i.Db(6),i.rc("ngIf",!e.hideSidebar),i.Db(1),i.rc("isVisible",e.conversation.replies.isLoading||e.conversation.isLoading))},directives:[c.a,l.a,u.a,d.a,h.a,b.t,f.a,p.a],styles:["conversation{display:-webkit-box;display:flex;position:relative}conversation .conversation-container{-webkit-box-flex:1;flex:1 1 auto;min-width:0;height:calc(100vh - 70px);overflow:auto}conversation .conversation-container.invisible{visibility:hidden}conversation .ticket-container{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;height:calc(100% - 60px);overflow:auto}"],encapsulation:2}),t}()},"9lfv":function(t,e,n){"use strict";n.r(e);var i=n("ofXK"),r=n("3Pt+"),a=n("tyNb"),o=n("fXoL"),s=n("wfim"),c=n("VaLf"),l=n("OnlV"),u=n("N2vX"),d=n("vkgz"),h=n("Kj3r"),b=n("/uUt"),f=n("eIep"),p=n("JIr8"),g=n("LsVx"),m=n("nYR2"),v=n("0IaG"),y=n("45UC"),k=n("QGXG"),_=n("MZC4"),w=n("+0xr"),x=n("Dh3D"),C=n("Rd8u");function D(t,e){1&t&&(o.Xb(0,"mat-header-cell",18),o.Nc(1,"Customer"),o.Wb())}function S(t,e){if(1&t&&(o.Xb(0,"mat-cell"),o.Nc(1),o.Wb()),2&t){var n=e.$implicit;o.Db(1),o.Oc(null==n?null:null==n.user?null:n.user.display_name)}}function O(t,e){1&t&&o.Sb(0,"mat-header-cell")}function I(t,e){if(1&t&&(o.Xb(0,"mat-cell",19),o.Sb(1,"img",20),o.Wb()),2&t){var n=e.$implicit;o.Db(1),o.sc("src",null==n?null:null==n.user?null:n.user.avatar,o.Fc)}}function R(t,e){1&t&&(o.Xb(0,"mat-header-cell",21),o.Nc(1,"Ticket Summary"),o.Wb())}function X(t,e){if(1&t&&(o.Xb(0,"div",28),o.Nc(1),o.Wb()),2&t){var n=o.jc().$implicit;o.Db(1),o.Oc(n.display_name)}}function T(t,e){if(1&t&&(o.Vb(0),o.Lc(1,X,2,1,"div",27),o.Ub()),2&t){var n=e.$implicit;o.Db(1),o.rc("ngIf","status"!==n.type)}}function P(t,e){if(1&t&&(o.Xb(0,"mat-cell"),o.Xb(1,"div",22),o.Xb(2,"div",23),o.Lc(3,T,2,1,"ng-container",24),o.Wb(),o.Xb(4,"div",25),o.Nc(5),o.Wb(),o.Wb(),o.Xb(6,"div",26),o.Nc(7),o.Wb(),o.Wb()),2&t){var n=e.$implicit,i=o.jc();o.Db(3),o.rc("ngForOf",n.tags),o.Db(2),o.Oc(n.subject),o.Db(2),o.Oc(i.getTicketBody(n))}}function W(t,e){1&t&&o.Sb(0,"mat-header-cell",29)}function L(t,e){if(1&t&&(o.Xb(0,"mat-cell",19),o.Xb(1,"span",30),o.Nc(2),o.Wb(),o.Wb()),2&t){var n=e.$implicit;o.Db(2),o.Oc(n.replies_count||1)}}function E(t,e){1&t&&(o.Xb(0,"mat-header-cell",31),o.Nc(1,"Assigned To"),o.Wb())}function j(t,e){if(1&t&&(o.Xb(0,"mat-cell",19),o.Nc(1),o.Wb()),2&t){var n=e.$implicit;o.Db(1),o.Oc(n.assignee?n.assignee.display_name:"")}}function M(t,e){1&t&&(o.Xb(0,"mat-header-cell",32),o.Nc(1,"Number"),o.Wb())}function N(t,e){if(1&t&&(o.Xb(0,"mat-cell",19),o.Nc(1),o.Wb()),2&t){var n=e.$implicit;o.Db(1),o.Oc(n.id)}}function A(t,e){1&t&&(o.Xb(0,"mat-header-cell",33),o.Nc(1,"Last Updated"),o.Wb())}function F(t,e){if(1&t&&(o.Xb(0,"mat-cell"),o.Nc(1),o.Wb()),2&t){var n=e.$implicit;o.Db(1),o.Oc(n.updated_at_formatted)}}function z(t,e){if(1&t){var n=o.Yb();o.Xb(0,"mat-row",34),o.fc("click",(function(t){o.Cc(n);var i=e.$implicit;return o.jc().openConversation(i.id)})),o.Wb()}if(2&t){var i=e.$implicit,r=o.jc();o.Hb("open",!i.closed_at)("selected",r.ticketSelected(i))}}var H,V=function(){return["select","name","avatar","ticket-summary","replies-count","assignee","number","last-updated"]},B=["*"],U=((H=function(){function t(e,n,i){_classCallCheck(this,t),this.router=e,this.modal=n,this.mailboxTags=i,this.openTicketInModal=!1,this.matRowDefWhenFn=function(){return!0}}return _createClass(t,[{key:"openConversation",value:function(t){this.openTicketInModal?this.modal.open(y.a,{ticketId:t},{panelClass:"conversation-modal-container"}):this.router.navigate(["/mailbox/tickets/tag",this.mailboxTags.getActiveTagId(),"ticket",t])}},{key:"ticketSelected",value:function(t){return this.dataSource.selectedRows.isSelected(t)}},{key:"getTicketBody",value:function(t){return t.latest_reply&&t.latest_reply.body?t.latest_reply.body:t.replies&&t.replies.length?t.replies[0].body:void 0}}]),t}()).\u0275fac=function(t){return new(t||H)(o.Rb(a.f),o.Rb(k.a),o.Rb(s.a))},H.\u0275cmp=o.Lb({type:H,selectors:[["tickets-list"]],inputs:{openTicketInModal:"openTicketInModal",dataSource:"dataSource"},ngContentSelectors:B,decls:24,vars:5,consts:[[1,"responsive-material-table",3,"dataSource","hideHeader"],["matColumnDef","name"],["mat-sort-header","user_id","trans","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","avatar"],[4,"matHeaderCellDef"],["class","hidden-on-mobile",4,"matCellDef"],["matColumnDef","ticket-summary"],["trans","",4,"matHeaderCellDef"],["matColumnDef","replies-count"],["mat-sort-header","replies_count",4,"matHeaderCellDef"],["matColumnDef","assignee"],["mat-sort-header","assigned_to","trans","",4,"matHeaderCellDef"],["matColumnDef","number"],["mat-sort-header","id","trans","",4,"matHeaderCellDef"],["matColumnDef","last-updated"],["mat-sort-header","updated_at","trans","",4,"matHeaderCellDef"],["class","animated",3,"open","selected","click",4,"matRowDef","matRowDefColumns","matRowDefWhen"],["mat-sort-header","user_id","trans",""],[1,"hidden-on-mobile"],["alt","customer avatar",3,"src"],["trans",""],[1,"title"],[1,"tags"],[4,"ngFor","ngForOf"],[1,"title-text","ticket-subject"],[1,"ellipses","ticket-body"],["class","tag-label",4,"ngIf"],[1,"tag-label"],["mat-sort-header","replies_count"],["title","Replies count"],["mat-sort-header","assigned_to","trans",""],["mat-sort-header","id","trans",""],["mat-sort-header","updated_at","trans",""],[1,"animated",3,"click"]],template:function(t,e){1&t&&(o.qc(),o.Xb(0,"data-table",0),o.Vb(1,1),o.Lc(2,D,2,0,"mat-header-cell",2),o.Lc(3,S,2,1,"mat-cell",3),o.Ub(),o.Vb(4,4),o.Lc(5,O,1,0,"mat-header-cell",5),o.Lc(6,I,2,1,"mat-cell",6),o.Ub(),o.Vb(7,7),o.Lc(8,R,2,0,"mat-header-cell",8),o.Lc(9,P,8,3,"mat-cell",3),o.Ub(),o.Vb(10,9),o.Lc(11,W,1,0,"mat-header-cell",10),o.Lc(12,L,3,1,"mat-cell",6),o.Ub(),o.Vb(13,11),o.Lc(14,E,2,0,"mat-header-cell",12),o.Lc(15,j,2,1,"mat-cell",6),o.Ub(),o.Vb(16,13),o.Lc(17,M,2,0,"mat-header-cell",14),o.Lc(18,N,2,1,"mat-cell",6),o.Ub(),o.Vb(19,15),o.Lc(20,A,2,0,"mat-header-cell",16),o.Lc(21,F,2,1,"mat-cell",3),o.Ub(),o.Lc(22,z,1,4,"mat-row",17),o.pc(23,0,["ngProjectAs","no-results-message",5,["no-results-message"]]),o.Wb()),2&t&&(o.rc("dataSource",e.dataSource)("hideHeader",!0),o.Db(22),o.rc("matRowDefColumns",o.vc(4,V))("matRowDefWhen",e.matRowDefWhenFn))},directives:[_.a,w.c,w.e,w.b,w.i,w.d,x.b,C.a,w.a,i.s,i.t,w.h],styles:["tickets-list{display:block;overflow:auto;height:100%}tickets-list .data-table-panel,tickets-list data-table{height:100%}tickets-list data-table{background-color:var(--be-background-alternative);border:none}tickets-list data-table .mat-table{padding:0}tickets-list data-table .mat-table:not(.empty){min-height:calc(100% - 41px)}tickets-list data-table .mat-table .mat-header-row{min-height:35px;background-color:var(--be-background)}tickets-list data-table .mat-table .mat-row{height:70px;cursor:pointer;background-color:inherit}tickets-list data-table .mat-table .mat-row.open{background-color:var(--be-background)}tickets-list data-table .mat-table .mat-row.open .mat-column-last-updated,tickets-list data-table .mat-table .mat-row.open .mat-column-number,tickets-list data-table .mat-table .mat-row.open .title-text{font-weight:500}tickets-list data-table .mat-table .mat-row.selected,tickets-list data-table .mat-table .mat-row:hover:not(.selected){background-color:var(--be-accent-emphasis)}tickets-list data-table .mat-table .mat-column-number{-webkit-box-flex:0;flex:0 0 90px}tickets-list data-table .mat-table .mat-column-last-updated{-webkit-box-flex:0;flex:0 0 120px;margin-right:25px;white-space:nowrap;text-overflow:ellipsis}tickets-list data-table .mat-table .mat-column-replies-count{-webkit-box-flex:0;flex:0 0 50px;margin-left:25px}tickets-list data-table .mat-table .mat-column-replies-count span{background-color:var(--be-background-alternative);color:var(--be-secondary-text);border-radius:4px;padding:1px 6px 0;font-size:1.1rem;border:1px solid var(--be-divider-default)}tickets-list data-table .mat-table .mat-column-avatar{-webkit-box-flex:0;flex:0 0 60px;margin:0 25px;-webkit-box-align:center;align-items:center}tickets-list data-table .mat-table .mat-column-avatar img{width:38px;height:38px;box-shadow:0 0 0 1px #fff,0 0 1px 2px #aaaeb7;border-radius:50%;margin:0 3px}tickets-list data-table .mat-table .mat-column-ticket-summary{-webkit-box-flex:6;flex-grow:6;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:start;align-items:flex-start;-webkit-box-pack:center;justify-content:center}tickets-list data-table .mat-table .mat-column-ticket-summary .title{display:-webkit-box;display:flex;height:50%;-webkit-box-align:center;align-items:center}tickets-list data-table .mat-table .mat-column-ticket-summary .title .tags>.tag-label:last-of-type{margin-right:7px}tickets-list data-table .mat-table .mat-column-ticket-summary .ticket-body{height:50%;color:var(--be-secondary-text);max-width:98%;overflow:hidden;text-overflow:ellipsis;padding-top:5px}tickets-list data-table .mat-table .mat-column-name{-webkit-box-flex:0;flex:0 0 130px;font-weight:500;color:var(--be-secondary-text)}tickets-list .no-results-message-container{height:calc(100% - 77px)}tickets-list .mat-paginator{background-color:var(--be-background);border-top:1px solid var(--be-divider-default);overflow:hidden}tickets-list .mat-paginator-page-size{height:100%}tickets-list .mat-paginator-page-size-select{margin:0 4px}tickets-list .mat-paginator-container{min-height:40px;height:40px}"],encapsulation:2}),H),Y=n("Xd/8"),$=n("re4b"),q=n("M9IT"),K=n("74SX"),Q=n("bTqV"),G=n("NFeN"),Z=n("/RwR"),J=n("i2dy"),tt=n("twBr"),et=n("2qZP"),nt=n("Qu3c"),it=n("STbY"),rt=n("EzZJ"),at=n("zW5C");function ot(t,e){if(1&t){var n=o.Yb();o.Xb(0,"button",10),o.fc("click",(function(t){o.Cc(n);var i=e.$implicit;return o.jc(2).setStatusForSelectedTickets(i)})),o.Nc(1),o.Wb()}if(2&t){var i=e.$implicit;o.rc("ngClass",i.name),o.Db(1),o.Pc(" ",i.display_name||i.name," ")}}function st(t,e){if(1&t){var n=o.Yb();o.Vb(0),o.Xb(1,"assign-ticket-dropdown",1),o.fc("assigned",(function(t){return o.Cc(n),o.jc().ticketsUpdated()})),o.kc(2,"trans"),o.Wb(),o.Xb(3,"button",2),o.Sb(4,"mat-icon",3),o.Wb(),o.Xb(5,"mat-menu",4,5),o.Lc(7,ot,2,2,"button",6),o.Wb(),o.Xb(8,"add-tag-dropdown",7),o.fc("tagAdded",(function(t){return o.Cc(n),o.jc().ticketsUpdated()})),o.kc(9,"trans"),o.Wb(),o.Xb(10,"button",8),o.fc("click",(function(t){return o.Cc(n),o.jc().maybeDeleteSelectedTickets()})),o.kc(11,"trans"),o.Sb(12,"mat-icon",9),o.Wb(),o.Ub()}if(2&t){var i=o.zc(6),r=o.jc();o.Db(1),o.rc("ticketIds",r.dataSource.getSelectedItems())("matTooltip",o.lc(2,8,"Assign")),o.Db(2),o.rc("matMenuTriggerFor",i),o.Db(2),o.rc("overlapTrigger",!1),o.Db(2),o.rc("ngForOf",r.mailboxTags.getStatusTags(!0)),o.Db(1),o.rc("ticketIds",r.dataSource.getSelectedItems())("matTooltip",o.lc(9,10,"Add Tag")),o.Db(2),o.rc("matTooltip",o.lc(11,12,"Delete"))}}var ct,lt=function(){return["tickets.update","replies.create"]},ut=((ct=function(){function t(e,n,i,r,a){_classCallCheck(this,t),this.tickets=e,this.mailboxTags=n,this.toast=i,this.modal=r,this.currentUser=a,this.onTicketsUpdated=new o.o}return _createClass(t,[{key:"deleteTickets",value:function(t){var e=this;this.tickets.deleteMultiple(t).subscribe((function(){e.ticketsUpdated(),e.toast.open("Tickets deleted")}))}},{key:"setStatusForSelectedTickets",value:function(t){var e=this;this.tickets.changeMultipleTicketsStatus(this.dataSource.getSelectedItems(),t).subscribe((function(){e.ticketsUpdated()}))}},{key:"maybeDeleteSelectedTickets",value:function(){var t=this;this.modal.show(Z.a,{title:"Delete Tickets",body:"Are you sure you want to permanently delete selected tickets?",ok:"Delete"}).afterClosed().subscribe((function(e){e&&t.deleteTickets(t.dataSource.getSelectedItems())}))}},{key:"ticketsUpdated",value:function(){this.onTicketsUpdated.emit(),this.mailboxTags.refresh(),this.dataSource.reset()}},{key:"anyItemsSelected",get:function(){return!this.dataSource.anyRowsSelected()}}]),t}()).\u0275fac=function(t){return new(t||ct)(o.Rb(g.a),o.Rb(s.a),o.Rb(J.a),o.Rb(k.a),o.Rb(tt.a))},ct.\u0275cmp=o.Lb({type:ct,selectors:[["ticket-floating-toolbar"]],hostVars:2,hostBindings:function(t,e){2&t&&o.Hb("hidden",e.anyItemsSelected)},inputs:{dataSource:"dataSource"},outputs:{onTicketsUpdated:"onTicketsUpdated"},decls:1,vars:2,consts:[[4,"ngIf"],[3,"ticketIds","matTooltip","assigned"],[1,"toolbar-item","no-style",3,"matMenuTriggerFor"],["svgIcon","flag-custom"],[1,"status-menu",3,"overlapTrigger"],["ticketStatusMenu","matMenu"],["mat-menu-item","",3,"ngClass","click",4,"ngFor","ngForOf"],[3,"ticketIds","matTooltip","tagAdded"],[1,"no-style","toolbar-item","delete-tickets-button","last",3,"matTooltip","click"],["svgIcon","delete-custom"],["mat-menu-item","",3,"ngClass","click"]],template:function(t,e){1&t&&o.Lc(0,st,13,14,"ng-container",0),2&t&&o.rc("ngIf",e.currentUser.hasPermissions(o.vc(1,lt)))},directives:[i.t,et.a,nt.a,it.d,G.a,it.e,i.s,rt.a,it.b,i.q],pipes:[at.a],styles:["ticket-floating-toolbar{display:-webkit-box;display:flex;position:fixed;top:78px;background-color:var(--be-background);left:calc(50% - 117.5px);min-width:235px;box-shadow:0 3px 3px -2px rgba(0,0,0,.2),0 3px 4px 0 rgba(0,0,0,.14),0 1px 8px 0 rgba(0,0,0,.12);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:10;white-space:nowrap}ticket-floating-toolbar .toolbar-item{position:relative;cursor:pointer;-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out;padding:15px;border-right:1px solid var(--be-divider-default);line-height:inherit}ticket-floating-toolbar .toolbar-item.last{border-bottom:none}ticket-floating-toolbar .toolbar-item:hover{background-color:var(--be-accent-emphasis)}ticket-floating-toolbar .toolbar-item .mat-icon{color:var(--be-help-center-title-text);vertical-align:bottom;width:28px;height:28px}ticket-floating-toolbar .toolbar-item .status-tag{text-transform:capitalize}"],encapsulation:2}),ct),dt=n("CH4Q");function ht(t,e){1&t&&(o.Xb(0,"no-results-message"),o.Xb(1,"span",20),o.Nc(2,"Nothing To Display."),o.Wb(),o.Xb(3,"span",21),o.Nc(4,"Could not find any tickets matching this search query."),o.Wb(),o.Wb())}var bt=function(t){return["/mailbox/users",t]};function ft(t,e){if(1&t&&(o.Xb(0,"a",22),o.Sb(1,"img",23),o.Xb(2,"div",24),o.Xb(3,"div",25),o.Nc(4),o.Wb(),o.Xb(5,"div",26),o.Nc(6),o.Wb(),o.Wb(),o.Wb()),2&t){var n=e.$implicit;o.rc("routerLink",o.wc(4,bt,n.id)),o.Db(1),o.sc("src",n.avatar,o.Fc),o.Db(3),o.Oc(n.display_name),o.Db(2),o.Oc(n.email)}}function pt(t,e){if(1&t&&(o.Xb(0,"a",27),o.Sb(1,"mat-icon",28),o.Xb(2,"div",29),o.Xb(3,"div",25),o.Nc(4),o.Wb(),o.Xb(5,"div",26),o.Nc(6),o.Wb(),o.Wb(),o.Wb()),2&t){var n=e.$implicit,i=o.jc();o.rc("routerLink",i.urls.article(n)),o.Db(4),o.Oc(n.title),o.Db(2),o.Oc(n.body)}}var gt,mt=((gt=function(){function t(e,n,i,a,o){_classCallCheck(this,t),this.dialogRef=e,this.data=n,this.tickets=i,this.urls=a,this.paginator=o,this.results={},this.isSearching=!1,this.searchedOnce=!1,this.activeTab="tickets",this.searchQueryControl=new r.h,this.hydrate()}return _createClass(t,[{key:"ngOnInit",value:function(){this.dataSource=new Y.a({uri:"search/tickets",dataPaginator:this.paginator,matPaginator:this.matPaginator,matSort:this.matSort,dontUpdateQueryParams:!0,staticParams:this.getSearchQueryParams(),delayInit:!0})}},{key:"close",value:function(){this.dialogRef.close()}},{key:"hydrate",value:function(){this.bindToSearchInput(),this.searchQueryControl.setValue(this.data.query)}},{key:"setActiveTab",value:function(t){this.activeTab=t}},{key:"activeTabIs",value:function(t){return this.activeTab===t}},{key:"performSearch",value:function(t){var e=this;this.isSearching=!0,this.tickets.search(t,this.getSearchQueryParams()).pipe(Object(m.a)((function(){e.searchedOnce=!0,e.isSearching=!1}))).subscribe((function(t){e.dataSource.initiated?(e.dataSource.config.dataPaginator.setPagination(t.results.tickets),e.dataSource.updateConfig({staticParams:e.getSearchQueryParams()})):e.dataSource.init({initialData:t.results.tickets}),e.results=t.results}))}},{key:"bindToSearchInput",value:function(){var t=this;this.searchQueryControl.valueChanges.pipe(Object(h.a)(400),Object(b.a)()).subscribe((function(e){return t.performSearch(e)}))}},{key:"getSearchQueryParams",value:function(){return{query:this.searchQueryControl.value,perPage:20,detailed:!0}}}]),t}()).\u0275fac=function(t){return new(t||gt)(o.Rb(v.h),o.Rb(v.a),o.Rb(g.a),o.Rb(K.a),o.Rb($.a))},gt.\u0275cmp=o.Lb({type:gt,selectors:[["agent-search-modal"]],viewQuery:function(t,e){var n;1&t&&(o.Jc(U,!0),o.Jc(q.a,!0),o.Jc(x.a,!0)),2&t&&(o.yc(n=o.gc())&&(e.ticketsList=n.first),o.yc(n=o.gc())&&(e.matPaginator=n.first),o.yc(n=o.gc())&&(e.matSort=n.first))},features:[o.Cb([$.a])],decls:30,vars:26,consts:[["type","button","mat-icon-button","","tabindex","-1",1,"close-button",3,"click"],["svgIcon","close"],[1,"input-container","search-input"],["type","text","placeholder","Search for anything...","trans-placeholder","",3,"formControl"],[1,"search-results"],[1,"tab-menu"],[1,"tab-menu-item","tickets-menu-item",3,"click"],["trans",""],[1,"tab-menu-item","users-menu-item",3,"click"],[1,"tab-menu-item","articles-menu-item",3,"click"],[1,"tabs"],[1,"tab","tickets-tab"],["matSort","",3,"openTicketInModal","dataSource"],[4,"ngIf"],[3,"dataSource"],[1,"tab","users-tab"],["class","user",3,"routerLink",4,"ngFor","ngForOf"],[1,"tab","articles-tab"],[1,"articles-list"],["class","article",3,"routerLink",4,"ngFor","ngForOf"],["primary-text","","trans",""],["secondary-text","","trans",""],[1,"user",3,"routerLink"],["alt","customer avatar",1,"avatar",3,"src"],[1,"text"],[1,"title"],[1,"body"],[1,"article",3,"routerLink"],["svgIcon","description"],[1,"article-info"]],template:function(t,e){1&t&&(o.Xb(0,"mat-dialog-content"),o.Xb(1,"button",0),o.fc("click",(function(t){return e.close()})),o.Sb(2,"mat-icon",1),o.Wb(),o.Xb(3,"div",2),o.Sb(4,"input",3),o.Wb(),o.Xb(5,"div",4),o.Xb(6,"div",5),o.Xb(7,"div",6),o.fc("click",(function(t){return e.setActiveTab("tickets")})),o.Nc(8),o.kc(9,"async"),o.Xb(10,"span",7),o.Nc(11,"Tickets"),o.Wb(),o.Wb(),o.Xb(12,"div",8),o.fc("click",(function(t){return e.setActiveTab("users")})),o.Nc(13),o.Xb(14,"span",7),o.Nc(15,"Users"),o.Wb(),o.Wb(),o.Xb(16,"div",9),o.fc("click",(function(t){return e.setActiveTab("articles")})),o.Nc(17),o.Xb(18,"span",7),o.Nc(19,"Articles"),o.Wb(),o.Wb(),o.Wb(),o.Xb(20,"div",10),o.Xb(21,"div",11),o.Xb(22,"tickets-list",12),o.Lc(23,ht,5,0,"no-results-message",13),o.Wb(),o.Sb(24,"ticket-floating-toolbar",14),o.Wb(),o.Xb(25,"div",15),o.Lc(26,ft,7,6,"a",16),o.Wb(),o.Xb(27,"div",17),o.Xb(28,"div",18),o.Lc(29,pt,7,3,"a",19),o.Wb(),o.Wb(),o.Wb(),o.Wb(),o.Wb()),2&t&&(o.Db(4),o.rc("formControl",e.searchQueryControl),o.Db(2),o.Hb("visually-hidden",!e.searchedOnce),o.Db(1),o.Hb("active",e.activeTabIs("tickets")),o.Db(1),o.Pc("",o.lc(9,24,e.dataSource.totalCount$)," "),o.Db(4),o.Hb("active",e.activeTabIs("users")),o.Db(1),o.Pc("",null==e.results.users?null:e.results.users.total," "),o.Db(3),o.Hb("active",e.activeTabIs("articles")),o.Db(1),o.Pc("",null==e.results.articles?null:e.results.articles.total," "),o.Db(4),o.Hb("hidden",!e.activeTabIs("tickets")),o.Db(1),o.rc("openTicketInModal",!0)("dataSource",e.dataSource),o.Db(1),o.rc("ngIf",!(null!=e.results.tickets&&null!=e.results.tickets.data&&e.results.tickets.data.length||e.isSearching)),o.Db(1),o.rc("dataSource",e.dataSource),o.Db(1),o.Hb("hidden",!e.activeTabIs("users")),o.Db(1),o.rc("ngForOf",null==e.results.users?null:e.results.users.data),o.Db(1),o.Hb("hidden",!e.activeTabIs("articles")),o.Db(2),o.rc("ngForOf",null==e.results.articles?null:e.results.articles.data))},directives:[v.f,Q.b,G.a,r.c,C.a,r.t,r.i,U,x.a,i.t,ut,i.s,dt.a,a.i],pipes:[i.b],styles:[".agent-search-modal-container{height:calc(100% - 50px);width:90%}.agent-search-modal-container .mat-dialog-content{max-height:none;min-height:100%}.agent-search-modal-container .search-results{border:1px solid var(--be-divider-default);border-radius:4px;background-color:var(--be-background);min-height:calc(100% - 75px)}.agent-search-modal-container .search-results .tab-menu{display:-webkit-box;display:flex;border-bottom:1px solid var(--be-divider-default)}.agent-search-modal-container .search-results .tab-menu .tab-menu-item{padding:15px;border-bottom:2px solid transparent;cursor:pointer}.agent-search-modal-container .search-results .tab-menu .tab-menu-item.active{border-color:var(--be-accent-default)}.agent-search-modal-container .search-results .tabs{border:1px solid var(--be-divider-default);margin:15px}.agent-search-modal-container .search-results .tabs .tab{min-height:400px}.agent-search-modal-container .search-results .tabs .users-tab{padding:8px}.agent-search-modal-container .search-results .tabs .users-tab .user{display:-webkit-inline-box;display:inline-flex;width:300px;height:80px;border:1px solid var(--be-divider-default);padding:15px;margin:8px;color:var(--be-text)}.agent-search-modal-container .search-results .tabs .users-tab .user:hover{background-color:var(--be-accent-emphasis)}.agent-search-modal-container .search-results .tabs .users-tab .user img{margin-right:10px;width:50px;height:50px;-o-object-fit:cover;object-fit:cover}.agent-search-modal-container .search-results .tabs .users-tab .user .text{padding-top:6px}.agent-search-modal-container .search-results .tabs .users-tab .user .text .title{font-size:1.5rem}.agent-search-modal-container .search-results .tabs .users-tab .user .text .body{color:var(--be-secondary-text)}.agent-search-modal-container .search-results .tabs .articles-list .article{display:-webkit-box;display:flex;padding:13px;border-bottom:1px solid var(--be-divider-default);color:var(--be-text)}.agent-search-modal-container .search-results .tabs .articles-list .article:last-of-type{border-bottom:none}.agent-search-modal-container .search-results .tabs .articles-list .article:hover{background-color:var(--be-accent-emphasis)}.agent-search-modal-container .search-results .tabs .articles-list .article .mat-icon{width:35px;height:35px;color:var(--be-secondary-text);margin-right:5px}.agent-search-modal-container .search-results .tabs .articles-list .article .article-info .title{font-size:1.6rem}.agent-search-modal-container .search-results .tabs .articles-list .article .article-info .body{word-wrap:break-word;color:var(--be-secondary-text)}.agent-search-modal-container .search-results .tabs tickets-list{background-color:transparent}.agent-search-modal-container .search-input{height:50px;margin-bottom:25px}.agent-search-modal-container .search-input input{height:100%;border-radius:4px}.agent-search-modal-container .close-button{position:absolute;top:15px;right:1px}"],encapsulation:2}),gt),vt=n("LRne"),yt=n("/1cH"),kt=n("YdAL"),_t=n("FKr1");function wt(t,e){if(1&t){var n=o.Yb();o.Xb(0,"div",16),o.fc("click",(function(t){return o.Cc(n),o.jc(2).setActiveCategory("tickets"),t.stopPropagation()})),o.Nc(1,"Conversations"),o.Wb()}if(2&t){var i=o.jc(2);o.Hb("active","tickets"===i.activeCategory)}}function xt(t,e){if(1&t){var n=o.Yb();o.Xb(0,"div",17),o.fc("click",(function(t){return o.Cc(n),o.jc(2).setActiveCategory("users"),t.stopPropagation()})),o.Nc(1,"Users"),o.Wb()}if(2&t){var i=o.jc(2);o.Hb("active","users"===i.activeCategory)}}function Ct(t,e){if(1&t){var n=o.Yb();o.Xb(0,"div",24),o.fc("click",(function(t){o.Cc(n);var e=o.jc().$implicit;return o.jc(3).navigateToUser(e.user.id)})),o.Nc(1),o.Wb()}if(2&t){var i=o.jc().$implicit;o.Db(1),o.Oc(i.user.display_name)}}function Dt(t,e){if(1&t){var n=o.Yb();o.Xb(0,"mat-option",20),o.fc("click",(function(t){o.Cc(n);var i=e.$implicit;return o.jc(3).navigateToTicket(i.id)})),o.Xb(1,"div",21),o.Nc(2),o.Wb(),o.Xb(3,"div",22),o.Nc(4),o.Wb(),o.Lc(5,Ct,2,1,"div",23),o.Wb()}if(2&t){var i=e.$implicit;o.Db(2),o.Oc(i.subject),o.Db(2),o.Oc(i.latest_reply&&i.latest_reply.body),o.Db(1),o.rc("ngIf",i.user)}}function St(t,e){if(1&t&&(o.Xb(0,"div",18),o.Lc(1,Dt,6,3,"mat-option",19),o.Wb()),2&t){var n=o.jc(2);o.Db(1),o.rc("ngForOf",n.results.tickets.data)}}function Ot(t,e){if(1&t){var n=o.Yb();o.Xb(0,"mat-option",27),o.fc("click",(function(t){o.Cc(n);var i=e.$implicit;return o.jc(3).navigateToUser(i.id)})),o.Sb(1,"img",28),o.Xb(2,"div",29),o.Xb(3,"div",21),o.Nc(4),o.Wb(),o.Xb(5,"div",22),o.Nc(6),o.Wb(),o.Wb(),o.Wb()}if(2&t){var i=e.$implicit;o.Db(1),o.sc("src",i.avatar,o.Fc),o.Db(3),o.Oc(i.email),o.Db(2),o.Oc(i.display_name)}}function It(t,e){if(1&t&&(o.Xb(0,"div",25),o.Lc(1,Ot,7,3,"mat-option",26),o.Wb()),2&t){var n=o.jc(2);o.Db(1),o.rc("ngForOf",n.results.users.data)}}function Rt(t,e){if(1&t){var n=o.Yb();o.Xb(0,"div",30),o.fc("click",(function(t){return o.Cc(n),o.jc(2).openSearchModal()})),o.Xb(1,"span",31),o.Nc(2,"View All Results"),o.Wb(),o.Wb()}}function Xt(t,e){if(1&t&&(o.Xb(0,"div",9),o.Xb(1,"div",10),o.Lc(2,wt,2,2,"div",11),o.Lc(3,xt,2,2,"div",12),o.Wb(),o.Lc(4,St,2,1,"div",13),o.Lc(5,It,2,1,"div",14),o.Lc(6,Rt,3,0,"div",15),o.Wb()),2&t){var n=o.jc();o.Db(2),o.rc("ngIf",n.results.tickets.data.length),o.Db(1),o.rc("ngIf",n.results.users.data.length),o.Db(1),o.rc("ngIf","tickets"===n.activeCategory),o.Db(1),o.rc("ngIf","users"===n.activeCategory),o.Db(1),o.rc("ngIf",n.searchQuery.value)}}function Tt(t,e){1&t&&(o.Xb(0,"div",32),o.Nc(1," No tickets or users matching your search query were found. "),o.Wb())}var Pt,Wt={data:{tickets:{},users:{},articles:{}}},Lt=((Pt=function(){function t(e,n,i){_classCallCheck(this,t),this.tickets=e,this.router=n,this.modal=i,this.searchQuery=new r.h,this.activeCategory="tickets",this.hasResults=!1,this.loadedResultsAtLeastOnce=!1,this.isLoading=!1,this.results={tickets:{data:[]},users:{data:[]}}}return _createClass(t,[{key:"ngOnInit",value:function(){this.bindToQueryChangeEvent()}},{key:"setActiveCategory",value:function(t){this.activeCategory=t}},{key:"navigateToTicket",value:function(t){this.reset(),this.router.navigate(["/mailbox/tickets","tag",1,"ticket",t])}},{key:"navigateToUser",value:function(t){this.reset(),this.router.navigate(["/mailbox/users",t])}},{key:"openSearchModal",value:function(){if(this.searchQuery.value){var t=this.searchQuery.value;this.reset(),this.modal.open(mt,{query:t},{panelClass:"agent-search-modal-container"})}}},{key:"search",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e?(this.isLoading=!0,this.tickets.search(e,{query:e}).pipe(Object(d.a)((function(e){t.hasResults=!(!e.results.tickets.total&&!e.results.users.total),t.loadedResultsAtLeastOnce=!0,t.results=e.results,t.isLoading=!1,t.setActiveCategory(e.results.tickets.total?"tickets":"users")})))):Object(vt.a)(Wt)}},{key:"reset",value:function(){this.searchQuery.setValue(null),this.hasResults=!1,this.results=null,this.activeCategory="tickets",this.loadedResultsAtLeastOnce=!1}},{key:"bindToQueryChangeEvent",value:function(){var t=this;this.searchQuery.valueChanges.pipe(Object(h.a)(250),Object(b.a)(),Object(f.a)((function(e){return t.search(e)})),Object(p.a)((function(){return Object(vt.a)(Wt)}))).subscribe()}}]),t}()).\u0275fac=function(t){return new(t||Pt)(o.Rb(g.a),o.Rb(a.f),o.Rb(k.a))},Pt.\u0275cmp=o.Lb({type:Pt,selectors:[["ticket-search-dropdown"]],features:[o.Cb([g.a])],decls:9,vars:4,consts:[[1,"input-container",3,"ngSubmit"],["type","text","placeholder","Search...","trans-placeholder","",1,"search-input",3,"matAutocomplete","formControl"],["input",""],["mat-icon-button","",1,"search-button"],["svgIcon","search"],["customScrollbar","",1,"agent-mailbox-autocomplete"],["auto","matAutocomplete"],["class","results-container",4,"ngIf"],["class","no-results","trans","",4,"ngIf"],[1,"results-container"],[1,"header"],["class","header-item tickets-item","trans","",3,"active","click",4,"ngIf"],["class","header-item users-item","trans","",3,"active","click",4,"ngIf"],["class","results-panel tickets-panel",4,"ngIf"],["class","results-panel users-panel",4,"ngIf"],["class","footer",3,"click",4,"ngIf"],["trans","",1,"header-item","tickets-item",3,"click"],["trans","",1,"header-item","users-item",3,"click"],[1,"results-panel","tickets-panel"],["class","result",3,"click",4,"ngFor","ngForOf"],[1,"result",3,"click"],[1,"title"],[1,"body"],["class","user",3,"click",4,"ngIf"],[1,"user",3,"click"],[1,"results-panel","users-panel"],["class","result media",3,"click",4,"ngFor","ngForOf"],[1,"result","media",3,"click"],["alt","customer avatar",1,"avatar",3,"src"],[1,"text"],[1,"footer",3,"click"],["trans",""],["trans","",1,"no-results"]],template:function(t,e){if(1&t&&(o.Xb(0,"form",0),o.fc("ngSubmit",(function(t){return e.openSearchModal()})),o.Sb(1,"input",1,2),o.Xb(3,"button",3),o.Sb(4,"mat-icon",4),o.Wb(),o.Wb(),o.Xb(5,"mat-autocomplete",5,6),o.Lc(7,Xt,7,5,"div",7),o.Lc(8,Tt,2,0,"div",8),o.Wb()),2&t){var n=o.zc(6);o.Db(1),o.rc("matAutocomplete",n)("formControl",e.searchQuery),o.Db(6),o.rc("ngIf",e.results),o.Db(1),o.rc("ngIf",e.searchQuery.value&&!e.isLoading&&!e.hasResults&&e.loadedResultsAtLeastOnce)}},directives:[r.J,r.u,r.v,yt.c,r.c,C.a,r.t,r.i,Q.b,G.a,yt.a,kt.a,i.t,i.s,_t.n],styles:["ticket-search-dropdown{display:block;position:relative;max-width:700px;width:100%}ticket-search-dropdown .input-container{position:relative}ticket-search-dropdown .input-container .search-button{position:absolute;top:2px;left:0}ticket-search-dropdown .input-container input{padding-left:36px}ticket-search-dropdown .input-container input::-webkit-input-placeholder{color:var(--be-accent-contrast)}ticket-search-dropdown .input-container input::-moz-placeholder{color:var(--be-accent-contrast)}ticket-search-dropdown .input-container input:-ms-input-placeholder{color:var(--be-accent-contrast)}ticket-search-dropdown .input-container input::-ms-input-placeholder{color:var(--be-accent-contrast)}ticket-search-dropdown .input-container input::placeholder{color:var(--be-accent-contrast)}.agent-mailbox-autocomplete.mat-autocomplete-panel{max-height:750px;background-color:var(--be-background)}.agent-mailbox-autocomplete.mat-autocomplete-panel .header{display:-webkit-box;display:flex;background-color:var(--be-background-alternative)}.agent-mailbox-autocomplete.mat-autocomplete-panel .header .header-item{width:50%;-webkit-box-flex:0;flex:0 0 50%;padding:12px;border-bottom:2px solid var(--be-divider-default);cursor:pointer}.agent-mailbox-autocomplete.mat-autocomplete-panel .header .header-item.active{border-color:var(--be-accent-default)}.agent-mailbox-autocomplete.mat-autocomplete-panel .no-results{font-size:1.5rem;text-align:center;width:100%;padding:10px}.agent-mailbox-autocomplete.mat-autocomplete-panel .footer{background-color:var(--be-background-alternative);text-align:center;padding:10px;cursor:pointer}.agent-mailbox-autocomplete.mat-autocomplete-panel .result{border-bottom:1px solid var(--be-divider-default);padding:10px 15px;height:auto;line-height:normal;font-size:1.4rem}.agent-mailbox-autocomplete.mat-autocomplete-panel .result:hover{background-color:var(--be-background-alternative)}.agent-mailbox-autocomplete.mat-autocomplete-panel .title{font-weight:500;color:var(--be-text);overflow:hidden}.agent-mailbox-autocomplete.mat-autocomplete-panel .body{color:var(--be-secondary-text);font-size:1.3rem;word-wrap:break-word;white-space:-webkit-pre-wrap;word-break:break-all;white-space:normal}.agent-mailbox-autocomplete.mat-autocomplete-panel .user{margin-top:5px;font-size:1.25rem;font-weight:500;color:var(--be-secondary-text)}.agent-mailbox-autocomplete.mat-autocomplete-panel .media .mat-option-text{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}.agent-mailbox-autocomplete.mat-autocomplete-panel .media .mat-option-text img{margin-right:10px;width:50px;height:50px;-o-object-fit:cover;object-fit:cover}"],encapsulation:2}),Pt),Et=n("XhcP"),jt=function(t){return["/mailbox/tickets","tag",t]};function Mt(t,e){if(1&t&&(o.Xb(0,"div",16),o.Xb(1,"a",17),o.Xb(2,"span",18),o.Nc(3),o.kc(4,"trans"),o.Wb(),o.Xb(5,"span",19),o.Nc(6),o.Wb(),o.Wb(),o.Wb()),2&t){var n=e.$implicit,i=o.jc();o.Db(1),o.Hb("router-link-active",i.mailboxTags.activeTagIs(n)),o.rc("routerLink",o.wc(10,jt,n.id))("ngClass",n.name),o.Db(2),o.Oc(o.lc(4,8,n.display_name)),o.Db(2),o.Hb("hidden",!n.tickets_count||"closed"==n.name),o.Db(1),o.Oc(n.tickets_count)}}function Nt(t,e){if(1&t&&(o.Xb(0,"div",20),o.Xb(1,"a",21),o.Xb(2,"span",18),o.Nc(3),o.Wb(),o.Xb(4,"span",19),o.Nc(5),o.Wb(),o.Wb(),o.Wb()),2&t){var n=e.$implicit,i=o.jc();o.Db(1),o.Hb("router-link-active",i.mailboxTags.activeTagIs(n)),o.rc("routerLink",o.wc(7,jt,n.id)),o.Db(2),o.Oc(n.display_name),o.Db(1),o.Hb("hidden",!n.tickets_count),o.Db(1),o.Oc(n.tickets_count)}}var At,Ft=((At=function(){function t(e,n,i,r){_classCallCheck(this,t),this.mailboxTags=e,this.route=n,this.i18n=i,this.breakpoints=r,this.leftColumnIsHidden=!1}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.leftColumnIsHidden=this.breakpoints.isMobile$.value,this.route.params.subscribe((function(e){e.tag_id&&t.mailboxTags.setActiveTag(e.tag_id),e.tag_id||t.mailboxTags.getActiveTagId()||t.mailboxTags.setActiveTag(null)}))}},{key:"toggleLeftSidebar",value:function(){this.leftColumnIsHidden=!this.leftColumnIsHidden}}]),t}()).\u0275fac=function(t){return new(t||At)(o.Rb(s.a),o.Rb(a.a),o.Rb(c.a),o.Rb(l.a))},At.\u0275cmp=o.Lb({type:At,selectors:[["mailbox"]],decls:23,vars:13,consts:[["menuPosition","agent-mailbox","color","accent",1,"box-shadow",3,"showToggleButton","hideToggleBtnOnDesktop","toggleButtonClick"],[1,"nav-searchbar"],[1,"mailbox-container"],[1,"left-column",3,"opened","mode","fixedInViewport","fixedTopGap"],[1,"aside-container","status-tags"],[1,"aside-container-title"],["svgIcon","inbox-custom",1,"title-icon"],["trans","",1,"aside-container-name"],["class","status-tag",4,"ngFor","ngForOf"],[1,"aside-container","category-tags"],["svgIcon","box-filled-custom",1,"title-icon"],["class","category-tag",4,"ngFor","ngForOf"],[1,"bottom-action-container"],["mat-icon-button","","routerLink","/mailbox/tickets/new",3,"matTooltip"],["svgIcon","new-ticket-custom"],[1,"right-column"],[1,"status-tag"],[1,"aside-nav-item",3,"routerLink","ngClass"],[1,"tag-name"],[1,"label","tickets-count"],[1,"category-tag"],[1,"aside-nav-item",3,"routerLink"]],template:function(t,e){1&t&&(o.Xb(0,"material-navbar",0),o.fc("toggleButtonClick",(function(t){return e.toggleLeftSidebar()})),o.Sb(1,"ticket-search-dropdown",1),o.Wb(),o.Xb(2,"mat-sidenav-container",2),o.Xb(3,"mat-sidenav",3),o.kc(4,"async"),o.Xb(5,"section",4),o.Xb(6,"div",5),o.Sb(7,"mat-icon",6),o.Xb(8,"span",7),o.Nc(9,"Inbox"),o.Wb(),o.Wb(),o.Lc(10,Mt,7,12,"div",8),o.Wb(),o.Xb(11,"section",9),o.Xb(12,"div",5),o.Sb(13,"mat-icon",10),o.Xb(14,"span",7),o.Nc(15,"Folders"),o.Wb(),o.Wb(),o.Lc(16,Nt,6,9,"div",11),o.Wb(),o.Xb(17,"div",12),o.Xb(18,"button",13),o.kc(19,"trans"),o.Sb(20,"mat-icon",14),o.Wb(),o.Wb(),o.Wb(),o.Xb(21,"mat-sidenav-content",15),o.Sb(22,"router-outlet"),o.Wb(),o.Wb()),2&t&&(o.rc("showToggleButton",!0)("hideToggleBtnOnDesktop",!0),o.Db(3),o.rc("opened",!e.leftColumnIsHidden)("mode",o.lc(4,9,e.breakpoints.isMobile$)?"over":"side")("fixedInViewport",!0)("fixedTopGap",70),o.Db(7),o.rc("ngForOf",e.mailboxTags.getStatusTags()),o.Db(6),o.rc("ngForOf",e.mailboxTags.getCategoryTags()),o.Db(2),o.rc("matTooltip",o.lc(19,11,"Create new ticket")))},directives:[u.a,Lt,Et.b,Et.a,G.a,C.a,i.s,Q.b,a.g,nt.a,Et.c,a.k,a.i,i.q],pipes:[i.b,at.a],styles:["[_nghost-%COMP%]{display:block;position:relative;max-height:100vh;overflow:hidden}material-navbar[_ngcontent-%COMP%]{height:70px}.left-column[_ngcontent-%COMP%]{width:225px;background-color:var(--be-background-alternative);border-right:1px solid var(--be-divider-default)}.aside-container[_ngcontent-%COMP%]{list-style:none;padding-left:0}.aside-container-title[_ngcontent-%COMP%]{position:relative;padding:20px 15px 15px;text-transform:uppercase;letter-spacing:.03em;color:var(--be-secondary-text);font-weight:500;white-space:nowrap;overflow:hidden}.aside-container-title[_ngcontent-%COMP%]   .title-icon[_ngcontent-%COMP%]{position:absolute;top:17px}.aside-container-title[_ngcontent-%COMP%]   .aside-container-name[_ngcontent-%COMP%]{padding-left:30px}.aside-nav-item[_ngcontent-%COMP%]{display:block;position:relative;padding:10px 0 10px 41px;cursor:pointer;clear:both;text-transform:capitalize;color:#858b94;text-decoration:none;width:100%;border-left:3px solid transparent}.aside-nav-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:1.1rem;text-transform:none;position:absolute;top:12px;right:5px;border-radius:20px;padding:1px 10px;line-height:15px}.aside-nav-item[_ngcontent-%COMP%]   .tag-name[_ngcontent-%COMP%]{display:block;max-width:80%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.aside-nav-item.router-link-active[_ngcontent-%COMP%]{background-color:var(--be-accent-emphasis);border-left-color:var(--be-accent-default)}.aside-nav-item.router-link-active[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{background-color:var(--be-accent-default);color:var(--be-accent-contrast)}.aside-nav-item[_ngcontent-%COMP%]:hover{background-color:var(--be-hover)}.be-dark-mode[_nghost-%COMP%]   .aside-nav-item[_ngcontent-%COMP%], .be-dark-mode   [_nghost-%COMP%]   .aside-nav-item[_ngcontent-%COMP%]{color:var(--be-secondary-text)}.right-column[_ngcontent-%COMP%]{background-color:var(--be-background)}conversation[_ngcontent-%COMP%]{margin-bottom:15px}.bottom-action-container[_ngcontent-%COMP%]{position:absolute;bottom:5px;left:5px;color:var(--be-secondary-text)}"]}),At),zt=n("9C01");function Ht(t,e){1&t&&(o.Xb(0,"no-results-message"),o.Xb(1,"span",3),o.Nc(2,"Nothing To Display."),o.Wb(),o.Xb(3,"span",4),o.Nc(4,"Seems like there are no tickets in this category."),o.Wb(),o.Wb())}var Vt,Bt=((Vt=function(){function t(e,n,i,r,a,o){_classCallCheck(this,t),this.mailboxTags=e,this.router=n,this.modal=i,this.route=r,this.backendEvents=a,this.paginator=o}return _createClass(t,[{key:"ngOnInit",value:function(){this.dataSource=new Y.a({uri:"tickets",dataPaginator:this.paginator,matPaginator:this.matPaginator,matSort:this.matSort,staticParams:{tag_id:this.getActiveTagId()},dontUpdateQueryParams:!0,delayInit:!0}),this.bindToBackendEvents()}},{key:"ngAfterViewInit",value:function(){var t=this;this.route.params.subscribe((function(){t.dataSource.updateConfig({staticParams:{tag_id:t.getActiveTagId()}}).reset()}))}},{key:"ngOnDestroy",value:function(){this.dataSource.disconnect()}},{key:"bindToBackendEvents",value:function(){var t=this;this.backendEvents.ticketCreated.subscribe((function(e){if(e.tags&&e.tags.find((function(e){return e.id===t.mailboxTags.getActiveTagId()}))){var n=t.dataSource.getData();n.find((function(t){return t.id===e.id}))||(e.animated=!0,t.dataSource.setData([e].concat(_toConsumableArray(n))),t.mailboxTags.refresh())}}))}},{key:"getActiveTagId",value:function(){var t=this.mailboxTags.getTagByIdOrName("open");return this.route.snapshot.params.tag_id||t.id}}]),t}()).\u0275fac=function(t){return new(t||Vt)(o.Rb(s.a),o.Rb(a.f),o.Rb(k.a),o.Rb(a.a),o.Rb(zt.a),o.Rb($.a))},Vt.\u0275cmp=o.Lb({type:Vt,selectors:[["agent-mailbox-ticket-list"]],viewQuery:function(t,e){var n;1&t&&(o.Jc(q.a,!0),o.Jc(x.a,!0)),2&t&&(o.yc(n=o.gc())&&(e.matPaginator=n.first),o.yc(n=o.gc())&&(e.matSort=n.first))},features:[o.Cb([$.a])],decls:4,vars:5,consts:[["matSort","",3,"dataSource"],[4,"ngIf"],[3,"dataSource"],["primary-text","","trans",""],["secondary-text","","trans",""]],template:function(t,e){1&t&&(o.Xb(0,"tickets-list",0),o.Lc(1,Ht,5,0,"no-results-message",1),o.kc(2,"async"),o.Wb(),o.Sb(3,"ticket-floating-toolbar",2)),2&t&&(o.rc("dataSource",e.dataSource),o.Db(1),o.rc("ngIf",o.lc(2,3,e.dataSource.noResults$)),o.Db(2),o.rc("dataSource",e.dataSource))},directives:[U,x.a,i.t,ut,dt.a,C.a],pipes:[i.b],styles:["agent-mailbox-ticket-list{display:block;height:calc(100vh - 70px)}"],encapsulation:2}),Vt),Ut=n("9VjZ"),Yt=n("Dbf7"),$t=n("/33f"),qt=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(var n in _classCallCheck(this,t),e)this[n]=e[n]},Kt=n("mWN8");function Qt(t,e){if(1&t&&(o.Xb(0,"div",11),o.Nc(1),o.Wb()),2&t){var n=o.jc();o.Db(1),o.Oc(n.errors["emails.0"])}}var Gt,Zt=((Gt=function(){function t(e,n,i){_classCallCheck(this,t),this.dialogRef=e,this.data=n,this.users=i,this.errors={}}return _createClass(t,[{key:"close",value:function(t){this.dialogRef.close(t)}},{key:"confirm",value:function(){var t=this;this.users.addEmail(this.data.userId,{emails:[this.emailAddress]}).subscribe((function(){t.close(t.emailAddress)}),(function(e){return t.errors=e.messages}))}}]),t}()).\u0275fac=function(t){return new(t||Gt)(o.Rb(v.h),o.Rb(v.a),o.Rb(Kt.a))},Gt.\u0275cmp=o.Lb({type:Gt,selectors:[["email-address-modal"]],decls:15,vars:2,consts:[[1,"modal-header"],["mat-dialog-title","","trans",""],["type","button","mat-icon-button","","tabindex","-1",1,"close-button",3,"click"],["svgIcon","close"],["ngNativeValidate","","mat-dialog-content","",3,"ngSubmit"],[1,"input-container"],["for","email"],["type","email","name","email","id","email","required","",3,"ngModel","ngModelChange"],["class","error",4,"ngIf"],["type","button","mat-button","","trans","",1,"cancel-button",3,"click"],["type","submit","mat-raised-button","","color","accent","trans","",1,"submit-button"],[1,"error"]],template:function(t,e){1&t&&(o.Xb(0,"div",0),o.Xb(1,"h2",1),o.Nc(2,"Enter Email Address"),o.Wb(),o.Xb(3,"button",2),o.fc("click",(function(t){return e.close()})),o.Sb(4,"mat-icon",3),o.Wb(),o.Wb(),o.Xb(5,"form",4),o.fc("ngSubmit",(function(t){return e.confirm()})),o.Xb(6,"div",5),o.Sb(7,"label",6),o.Xb(8,"input",7),o.fc("ngModelChange",(function(t){return e.emailAddress=t})),o.Wb(),o.Lc(9,Qt,2,1,"div",8),o.Wb(),o.Xb(10,"mat-dialog-actions"),o.Xb(11,"button",9),o.fc("click",(function(t){return e.close()})),o.Nc(12,"Cancel"),o.Wb(),o.Xb(13,"button",10),o.Nc(14,"Confirm"),o.Wb(),o.Wb(),o.Wb()),2&t&&(o.Db(8),o.rc("ngModel",e.emailAddress),o.Db(1),o.rc("ngIf",e.errors["emails.0"]))},directives:[v.i,C.a,Q.b,G.a,r.u,r.v,v.f,r.c,r.E,r.t,r.w,i.t,v.c],styles:[""],encapsulation:2}),Gt),Jt=n("Lm4C"),te=n("QeDF"),ee=n("xv5E"),ne=n("IuoX"),ie=n("kmQS");function re(t,e){if(1&t&&o.Sb(0,"mat-icon",34),2&t){o.jc();var n=o.zc(12);o.rc("matMenuTriggerFor",n)}}function ae(t,e){if(1&t&&(o.Xb(0,"div",19),o.Xb(1,"div",16),o.Nc(2,"Envato"),o.Wb(),o.Xb(3,"div",35),o.Nc(4),o.Wb(),o.Wb()),2&t){var n=o.jc();o.Db(4),o.Oc(n.user.purchase_codes[0].envato_username)}}function oe(t,e){if(1&t){var n=o.Yb();o.Xb(0,"button",38),o.fc("click",(function(t){o.Cc(n);var e=o.jc().$implicit;return o.jc().removeEmail(e.address)})),o.Sb(1,"mat-icon",39),o.Wb()}}function se(t,e){if(1&t&&(o.Xb(0,"div",36),o.Lc(1,oe,2,0,"button",37),o.Xb(2,"span"),o.Nc(3),o.Wb(),o.Wb()),2&t){var n=e.$implicit,i=o.jc();o.Db(1),o.rc("ngIf",i.detailsEditable),o.Db(2),o.Oc(n.address)}}function ce(t,e){if(1&t){var n=o.Yb();o.Xb(0,"div",19),o.Xb(1,"button",40),o.fc("click",(function(t){return o.Cc(n),o.jc().openAddEmailModal()})),o.Nc(2,"Add Email"),o.Wb(),o.Wb()}}var le,ue,de=((le=function(){function t(e,n,i,a,o,s,c,l){_classCallCheck(this,t),this.users=e,this.route=n,this.toast=i,this.modal=a,this.avatarValidator=o,this.currentUser=s,this.settings=c,this.paginator=l,this.user=new $t.a({purchase_codes:[]}),this.detailsEditable=!1,this.profile=new r.k({details:new r.h,notes:new r.h})}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.route.data.subscribe((function(e){t.hydrateProfile(e.user),t.bindFormControls(),t.createDataSource()})),this.detailsEditable=this.currentUser.hasPermission("users.update")}},{key:"openAddEmailModal",value:function(){var t=this;this.modal.show(Zt,{userId:this.user.id}).afterClosed().subscribe((function(e){t.user.secondary_emails.push(new qt({address:e}))}))}},{key:"removeEmail",value:function(t){var e=this;this.users.removeEmail(this.user.id,{emails:[t]}).subscribe((function(){var n=e.user.secondary_emails.findIndex((function(e){return e.address===t}));e.user.secondary_emails.splice(n,1)}))}},{key:"openAvatarUploadDialog",value:function(){var t=this;Object(Jt.a)({types:[te.a.image]}).then((function(e){t.avatarValidator.validateWithToast(e[0]).failed||t.users.uploadAvatar(t.user.id,e).subscribe((function(e){t.user.avatar=e.user.avatar,t.currentUser.set("avatar",e.user.avatar),t.toast.open("Avatar updated")}),(function(e){var n=Object.keys(e.messages)[0];t.toast.open(e.messages[n])}))}))}},{key:"deleteAvatar",value:function(){var t=this;this.users.deleteAvatar(this.user.id).subscribe((function(e){t.user.avatar=e.avatar,t.toast.open("Avatar removed.")}))}},{key:"syncUserTags",value:function(t){this.users.syncTags(this.user.id,{tags:t}).subscribe()}},{key:"hydrateProfile",value:function(t){this.user=t,this.tagsManager.selectedTags=t.tags.map((function(t){return t.name})),t.details&&this.profile.setValue({details:t.details.details,notes:t.details.notes})}},{key:"createDataSource",value:function(){this.dataSource=new Y.a({uri:"tickets",staticParams:{user_id:this.user.id},dataPaginator:this.paginator,matPaginator:this.matPaginator,matSort:this.matSort,dontUpdateQueryParams:!0}).init()}},{key:"bindFormControls",value:function(){var t=this;this.profile.valueChanges.pipe(Object(h.a)(600),Object(b.a)()).subscribe((function(e){t.users.updateDetails(t.user.id,e).subscribe((function(){t.toast.open("Updated user details.")}))}))}}]),t}()).\u0275fac=function(t){return new(t||le)(o.Rb(Kt.a),o.Rb(a.a),o.Rb(J.a),o.Rb(k.a),o.Rb(ne.a),o.Rb(tt.a),o.Rb(ie.a),o.Rb($.a))},le.\u0275cmp=o.Lb({type:le,selectors:[["user-profile"]],viewQuery:function(t,e){var n;1&t&&(o.Jc(q.a,!0),o.Jc(x.a,!0),o.Jc(ee.a,!0)),2&t&&(o.yc(n=o.gc())&&(e.matPaginator=n.first),o.yc(n=o.gc())&&(e.matSort=n.first),o.yc(n=o.gc())&&(e.tagsManager=n.first))},features:[o.Cb([$.a])],decls:56,vars:20,consts:[["menuPosition","agent-mailbox"],[1,"nav-searchbar"],[1,"content"],["customScrollbar","lite",1,"sidebar"],[1,"panel"],[1,"panel-body"],[1,"user-info"],[1,"avatar-container"],["alt","user avatar",1,"user-avatar",3,"src"],[1,"hover-overlay"],["svgIcon","edit",3,"matMenuTriggerFor",4,"ngIf"],[1,"update-avatar-menu"],["updateAvatarMenu","matMenu"],["mat-menu-item","","trans","",1,"upload-avatar-item",3,"click"],["mat-menu-item","","trans","",1,"delete-avatar-item",3,"click"],[1,"names"],[1,"name"],[1,"email","primary-email"],[1,"user-details"],[1,"details-row"],["trans","",1,"name"],[1,"input-container","value"],["name","details","id","details",3,"formControl","readonly"],["name","notes","id","notes",3,"formControl","readonly"],["class","details-row",4,"ngIf"],[1,"emails","value"],["class","email secondary-email",4,"ngFor","ngForOf"],["trans","",1,"panel-header"],[3,"readonly","onChange"],[1,"tickets"],["matSort","",3,"openTicketInModal","dataSource"],["primary-text","","trans",""],["secondary-text","","trans",""],[3,"dataSource"],["svgIcon","edit",3,"matMenuTriggerFor"],[1,"value"],[1,"email","secondary-email"],["class","remove-email-button","mat-icon-button","",3,"click",4,"ngIf"],["mat-icon-button","",1,"remove-email-button",3,"click"],["svgIcon","close"],["mat-flat-button","","color","accent","trans","",1,"add-email-button",3,"click"]],template:function(t,e){1&t&&(o.Xb(0,"material-navbar",0),o.Sb(1,"ticket-search-dropdown",1),o.Wb(),o.Xb(2,"div",2),o.Xb(3,"aside",3),o.Xb(4,"div",4),o.Xb(5,"div",5),o.Xb(6,"div",6),o.Xb(7,"div",7),o.Sb(8,"img",8),o.Xb(9,"div",9),o.Lc(10,re,1,1,"mat-icon",10),o.Wb(),o.Wb(),o.Xb(11,"mat-menu",11,12),o.Xb(13,"button",13),o.fc("click",(function(t){return e.openAvatarUploadDialog()})),o.Nc(14,"Upload"),o.Wb(),o.Xb(15,"button",14),o.fc("click",(function(t){return e.deleteAvatar()})),o.Nc(16,"Remove"),o.Wb(),o.Wb(),o.Xb(17,"div",15),o.Xb(18,"div",16),o.Nc(19),o.Wb(),o.Xb(20,"div",17),o.Nc(21),o.Wb(),o.Wb(),o.Wb(),o.Xb(22,"div",18),o.Xb(23,"div",19),o.Xb(24,"div",20),o.Nc(25,"Details"),o.Wb(),o.Xb(26,"div",21),o.Sb(27,"textarea",22),o.Wb(),o.Wb(),o.Xb(28,"div",19),o.Xb(29,"div",20),o.Nc(30,"Notes"),o.Wb(),o.Xb(31,"div",21),o.Sb(32,"textarea",23),o.Wb(),o.Wb(),o.Lc(33,ae,5,1,"div",24),o.Xb(34,"div",19),o.Xb(35,"div",20),o.Nc(36,"Emails"),o.Wb(),o.Xb(37,"div",25),o.Xb(38,"div",17),o.Nc(39),o.Wb(),o.Lc(40,se,4,2,"div",26),o.Wb(),o.Wb(),o.Lc(41,ce,3,0,"div",24),o.Wb(),o.Wb(),o.Wb(),o.Xb(42,"div",4),o.Xb(43,"div",27),o.Nc(44,"Tags"),o.Wb(),o.Xb(45,"div",5),o.Xb(46,"tags-manager",28),o.fc("onChange",(function(t){return e.syncUserTags(t)})),o.Wb(),o.Wb(),o.Wb(),o.Wb(),o.Xb(47,"div",29),o.Xb(48,"tickets-list",30),o.Xb(49,"no-results-message"),o.kc(50,"async"),o.Xb(51,"span",31),o.Nc(52,"Nothing To Display."),o.Wb(),o.Xb(53,"span",32),o.Nc(54,"Seems like this user did not create any tickets yet."),o.Wb(),o.Wb(),o.Wb(),o.Sb(55,"ticket-floating-toolbar",33),o.Wb(),o.Wb()),2&t&&(o.Db(8),o.sc("src",e.user.avatar,o.Fc),o.Db(2),o.rc("ngIf",e.detailsEditable),o.Db(9),o.Oc(e.user.display_name),o.Db(2),o.Oc(e.user.email),o.Db(6),o.rc("formControl",e.profile.controls.details)("readonly",!e.detailsEditable),o.Db(5),o.rc("formControl",e.profile.controls.notes)("readonly",!e.detailsEditable),o.Db(1),o.rc("ngIf",e.user.purchase_codes&&(null==e.user.purchase_codes[0]?null:e.user.purchase_codes[0].envato_username)),o.Db(6),o.Oc(e.user.email),o.Db(1),o.rc("ngForOf",e.user.secondary_emails),o.Db(1),o.rc("ngIf",e.detailsEditable),o.Db(5),o.rc("readonly",!e.detailsEditable),o.Db(2),o.rc("openTicketInModal",!0)("dataSource",e.dataSource),o.Db(1),o.Hb("hidden",!o.lc(50,18,e.dataSource.noResults$)),o.Db(6),o.rc("dataSource",e.dataSource))},directives:[u.a,Lt,kt.a,i.t,it.e,it.b,C.a,r.c,r.t,r.i,i.s,ee.a,U,x.a,dt.a,ut,G.a,it.d,Q.b],pipes:[i.b],styles:["user-profile{display:block;width:100%;height:100%;background-color:var(--be-background-alternative)}user-profile .content{display:-webkit-box;display:flex;padding:25px;width:100%;height:calc(100vh - 70px);overflow:hidden}user-profile .content .sidebar{-webkit-box-flex:0;flex:0 0 320px;width:320px;margin-right:15px;height:100%;overflow:auto}user-profile .content .sidebar .panel{margin-bottom:15px;background-color:var(--be-background);border:1px solid var(--be-divider-default);padding:10px}user-profile .content .sidebar .panel .panel-header{padding:5px}user-profile .content .sidebar .user-info{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;border-bottom:1px solid var(--be-divider-default);margin-bottom:15px;padding-bottom:15px}user-profile .content .sidebar .user-info .avatar-container{width:65px;height:65px;position:relative}user-profile .content .sidebar .user-info .avatar-container:hover .hover-overlay{display:-webkit-box;display:flex}user-profile .content .sidebar .user-info .avatar-container.disabled{cursor:default}user-profile .content .sidebar .user-info .avatar-container.disabled>.hover-overlay{display:none}user-profile .content .sidebar .user-info .avatar-container .hover-overlay{display:none;position:absolute;top:0;bottom:0;width:100%;height:100%;background-color:hsla(0,0%,100%,.5);-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center;cursor:pointer}user-profile .content .sidebar .user-info .avatar-container .hover-overlay>mat-icon{width:34px;height:34px;color:var(--be-secondary-text)}user-profile .content .sidebar .user-info .avatar-container>img{width:100%;height:100%;-o-object-fit:cover;object-fit:cover}user-profile .content .sidebar .user-info>.names{margin-left:10px}user-profile .content .sidebar .user-info>.names>.name{font-size:1.5rem}user-profile .content .sidebar .user-info>.names>.email{color:var(--be-secondary-text)}user-profile .content .sidebar .user-details{margin-top:15px}user-profile .content .sidebar .user-details .details-row{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;margin-bottom:15px}user-profile .content .sidebar .user-details .details-row .name{-webkit-box-flex:0;flex:0 0 30%;max-width:40px;margin-right:20px}user-profile .content .sidebar .user-details .details-row .value{-webkit-box-flex:1;flex:1 1 auto}user-profile .content .sidebar .user-details .details-row .value.input-container{height:auto}user-profile .content .sidebar .user-details .details-row .value.input-container>textarea{height:auto;padding:5px;border-radius:3px}user-profile .content .sidebar .user-details .emails .primary-email{font-weight:500}user-profile .content .sidebar .user-details .emails .secondary-email{margin-top:8px}user-profile .content .tickets{-webkit-box-flex:1;flex:1 1 auto;height:100%;border:1px solid var(--be-divider-default);min-width:0}"],encapsulation:2}),le),he=n("lJxs"),be=((ue=function(){function t(e,n,i){_classCallCheck(this,t),this.tickets=e,this.users=n,this.router=i}return _createClass(t,[{key:"resolve",value:function(t,e){var n=this;return this.users.get(t.params.id,{with:"tags,purchase_codes,secondary_emails,details"}).pipe(Object(he.a)((function(t){if(t.user)return t.user;n.router.navigate(["/mailbox"])})))}}]),t}()).\u0275fac=function(t){return new(t||ue)(o.bc(g.a),o.bc(Kt.a),o.bc(a.f))},ue.\u0275prov=o.Nb({token:ue,factory:ue.\u0275fac,providedIn:"root"}),ue),fe=n("0QyJ"),pe=n("2Vo4"),ge=n("h586"),me=n("KKQg"),ve=n("rG4v"),ye=n("83jf");function ke(t,e){if(1&t&&(o.Xb(0,"div",26),o.Nc(1),o.Wb()),2&t){var n=o.jc().ngIf;o.Db(1),o.Oc(n.user_id)}}function _e(t,e){if(1&t&&(o.Xb(0,"mat-option",27),o.Xb(1,"div",28),o.Sb(2,"img",29),o.Xb(3,"div",30),o.Xb(4,"div",31),o.Nc(5),o.Wb(),o.Xb(6,"div",32),o.Nc(7),o.Wb(),o.Wb(),o.Wb(),o.Wb()),2&t){var n=e.$implicit;o.rc("value",n),o.Db(2),o.rc("src",n.avatar,o.Fc),o.Db(3),o.Oc(n.display_name),o.Db(2),o.Oc(n.email)}}function we(t,e){if(1&t&&(o.Xb(0,"div",33),o.Nc(1),o.Wb()),2&t){var n=o.jc().ngIf;o.Db(1),o.Oc(n.subject)}}function xe(t,e){if(1&t&&(o.Xb(0,"option",34),o.Nc(1),o.Wb()),2&t){var n=e.$implicit;o.rc("ngValue",n.id),o.Db(1),o.Oc(n.display_name)}}function Ce(t,e){if(1&t&&(o.Xb(0,"div",35),o.Nc(1),o.Wb()),2&t){var n=o.jc().ngIf;o.Db(1),o.Oc(n.category)}}function De(t,e){if(1&t&&(o.Xb(0,"option",36),o.Nc(1),o.Wb()),2&t){var n=e.$implicit;o.rc("ngValue",n.name),o.Db(1),o.Oc(n.display_name)}}function Se(t,e){if(1&t&&(o.Xb(0,"div",37),o.Nc(1),o.Wb()),2&t){var n=o.jc().ngIf;o.Db(1),o.Oc(n.status)}}function Oe(t,e){if(1&t&&(o.Xb(0,"div",38),o.Nc(1),o.Wb()),2&t){var n=o.jc().ngIf;o.Db(1),o.Oc(n.body)}}function Ie(t,e){if(1&t){var n=o.Yb();o.Xb(0,"form",1),o.fc("ngSubmit",(function(t){return o.Cc(n),o.jc().createTicket()})),o.Xb(1,"div",2),o.Xb(2,"label",3),o.Nc(3,"Customer"),o.Wb(),o.Sb(4,"input",4),o.Lc(5,ke,2,1,"div",5),o.Wb(),o.Xb(6,"mat-autocomplete",6,7),o.Lc(8,_e,8,4,"mat-option",8),o.kc(9,"async"),o.Wb(),o.Xb(10,"div",2),o.Xb(11,"label",9),o.Nc(12,"Subject"),o.Wb(),o.Sb(13,"input",10),o.Lc(14,we,2,1,"div",11),o.Wb(),o.Xb(15,"div",2),o.Xb(16,"label",12),o.Nc(17,"Category"),o.Wb(),o.Xb(18,"select",13),o.Lc(19,xe,2,2,"option",14),o.Wb(),o.Lc(20,Ce,2,1,"div",15),o.Wb(),o.Xb(21,"div",2),o.Xb(22,"label",16),o.Nc(23,"Status"),o.Wb(),o.Xb(24,"select",17),o.Lc(25,De,2,2,"option",18),o.Wb(),o.Lc(26,Se,2,1,"div",19),o.Wb(),o.Xb(27,"div",20),o.Xb(28,"label",21),o.Nc(29,"Ticket Body"),o.Wb(),o.Xb(30,"text-editor",22),o.fc("onFileUpload",(function(t){return o.Cc(n),o.jc().uploadFiles(t)}))("onChange",(function(t){return o.Cc(n),o.jc().setBody(t)})),o.Wb(),o.Sb(31,"upload-progress-bar"),o.Lc(32,Oe,2,1,"div",23),o.Wb(),o.Xb(33,"reply-attachment-list",24),o.fc("detached",(function(t){return o.Cc(n),o.jc().removeAttachment(t)})),o.kc(34,"async"),o.Wb(),o.Xb(35,"button",25),o.kc(36,"async"),o.Nc(37,"Create"),o.Wb(),o.Wb()}if(2&t){var i=e.ngIf,r=o.zc(7),a=o.jc();o.rc("formGroup",a.ticketForm),o.Db(4),o.rc("matAutocomplete",r),o.Db(1),o.rc("ngIf",i.user_id),o.Db(1),o.rc("displayWith",a.displayUserFn),o.Db(2),o.rc("ngForOf",o.lc(9,14,a.users$)),o.Db(6),o.rc("ngIf",i.subject),o.Db(5),o.rc("ngForOf",a.ticketCategories),o.Db(1),o.rc("ngIf",i.category),o.Db(5),o.rc("ngForOf",a.statusTags),o.Db(1),o.rc("ngIf",i.status),o.Db(4),o.rc("minHeight",230),o.Db(2),o.rc("ngIf",i.body),o.Db(1),o.rc("attachments",o.lc(34,16,a.attachments$)),o.Db(2),o.rc("disabled",o.lc(36,18,a.loading$))}}var Re,Xe,Te=((Re=function(){function t(e,n,i,r,a,o,s,c,l){_classCallCheck(this,t),this.fb=e,this.settings=n,this.uploadQueue=i,this.users=r,this.tickets=a,this.toast=o,this.router=s,this.route=c,this.mailboxTags=l,this.errors$=new pe.a({}),this.attachments$=new pe.a([]),this.users$=new pe.a([]),this.loading$=new pe.a(!1),this.ticketCategories=[],this.statusTags=[],this.ticketForm=this.fb.group({customer:[""],subject:[""],category:[""],body:[""],status:[""]})}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.bindToCustomerControl(),this.statusTags=this.mailboxTags.getStatusTags(!0),this.ticketForm.patchValue({status:this.statusTags[0].name}),this.route.data.subscribe((function(e){t.ticketCategories=e.categories,e.categories.length&&t.ticketForm.patchValue({category:t.ticketCategories[0].id})}))}},{key:"createTicket",value:function(){var t=this;this.loading$.next(!0),this.tickets.create(this.getPayload()).pipe(Object(m.a)((function(){return t.loading$.next(!1)}))).subscribe((function(){t.toast.open("Ticket created"),t.mailboxTags.refresh(),t.router.navigateByUrl("/mailbox/tickets")}),(function(e){return t.errors$.next(e.messages)}))}},{key:"getPayload",value:function(){var t=this.ticketForm.value;return t.user_id=t.customer.id,t.uploads=this.uploadQueue.getAllCompleted().map((function(t){return t.id})),t}},{key:"setBody",value:function(t){this.ticketForm.patchValue({body:t})}},{key:"uploadFiles",value:function(t){var e=this;this.uploadQueue.start(t).subscribe((function(t){e.attachments$.next([].concat(_toConsumableArray(e.attachments$.value),[t.fileEntry]))}))}},{key:"removeAttachment",value:function(t){for(var e=this.attachments$.value.slice(),n=0;n<e.length;n++)e[n].id===t.id&&e.splice(n,1);this.attachments$.next(e)}},{key:"bindToCustomerControl",value:function(){var t=this;this.ticketForm.get("customer").valueChanges.pipe(Object(h.a)(250),Object(b.a)(),Object(f.a)((function(e){return t.searchUsers(e)})),Object(p.a)((function(){return Object(vt.a)([])}))).subscribe((function(e){t.users$.next(e)}))}},{key:"searchUsers",value:function(t){return t&&"string"==typeof t?this.users.getAll({query:t}):Object(vt.a)([])}},{key:"displayUserFn",value:function(t){return t?t.email:void 0}}]),t}()).\u0275fac=function(t){return new(t||Re)(o.Rb(r.g),o.Rb(ie.a),o.Rb(ge.a),o.Rb(Kt.a),o.Rb(g.a),o.Rb(J.a),o.Rb(a.f),o.Rb(a.a),o.Rb(s.a))},Re.\u0275cmp=o.Lb({type:Re,selectors:[["create-ticket"]],features:[o.Cb([g.a,ge.a])],decls:2,vars:3,consts:[["class","many-inputs","ngNativeValidate","",3,"formGroup","ngSubmit",4,"ngIf"],["ngNativeValidate","",1,"many-inputs",3,"formGroup","ngSubmit"],[1,"input-container"],["for","user","trans",""],["type","text","id","user","formControlName","customer","required","",3,"matAutocomplete"],["class","error user-error",4,"ngIf"],[1,"create-ticket-user-autocomplete",3,"displayWith"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["for","subject","trans",""],["type","text","id","subject","formControlName","subject","required",""],["class","error subject-error",4,"ngIf"],["for","category-select","trans",""],["name","category","id","category-select","formControlName","category","required",""],[3,"ngValue",4,"ngFor","ngForOf"],["class","error category-error",4,"ngIf"],["for","status-select","trans",""],["name","status","id","status-select","formControlName","status","required",""],["class","status-tag-option",3,"ngValue",4,"ngFor","ngForOf"],["class","error status-error",4,"ngIf"],[1,"input-container","body-input-container"],["for","description","trans",""],["id","description","inlineUploadPrefix","ticket_images",3,"minHeight","onFileUpload","onChange"],["class","error body-error",4,"ngIf"],[3,"attachments","detached"],["mat-raised-button","","color","accent","type","submit","trans","",3,"disabled"],[1,"error","user-error"],[3,"value"],[1,"create-ticket-user-option"],[3,"src"],[1,"meta"],[1,"name"],[1,"email"],[1,"error","subject-error"],[3,"ngValue"],[1,"error","category-error"],[1,"status-tag-option",3,"ngValue"],[1,"error","status-error"],[1,"error","body-error"]],template:function(t,e){1&t&&(o.Lc(0,Ie,38,20,"form",0),o.kc(1,"async")),2&t&&o.rc("ngIf",o.lc(1,1,e.errors$))},directives:[i.t,r.u,r.l,C.a,r.c,yt.c,r.t,r.j,r.E,yt.a,i.s,r.F,me.a,ve.a,ye.a,Q.b,_t.n,r.y,r.I],pipes:[i.b],styles:["create-ticket{display:block;padding:25px;overflow:auto;height:calc(100vh - 70px)}create-ticket form{max-width:800px}create-ticket .error{margin-top:7px;color:#f44336}create-ticket option,create-ticket select{text-transform:capitalize}.create-ticket-user-autocomplete .mat-option{height:auto;line-height:normal}.create-ticket-user-option{display:-webkit-box;display:flex;padding:8px 0}.create-ticket-user-option img{width:40px;height:40px;flex-shrink:0;margin-right:10px;border-radius:4px;overflow:hidden}.create-ticket-user-option .name{color:var(--be-text);font-size:1.5rem}.create-ticket-user-option .email{color:var(--be-secondary-text);font-size:1.4rem}"],encapsulation:2,changeDetection:0}),Re),Pe=n("i70M"),We=n("vhtE"),Le=a.j.forChild([{path:"",canActivate:[fe.a,We.a],canActivateChild:[fe.a,We.a],data:{permissions:["tickets.view","tickets.create"]},children:[{path:"",redirectTo:"tickets",pathMatch:"full"},{path:"tickets",component:Ft,data:{permissions:["tickets.view"]},children:[{path:"",component:Bt}]},{path:"tickets/new",component:Ft,resolve:{categories:Pe.a},data:{permissions:["tickets.create"]},children:[{path:"",component:Te}]},{path:"tickets/tag/:tag_id",component:Ft,data:{permissions:["tickets.view"]},children:[{path:"",component:Bt},{path:"ticket/:ticket_id",component:Ut.a,resolve:{ticket:Yt.a}}]},{path:"users/:id",component:de,resolve:{user:be},data:{permissions:["users.view","tickets.view","tags.view"]}}]}]),Ee=n("DldP"),je=n("YHvm"),Me=n("gFpt"),Ne=n("6rvT"),Ae=n("Iysn"),Fe=n("JZOH"),ze=n("yLOo"),He=n("AsKK"),Ve=((Xe=function t(){_classCallCheck(this,t)}).\u0275mod=o.Pb({type:Xe}),Xe.\u0275inj=o.Ob({factory:function(t){return new(t||Xe)},imports:[[i.c,He.a,Ne.a,_t.t]]}),Xe),Be=n("GSRO"),Ue=n("hD7E");n.d(e,"TicketingModule",(function(){return $e}));var Ye,$e=((Ye=function t(){_classCallCheck(this,t)}).\u0275mod=o.Pb({type:Ye}),Ye.\u0275inj=o.Ob({factory:function(t){return new(t||Ye)},providers:[g.a,be],imports:[[i.c,r.n,r.D,a.j,Ee.a,je.a,Me.a,Ne.a,Ae.a,Fe.a,ze.a,Ve,Be.a,Ue.a,Le,G.b,Q.c,nt.b,w.l,x.c,q.c,yt.b,it.c,v.g,Et.d]]}),Ye)},A5z7:function(t,e,n){"use strict";n.d(e,"a",(function(){return x})),n.d(e,"b",(function(){return T})),n.d(e,"c",(function(){return R})),n.d(e,"d",(function(){return C})),n.d(e,"e",(function(){return W}));var i=n("FtGj"),r=n("fXoL"),a=n("FKr1"),o=n("8LU1"),s=n("XNiG"),c=n("VRyK"),l=n("IzEk"),u=n("1G5W"),d=n("JX91"),h=n("R1ws"),b=n("u47x"),f=n("0EQZ"),p=n("kmnG"),g=n("nLfN"),m=n("cH1L"),v=n("3Pt+"),y=["*"],k=Object(a.x)(Object(a.y)(Object(a.z)((function t(e){_classCallCheck(this,t),this._elementRef=e}))),"primary"),_=function(){var t=function t(){_classCallCheck(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Mb({type:t,selectors:[["mat-chip-avatar"],["","matChipAvatar",""]],hostAttrs:[1,"mat-chip-avatar"]}),t}(),w=function(){var t=function t(){_classCallCheck(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Mb({type:t,selectors:[["mat-chip-trailing-icon"],["","matChipTrailingIcon",""]],hostAttrs:[1,"mat-chip-trailing-icon"]}),t}(),x=function(){var t=function(t){function e(t,n,i,o,c,l){var u;return _classCallCheck(this,e),(u=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,t)))._elementRef=t,u._ngZone=n,u._changeDetectorRef=l,u._hasFocus=!1,u.chipListSelectable=!0,u._chipListMultiple=!1,u._selected=!1,u._selectable=!0,u._removable=!0,u._onFocus=new s.a,u._onBlur=new s.a,u.selectionChange=new r.o,u.destroyed=new r.o,u.removed=new r.o,u._addHostClassName(),u._chipRipple=new a.u(_assertThisInitialized(u),n,t,i),u._chipRipple.setupTriggerEvents(t),u.rippleConfig=o||{},u._animationsDisabled="NoopAnimations"===c,u}return _inherits(e,t),_createClass(e,[{key:"_addHostClassName",value:function(){var t=this._elementRef.nativeElement;t.hasAttribute("mat-basic-chip")||"mat-basic-chip"===t.tagName.toLowerCase()?t.classList.add("mat-basic-chip"):t.classList.add("mat-standard-chip")}},{key:"ngOnDestroy",value:function(){this.destroyed.emit({chip:this}),this._chipRipple._removeTriggerEvents()}},{key:"select",value:function(){this._selected||(this._selected=!0,this._dispatchSelectionChange(),this._markForCheck())}},{key:"deselect",value:function(){this._selected&&(this._selected=!1,this._dispatchSelectionChange(),this._markForCheck())}},{key:"selectViaInteraction",value:function(){this._selected||(this._selected=!0,this._dispatchSelectionChange(!0),this._markForCheck())}},{key:"toggleSelected",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._selected=!this.selected,this._dispatchSelectionChange(t),this._markForCheck(),this.selected}},{key:"focus",value:function(){this._hasFocus||(this._elementRef.nativeElement.focus(),this._onFocus.next({chip:this})),this._hasFocus=!0}},{key:"remove",value:function(){this.removable&&this.removed.emit({chip:this})}},{key:"_handleClick",value:function(t){this.disabled?t.preventDefault():t.stopPropagation()}},{key:"_handleKeydown",value:function(t){if(!this.disabled)switch(t.keyCode){case i.e:case i.c:this.remove(),t.preventDefault();break;case i.v:this.selectable&&this.toggleSelected(!0),t.preventDefault()}}},{key:"_blur",value:function(){var t=this;this._ngZone.onStable.asObservable().pipe(Object(l.a)(1)).subscribe((function(){t._ngZone.run((function(){t._hasFocus=!1,t._onBlur.next({chip:t})}))}))}},{key:"_dispatchSelectionChange",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.selectionChange.emit({source:this,isUserInput:t,selected:this._selected})}},{key:"_markForCheck",value:function(){this._changeDetectorRef&&this._changeDetectorRef.markForCheck()}},{key:"rippleDisabled",get:function(){return this.disabled||this.disableRipple||!!this.rippleConfig.disabled}},{key:"selected",get:function(){return this._selected},set:function(t){var e=Object(o.c)(t);e!==this._selected&&(this._selected=e,this._dispatchSelectionChange())}},{key:"value",get:function(){return void 0!==this._value?this._value:this._elementRef.nativeElement.textContent},set:function(t){this._value=t}},{key:"selectable",get:function(){return this._selectable&&this.chipListSelectable},set:function(t){this._selectable=Object(o.c)(t)}},{key:"removable",get:function(){return this._removable},set:function(t){this._removable=Object(o.c)(t)}},{key:"ariaSelected",get:function(){return this.selectable&&(this._chipListMultiple||this.selected)?this.selected.toString():null}}]),e}(k);return t.\u0275fac=function(e){return new(e||t)(r.Rb(r.l),r.Rb(r.A),r.Rb(g.a),r.Rb(a.h,8),r.Rb(h.a,8),r.Rb(r.h))},t.\u0275dir=r.Mb({type:t,selectors:[["mat-basic-chip"],["","mat-basic-chip",""],["mat-chip"],["","mat-chip",""]],contentQueries:function(t,e,n){var i;1&t&&(r.Jb(n,_,!0),r.Jb(n,w,!0),r.Jb(n,C,!0)),2&t&&(r.yc(i=r.gc())&&(e.avatar=i.first),r.yc(i=r.gc())&&(e.trailingIcon=i.first),r.yc(i=r.gc())&&(e.removeIcon=i.first))},hostAttrs:["role","option",1,"mat-chip"],hostVars:14,hostBindings:function(t,e){1&t&&r.fc("click",(function(t){return e._handleClick(t)}))("keydown",(function(t){return e._handleKeydown(t)}))("focus",(function(t){return e.focus()}))("blur",(function(t){return e._blur()})),2&t&&(r.Eb("tabindex",e.disabled?null:-1)("disabled",e.disabled||null)("aria-disabled",e.disabled.toString())("aria-selected",e.ariaSelected),r.Hb("mat-chip-selected",e.selected)("mat-chip-with-avatar",e.avatar)("mat-chip-with-trailing-icon",e.trailingIcon||e.removeIcon)("mat-chip-disabled",e.disabled)("_mat-animation-noopable",e._animationsDisabled))},inputs:{color:"color",disabled:"disabled",disableRipple:"disableRipple",selected:"selected",value:"value",selectable:"selectable",removable:"removable"},outputs:{selectionChange:"selectionChange",destroyed:"destroyed",removed:"removed"},exportAs:["matChip"],features:[r.Ab]}),t}(),C=function(){var t=function(){function t(e){_classCallCheck(this,t),this._parentChip=e}return _createClass(t,[{key:"_handleClick",value:function(t){var e=this._parentChip;e.removable&&!e.disabled&&e.remove(),t.stopPropagation()}}]),t}();return t.\u0275fac=function(e){return new(e||t)(r.Rb(x))},t.\u0275dir=r.Mb({type:t,selectors:[["","matChipRemove",""]],hostAttrs:["type","button",1,"mat-chip-remove","mat-chip-trailing-icon"],hostBindings:function(t,e){1&t&&r.fc("click",(function(t){return e._handleClick(t)}))}}),t}(),D=new r.r("mat-chips-default-options"),S=Object(a.A)((function t(e,n,i,r){_classCallCheck(this,t),this._defaultErrorStateMatcher=e,this._parentForm=n,this._parentFormGroup=i,this.ngControl=r})),O=0,I=function t(e,n){_classCallCheck(this,t),this.source=e,this.value=n},R=function(){var t=function(t){function e(t,n,i,a,o,c,l){var u;return _classCallCheck(this,e),(u=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,c,a,o,l)))._elementRef=t,u._changeDetectorRef=n,u._dir=i,u.ngControl=l,u.controlType="mat-chip-list",u._lastDestroyedChipIndex=null,u._destroyed=new s.a,u._uid="mat-chip-list-".concat(O++),u._tabIndex=0,u._userTabIndex=null,u._onTouched=function(){},u._onChange=function(){},u._multiple=!1,u._compareWith=function(t,e){return t===e},u._required=!1,u._disabled=!1,u.ariaOrientation="horizontal",u._selectable=!0,u.change=new r.o,u.valueChange=new r.o,u.ngControl&&(u.ngControl.valueAccessor=_assertThisInitialized(u)),u}return _inherits(e,t),_createClass(e,[{key:"ngAfterContentInit",value:function(){var t=this;this._keyManager=new b.g(this.chips).withWrap().withVerticalOrientation().withHorizontalOrientation(this._dir?this._dir.value:"ltr"),this._dir&&this._dir.change.pipe(Object(u.a)(this._destroyed)).subscribe((function(e){return t._keyManager.withHorizontalOrientation(e)})),this._keyManager.tabOut.pipe(Object(u.a)(this._destroyed)).subscribe((function(){t._allowFocusEscape()})),this.chips.changes.pipe(Object(d.a)(null),Object(u.a)(this._destroyed)).subscribe((function(){t.disabled&&Promise.resolve().then((function(){t._syncChipsState()})),t._resetChips(),t._initializeSelection(),t._updateTabIndex(),t._updateFocusForDestroyedChips(),t.stateChanges.next()}))}},{key:"ngOnInit",value:function(){this._selectionModel=new f.c(this.multiple,void 0,!1),this.stateChanges.next()}},{key:"ngDoCheck",value:function(){this.ngControl&&this.updateErrorState()}},{key:"ngOnDestroy",value:function(){this._destroyed.next(),this._destroyed.complete(),this.stateChanges.complete(),this._dropSubscriptions()}},{key:"registerInput",value:function(t){this._chipInput=t}},{key:"setDescribedByIds",value:function(t){this._ariaDescribedby=t.join(" ")}},{key:"writeValue",value:function(t){this.chips&&this._setSelectionByValue(t,!1)}},{key:"registerOnChange",value:function(t){this._onChange=t}},{key:"registerOnTouched",value:function(t){this._onTouched=t}},{key:"setDisabledState",value:function(t){this.disabled=t,this.stateChanges.next()}},{key:"onContainerClick",value:function(t){this._originatesFromChip(t)||this.focus()}},{key:"focus",value:function(t){this.disabled||this._chipInput&&this._chipInput.focused||(this.chips.length>0?(this._keyManager.setFirstItemActive(),this.stateChanges.next()):(this._focusInput(t),this.stateChanges.next()))}},{key:"_focusInput",value:function(t){this._chipInput&&this._chipInput.focus(t)}},{key:"_keydown",value:function(t){var e=t.target;t.keyCode===i.c&&this._isInputEmpty(e)?(this._keyManager.setLastItemActive(),t.preventDefault()):e&&e.classList.contains("mat-chip")&&(t.keyCode===i.j?(this._keyManager.setFirstItemActive(),t.preventDefault()):t.keyCode===i.g?(this._keyManager.setLastItemActive(),t.preventDefault()):this._keyManager.onKeydown(t),this.stateChanges.next())}},{key:"_updateTabIndex",value:function(){this._tabIndex=this._userTabIndex||(0===this.chips.length?-1:0)}},{key:"_updateFocusForDestroyedChips",value:function(){if(null!=this._lastDestroyedChipIndex)if(this.chips.length){var t=Math.min(this._lastDestroyedChipIndex,this.chips.length-1);this._keyManager.setActiveItem(t)}else this.focus();this._lastDestroyedChipIndex=null}},{key:"_isValidIndex",value:function(t){return t>=0&&t<this.chips.length}},{key:"_isInputEmpty",value:function(t){return!(!t||"input"!==t.nodeName.toLowerCase()||t.value)}},{key:"_setSelectionByValue",value:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this._clearSelection(),this.chips.forEach((function(t){return t.deselect()})),Array.isArray(t))t.forEach((function(t){return e._selectValue(t,n)})),this._sortValues();else{var i=this._selectValue(t,n);i&&n&&this._keyManager.setActiveItem(i)}}},{key:"_selectValue",value:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this.chips.find((function(n){return null!=n.value&&e._compareWith(n.value,t)}));return i&&(n?i.selectViaInteraction():i.select(),this._selectionModel.select(i)),i}},{key:"_initializeSelection",value:function(){var t=this;Promise.resolve().then((function(){(t.ngControl||t._value)&&(t._setSelectionByValue(t.ngControl?t.ngControl.value:t._value,!1),t.stateChanges.next())}))}},{key:"_clearSelection",value:function(t){this._selectionModel.clear(),this.chips.forEach((function(e){e!==t&&e.deselect()})),this.stateChanges.next()}},{key:"_sortValues",value:function(){var t=this;this._multiple&&(this._selectionModel.clear(),this.chips.forEach((function(e){e.selected&&t._selectionModel.select(e)})),this.stateChanges.next())}},{key:"_propagateChanges",value:function(t){var e;e=Array.isArray(this.selected)?this.selected.map((function(t){return t.value})):this.selected?this.selected.value:t,this._value=e,this.change.emit(new I(this,e)),this.valueChange.emit(e),this._onChange(e),this._changeDetectorRef.markForCheck()}},{key:"_blur",value:function(){var t=this;this._hasFocusedChip()||this._keyManager.setActiveItem(-1),this.disabled||(this._chipInput?setTimeout((function(){t.focused||t._markAsTouched()})):this._markAsTouched())}},{key:"_markAsTouched",value:function(){this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next()}},{key:"_allowFocusEscape",value:function(){var t=this;-1!==this._tabIndex&&(this._tabIndex=-1,setTimeout((function(){t._tabIndex=t._userTabIndex||0,t._changeDetectorRef.markForCheck()})))}},{key:"_resetChips",value:function(){this._dropSubscriptions(),this._listenToChipsFocus(),this._listenToChipsSelection(),this._listenToChipsRemoved()}},{key:"_dropSubscriptions",value:function(){this._chipFocusSubscription&&(this._chipFocusSubscription.unsubscribe(),this._chipFocusSubscription=null),this._chipBlurSubscription&&(this._chipBlurSubscription.unsubscribe(),this._chipBlurSubscription=null),this._chipSelectionSubscription&&(this._chipSelectionSubscription.unsubscribe(),this._chipSelectionSubscription=null),this._chipRemoveSubscription&&(this._chipRemoveSubscription.unsubscribe(),this._chipRemoveSubscription=null)}},{key:"_listenToChipsSelection",value:function(){var t=this;this._chipSelectionSubscription=this.chipSelectionChanges.subscribe((function(e){e.source.selected?t._selectionModel.select(e.source):t._selectionModel.deselect(e.source),t.multiple||t.chips.forEach((function(e){!t._selectionModel.isSelected(e)&&e.selected&&e.deselect()})),e.isUserInput&&t._propagateChanges()}))}},{key:"_listenToChipsFocus",value:function(){var t=this;this._chipFocusSubscription=this.chipFocusChanges.subscribe((function(e){var n=t.chips.toArray().indexOf(e.chip);t._isValidIndex(n)&&t._keyManager.updateActiveItem(n),t.stateChanges.next()})),this._chipBlurSubscription=this.chipBlurChanges.subscribe((function(){t._blur(),t.stateChanges.next()}))}},{key:"_listenToChipsRemoved",value:function(){var t=this;this._chipRemoveSubscription=this.chipRemoveChanges.subscribe((function(e){var n=e.chip,i=t.chips.toArray().indexOf(e.chip);t._isValidIndex(i)&&n._hasFocus&&(t._lastDestroyedChipIndex=i)}))}},{key:"_originatesFromChip",value:function(t){for(var e=t.target;e&&e!==this._elementRef.nativeElement;){if(e.classList.contains("mat-chip"))return!0;e=e.parentElement}return!1}},{key:"_hasFocusedChip",value:function(){return this.chips.some((function(t){return t._hasFocus}))}},{key:"_syncChipsState",value:function(){var t=this;this.chips&&this.chips.forEach((function(e){e.disabled=t._disabled,e._chipListMultiple=t.multiple}))}},{key:"selected",get:function(){return this.multiple?this._selectionModel.selected:this._selectionModel.selected[0]}},{key:"role",get:function(){return this.empty?null:"listbox"}},{key:"multiple",get:function(){return this._multiple},set:function(t){this._multiple=Object(o.c)(t),this._syncChipsState()}},{key:"compareWith",get:function(){return this._compareWith},set:function(t){this._compareWith=t,this._selectionModel&&this._initializeSelection()}},{key:"value",get:function(){return this._value},set:function(t){this.writeValue(t),this._value=t}},{key:"id",get:function(){return this._chipInput?this._chipInput.id:this._uid}},{key:"required",get:function(){return this._required},set:function(t){this._required=Object(o.c)(t),this.stateChanges.next()}},{key:"placeholder",get:function(){return this._chipInput?this._chipInput.placeholder:this._placeholder},set:function(t){this._placeholder=t,this.stateChanges.next()}},{key:"focused",get:function(){return this._chipInput&&this._chipInput.focused||this._hasFocusedChip()}},{key:"empty",get:function(){return(!this._chipInput||this._chipInput.empty)&&0===this.chips.length}},{key:"shouldLabelFloat",get:function(){return!this.empty||this.focused}},{key:"disabled",get:function(){return this.ngControl?!!this.ngControl.disabled:this._disabled},set:function(t){this._disabled=Object(o.c)(t),this._syncChipsState()}},{key:"selectable",get:function(){return this._selectable},set:function(t){var e=this;this._selectable=Object(o.c)(t),this.chips&&this.chips.forEach((function(t){return t.chipListSelectable=e._selectable}))}},{key:"tabIndex",set:function(t){this._userTabIndex=t,this._tabIndex=t}},{key:"chipSelectionChanges",get:function(){return Object(c.a).apply(void 0,_toConsumableArray(this.chips.map((function(t){return t.selectionChange}))))}},{key:"chipFocusChanges",get:function(){return Object(c.a).apply(void 0,_toConsumableArray(this.chips.map((function(t){return t._onFocus}))))}},{key:"chipBlurChanges",get:function(){return Object(c.a).apply(void 0,_toConsumableArray(this.chips.map((function(t){return t._onBlur}))))}},{key:"chipRemoveChanges",get:function(){return Object(c.a).apply(void 0,_toConsumableArray(this.chips.map((function(t){return t.destroyed}))))}}]),e}(S);return t.\u0275fac=function(e){return new(e||t)(r.Rb(r.l),r.Rb(r.h),r.Rb(m.c,8),r.Rb(v.v,8),r.Rb(v.l,8),r.Rb(a.d),r.Rb(v.s,10))},t.\u0275cmp=r.Lb({type:t,selectors:[["mat-chip-list"]],contentQueries:function(t,e,n){var i;1&t&&r.Jb(n,x,!0),2&t&&r.yc(i=r.gc())&&(e.chips=i)},hostAttrs:[1,"mat-chip-list"],hostVars:15,hostBindings:function(t,e){1&t&&r.fc("focus",(function(t){return e.focus()}))("blur",(function(t){return e._blur()}))("keydown",(function(t){return e._keydown(t)})),2&t&&(r.ac("id",e._uid),r.Eb("tabindex",e.disabled?null:e._tabIndex)("aria-describedby",e._ariaDescribedby||null)("aria-required",e.role?e.required:null)("aria-disabled",e.disabled.toString())("aria-invalid",e.errorState)("aria-multiselectable",e.multiple)("role",e.role)("aria-orientation",e.ariaOrientation),r.Hb("mat-chip-list-disabled",e.disabled)("mat-chip-list-invalid",e.errorState)("mat-chip-list-required",e.required))},inputs:{ariaOrientation:["aria-orientation","ariaOrientation"],multiple:"multiple",compareWith:"compareWith",value:"value",required:"required",placeholder:"placeholder",disabled:"disabled",selectable:"selectable",tabIndex:"tabIndex",errorStateMatcher:"errorStateMatcher"},outputs:{change:"change",valueChange:"valueChange"},exportAs:["matChipList"],features:[r.Cb([{provide:p.b,useExisting:t}]),r.Ab],ngContentSelectors:y,decls:2,vars:0,consts:[[1,"mat-chip-list-wrapper"]],template:function(t,e){1&t&&(r.qc(),r.Xb(0,"div",0),r.pc(1),r.Wb())},styles:['.mat-chip{position:relative;overflow:hidden;box-sizing:border-box;-webkit-tap-highlight-color:transparent;transform:translateZ(0);border:none;-webkit-appearance:none;-moz-appearance:none}.mat-standard-chip{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:inline-flex;padding:7px 12px;border-radius:16px;align-items:center;cursor:default;min-height:32px;height:1px}._mat-animation-noopable.mat-standard-chip{transition:none;animation:none}.mat-standard-chip .mat-chip-remove.mat-icon{width:18px;height:18px}.mat-standard-chip::after{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit;opacity:0;content:"";pointer-events:none;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-standard-chip:hover::after{opacity:.12}.mat-standard-chip:focus{outline:none}.mat-standard-chip:focus::after{opacity:.16}.cdk-high-contrast-active .mat-standard-chip{outline:solid 1px}.cdk-high-contrast-active .mat-standard-chip:focus{outline:dotted 2px}.mat-standard-chip.mat-chip-disabled::after{opacity:0}.mat-standard-chip.mat-chip-disabled .mat-chip-remove,.mat-standard-chip.mat-chip-disabled .mat-chip-trailing-icon{cursor:default}.mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar,.mat-standard-chip.mat-chip-with-avatar{padding-top:0;padding-bottom:0}.mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar{padding-right:8px;padding-left:0}[dir=rtl] .mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar{padding-left:8px;padding-right:0}.mat-standard-chip.mat-chip-with-trailing-icon{padding-top:7px;padding-bottom:7px;padding-right:8px;padding-left:12px}[dir=rtl] .mat-standard-chip.mat-chip-with-trailing-icon{padding-left:8px;padding-right:12px}.mat-standard-chip.mat-chip-with-avatar{padding-left:0;padding-right:12px}[dir=rtl] .mat-standard-chip.mat-chip-with-avatar{padding-right:0;padding-left:12px}.mat-standard-chip .mat-chip-avatar{width:24px;height:24px;margin-right:8px;margin-left:4px}[dir=rtl] .mat-standard-chip .mat-chip-avatar{margin-left:8px;margin-right:4px}.mat-standard-chip .mat-chip-remove,.mat-standard-chip .mat-chip-trailing-icon{width:18px;height:18px;cursor:pointer}.mat-standard-chip .mat-chip-remove,.mat-standard-chip .mat-chip-trailing-icon{margin-left:8px;margin-right:0}[dir=rtl] .mat-standard-chip .mat-chip-remove,[dir=rtl] .mat-standard-chip .mat-chip-trailing-icon{margin-right:8px;margin-left:0}.mat-chip-list-wrapper{display:flex;flex-direction:row;flex-wrap:wrap;align-items:center;margin:-4px}.mat-chip-list-wrapper input.mat-input-element,.mat-chip-list-wrapper .mat-standard-chip{margin:4px}.mat-chip-list-stacked .mat-chip-list-wrapper{flex-direction:column;align-items:flex-start}.mat-chip-list-stacked .mat-chip-list-wrapper .mat-standard-chip{width:100%}.mat-chip-avatar{border-radius:50%;justify-content:center;align-items:center;display:flex;overflow:hidden;object-fit:cover}input.mat-chip-input{width:150px;margin:4px;flex:1 0 150px}\n'],encapsulation:2,changeDetection:0}),t}(),X=0,T=function(){var t=function(){function t(e,n){_classCallCheck(this,t),this._elementRef=e,this._defaultOptions=n,this.focused=!1,this._addOnBlur=!1,this.separatorKeyCodes=this._defaultOptions.separatorKeyCodes,this.chipEnd=new r.o,this.placeholder="",this.id="mat-chip-list-input-".concat(X++),this._disabled=!1,this._inputElement=this._elementRef.nativeElement}return _createClass(t,[{key:"ngOnChanges",value:function(){this._chipList.stateChanges.next()}},{key:"_keydown",value:function(t){t&&t.keyCode===i.x&&!Object(i.B)(t,"shiftKey")&&this._chipList._allowFocusEscape(),this._emitChipEnd(t)}},{key:"_blur",value:function(){this.addOnBlur&&this._emitChipEnd(),this.focused=!1,this._chipList.focused||this._chipList._blur(),this._chipList.stateChanges.next()}},{key:"_focus",value:function(){this.focused=!0,this._chipList.stateChanges.next()}},{key:"_emitChipEnd",value:function(t){!this._inputElement.value&&t&&this._chipList._keydown(t),t&&!this._isSeparatorKey(t)||(this.chipEnd.emit({input:this._inputElement,value:this._inputElement.value}),t&&t.preventDefault())}},{key:"_onInput",value:function(){this._chipList.stateChanges.next()}},{key:"focus",value:function(t){this._inputElement.focus(t)}},{key:"_isSeparatorKey",value:function(t){if(Object(i.B)(t))return!1;var e=this.separatorKeyCodes,n=t.keyCode;return Array.isArray(e)?e.indexOf(n)>-1:e.has(n)}},{key:"chipList",set:function(t){t&&(this._chipList=t,this._chipList.registerInput(this))}},{key:"addOnBlur",get:function(){return this._addOnBlur},set:function(t){this._addOnBlur=Object(o.c)(t)}},{key:"disabled",get:function(){return this._disabled||this._chipList&&this._chipList.disabled},set:function(t){this._disabled=Object(o.c)(t)}},{key:"empty",get:function(){return!this._inputElement.value}}]),t}();return t.\u0275fac=function(e){return new(e||t)(r.Rb(r.l),r.Rb(D))},t.\u0275dir=r.Mb({type:t,selectors:[["input","matChipInputFor",""]],hostAttrs:[1,"mat-chip-input","mat-input-element"],hostVars:5,hostBindings:function(t,e){1&t&&r.fc("keydown",(function(t){return e._keydown(t)}))("blur",(function(t){return e._blur()}))("focus",(function(t){return e._focus()}))("input",(function(t){return e._onInput()})),2&t&&(r.ac("id",e.id),r.Eb("disabled",e.disabled||null)("placeholder",e.placeholder||null)("aria-invalid",e._chipList&&e._chipList.ngControl?e._chipList.ngControl.invalid:null)("aria-required",e._chipList&&e._chipList.required||null))},inputs:{separatorKeyCodes:["matChipInputSeparatorKeyCodes","separatorKeyCodes"],placeholder:"placeholder",id:"id",chipList:["matChipInputFor","chipList"],addOnBlur:["matChipInputAddOnBlur","addOnBlur"],disabled:"disabled"},outputs:{chipEnd:"matChipInputTokenEnd"},exportAs:["matChipInput","matChipInputFor"],features:[r.Bb()]}),t}(),P={separatorKeyCodes:[i.h]},W=function(){var t=function t(){_classCallCheck(this,t)};return t.\u0275mod=r.Pb({type:t}),t.\u0275inj=r.Ob({factory:function(e){return new(e||t)},providers:[a.d,{provide:D,useValue:P}]}),t}()},AsKK:function(t,e,n){"use strict";var i,r,a,o,s=n("ofXK"),c=n("M9IT"),l=n("Dh3D"),u=n("+0xr"),d=n("A5z7"),h=n("bv9b"),b=n("6rvT"),f=n("3Pt+"),p=n("fXoL"),g=((i=function t(){_classCallCheck(this,t)}).\u0275mod=p.Pb({type:i}),i.\u0275inj=p.Ob({factory:function(t){return new(t||i)},imports:[[s.c,b.a,f.D]]}),i),m=n("bTqV"),v=n("NFeN"),y=n("STbY"),k=n("X3pI"),_=((r=function t(){_classCallCheck(this,t)}).\u0275mod=p.Pb({type:r}),r.\u0275inj=p.Ob({factory:function(t){return new(t||r)},imports:[[s.c,m.c,y.c,b.a,f.D,v.b,k.a]]}),r),w=n("VaLf"),x=((a=function(t){function e(t){var n;return _classCallCheck(this,e),(n=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this))).i18n=t,n.itemsPerPageLabel=n.i18n.t("Items per page"),n.nextPageLabel=n.i18n.t("Next page"),n.previousPageLabel=n.i18n.t("Previous page"),n.getRangeLabel=function(t,e,i){var r=n.i18n.t("of");if(0==i||0==e)return"0 ".concat(r," ").concat(i);var a=t*e;return"".concat(a+1," - ").concat(a<(i=Math.max(i,0))?Math.min(a+e,i):a+e," ").concat(r," ").concat(i)},n}return _inherits(e,t),e}(c.b)).\u0275fac=function(t){return new(t||a)(p.bc(w.a))},a.\u0275prov=p.Nb({token:a,factory:a.\u0275fac,providedIn:"root"}),a),C=n("+rOU"),D=((o=function t(){_classCallCheck(this,t)}).\u0275mod=p.Pb({type:o}),o.\u0275inj=p.Ob({factory:function(t){return new(t||o)},imports:[[s.c,y.c,b.a,f.D,v.b,m.c,k.a]]}),o),S=n("5+WD"),O=n("bSwM"),I=n("Iysn");n.d(e,"a",(function(){return X}));var R,X=((R=function t(){_classCallCheck(this,t)}).\u0275mod=p.Pb({type:R}),R.\u0275inj=p.Ob({factory:function(t){return new(t||R)},providers:[{provide:c.b,useClass:x}],imports:[[s.c,f.D,_,D,b.a,I.a,O.b,v.b,m.c,u.l,c.c,l.c,d.e,g,h.b,C.h,S.d],u.l,c.c,l.c]}),R)},"Bf/s":function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var i=n("ofXK"),r=n("vUXK"),a=n("+rOU"),o=n("bTqV"),s=n("X3pI"),c=n("dz5c"),l=n("7LS1"),u=n("fXoL"),d=function(){var t=function t(){_classCallCheck(this,t)};return t.\u0275mod=u.Pb({type:t}),t.\u0275inj=u.Ob({factory:function(e){return new(e||t)},providers:[c.a,l.a,{provide:r.a,useClass:r.b}],imports:[[i.c,a.h,o.c,s.a]]}),t}()},Dbf7:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var i=n("UNqx"),r=n("EY2u"),a=n("JIr8"),o=n("I65S"),s=n("fXoL"),c=n("LsVx"),l=n("tyNb"),u=function(){var t=function(){function t(e,n){_classCallCheck(this,t),this.tickets=e,this.router=n}return _createClass(t,[{key:"resolve",value:function(t,e){var n=this;return this.tickets.get(+(t.params.ticket_id||t.params.id)).pipe(Object(a.a)((function(){return n.router.navigate(["/help-center/tickets"]),r.a})),Object(i.mergeMap)((function(t){return t.ticket?Object(o.of)(t.ticket):(n.router.navigate(["/help-center/tickets"]),r.a)})))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(s.bc(c.a),s.bc(l.f))},t.\u0275prov=s.Nb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},DldP:function(t,e,n){"use strict";var i=n("ofXK"),r=n("3Pt+"),a=n("tyNb"),o=n("j/pe"),s=n("b7Mq"),c=n("3H9V"),l=n("qH/R"),u=n("H4ap"),d=n("qaug"),h=n("45UC"),b=n("9VjZ"),f=n("aV6R"),p=n("PPfr"),g=n("lxqa"),m=n("yS8O"),v=n("X3Ra"),y=n("wWhK"),k=n("Dbf7"),_=n("2qZP"),w=n("EzZJ"),x=n("LsVx"),C=n("IgbF"),D=n("7T94"),S=n("1V5l"),O=n("KHpT"),I=n("ehXJ"),R=n("apsj"),X=n("YHvm"),T=n("Bf/s"),P=n("0IaG"),W=n("MK/P"),L=n("gFpt"),E=n("NFeN"),j=n("STbY"),M=n("bTqV"),N=n("6rvT"),A=n("k3xQ"),F=n("Qu3c"),z=n("X3pI"),H=n("JZOH"),V=n("GSRO"),B=n("pfRy"),U=n("fXoL"),Y=n("KKQg"),$=n("ovFL"),q=n("N2vX"),K=n("/zh3"),Q=n("nQeM"),G=n("Rd8u"),Z=n("FBzJ"),J=n("DB1O"),tt=n("83jf"),et=n("mrSG"),nt=n("Lm4C"),it=n("sgCb");function rt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Object(et.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var i,r,a,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r=t,new Promise((function(t){r.createReader().readEntries((function(e){return t(e)}))}));case 2:i=n.sent,n.t0=regeneratorRuntime.keys(i);case 4:if((n.t1=n.t0()).done){n.next=19;break}if(a=n.t1.value,!(o=i[a]).isDirectory){n.next=12;break}return n.next=10,rt(o,e);case 10:n.next=17;break;case 12:return n.t2=e,n.next=15,at(o);case 15:n.t3=n.sent,n.t2.push.call(n.t2,n.t3);case 17:n.next=4;break;case 19:return n.abrupt("return",e);case 20:case"end":return n.stop()}}),n)})))}function at(t){return new Promise((function(e){t.file((function(n){e(new it.a(n,t.fullPath))}))}))}var ot,st=((ot=function(){function t(e){_classCallCheck(this,t),this.el=e,this.disableDropzoneClick=!1,this.disableDropzone=!1,this.uploadConfig={},this.filesDropped=new U.o}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this,e=this.el.nativeElement;e.addEventListener("dragenter",(function(e){return t.handleDragEnter(e)})),e.addEventListener("dragover",(function(e){return t.handleDragOver(e)})),e.addEventListener("dragleave",(function(e){return t.handleDragLeave(e)})),e.addEventListener("drop",(function(e){return t.handleDrop(e)})),this.disableDropzoneClick||(this.clickButton?this.clickButton.nativeElement:e).addEventListener("click",(function(){return t.handleClick()}))}},{key:"ngOnDestroy",value:function(){this.removeClassesFromDropzone()}},{key:"handleClick",value:function(){var t=this;this.disableDropzone||Object(nt.a)(this.uploadConfig).then((function(e){t.emitUploadEvent(e)}))}},{key:"handleDragEnter",value:function(t){this.dropzoneDisabled(t)||this.el.nativeElement.classList.add("file-over-dropzone")}},{key:"handleDragOver",value:function(t){return t.preventDefault&&t.preventDefault(),t.dataTransfer.dropEffect=this.dropzoneDisabled(t)?"none":"move",!1}},{key:"handleDragLeave",value:function(t){var e=document.elementFromPoint(t.clientX,t.clientY);this.el.nativeElement.contains(e)||this.removeClassesFromDropzone()}},{key:"handleDrop",value:function(t){return Object(et.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.stopPropagation(),t.preventDefault(),this.removeClassesFromDropzone(),!this.dropzoneDisabled(t)&&t.dataTransfer.items){e.next=2;break}return e.abrupt("return");case 2:if(n=Array.from(t.dataTransfer.items).filter((function(t){return"file"===t.kind})).map((function(t){return t.webkitGetAsEntry()})),e.t0=n.length,!e.t0){e.next=10;break}return e.t1=this,e.next=8,function(t){return Object(et.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n,i,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],e.t0=regeneratorRuntime.keys(t);case 2:if((e.t1=e.t0()).done){e.next=20;break}if(i=e.t1.value,!(r=t[i]).isDirectory){e.next=13;break}return e.t2=n,e.next=9,rt(r);case 9:e.t3=e.sent,n=e.t2.concat.call(e.t2,e.t3),e.next=18;break;case 13:return e.t4=n,e.next=16,at(r);case 16:e.t5=e.sent,e.t4.push.call(e.t4,e.t5);case 18:e.next=2;break;case 20:return e.abrupt("return",n);case 21:case"end":return e.stop()}}),e)})))}(n);case 8:e.t2=e.sent,e.t1.emitUploadEvent.call(e.t1,e.t2);case 10:case"end":return e.stop()}}),e,this)})))}},{key:"emitUploadEvent",value:function(t){this.filesDropped.emit(t)}},{key:"removeClassesFromDropzone",value:function(){this.el.nativeElement.classList.remove("file-over-dropzone")}},{key:"dropzoneDisabled",value:function(t){var e=t.dataTransfer.types.find((function(t){return"files"===t.toLowerCase()}));return this.disableDropzone||!e}}]),t}()).\u0275fac=function(t){return new(t||ot)(U.Rb(U.l))},ot.\u0275dir=U.Mb({type:ot,selectors:[["","fileDropzone",""]],inputs:{disableDropzoneClick:"disableDropzoneClick",disableDropzone:"disableDropzone",clickButton:"clickButton",uploadConfig:["fileDropzone","uploadConfig"]},outputs:{filesDropped:"filesDropped"}}),ot),ct=n("DzUk"),lt=n("rG4v"),ut=n("XRKU"),dt=n("cH1L"),ht=n("zW5C"),bt=n("iB19"),ft=n("6SKC");n.d(e,"a",(function(){return gt}));var pt,gt=((pt=function t(){_classCallCheck(this,t)}).\u0275mod=U.Pb({type:pt}),pt.\u0275inj=U.Ob({factory:function(t){return new(t||pt)},providers:[v.a,y.a,O.a,x.a,R.a,k.a,C.a,S.a,I.a],imports:[[i.c,r.n,r.D,a.j,X.a,T.a,L.a,N.a,A.a,z.a,H.a,V.a,W.a,F.b,P.g,E.b,j.c,M.c]]}),pt);U.Gc(h.a,[o.a,s.a,c.a,l.a,u.a,d.a,h.a,b.a,f.a,D.a,p.a,g.a,m.a,_.a,w.a,B.a,i.q,i.r,i.s,i.t,i.A,i.w,i.x,i.y,i.z,i.u,i.v,r.J,r.y,r.I,r.c,r.z,r.C,r.a,r.F,r.G,r.B,r.t,r.u,r.E,r.p,r.o,r.A,r.b,r.d,r.w,r.x,r.v,r.i,r.l,r.j,r.m,r.f,a.k,a.g,a.i,a.h,a.l,Y.a,$.a,q.a,K.a,Q.a,G.a,Z.a,J.a,tt.a,st,ct.a,lt.a,ut.a,F.a,F.c,dt.b,P.e,P.d,P.i,P.f,P.c,E.a,j.e,j.b,j.d,j.a,M.b,M.a],[i.b,i.G,i.p,i.k,i.E,i.g,i.C,i.F,i.d,i.f,i.i,i.j,i.l,ht.a,bt.a,ft.a])},DzUk:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var i=n("fXoL"),r=n("Lm4C"),a=function(){var t=function(){function t(e){_classCallCheck(this,t),this.el=e,this.config={},this.filesSelected=new i.o}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.el.nativeElement.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation(),Object(r.a)(t.config).then((function(e){e&&e.length&&t.filesSelected.emit(e)}))}))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(i.Rb(i.l))},t.\u0275dir=i.Mb({type:t,selectors:[["","uploadButton",""]],inputs:{config:["uploadButton","config"]},outputs:{filesSelected:"filesSelected"}}),t}()},EBtg:function(t,e,n){"use strict";var i=n("2KeD"),r=n("n73p"),a=n("2qMH"),o=n("LJ/p"),s=n("HZF8"),c=n("90cg"),l=n("yRPT"),u=n("0alx");e.scheduled=function(t,e){if(null!=t){if(s.isInteropObservable(t))return i.scheduleObservable(t,e);if(c.isPromise(t))return r.schedulePromise(t,e);if(l.isArrayLike(t))return a.scheduleArray(t,e);if(u.isIterable(t)||"string"==typeof t)return o.scheduleIterable(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}},EzZJ:function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var i=n("fXoL"),r=n("3Pt+"),a=n("Kj3r"),o=n("/uUt"),s=n("STbY"),c=n("LsVx"),l=n("IgbF"),u=n("i2dy"),d=n("NFeN"),h=n("ofXK");function b(t,e){if(1&t){var n=i.Yb();i.Xb(0,"button",7),i.fc("click",(function(t){i.Cc(n);var r=e.$implicit;return i.jc().addTag(r.name)})),i.Nc(1),i.Wb()}if(2&t){var r=e.$implicit;i.Db(1),i.Oc(r.name)}}var f=function(){var t=function(){function t(e,n,a){_classCallCheck(this,t),this.tickets=e,this.tagService=n,this.toast=a,this.ticketIds=[],this.tagAdded=new i.o,this.tagQuery=new r.h,this.searchedOnce=!1,this.trackByFn=function(t,e){return e.id}}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.bindTagQueryInput(),this.trigger.menuOpened.subscribe((function(){t.searchedOnce||t.searchForTags(null,{perPage:5})})),this.trigger.menuClosed.subscribe((function(){t.clearSearchField()}))}},{key:"open",value:function(){this.trigger.openMenu()}},{key:"close",value:function(){this.trigger.closeMenu()}},{key:"addTag",value:function(t){var e=this;this.tickets.addTag(t,this.ticketIds).subscribe((function(t){e.clearSearchField(),e.toast.open("Tag added"),e.tagAdded.emit(t.data)}))}},{key:"clearSearchField",value:function(){this.tagQuery.value&&this.tagQuery.setValue(null)}},{key:"bindTagQueryInput",value:function(){var t=this;this.tagQuery.valueChanges.pipe(Object(a.a)(300),Object(o.a)()).subscribe((function(e){t.searchForTags(e)}))}},{key:"searchForTags",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.tagService.search(t,n).subscribe((function(t){return e.tags=t.pagination.data}))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(i.Rb(c.a),i.Rb(l.a),i.Rb(u.a))},t.\u0275cmp=i.Lb({type:t,selectors:[["add-tag-dropdown"]],viewQuery:function(t,e){var n;1&t&&i.Jc(s.d,!0),2&t&&i.yc(n=i.gc())&&(e.trigger=n.first)},inputs:{ticketIds:"ticketIds"},outputs:{tagAdded:"tagAdded"},decls:7,vars:5,consts:[[1,"no-style","add-tag-button","toolbar-item",3,"matMenuTriggerFor"],["svgIcon","add-tag-custom"],[1,"add-tag-menu",3,"overlapTrigger"],["addTagMenu","matMenu"],[1,"input-container",3,"ngSubmit","click"],["type","text","mat-menu-item","",1,"tag-search-input",3,"formControl","keydown"],["mat-menu-item","","class","tag-item",3,"click",4,"ngFor","ngForOf","ngForTrackBy"],["mat-menu-item","",1,"tag-item",3,"click"]],template:function(t,e){if(1&t&&(i.Xb(0,"button",0),i.Sb(1,"mat-icon",1),i.Wb(),i.Xb(2,"mat-menu",2,3),i.Xb(4,"form",4),i.fc("ngSubmit",(function(t){return e.addTag(e.tagQuery.value)}))("click",(function(t){return t.stopPropagation()})),i.Xb(5,"input",5),i.fc("keydown",(function(t){return t.stopPropagation()})),i.Wb(),i.Wb(),i.Lc(6,b,2,1,"button",6),i.Wb()),2&t){var n=i.zc(3);i.rc("matMenuTriggerFor",n),i.Db(2),i.rc("overlapTrigger",!1),i.Db(3),i.rc("formControl",e.tagQuery),i.Db(1),i.rc("ngForOf",e.tags)("ngForTrackBy",e.trackByFn)}},directives:[s.d,d.a,s.e,r.J,r.u,r.v,r.c,s.b,r.t,r.i,h.s],styles:["[_nghost-%COMP%]{position:relative;display:inline-block}.input-container[_ngcontent-%COMP%]{padding:2px 10px 10px}.mat-menu-item[_ngcontent-%COMP%]:first-of-type{border-top:1px solid var(--be-divider-default)}"]}),t}()},FWf1:function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=n("pshJ"),o=n("GiSu"),s=n("zB/H"),c=n("p//D"),l=n("n3uD"),u=n("MkmW"),d=function(t){function e(n,i,r){var a=t.call(this)||this;switch(a.syncErrorValue=null,a.syncErrorThrown=!1,a.syncErrorThrowable=!1,a.isStopped=!1,arguments.length){case 0:a.destination=o.empty;break;case 1:if(!n){a.destination=o.empty;break}if("object"==typeof n){n instanceof e?(a.syncErrorThrowable=n.syncErrorThrowable,a.destination=n,n.add(a)):(a.syncErrorThrowable=!0,a.destination=new h(a,n));break}default:a.syncErrorThrowable=!0,a.destination=new h(a,n,i,r)}return a}return r(e,t),e.prototype[c.rxSubscriber]=function(){return this},e.create=function(t,n,i){var r=new e(t,n,i);return r.syncErrorThrowable=!1,r},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this},e}(s.Subscription);e.Subscriber=d;var h=function(t){function e(e,n,i,r){var s,c=t.call(this)||this;c._parentSubscriber=e;var l=c;return a.isFunction(n)?s=n:n&&(s=n.next,i=n.error,r=n.complete,n!==o.empty&&(l=Object.create(n),a.isFunction(l.unsubscribe)&&c.add(l.unsubscribe.bind(l)),l.unsubscribe=c.unsubscribe.bind(c))),c._context=l,c._next=s,c._error=i,c._complete=r,c}return r(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;l.config.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber,n=l.config.useDeprecatedSynchronousErrorHandling;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):u.hostReportError(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;u.hostReportError(t)}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var n=function(){return t._complete.call(t._context)};l.config.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),l.config.useDeprecatedSynchronousErrorHandling)throw n;u.hostReportError(n)}},e.prototype.__tryOrSetError=function(t,e,n){if(!l.config.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(i){return l.config.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=i,t.syncErrorThrown=!0,!0):(u.hostReportError(i),!0)}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(d);e.SafeSubscriber=h},GMZp:function(t,e,n){"use strict";e.isObject=function(t){return null!==t&&"object"==typeof t}},GSRO:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var i=n("ofXK"),r=n("bTqV"),a=n("NFeN"),o=n("bv9b"),s=n("fXoL"),c=function(){var t=function t(){_classCallCheck(this,t)};return t.\u0275mod=s.Pb({type:t}),t.\u0275inj=s.Ob({factory:function(e){return new(e||t)},imports:[[i.c,r.c,o.b,a.b]]}),t}()},GiSu:function(t,e,n){"use strict";var i=n("n3uD"),r=n("MkmW");e.empty={closed:!0,next:function(t){},error:function(t){if(i.config.useDeprecatedSynchronousErrorHandling)throw t;r.hostReportError(t)},complete:function(){}}},H4ap:function(t,e,n){"use strict";n.d(e,"a",(function(){return O}));var i=n("45UC"),r=n("8RV8"),a=n("fXoL"),o=n("QGXG"),s=n("LsVx"),c=n("wWhK"),l=n("tyNb"),u=n("i2dy"),d=n("ofXK"),h=n("Rd8u"),b=n("NFeN"),f=n("bTqV"),p=n("STbY"),g=n("Qu3c"),m=n("zW5C"),v=n("iB19");function y(t,e){if(1&t&&(a.Xb(0,"div",15),a.Sb(1,"mat-icon",29),a.Xb(2,"a",30),a.Nc(3),a.Wb(),a.Wb()),2&t){var n=a.jc(3);a.Db(2),a.rc("href","https://codecanyon.net/user/"+n.envatoPurchase.envato_username,a.Fc)("title",n.envatoPurchase.envato_username),a.Db(1),a.Oc(n.envatoPurchase.envato_username)}}function k(t,e){if(1&t&&(a.Xb(0,"div",31),a.kc(1,"trans"),a.Sb(2,"mat-icon",32),a.Xb(3,"span"),a.Nc(4),a.kc(5,"formattedDate"),a.Wb(),a.Wb()),2&t){var n=a.jc(3);a.rc("matTooltip",a.lc(1,2,"Supported until")),a.Db(4),a.Oc(a.lc(5,4,n.envatoPurchase.supported_until))}}function _(t,e){if(1&t&&(a.Xb(0,"div",33),a.Sb(1,"img",34),a.Xb(2,"div",35),a.Nc(3),a.Wb(),a.Wb()),2&t){var n=e.$implicit;a.Db(1),a.rc("src",n.image,a.Fc),a.Db(2),a.Oc(n.item_name)}}function w(t,e){if(1&t&&(a.Xb(0,"div",22),a.Xb(1,"div",23),a.Xb(2,"span",24),a.Nc(3,"Envato"),a.Wb(),a.Wb(),a.Lc(4,y,4,3,"div",25),a.Lc(5,k,6,6,"div",26),a.Xb(6,"div",27),a.Lc(7,_,4,2,"div",28),a.kc(8,"slice"),a.Wb(),a.Wb()),2&t){var n=a.jc(2);a.Db(4),a.rc("ngIf",n.envatoPurchase.envato_username),a.Db(1),a.rc("ngIf",n.envatoPurchase.supported_until),a.Db(2),a.rc("ngForOf",a.nc(8,3,n.requester.purchase_codes,0,5))}}var x=function(t){return["/mailbox/users",t]};function C(t,e){if(1&t){var n=a.Yb();a.Xb(0,"div",7),a.Xb(1,"a",8),a.Sb(2,"img",9),a.Wb(),a.Xb(3,"div",10),a.Xb(4,"div",11),a.Xb(5,"div",12),a.Nc(6),a.Wb(),a.Xb(7,"button",13),a.Sb(8,"mat-icon",14),a.Wb(),a.Wb(),a.Xb(9,"div",15),a.Sb(10,"mat-icon",16),a.Xb(11,"span",17),a.Nc(12),a.Wb(),a.Wb(),a.Xb(13,"mat-menu",null,18),a.Xb(15,"a",19),a.Nc(16,"Edit Profile"),a.Wb(),a.Xb(17,"button",20),a.fc("click",(function(t){return a.Cc(n),a.jc().changeCustomer()})),a.Nc(18,"Change Customer"),a.Wb(),a.Wb(),a.Lc(19,w,9,7,"div",21),a.Wb(),a.Wb()}if(2&t){var i=a.zc(14),r=a.jc();a.Db(1),a.rc("routerLink",a.wc(9,x,r.requester.id)),a.Db(1),a.rc("src",r.requester.avatar,a.Fc),a.Db(3),a.rc("title",r.requester.display_name),a.Db(1),a.Oc(r.requester.display_name),a.Db(1),a.rc("matMenuTriggerFor",i),a.Db(4),a.rc("title",r.requester.email),a.Db(1),a.Oc(r.requester.email),a.Db(3),a.rc("routerLink",a.wc(11,x,r.requester.id)),a.Db(4),a.rc("ngIf",r.envatoPurchase)}}function D(t,e){if(1&t){var n=a.Yb();a.Xb(0,"div",38),a.fc("click",(function(t){a.Cc(n);var i=e.$implicit;return a.jc(2).openTicketModal(i.id)})),a.Sb(1,"mat-icon",16),a.Xb(2,"span"),a.Nc(3),a.Wb(),a.Wb()}if(2&t){var i=e.$implicit;a.Hb("open",!i.closed_at),a.Db(3),a.Oc(i.subject)}}function S(t,e){if(1&t&&(a.Xb(0,"div",36),a.Lc(1,D,4,3,"div",37),a.Wb()),2&t){var n=a.jc();a.Db(1),a.rc("ngForOf",n.otherTickets)}}var O=function(){var t=function(){function t(e,n,i,r,a){_classCallCheck(this,t),this.modal=e,this.tickets=n,this.conversation=i,this.route=r,this.toast=a,this.previousTicketsVisible=!0}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.route.data.subscribe((function(e){t.activeTicket=e.ticket,t.loadUserData()}))}},{key:"openTicketModal",value:function(t){var e=this,n={ticketId:t,activeTicketId:this.conversation.get().id};this.modal.open(i.a,n,"conversation-modal-container").afterClosed().subscribe((function(n){n&&(e.otherTickets=e.otherTickets.filter((function(e){return e.id!==t})),e.conversation.init(n))}))}},{key:"getUserTicketsExceptCurrent",value:function(){var t=this;this.requester=this.activeTicket.user,this.requester&&this.tickets.getTickets({user_id:this.requester.id,per_page:6}).subscribe((function(e){t.otherTickets=e.pagination.data.filter((function(e){return e.id!==t.activeTicket.id}))}))}},{key:"setEnvatoPurchase",value:function(){var t=this.conversation.getCategory();if(this.requester.purchase_codes.length&&t){var e=t.name.toLowerCase(),n=this.requester.purchase_codes.find((function(t){return t.item_name.toLowerCase().indexOf(e)>-1}));this.envatoPurchase=n||this.requester.purchase_codes[0]}}},{key:"changeCustomer",value:function(){var t=this;this.modal.open(r.a).beforeClosed().subscribe((function(e){e&&t.tickets.update(t.activeTicket.id,{user_id:e.id}).subscribe((function(){t.requester=e,t.loadUserData(),t.toast.open("Customer changed.")}))}))}},{key:"loadUserData",value:function(){this.getUserTicketsExceptCurrent(),this.setEnvatoPurchase()}}]),t}();return t.\u0275fac=function(e){return new(e||t)(a.Rb(o.a),a.Rb(s.a),a.Rb(c.a),a.Rb(l.a),a.Rb(u.a))},t.\u0275cmp=a.Lb({type:t,selectors:[["conversation-sidebar"]],decls:8,vars:4,consts:[["class","user-info",4,"ngIf"],[1,"tickets-list-container"],[1,"title",3,"click"],["trans","",1,"text"],[1,"no-style","toggle-button"],["svgIcon","keyboard-arrow-down"],["class","tickets-list toggle-container",4,"ngIf"],[1,"user-info"],[1,"avatar",3,"routerLink"],["alt","Avatar",3,"src"],[1,"user-details"],[1,"name"],[1,"text",3,"title"],["mat-icon-button","",3,"matMenuTriggerFor"],["svgIcon","settings"],[1,"info-line"],["svgIcon","mail"],[3,"title"],["editCustomerMenu","matMenu"],["mat-menu-item","","trans","",3,"routerLink"],["mat-menu-item","","trans","",3,"click"],["class","info-container",4,"ngIf"],[1,"info-container"],[1,"info-title"],["trans",""],["class","info-line",4,"ngIf"],["class","info-line",3,"matTooltip",4,"ngIf"],[1,"envato-purchases"],["class","purchase-item",4,"ngFor","ngForOf"],["svgIcon","person"],["target","_blank",3,"href","title"],[1,"info-line",3,"matTooltip"],["svgIcon","access-time"],[1,"purchase-item"],["alt","Purchase image",3,"src"],[1,"purchase-name"],[1,"tickets-list","toggle-container"],["class","ticket",3,"open","click",4,"ngFor","ngForOf"],[1,"ticket",3,"click"]],template:function(t,e){1&t&&(a.Lc(0,C,20,13,"div",0),a.Xb(1,"div",1),a.Xb(2,"div",2),a.fc("click",(function(t){return e.previousTicketsVisible=!e.previousTicketsVisible})),a.Xb(3,"span",3),a.Nc(4,"Other Conversations"),a.Wb(),a.Xb(5,"button",4),a.Sb(6,"mat-icon",5),a.Wb(),a.Wb(),a.Lc(7,S,2,1,"div",6),a.Wb()),2&t&&(a.rc("ngIf",e.requester),a.Db(1),a.Hb("tickets-visible",e.previousTicketsVisible),a.Db(6),a.rc("ngIf",e.otherTickets))},directives:[d.t,h.a,b.a,l.i,f.b,p.d,p.e,p.b,d.s,g.a],pipes:[d.E,m.a,v.a],styles:["conversation-sidebar{display:block;-webkit-box-flex:0;flex:0 0 240px;width:240px;background-color:var(--be-background-alternative);border-left:1px solid var(--be-divider-default)}@media screen and (max-width:768px){conversation-sidebar{display:none}}conversation-sidebar .user-info{margin:15px 15px 10px;border-bottom:1px solid var(--be-divider-default);padding-bottom:10px}conversation-sidebar .user-info .avatar{display:block;width:100%;text-align:center;margin-bottom:10px}conversation-sidebar .user-info .avatar img{max-width:55px;max-height:65px;margin:0 auto;border-radius:4px}conversation-sidebar .user-info .user-details{color:var(--be-secondary-text)}conversation-sidebar .user-info .user-details a{color:inherit}conversation-sidebar .user-info .user-details .name{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;font-size:1.7rem;max-height:24px}conversation-sidebar .user-info .user-details .name .text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}conversation-sidebar .user-info .user-details .name .mat-icon-button{margin-left:auto;color:var(--be-secondary-text);flex-shrink:0}conversation-sidebar .user-info .user-details .info-container{margin-top:10px;padding-top:10px;border-top:1px solid var(--be-divider-default)}conversation-sidebar .user-info .user-details .envato-purchases{margin-top:15px}conversation-sidebar .user-info .user-details .purchase-item{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;white-space:nowrap;margin-bottom:8px}conversation-sidebar .user-info .user-details .purchase-item img{width:25px;height:25px;margin-right:8px;border-radius:4px}conversation-sidebar .user-info .user-details .purchase-item .purchase-name{max-width:calc(100% - 30px);overflow:hidden;text-overflow:ellipsis}conversation-sidebar .user-info .user-details .info-title{margin-bottom:4px;font-weight:500}conversation-sidebar .user-info .user-details .info-line{padding:3px 0;overflow:hidden;text-overflow:ellipsis}conversation-sidebar .user-info .user-details .mat-icon{vertical-align:middle;width:18px;height:18px;margin-right:2px}conversation-sidebar .tickets-list-container{padding:0 15px}conversation-sidebar .tickets-list-container .title{position:relative;cursor:pointer}conversation-sidebar .tickets-list-container .title .toggle-button{position:absolute;right:0;top:-2px;color:var(--be-secondary-text)}conversation-sidebar .tickets-list-container .title .toggle-button .mat-icon{-webkit-transition:all .3s ease;transition:all .3s ease}conversation-sidebar .tickets-list-container .tickets-list{margin-top:15px;display:none}conversation-sidebar .tickets-list-container .tickets-list .ticket{color:var(--be-secondary-text);margin-bottom:15px;cursor:pointer}conversation-sidebar .tickets-list-container .tickets-list .ticket .mat-icon{color:var(--be-secondary-text);width:17px;height:17px;vertical-align:middle;margin-right:3px}conversation-sidebar .tickets-list-container .tickets-list .ticket:hover{text-decoration:underline;color:var(--be-text)}conversation-sidebar .tickets-list-container .tickets-list .ticket.open{color:var(--be-text)}conversation-sidebar .tickets-list-container.tickets-visible .tickets-list{display:block}conversation-sidebar .tickets-list-container.tickets-visible .toggle-button .mat-icon{display:inline-block;-webkit-transform:rotate(180deg);transform:rotate(180deg)}"],encapsulation:2}),t}()},HZF8:function(t,e,n){"use strict";var i=n("zfKp");e.isInteropObservable=function(t){return t&&"function"==typeof t[i.observable]}},I65S:function(t,e,n){"use strict";var i=n("nzqU"),r=n("zzsZ"),a=n("2qMH");e.of=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[t.length-1];return i.isScheduler(n)?(t.pop(),a.scheduleArray(t,n)):r.fromArray(t)}},IgbF:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var i=n("fXoL"),r=n("sPnx"),a=function(){var t=function(){function t(e){_classCallCheck(this,t),this.http=e,this.baseUri="tags"}return _createClass(t,[{key:"getTags",value:function(t){return this.http.getWithCache(this.baseUri,t)}},{key:"createNew",value:function(t){return this.http.post(this.baseUri,t)}},{key:"update",value:function(t,e){return this.http.put(this.baseUri+"/"+t,e)}},{key:"deleteMultiple",value:function(t){return this.http.delete(this.baseUri+"/delete-multiple",{ids:t})}},{key:"search",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e=Object.assign({query:t,notType:"status",perPage:10},e),this.http.get(this.baseUri,e)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(i.bc(r.a))},t.\u0275prov=i.Nb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},JZOH:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var i=n("ofXK"),r=n("bTqV"),a=n("NFeN"),o=n("k3xQ"),s=n("Bf/s"),c=n("fXoL"),l=function(){var t=function t(){_classCallCheck(this,t)};return t.\u0275mod=c.Pb({type:t}),t.\u0275inj=c.Ob({factory:function(e){return new(e||t)},imports:[[i.c,s.a,r.c,a.b,o.a]]}),t}()},KHpT:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var i=n("fXoL"),r=n("LsVx"),a=n("i2dy"),o=function(){var t=function(){function t(e,n){_classCallCheck(this,t),this.tickets=e,this.toast=n,this.replies=[],this.currentPage=1,this.lastPage=2,this.isLoading=!1}return _createClass(t,[{key:"get",value:function(){return this.replies}},{key:"add",value:function(t){t&&t.id&&(this.replies.find((function(e){return e.id===t.id}))||this.replies.unshift(t))}},{key:"replace",value:function(t){var e=this.replies.findIndex((function(e){return e.id===t.id}));this.replies[e]=t}},{key:"remove",value:function(t){this.replies=this.replies.filter((function(e){return e.id!==t}))}},{key:"delete",value:function(t){var e=this;this.tickets["drafts"===t.type?"deleteDraft":"deleteReply"](t.id).subscribe((function(){e.remove(t.id),e.toast.open("Deleted successfully")}))}},{key:"loadMore",value:function(){var t=this;this.isLoading||(this.isLoading=!0,this.tickets.getTicketReplies(this.ticketId,this.currentPage+1).subscribe((function(e){t.replies=t.replies.concat(e.pagination.data),t.currentPage=e.pagination.current_page,t.lastPage=e.pagination.last_page,t.isLoading=!1}),(function(){t.isLoading=!1})))}},{key:"canLoadMore",value:function(){return this.currentPage<this.lastPage}},{key:"init",value:function(t,e){this.replies=t.slice(),this.currentPage=1,this.lastPage=2,this.ticketId=e}}]),t}();return t.\u0275fac=function(e){return new(e||t)(i.bc(r.a),i.bc(a.a))},t.\u0275prov=i.Nb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},KKQg:function(t,e,n){"use strict";var i,r,a=n("mrSG"),o=n("fXoL"),s=n("Lm4C"),c=n("h586"),l=n("QeDF"),u=n("JYI4"),d=n("WmcL"),h=n("3Pt+"),b=n("Kj3r"),f=n("W5HX"),p=n("kmQS"),g=n("5o4b"),m=n("OnlV"),v=n("VaLf"),y=((i=function(){function t(e,n,i,r,a){_classCallCheck(this,t),this.settings=e,this.zone=n,this.lazyLoader=i,this.breakpoints=r,this.i18n=a,this.makeBootstrapPromise()}return _createClass(t,[{key:"reset",value:function(){this.editorIsReady()&&(this.tinymceInstance.setContent(""),this.tinymceInstance.undoManager.clear())}},{key:"focus",value:function(){var t=this;this.waitForEditor().then((function(){t.tinymceInstance.focus(!1)}))}},{key:"hasUndo",value:function(){return this.editorIsReady()&&this.tinymceInstance.undoManager.hasUndo()}},{key:"hasRedo",value:function(){return this.editorIsReady()&&this.tinymceInstance.undoManager.hasRedo()}},{key:"queryCommandState",value:function(t){return this.editorIsReady()&&this.tinymceInstance.queryCommandState(t)}},{key:"execCommand",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.waitForEditor().then((function(){e.zone.run((function(){e.tinymceInstance.execCommand(t,!1,n)}))}))}},{key:"getContents",value:function(t){return this.editorIsReady()?this.tinymceInstance.getContent(t):""}},{key:"setContents",value:function(t){var e=this;this.waitForEditor().then((function(){e.tinymceInstance.undoManager&&(e.tinymceInstance.undoManager.transact((function(){e.tinymceInstance.setContent(t)})),e.tinymceInstance.selection.setCursorLocation(),e.tinymceInstance.nodeChanged(),e.tinymceInstance.execCommand("mceResize"))}))}},{key:"insertContents",value:function(t){var e=this;this.waitForEditor().then((function(){e.tinymceInstance.execCommand("mceInsertContent",!1,t),setTimeout((function(){return e.tinymceInstance.selection.collapse()}))}))}},{key:"insertImage",value:function(t){var e=this;this.waitForEditor().then((function(){e.insertContents('<img src="'+t+'"/>'),setTimeout((function(){return e.execCommand("mceAutoResize")}),500)}))}},{key:"waitForEditor",value:function(){var t=this;return this.tinymceInstance?new Promise((function(e){return e(t.tinymceInstance)})):this.bootstrapPromise?this.bootstrapPromise:void 0}},{key:"setConfig",value:function(t){var e=this;this.config=t,this.loadTinymce().then((function(){e.initTinymce()}))}},{key:"editorIsReady",value:function(){return!this.bootstrapPromise&&!!this.tinymceInstance&&!!this.tinymceInstance.undoManager}},{key:"loadTinymce",value:function(){return this.lazyLoader.loadAsset("js/tinymce/tinymce.min.js",{type:"js"})}},{key:"initTinymce",value:function(){var t=this,e={target:this.config.textAreaEl.nativeElement,plugins:["link","codesample","paste","autoresize"],branding:!1,browser_spellcheck:!0,max_height:this.config.maxHeight,min_height:this.config.minHeight,autoresize_on_init:!1,paste_as_text:!0,elementpath:!1,statusbar:!1,menubar:!1,convert_urls:!1,forced_root_block:!1,element_format:"html",body_class:"editor-body",content_style:'html {font-size: 62.5%;}\n.editor-body {font-size: 1.4rem;font-family: "Roboto", "Helvetica Neue", sans-serif;color: rgba(0, 0, 0, .87);}\nimg {max-width: 100%}\ncode[class*=language-], pre[class*=language-] {font-size: inherit;}',content_css:["https://fonts.googleapis.com/css?family=Roboto:300,400,500,700,400italic"],default_link_target:"_blank",link_assume_external_targets:!0,target_list:!1,link_title:!1,image_dimensions:!1,image_description:!1,setup:function(e){t.tinymceInstance=e,e.on("change",(function(){return t.config.onChange.emit(e.getContent())})),e.on("click",(function(){t.zone.run((function(){}))})),e.shortcuts.add("ctrl+13","desc",(function(){t.zone.run((function(){t.config.onChange.emit(e.getContent()),t.config.onCtrlEnter.emit()}))}))},init_instance_callback:function(){t.bootstrapPromise=!1,t.bootstrapPromiseResolve(t.tinymceInstance)}};if(this.breakpoints.isMobile$.value||(e.toolbar=!1),this.config.showAdvancedControls&&(e.plugins=e.plugins.concat(["media","hr","visualblocks","visualchars","wordcount"]),e.forced_root_block="p",e.statusbar=!0,e.autoresize_on_init=!0,e.extended_valid_elements="svg[*],use[*],iframe[src],script[src]",e.elementpath=!0,e.content_css.push(this.settings.getAssetUrl()+"css/advanced-editor-styles.css"),e.target_list=[{title:this.i18n.t("Current window"),value:""},{title:this.i18n.t("New Window"),value:"_blank"}]),"auto"===this.config.minHeight){var n=this.config.editorEl.nativeElement.parentElement.offsetHeight-74-4;e.min_height=n,e.max_height=n}tinymce.init(e)}},{key:"destroyEditor",value:function(){try{this.tinymceInstance&&this.tinymceInstance.remove(),this.tinymceInstance=null,this.makeBootstrapPromise()}catch(t){}}},{key:"makeBootstrapPromise",value:function(){var t=this;this.bootstrapPromise=new Promise((function(e){return t.bootstrapPromiseResolve=e}))}}]),t}()).\u0275fac=function(t){return new(t||i)(o.bc(p.a),o.bc(o.A),o.bc(g.a),o.bc(m.a),o.bc(v.a))},i.\u0275prov=o.Nb({token:i,factory:i.\u0275fac,providedIn:"root"}),i),k=n("twBr"),_=n("dz5c"),w=n("sJvS"),x=n("tU2R"),C=n("PCqb"),D=n("JWVf"),S=((r=function(t){function e(){var t;return _classCallCheck(this,e),(t=_possibleConstructorReturn(this,_getPrototypeOf(e).apply(this,arguments))).DEFAULT_MAX_SIZE_MB=3,t}return _inherits(e,t),_createClass(e,[{key:"initValidations",value:function(){var t,e=[new x.a({maxSize:Object(C.a)(this.DEFAULT_MAX_SIZE_MB,"MB")},this.i18n),new D.a({types:["image"]},this.i18n)];(t=this.validations).push.apply(t,e)}}]),e}(w.a)).\u0275fac=function(t){return O(t||r)},r.\u0275prov=o.Nb({token:r,factory:r.\u0275fac,providedIn:"root"}),r),O=o.Zb(S),I=n("ofXK"),R=n("Qu3c"),X=n("NFeN"),T=n("STbY"),P=n("Rd8u"),W=n("zW5C");n.d(e,"a",(function(){return B}));var L=["visualArea"],E=["sourceArea"];function j(t,e){if(1&t){var n=o.Yb();o.Xb(0,"div",3),o.Xb(1,"button",4),o.fc("click",(function(t){return o.Cc(n),o.jc().openFileUploadDialog()})),o.kc(2,"trans"),o.Sb(3,"mat-icon",19),o.Wb(),o.Wb()}2&t&&(o.Db(1),o.rc("matTooltip",o.lc(2,1,"Add Attachment")))}function M(t,e){if(1&t){var n=o.Yb();o.Xb(0,"div",3),o.Xb(1,"button",4),o.fc("click",(function(t){return o.Cc(n),o.jc().execCommand("codesample")})),o.kc(2,"trans"),o.Sb(3,"mat-icon",20),o.Wb(),o.Wb()}2&t&&(o.Db(1),o.rc("matTooltip",o.lc(2,1,"Insert Code Sample")))}function N(t,e){if(1&t){var n=o.Yb();o.Xb(0,"button",23),o.fc("click",(function(t){return o.Cc(n),o.jc(2).openInsertImageModal()})),o.kc(1,"trans"),o.Sb(2,"mat-icon",24),o.Wb()}2&t&&o.rc("matTooltip",o.lc(1,1,"Insert Image"))}function A(t,e){if(1&t){var n=o.Yb();o.Xb(0,"div",3),o.Xb(1,"button",4),o.fc("click",(function(t){return o.Cc(n),o.jc().execCommand("mceLink")})),o.kc(2,"trans"),o.Sb(3,"mat-icon",21),o.Wb(),o.Lc(4,N,3,3,"button",22),o.Wb()}if(2&t){var i=o.jc();o.Db(1),o.Hb("active",i.queryCommandState("link")),o.rc("matTooltip",o.lc(2,4,"Insert Link")),o.Db(3),o.rc("ngIf",i.currentUser.hasPermission("files.create"))}}function F(t,e){if(1&t){var n=o.Yb();o.Xb(0,"div",1),o.Xb(1,"div",3),o.Xb(2,"button",25),o.Xb(3,"span",26),o.Nc(4,"Insert"),o.Wb(),o.Sb(5,"mat-icon",27),o.Wb(),o.Xb(6,"mat-menu",null,28),o.Xb(8,"div",29),o.fc("click",(function(t){return o.Cc(n),o.jc().execCommand("InsertHorizontalRule")})),o.Sb(9,"mat-icon",30),o.Xb(10,"span",26),o.Nc(11,"Horizontal Line"),o.Wb(),o.Wb(),o.Xb(12,"div",29),o.fc("click",(function(t){return o.Cc(n),o.jc().execCommand("mceLink")})),o.Sb(13,"mat-icon",21),o.Xb(14,"span",26),o.Nc(15,"Link"),o.Wb(),o.Wb(),o.Xb(16,"div",29),o.fc("click",(function(t){return o.Cc(n),o.jc().execCommand("mceMedia")})),o.Sb(17,"mat-icon",31),o.Xb(18,"span",26),o.Nc(19,"Media"),o.Wb(),o.Wb(),o.Xb(20,"div",32),o.fc("click",(function(t){return o.Cc(n),o.jc().insertInfoContainer("important")})),o.Sb(21,"mat-icon",33),o.Xb(22,"span",26),o.Nc(23,"Important"),o.Wb(),o.Wb(),o.Xb(24,"div",32),o.fc("click",(function(t){return o.Cc(n),o.jc().insertInfoContainer("warning")})),o.Sb(25,"mat-icon",34),o.Xb(26,"span",26),o.Nc(27,"Warning"),o.Wb(),o.Wb(),o.Xb(28,"div",32),o.fc("click",(function(t){return o.Cc(n),o.jc().insertInfoContainer("note")})),o.Sb(29,"mat-icon",35),o.Xb(30,"span",26),o.Nc(31,"Note"),o.Wb(),o.Wb(),o.Wb(),o.Wb(),o.Xb(32,"div",3),o.Xb(33,"button",36),o.Xb(34,"span",26),o.Nc(35,"Format"),o.Wb(),o.Sb(36,"mat-icon",27),o.Wb(),o.Xb(37,"mat-menu",37,38),o.Xb(39,"div",29),o.fc("click",(function(t){return o.Cc(n),o.jc().execCommand("FormatBlock","h1")})),o.Xb(40,"div",39),o.Nc(41,"Heading 1"),o.Wb(),o.Xb(42,"div",40),o.Nc(43,"Ctrl+Alt+1"),o.Wb(),o.Wb(),o.Xb(44,"div",29),o.fc("click",(function(t){return o.Cc(n),o.jc().execCommand("FormatBlock","h2")})),o.Xb(45,"div",39),o.Nc(46,"Heading 2"),o.Wb(),o.Xb(47,"div",40),o.Nc(48,"Ctrl+Alt+2"),o.Wb(),o.Wb(),o.Xb(49,"div",29),o.fc("click",(function(t){return o.Cc(n),o.jc().execCommand("FormatBlock","h3")})),o.Xb(50,"div",39),o.Nc(51,"Heading 3"),o.Wb(),o.Xb(52,"div",40),o.Nc(53,"Ctrl+Alt+3"),o.Wb(),o.Wb(),o.Xb(54,"div",29),o.fc("click",(function(t){return o.Cc(n),o.jc().execCommand("strikethrough")})),o.Xb(55,"div",39),o.Nc(56,"Strikethrough"),o.Wb(),o.Xb(57,"div",40),o.Nc(58,"Alt+Shift+5"),o.Wb(),o.Wb(),o.Xb(59,"div",29),o.fc("click",(function(t){return o.Cc(n),o.jc().execCommand("superscript")})),o.Xb(60,"div",39),o.Nc(61,"Superscript"),o.Wb(),o.Xb(62,"div",40),o.Nc(63,"Ctrl+."),o.Wb(),o.Wb(),o.Xb(64,"div",29),o.fc("click",(function(t){return o.Cc(n),o.jc().execCommand("subscript")})),o.Xb(65,"div",39),o.Nc(66,"Subscript"),o.Wb(),o.Xb(67,"div",40),o.Nc(68,"Ctrl+,"),o.Wb(),o.Wb(),o.Xb(69,"div",29),o.fc("click",(function(t){return o.Cc(n),o.jc().execCommand("mceBlockQuote")})),o.Xb(70,"div",39),o.Nc(71,"Blockquote"),o.Wb(),o.Xb(72,"div",40),o.Nc(73,"Ctrl+Alt+B"),o.Wb(),o.Wb(),o.Xb(74,"div",29),o.fc("click",(function(t){return o.Cc(n),o.jc().execCommand("FormatBlock","p")})),o.Xb(75,"div",39),o.Nc(76,"Paragraph"),o.Wb(),o.Xb(77,"div",40),o.Nc(78,"Ctrl+Alt+0"),o.Wb(),o.Wb(),o.Wb(),o.Wb(),o.Xb(79,"div",3),o.Xb(80,"button",41,42),o.Xb(82,"span",26),o.Nc(83,"Color"),o.Wb(),o.Sb(84,"mat-icon",27),o.Wb(),o.Xb(85,"mat-menu",43,44),o.Xb(87,"div",45),o.fc("click",(function(t){o.Cc(n);var e=o.zc(81);return o.jc().showColorPicker("ForeColor",e)})),o.Sb(88,"mat-icon",46),o.Xb(89,"span",26),o.Nc(90,"Text Color"),o.Wb(),o.Wb(),o.Xb(91,"div",47),o.fc("click",(function(t){o.Cc(n);var e=o.zc(81);return o.jc().showColorPicker("HiliteColor",e)})),o.Sb(92,"mat-icon",48),o.Xb(93,"span",26),o.Nc(94,"Background Color"),o.Wb(),o.Wb(),o.Wb(),o.Wb(),o.Xb(95,"div",3),o.Xb(96,"button",4),o.fc("click",(function(t){return o.Cc(n),o.jc().execCommand("justifyLeft")})),o.kc(97,"trans"),o.Sb(98,"mat-icon",49),o.Wb(),o.Xb(99,"button",4),o.fc("click",(function(t){return o.Cc(n),o.jc().execCommand("justifyCenter")})),o.kc(100,"trans"),o.Sb(101,"mat-icon",50),o.Wb(),o.Xb(102,"button",4),o.fc("click",(function(t){return o.Cc(n),o.jc().execCommand("justifyRight")})),o.kc(103,"trans"),o.Sb(104,"mat-icon",51),o.Wb(),o.Wb(),o.Xb(105,"div",3),o.Xb(106,"button",4),o.fc("click",(function(t){return o.Cc(n),o.jc().execCommand("Outdent")})),o.kc(107,"trans"),o.Sb(108,"mat-icon",52),o.Wb(),o.Xb(109,"button",4),o.fc("click",(function(t){return o.Cc(n),o.jc().execCommand("Indent")})),o.kc(110,"trans"),o.Sb(111,"mat-icon",53),o.Wb(),o.Wb(),o.Xb(112,"div",54),o.Xb(113,"button",55),o.fc("click",(function(t){return o.Cc(n),o.jc().showVisualEditor()})),o.Nc(114,"Visual "),o.Wb(),o.Xb(115,"button",56),o.fc("click",(function(t){return o.Cc(n),o.jc().showSourceEditor()})),o.Nc(116,"Source "),o.Wb(),o.Wb(),o.Wb()}if(2&t){var i=o.zc(7),r=o.zc(38),a=o.zc(86),s=o.jc();o.Db(2),o.rc("matMenuTriggerFor",i),o.Db(31),o.rc("matMenuTriggerFor",r),o.Db(47),o.rc("matMenuTriggerFor",a),o.Db(16),o.Hb("active",s.queryCommandState("justifyLeft")),o.rc("matTooltip",o.lc(97,18,"Align Left")),o.Db(3),o.Hb("active",s.queryCommandState("justifyCenter")),o.rc("matTooltip",o.lc(100,20,"Center")),o.Db(3),o.Hb("active",s.queryCommandState("justifyRight")),o.rc("matTooltip",o.lc(103,22,"Align Right")),o.Db(4),o.rc("matTooltip",o.lc(107,24,"Decrease Indent")),o.Db(3),o.rc("matTooltip",o.lc(110,26,"Increase Indent")),o.Db(4),o.Hb("active","visual"===s.activeEditor),o.Db(2),o.Hb("active","source"===s.activeEditor)}}var z,H=[[["","customButtons",""]],[["","header",""]],[["","footer",""]]],V=["[customButtons]","[header]","[footer]"],B=((z=function(){function t(e,n,i,r,a,s,c,l){_classCallCheck(this,t),this.editor=e,this.currentUser=n,this.uploadQueue=i,this.settings=r,this.renderer=a,this.el=s,this.overlayPanel=c,this.imageValidator=l,this.sourceAreaControl=new h.h,this.activeEditor="visual",this.showAdvancedControls=!1,this.basic=!1,this.minHeight=183,this.maxHeight=530,this.onChange=new o.o,this.onCtrlEnter=new o.o,this.onFileUpload=new o.o}return _createClass(t,[{key:"ngAfterViewInit",value:function(){this.bootTextEditor()}},{key:"ngOnDestroy",value:function(){this.destroyEditor()}},{key:"reset",value:function(){this.editor.reset()}},{key:"focus",value:function(){this.editor.focus()}},{key:"hasUndo",value:function(){return this.editor.hasUndo()}},{key:"hasRedo",value:function(){return this.editor.hasRedo()}},{key:"queryCommandState",value:function(t){return this.editor.queryCommandState(t)}},{key:"execCommand",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.editor.execCommand(t,e)}},{key:"insertInfoContainer",value:function(t){this.insertContents('<div class="widget widget-'.concat(t,'"><div class="title">').concat(Object(d.a)(t),":</div><br></div><br>"))}},{key:"showColorPicker",value:function(t,e){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark((function i(){var r,a,s=this;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,n.e(1).then(n.bind(null,"0PT2"));case 2:r=i.sent,a=r.BeColorPickerModule,this.overlayPanel.open(a.components.panel,{origin:new o.l(e),position:u.a}).valueChanged().pipe(Object(b.a)(50)).subscribe((function(e){s.execCommand(t,e)}));case 5:case"end":return i.stop()}}),i,this)})))}},{key:"showVisualEditor",value:function(){this.editor.tinymceInstance.contentAreaContainer&&"visual"!==this.activeEditor&&(this.activeEditor="visual",this.renderer.setStyle(this.editor.tinymceInstance.contentAreaContainer,"display","block"),this.renderer.setStyle(this.sourceTextArea.nativeElement,"display","none"),this.editor.focus())}},{key:"showSourceEditor",value:function(){this.editor.tinymceInstance.contentAreaContainer&&"source"!==this.activeEditor&&(this.activeEditor="source",this.renderer.setStyle(this.sourceTextArea.nativeElement,"height",this.editor.tinymceInstance.contentAreaContainer.offsetHeight+"px"),this.renderer.setStyle(this.sourceTextArea.nativeElement,"display","block"),this.renderer.setStyle(this.editor.tinymceInstance.contentAreaContainer,"display","none"),this.sourceAreaControl.setValue(this.editor.getContents({source_view:!0})))}},{key:"openFileUploadDialog",value:function(){var t=this;Object(s.a)({multiple:!0}).then((function(e){t.onFileUpload.emit(e)}))}},{key:"openInsertImageModal",value:function(){var t=this,e={uri:f.a.Image,validator:this.imageValidator,httpParams:{diskPrefix:this.inlineUploadPrefix}};Object(s.a)({types:[l.a.image]}).then((function(n){t.uploadQueue.start(n,e).subscribe((function(e){t.insertImage(t.settings.getBaseUrl(!0)+e.fileEntry.url)}))}))}},{key:"getContents",value:function(){return this.editor.getContents()}},{key:"setContents",value:function(t){this.editor.setContents(t)}},{key:"insertContents",value:function(t){this.editor.insertContents(t)}},{key:"insertImage",value:function(t){this.editor.insertImage(t)}},{key:"insertLink",value:function(t){this.insertContents('<a href="'.concat(t.href,'" target="').concat(t.target||"self",'">').concat(t.text,"</a>"))}},{key:"destroyEditor",value:function(){this.editor.destroyEditor()}},{key:"bootTextEditor",value:function(){this.editor.setConfig({textAreaEl:this.visualTextArea,editorEl:this.el,minHeight:this.minHeight,maxHeight:this.maxHeight,onChange:this.onChange,onCtrlEnter:this.onCtrlEnter,showAdvancedControls:this.showAdvancedControls})}}]),t}()).\u0275fac=function(t){return new(t||z)(o.Rb(y),o.Rb(k.a),o.Rb(c.a),o.Rb(p.a),o.Rb(o.G),o.Rb(o.l),o.Rb(_.a),o.Rb(S))},z.\u0275cmp=o.Lb({type:z,selectors:[["text-editor"]],viewQuery:function(t,e){var n;1&t&&(o.Jc(L,!0),o.Jc(E,!0)),2&t&&(o.yc(n=o.gc())&&(e.visualTextArea=n.first),o.yc(n=o.gc())&&(e.sourceTextArea=n.first))},inputs:{showAdvancedControls:"showAdvancedControls",basic:"basic",minHeight:"minHeight",maxHeight:"maxHeight",inlineUploadPrefix:"inlineUploadPrefix"},outputs:{onChange:"onChange",onCtrlEnter:"onCtrlEnter",onFileUpload:"onFileUpload"},features:[o.Cb([c.a])],ngContentSelectors:V,decls:41,vars:47,consts:[[1,"editor-header"],[1,"toolbar-row"],["class","header-actions",4,"ngIf"],[1,"header-actions"],["type","button",1,"no-style","editor-button",3,"matTooltip","click"],["svgIcon","undo"],["svgIcon","redo"],["svgIcon","format-bold"],["svgIcon","format-italic"],["svgIcon","format-underlined"],["svgIcon","format-list-bulleted"],["svgIcon","format-list-numbered"],[1,"header-actions","last"],["svgIcon","format-clear"],["class","toolbar-row",4,"ngIf"],["rows","8",1,"source-textarea",2,"display","none",3,"formControl","blur"],["sourceArea",""],["rows","8",1,"visual-textarea"],["visualArea",""],["svgIcon","attachment"],["svgIcon","code"],["svgIcon","link"],["type","button","class","no-style editor-button image-modal-button",3,"matTooltip","click",4,"ngIf"],["type","button",1,"no-style","editor-button","image-modal-button",3,"matTooltip","click"],["svgIcon","image"],["type","button",1,"no-style","editor-button","text-button","insert-button",3,"matMenuTriggerFor"],["trans",""],["svgIcon","arrow-drop-down",1,"caret"],["insertMenu",""],["mat-menu-item","",3,"click"],["svgIcon","remove"],["svgIcon","videocam"],["mat-menu-item","","trans","",3,"click"],["svgIcon","star"],["svgIcon","warning"],["svgIcon","note"],["type","button",1,"no-style","editor-button","text-button","format-button",3,"matMenuTriggerFor"],[1,"format-menu","menu-with-alt-text"],["formatMenu",""],["trans","",1,"text"],[1,"alt-text"],["type","button",1,"no-style","editor-button","text-button","color-button",3,"matMenuTriggerFor"],["colorPickerOrigin",""],[1,"color-dropdown"],["colorMenu",""],["mat-menu-item","",1,"text-color-item",3,"click"],["svgIcon","format-color-text"],["mat-menu-item","",1,"bg-color-item",3,"click"],["svgIcon","format-color-fill"],["svgIcon","format-align-left"],["svgIcon","format-align-center"],["svgIcon","format-align-right"],["svgIcon","format-indent-decrease"],["svgIcon","format-indent-increase"],[1,"header-actions","editor-toggle-buttons"],["type","button","trans","",1,"no-style","editor-button","visual-mode-button",3,"click"],["type","button","trans","",1,"no-style","editor-button","source-mode-button",3,"click"]],template:function(t,e){1&t&&(o.qc(H),o.Xb(0,"div",0),o.Xb(1,"div",1),o.Lc(2,j,4,3,"div",2),o.Lc(3,M,4,3,"div",2),o.Xb(4,"div",3),o.Xb(5,"button",4),o.fc("click",(function(t){return e.execCommand("undo")})),o.kc(6,"trans"),o.Sb(7,"mat-icon",5),o.Wb(),o.Xb(8,"button",4),o.fc("click",(function(t){return e.execCommand("redo")})),o.kc(9,"trans"),o.Sb(10,"mat-icon",6),o.Wb(),o.Wb(),o.Xb(11,"div",3),o.Xb(12,"button",4),o.fc("click",(function(t){return e.execCommand("bold")})),o.kc(13,"trans"),o.Sb(14,"mat-icon",7),o.Wb(),o.Xb(15,"button",4),o.fc("click",(function(t){return e.execCommand("italic")})),o.kc(16,"trans"),o.Sb(17,"mat-icon",8),o.Wb(),o.Xb(18,"button",4),o.fc("click",(function(t){return e.execCommand("underline")})),o.kc(19,"trans"),o.Sb(20,"mat-icon",9),o.Wb(),o.Wb(),o.Xb(21,"div",3),o.Xb(22,"button",4),o.fc("click",(function(t){return e.execCommand("insertunorderedlist")})),o.kc(23,"trans"),o.Sb(24,"mat-icon",10),o.Wb(),o.Xb(25,"button",4),o.fc("click",(function(t){return e.execCommand("insertorderedlist")})),o.kc(26,"trans"),o.Sb(27,"mat-icon",11),o.Wb(),o.Wb(),o.Lc(28,A,5,6,"div",2),o.pc(29),o.Xb(30,"div",12),o.Xb(31,"button",4),o.fc("click",(function(t){return e.execCommand("removeformat")})),o.kc(32,"trans"),o.Sb(33,"mat-icon",13),o.Wb(),o.Wb(),o.pc(34,1),o.Wb(),o.Lc(35,F,117,28,"div",14),o.Wb(),o.Xb(36,"textarea",15,16),o.fc("blur",(function(t){return e.setContents(e.sourceAreaControl.value)})),o.Wb(),o.Sb(38,"textarea",17,18),o.pc(40,2)),2&t&&(o.Db(2),o.rc("ngIf",e.inlineUploadPrefix&&e.currentUser.hasPermission("files.create")),o.Db(1),o.rc("ngIf",!e.basic),o.Db(2),o.Hb("disabled",!e.hasUndo()),o.rc("matTooltip",o.lc(6,31,"Undo")),o.Db(3),o.Hb("disabled",!e.hasRedo()),o.rc("matTooltip",o.lc(9,33,"Redo")),o.Db(4),o.Hb("active",e.queryCommandState("bold")),o.rc("matTooltip",o.lc(13,35,"Bold")),o.Db(3),o.Hb("active",e.queryCommandState("italic")),o.rc("matTooltip",o.lc(16,37,"Italic")),o.Db(3),o.Hb("active",e.queryCommandState("underline")),o.rc("matTooltip",o.lc(19,39,"Underline")),o.Db(4),o.Hb("active",e.queryCommandState("unorderedlist")),o.rc("matTooltip",o.lc(23,41,"Unordered List")),o.Db(3),o.Hb("active",e.queryCommandState("orderedlist")),o.rc("matTooltip",o.lc(26,43,"Ordered List")),o.Db(3),o.rc("ngIf",!e.basic),o.Db(3),o.rc("matTooltip",o.lc(32,45,"Remove Formatting")),o.Db(4),o.rc("ngIf",e.showAdvancedControls),o.Db(1),o.Kc("min-height",e.minHeight),o.rc("formControl",e.sourceAreaControl),o.Db(2),o.Kc("min-height",e.minHeight))},directives:[I.t,R.a,X.a,h.c,h.t,h.i,T.d,P.a,T.e,T.b],pipes:[W.a],styles:["[_nghost-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;min-height:218px;max-height:600px;position:relative;border:1px solid var(--be-divider-default);border-radius:4px;overflow:hidden}[_nghost-%COMP%]     .editor-button{color:#788593;padding:7px;width:36px;height:36px}[_nghost-%COMP%]     .editor-button .mat-icon{height:22px;width:22px}[_nghost-%COMP%]     .editor-button .caret{display:inline-block;width:20px;height:20px;vertical-align:middle}[_nghost-%COMP%]     .editor-button.text-button{display:block;font-weight:300;font-size:1.5rem;width:auto}[_nghost-%COMP%]     .editor-button.disabled{opacity:.4}[_nghost-%COMP%]     .editor-button.active{background-color:rgba(0,0,0,.04)}[_nghost-%COMP%]     .editor-button.success{color:var(--be-accent-default)}[_nghost-%COMP%]     .editor-button:hover{background-color:rgba(0,0,0,.04)}[_nghost-%COMP%]     .editor-footer{position:relative;height:37px;flex-shrink:0;background-color:var(--be-background-alternative);border-top:1px solid var(--be-divider-default)}textarea[_ngcontent-%COMP%]{border:none;outline:none;resize:none;padding:15px}.editor-header[_ngcontent-%COMP%]{clear:both;-webkit-box-flex:0;flex:0 0 37px;background-color:var(--be-background-alternative)}.toolbar-row[_ngcontent-%COMP%]{display:-webkit-box;display:flex;height:37px;border-bottom:1px solid var(--be-divider-default);overflow:hidden}  .header-actions{display:inline-block;border-right:1px solid var(--be-divider-default);height:100%;padding:0 4px}  .header-actions.right{margin-left:auto;margin-right:7px}  .header-actions.last{border-right:none}.editor-toggle-buttons[_ngcontent-%COMP%]{border-right:none;margin-left:auto;padding:0;display:-webkit-box;display:flex}.editor-toggle-buttons[_ngcontent-%COMP%]   .editor-button[_ngcontent-%COMP%]{width:auto}@media only screen and (max-width:768px){.editor-header[_ngcontent-%COMP%]{display:none}}"],changeDetection:0}),z)},LBXl:function(t,e,n){"use strict";e.UnsubscriptionError=function(){function t(t){return Error.call(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(t,e){return e+1+") "+t.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t}()},"LJ/p":function(t,e,n){"use strict";var i=n("Q1FS"),r=n("zB/H"),a=n("VKeD");e.scheduleIterable=function(t,e){if(!t)throw new Error("Iterable cannot be null");return new i.Observable((function(n){var i,o=new r.Subscription;return o.add((function(){i&&"function"==typeof i.return&&i.return()})),o.add(e.schedule((function(){i=t[a.iterator](),o.add(e.schedule((function(){if(!n.closed){var t,e;try{var r=i.next();t=r.value,e=r.done}catch(a){return void n.error(a)}e?n.complete():(n.next(t),this.schedule())}})))}))),o}))}},MNfM:function(t,e,n){"use strict";n.d(e,"a",(function(){return D}));var i=n("Kj3r"),r=n("/uUt"),a=n("eIep"),o=n("JIr8"),s=n("nYR2"),c=n("3Pt+"),l=n("2Vo4"),u=n("LRne"),d=n("fXoL"),h=n("mWN8"),b=n("Rd8u"),f=n("STbY"),p=n("ofXK"),g=n("FBzJ"),m=n("bTqV"),v=n("NFeN"),y=["searchInput"];function k(t,e){if(1&t&&(d.Xb(0,"span"),d.Sb(1,"img",20),d.Nc(2),d.Wb()),2&t){var n=e.ngIf;d.Db(1),d.rc("src",n.avatar,d.Fc),d.Db(1),d.Pc("",n.display_name," ")}}function _(t,e){1&t&&(d.Xb(0,"span",21),d.Nc(1,"Any"),d.Wb())}function w(t,e){if(1&t){var n=d.Yb();d.Xb(0,"button",22),d.fc("click",(function(t){return d.Cc(n),d.jc().clearSearchInput()})),d.Sb(1,"mat-icon",23),d.Wb()}}function x(t,e){if(1&t){var n=d.Yb();d.Xb(0,"button",14),d.fc("click",(function(t){d.Cc(n);var i=e.$implicit;return d.jc().selectUser(i)})),d.Sb(1,"img",20),d.Xb(2,"div",24),d.Xb(3,"div",25),d.Nc(4),d.Wb(),d.Xb(5,"div",26),d.Nc(6),d.Wb(),d.Wb(),d.Wb()}if(2&t){var i=e.$implicit;d.Db(1),d.rc("src",i.avatar,d.Fc),d.Db(3),d.Oc(i.display_name),d.Db(2),d.Oc(i.email)}}function C(t,e){1&t&&(d.Xb(0,"button",27),d.Nc(1,"No users found."),d.Wb())}var D=function(){var t=function(){function t(e){_classCallCheck(this,t),this.users=e,this.searchFormControl=new c.h,this.loading$=new l.a(!1),this.users$=new l.a([]),this.selectedUser$=new l.a(null),this.searchedOnce=!1}return _createClass(t,[{key:"ngOnInit",value:function(){this.bindToSearchControl()}},{key:"writeValue",value:function(t){"object"==typeof t&&this.selectedUser$.next(t)}},{key:"registerOnChange",value:function(t){this.propagateChange=t}},{key:"registerOnTouched",value:function(){}},{key:"bindToSearchControl",value:function(){var t=this;this.searchFormControl.valueChanges.pipe(Object(i.a)(150),Object(r.a)(),Object(a.a)((function(e){return t.searchUsers(e)})),Object(o.a)((function(){return Object(u.a)([])}))).subscribe((function(e){t.searchedOnce=!0,t.users$.next(e)}))}},{key:"searchUsers",value:function(t){var e=this;return this.loading$.next(!0),this.users.getAll({query:t,per_page:7}).pipe(Object(s.a)((function(){return e.loading$.next(!1)})))}},{key:"onMenuOpened",value:function(){var t=this;this.searchedOnce||this.clearSearchInput(),setTimeout((function(){t.searchInput.nativeElement.focus()}))}},{key:"selectUser",value:function(t){this.selectedUser$.next(t),this.propagateChange(t)}},{key:"clearSearchInput",value:function(){this.searchFormControl.setValue("")}},{key:"onMenuClosed",value:function(){this.loading$.next(!1),this.clearSearchInput()}}]),t}();return t.\u0275fac=function(e){return new(e||t)(d.Rb(h.a))},t.\u0275cmp=d.Lb({type:t,selectors:[["select-user-input"]],viewQuery:function(t,e){var n;1&t&&d.Jc(y,!0),2&t&&d.yc(n=d.gc())&&(e.searchInput=n.first)},features:[d.Cb([{provide:c.r,useExisting:t,multi:!0}])],decls:28,vars:16,consts:[[1,"input-container"],["trans","",1,"fake-label"],["tabindex","0",1,"fake-input",3,"matMenuTriggerFor","menuOpened","menuClosed"],[4,"ngIf","ngIfElse"],["anyUser",""],[1,"arrow-container"],[1,"arrow"],["menu","matMenu"],[1,"input-container","search-input-container",3,"click"],[1,"search-input-wrapper"],["type","text","placeholder","Search...","trans-placeholder","",3,"formControl","blur"],["searchInput",""],["class","clear-search-input-button","mat-icon-button","",3,"click",4,"ngIf"],[1,"small",3,"isVisible"],["mat-menu-item","",3,"click"],["src","assets/images/anonymous-user.png"],[1,"info","any-user-info"],["trans","",1,"name"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],["mat-menu-item","","disabled","","trans","",4,"ngIf"],[3,"src"],["trans",""],["mat-icon-button","",1,"clear-search-input-button",3,"click"],["svgIcon","close"],[1,"user-info"],[1,"name"],[1,"email"],["mat-menu-item","","disabled","","trans",""]],template:function(t,e){if(1&t){var n=d.Yb();d.Xb(0,"div",0),d.Xb(1,"div",1),d.Nc(2,"User"),d.Wb(),d.Xb(3,"div",2),d.fc("menuOpened",(function(t){return e.onMenuOpened()}))("menuClosed",(function(t){return e.onMenuClosed()})),d.Lc(4,k,3,2,"span",3),d.kc(5,"async"),d.Lc(6,_,2,0,"ng-template",null,4,d.Mc),d.Xb(8,"div",5),d.Sb(9,"div",6),d.Wb(),d.Wb(),d.Wb(),d.Xb(10,"mat-menu",null,7),d.Xb(12,"div",8),d.fc("click",(function(t){return t.stopPropagation()})),d.Xb(13,"div",9),d.Xb(14,"input",10,11),d.fc("blur",(function(t){return d.Cc(n),d.zc(15).focus()})),d.Wb(),d.Lc(16,w,2,0,"button",12),d.Sb(17,"loading-indicator",13),d.kc(18,"async"),d.Wb(),d.Wb(),d.Xb(19,"button",14),d.fc("click",(function(t){return e.selectUser(null)})),d.Sb(20,"img",15),d.Xb(21,"div",16),d.Xb(22,"div",17),d.Nc(23,"Any User"),d.Wb(),d.Wb(),d.Wb(),d.Lc(24,x,7,3,"button",18),d.kc(25,"async"),d.Lc(26,C,2,0,"button",19),d.kc(27,"async"),d.Wb()}if(2&t){var i=d.zc(7),r=d.zc(11);d.Db(3),d.rc("matMenuTriggerFor",r),d.Db(1),d.rc("ngIf",d.lc(5,8,e.selectedUser$))("ngIfElse",i),d.Db(10),d.rc("formControl",e.searchFormControl),d.Db(2),d.rc("ngIf",e.searchFormControl.value),d.Db(1),d.rc("isVisible",d.lc(18,10,e.loading$)),d.Db(7),d.rc("ngForOf",d.lc(25,12,e.users$)),d.Db(2),d.rc("ngIf",e.searchedOnce&&!d.lc(27,14,e.users$).length)}},directives:[b.a,f.d,p.t,f.e,c.c,c.t,c.i,g.a,f.b,p.s,m.b,v.a],pipes:[p.b],styles:["[_nghost-%COMP%]{display:block;min-width:280px;max-width:100%}.fake-input[_ngcontent-%COMP%]{position:relative}.fake-label[_ngcontent-%COMP%]{text-transform:capitalize}img[_ngcontent-%COMP%]{display:inline-block;margin-right:8px;width:25px;height:25px;-o-object-fit:cover;object-fit:cover;border-radius:4px;vertical-align:middle}.arrow-container[_ngcontent-%COMP%]{height:100%;position:absolute;top:1px;right:1px;width:20px}.arrow[_ngcontent-%COMP%]{position:absolute;border-color:#000 transparent transparent;border-style:solid;border-width:5px 4px 0;height:0;width:0;left:50%;top:50%;margin-left:-4px;margin-top:-2px}.search-input-container[_ngcontent-%COMP%]{padding:0 8px;min-width:280px;max-width:100%}.search-input-wrapper[_ngcontent-%COMP%]{position:relative}.clear-search-input-button[_ngcontent-%COMP%]{position:absolute;top:4px;right:0;color:var(--be-secondary-text)}.mat-menu-item[_ngcontent-%COMP%]{display:-webkit-box;display:flex;vertical-align:middle}.mat-menu-item.selected[_ngcontent-%COMP%]{background-color:var(--be-accent-emphasis)}.mat-menu-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:35px;height:35px}.mat-menu-item[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{text-transform:capitalize}.mat-menu-item[_ngcontent-%COMP%]   .email[_ngcontent-%COMP%]{color:var(--be-secondary-text);font-size:1.3rem}.user-info[_ngcontent-%COMP%]{line-height:normal}.any-user-info[_ngcontent-%COMP%]{line-height:35px}loading-indicator[_ngcontent-%COMP%]{position:absolute;top:12px;right:40px}"],changeDetection:0}),t}()},MZC4:function(t,e,n){"use strict";var i,r,a=n("fXoL"),o=n("M9IT"),s=n("+0xr"),c=n("nPOm"),l=n("0IaG"),u=n("+rOU"),d=n("ZfYz"),h=n("kmQS"),b=n("NFeN"),f=n("Rd8u"),p=n("3Pt+"),g=n("ofXK"),m=n("bTqV"),v=n("pLZG"),y=["*"],k=((i=function(){function t(e){_classCallCheck(this,t),this.fb=e,this.setDefaultDate=!1,this.showLabels=!1,this.datePattern="([12]\\d{3}-(0[1-9]|1[0-2])-(0[1-9]|[12]\\d|3[01]))",this.initiated=!1,this.form=this.fb.group({from:[""],to:[""]}),this.defaultFrom=this.getDefaultDate(7),this.defaultTo=this.getDefaultDate()}return _createClass(t,[{key:"writeValue",value:function(t){var e=_slicedToArray((t||"").split(":"),2),n=e[0],i=e[1];!this.initiated&&this.setDefaultDate&&(n=n||this.defaultFrom,i=i||this.defaultTo),this.initiated=!0,this.form.patchValue({from:n,to:i})}},{key:"registerOnChange",value:function(t){var e=this;this.propagateChange=t,this.form.valueChanges.pipe(Object(v.a)((function(t){return t.from&&t.to}))).subscribe((function(t){e.propagateChange("".concat(t.from,":").concat(t.to))}))}},{key:"registerOnTouched",value:function(){}},{key:"getDefaultDate",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=new Date;e.setDate(e.getDate()-t);var n=this.addZero(e.getMonth()),i=this.addZero(e.getDate());return"".concat(e.getFullYear(),"-").concat(n,"-").concat(i)}},{key:"addZero",value:function(t){return t<10?"0"+t:""+t}}]),t}()).\u0275fac=function(t){return new(t||i)(a.Rb(p.g))},i.\u0275cmp=a.Lb({type:i,selectors:[["between-input"]],inputs:{setDefaultDate:"setDefaultDate",showLabels:"showLabels"},features:[a.Cb([{provide:p.r,useExisting:i,multi:!0}])],ngContentSelectors:y,decls:12,vars:9,consts:[[3,"formGroup"],["trans",""],[1,"inline-inputs-container"],[1,"input-container"],["for","from","trans",""],["type","date","id","from","formControlName","from","required","",3,"placeholder","pattern"],["for","to","trans",""],["type","date","id","to","formControlName","to","required","",3,"placeholder","pattern"]],template:function(t,e){1&t&&(a.qc(),a.Xb(0,"fieldset",0),a.Xb(1,"legend",1),a.pc(2),a.Wb(),a.Xb(3,"div",2),a.Xb(4,"div",3),a.Xb(5,"label",4),a.Nc(6,"From"),a.Wb(),a.Sb(7,"input",5),a.Wb(),a.Xb(8,"div",3),a.Xb(9,"label",6),a.Nc(10,"To"),a.Wb(),a.Sb(11,"input",7),a.Wb(),a.Wb(),a.Wb()),2&t&&(a.rc("formGroup",e.form),a.Db(5),a.Hb("hidden",!e.showLabels),a.Db(2),a.rc("placeholder",e.defaultFrom)("pattern",e.datePattern),a.Db(2),a.Hb("hidden",!e.showLabels),a.Db(2),a.rc("placeholder",e.defaultTo)("pattern",e.datePattern))},directives:[p.u,p.l,f.a,p.c,p.t,p.j,p.E,p.A],styles:["legend[_ngcontent-%COMP%]{text-transform:capitalize}"],changeDetection:0}),i),_=n("MNfM"),w=((r=function t(){_classCallCheck(this,t)}).\u0275fac=function(t){return new(t||r)},r.\u0275cmp=a.Lb({type:r,selectors:[["app-data-table-inputs"]],inputs:{formGroup:"formGroup",filter:"filter"},decls:0,vars:0,template:function(t,e){},encapsulation:2,changeDetection:0}),r);function x(t,e){if(1&t&&(a.Vb(0),a.Xb(1,"between-input",9),a.Nc(2),a.Wb(),a.Ub()),2&t){var n=a.jc(2).$implicit;a.Db(1),a.rc("formControlName",n.column)("setDefaultDate",!1)("showLabels",!1),a.Db(1),a.Oc(n.name)}}function C(t,e){if(1&t&&a.Sb(0,"select-user-input",12),2&t){var n=a.jc(3).$implicit;a.rc("formControlName",n.column)}}function D(t,e){if(1&t&&a.Sb(0,"app-data-table-inputs",13),2&t){var n=a.jc(3).$implicit,i=a.jc();a.rc("formGroup",i.data.source.filterForm)("filter",n)}}function S(t,e){if(1&t&&(a.Vb(0),a.Lc(1,C,1,1,"select-user-input",10),a.Lc(2,D,1,2,"app-data-table-inputs",11),a.Ub()),2&t){var n=a.jc(2).$implicit;a.Db(1),a.rc("ngIf","user"===n.name),a.Db(1),a.rc("ngIf","user"!==n.name)}}function O(t,e){if(1&t&&(a.Vb(0),a.Sb(1,"select-user-input",12),a.Ub()),2&t){var n=a.jc(2).$implicit;a.Db(1),a.rc("formControlName",n.column)}}function I(t,e){if(1&t&&(a.Xb(0,"option",17),a.Nc(1),a.Wb()),2&t){var n=e.$implicit,i=a.jc(4);a.rc("ngValue",i.getValue(n)),a.Db(1),a.Oc(i.optionName(n))}}function R(t,e){if(1&t&&(a.Vb(0),a.Xb(1,"label",14),a.Nc(2),a.Wb(),a.Xb(3,"select",15),a.Lc(4,I,2,2,"option",16),a.Wb(),a.Ub()),2&t){var n=a.jc(2).$implicit,i=a.jc();a.Db(1),a.rc("for",n.name),a.Db(1),a.Oc(i.viewName(n.name)),a.Db(1),a.rc("id",n.name)("formControlName",n.column),a.Db(1),a.rc("ngForOf",n.options)}}function X(t,e){if(1&t&&(a.Xb(0,"div",6),a.Xb(1,"div",7),a.Lc(2,x,3,4,"ng-container",8),a.Lc(3,S,3,2,"ng-container",8),a.Lc(4,O,2,1,"ng-container",8),a.Lc(5,R,5,5,"ng-container",8),a.Wb(),a.Wb()),2&t){var n=a.jc().$implicit;a.Db(1),a.rc("ngSwitch",n.type),a.Db(1),a.rc("ngSwitchCase","date"),a.Db(1),a.rc("ngSwitchCase","custom"),a.Db(1),a.rc("ngSwitchCase","user-select"),a.Db(1),a.rc("ngSwitchCase","select")}}function T(t,e){if(1&t&&(a.Vb(0),a.Lc(1,X,6,5,"div",5),a.Ub()),2&t){var n=e.$implicit,i=a.jc();a.Db(1),a.rc("ngIf",!n.condition||i.settings.get(n.condition))}}var P,W=((P=function(){function t(e,n,i){_classCallCheck(this,t),this.data=e,this.overlayPanelRef=n,this.settings=i,this.portals={}}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.subscription=this.data.source.filterForm.valueChanges.subscribe((function(){return t.close()})),this.data.source.config.filters.forEach((function(e){e.component&&(t.portals[e.name]=new u.d(e.component))}))}},{key:"ngOnDestroy",value:function(){this.subscription&&this.subscription.unsubscribe()}},{key:"viewName",value:function(t){return t.replace(/_/g," ")}},{key:"optionName",value:function(t){return t.displayName||this.viewName(t.name)}},{key:"close",value:function(){this.overlayPanelRef.close()}},{key:"getValue",value:function(t){var e=void 0===t.value?t.name:t.value;return"all"!==e&&"any"!==e||(e=null),e}}]),t}()).\u0275fac=function(t){return new(t||P)(a.Rb(c.a,8),a.Rb(d.a),a.Rb(h.a))},P.\u0275cmp=a.Lb({type:P,selectors:[["filter-panel"]],hostVars:1,hostBindings:function(t,e){2&t&&a.Rc("@dialogContainer","enter")},decls:9,vars:2,consts:[["svgIcon","filter-list"],["trans",""],[1,"many-inputs",3,"formGroup"],[4,"ngFor","ngForOf"],["type","button","mat-button","","color","accent","trans","",3,"click"],["class","input-container",4,"ngIf"],[1,"input-container"],[3,"ngSwitch"],[4,"ngSwitchCase"],[3,"formControlName","setDefaultDate","showLabels"],[3,"formControlName",4,"ngIf"],[3,"formGroup","filter",4,"ngIf"],[3,"formControlName"],[3,"formGroup","filter"],["trans","",3,"for"],[3,"id","formControlName"],["trans","",3,"ngValue",4,"ngFor","ngForOf"],["trans","",3,"ngValue"]],template:function(t,e){1&t&&(a.Xb(0,"header"),a.Sb(1,"mat-icon",0),a.Xb(2,"span",1),a.Nc(3,"Filters"),a.Wb(),a.Wb(),a.Xb(4,"form",2),a.Lc(5,T,2,1,"ng-container",3),a.Wb(),a.Xb(6,"footer"),a.Xb(7,"button",4),a.fc("click",(function(t){return e.close()})),a.Nc(8,"Close"),a.Wb(),a.Wb()),2&t&&(a.Db(4),a.rc("formGroup",e.data.source.filterForm),a.Db(1),a.rc("ngForOf",e.data.source.config.filters))},directives:[b.a,f.a,p.J,p.u,p.l,g.s,m.b,g.t,g.x,g.y,k,p.t,p.j,_.a,w,p.F,p.y,p.I],styles:["[_nghost-%COMP%]{display:block;min-width:250px;background-color:var(--be-background);border-radius:4px;box-shadow:0 8px 9px -5px rgba(0,0,0,.2),0 15px 22px 2px rgba(0,0,0,.14),0 6px 28px 5px rgba(0,0,0,.12)}header[_ngcontent-%COMP%]{border-bottom:1px solid var(--be-divider-default);padding:15px 20px;margin-bottom:20px;font-weight:500}header[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{vertical-align:middle;margin-right:5px}form[_ngcontent-%COMP%]{padding-left:20px;padding-right:20px}label[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{text-transform:capitalize}footer[_ngcontent-%COMP%]{border-top:1px solid var(--be-divider-default);text-align:right;margin-top:10px;padding:10px 20px}"],data:{animation:[l.j.dialogContainer]},changeDetection:0}),P),L=[{originX:"start",originY:"center",overlayX:"end",overlayY:"center",offsetX:5},{originX:"end",originY:"center",overlayX:"start",overlayY:"center",offsetX:5}],E=n("dz5c"),j=n("Dh3D"),M=n("bv9b"),N=n("A5z7"),A=n("bSwM"),F=n("CH4Q");n.d(e,"a",(function(){return nt}));var z=["filterButton"];function H(t,e){1&t&&a.Sb(0,"mat-progress-bar",11)}function V(t,e){if(1&t){var n=a.Yb();a.Xb(0,"mat-chip",27),a.fc("removed",(function(t){a.Cc(n);var i=e.$implicit;return a.jc(3).dataSource.removeFilter(i.column)})),a.Nc(1),a.Sb(2,"mat-icon",28),a.Wb()}if(2&t){var i=e.$implicit;a.rc("removable",!0)("selectable",!1),a.Db(1),a.Pc(" ",i.name," ")}}function B(t,e){if(1&t){var n=a.Yb();a.Vb(0),a.Xb(1,"mat-chip-list",22),a.Lc(2,V,3,3,"mat-chip",23),a.kc(3,"async"),a.Wb(),a.Xb(4,"button",24,25),a.fc("click",(function(t){return a.Cc(n),a.jc(2).openFiltersPanel()})),a.Sb(6,"mat-icon",26),a.Wb(),a.Ub()}if(2&t){var i=a.jc(2);a.Db(2),a.rc("ngForOf",a.lc(3,3,i.dataSource.activeFilters$)),a.Db(2),a.Hb("active",i.filterPanelRef)}}function U(t,e){if(1&t&&(a.Xb(0,"div",12),a.Xb(1,"div",13),a.Xb(2,"div",14),a.pc(3,1),a.Wb(),a.Xb(4,"div",15),a.Lc(5,B,7,5,"ng-container",9),a.pc(6,2),a.Xb(7,"div",16),a.Sb(8,"input",17),a.Sb(9,"mat-icon",18),a.Wb(),a.Wb(),a.Wb(),a.Xb(10,"div",19),a.Xb(11,"div",14),a.Nc(12),a.Xb(13,"span",20),a.Nc(14),a.Wb(),a.Wb(),a.Xb(15,"div",15,21),a.pc(17,3),a.Wb(),a.Wb(),a.Wb()),2&t){var n=a.zc(16),i=a.jc();a.Db(1),a.Hb("hidden",i.dataSource.anyRowsSelected()&&n.children.length),a.Db(4),a.rc("ngIf",null==i.dataSource.config.filters?null:i.dataSource.config.filters.length),a.Db(3),a.tc("placeholder","Search ",i.itemsName,""),a.rc("formControl",i.dataSource.searchControl),a.Db(2),a.Hb("hidden",!i.dataSource.anyRowsSelected()||!n.children.length),a.Db(2),a.Pc("",i.dataSource.selectedRows.selected.length," "),a.Db(2),a.Pc("",i.itemsName," Selected")}}function Y(t,e){if(1&t){var n=a.Yb();a.Xb(0,"mat-header-cell"),a.Xb(1,"mat-checkbox",29),a.fc("change",(function(t){a.Cc(n);var e=a.jc();return t?e.dataSource.toggleAllRows():null})),a.Wb(),a.Wb()}if(2&t){var i=a.jc();a.Db(1),a.rc("checked",i.dataSource.allRowsSelected())("indeterminate",i.dataSource.anyRowsSelected()&&!i.dataSource.allRowsSelected())}}function $(t,e){if(1&t){var n=a.Yb();a.Xb(0,"mat-cell"),a.Xb(1,"mat-checkbox",30),a.fc("click",(function(t){return a.Cc(n),t.stopPropagation()}))("change",(function(t){a.Cc(n);var i=e.$implicit,r=a.jc();return t?r.dataSource.selectedRows.toggle(i):null})),a.Wb(),a.Wb()}if(2&t){var i=e.$implicit,r=a.jc();a.Db(1),a.rc("checked",r.dataSource.selectedRows.isSelected(i))}}function q(t,e){1&t&&a.Sb(0,"mat-header-row")}function K(t,e){1&t&&a.Sb(0,"mat-row")}function Q(t,e){if(1&t&&(a.Xb(0,"no-results-message"),a.Xb(1,"span",33),a.Nc(2,"Nothing To Display."),a.Wb(),a.Xb(3,"span",34),a.Nc(4),a.Wb(),a.Wb()),2&t){var n=a.jc(2);a.Db(4),a.Pc("Seems like no ",n.itemsName," have been created yet.")}}function G(t,e){if(1&t&&(a.Vb(0),a.Xb(1,"div",31,32),a.pc(3,4),a.Wb(),a.Lc(4,Q,5,1,"no-results-message",9),a.Ub()),2&t){var n=a.zc(2);a.Db(4),a.rc("ngIf",!n.children.length)}}var Z,J=["*",[["","headerActions",""]],[["","headerFilters",""]],[["","headerSelectedActions",""]],[["no-results-message"]]],tt=function(){return[10,15,20,50,100]},et=["*","[headerActions]","[headerFilters]","[headerSelectedActions]","no-results-message"],nt=((Z=function(){function t(e){_classCallCheck(this,t),this.overlayPanel=e,this.showCheckbox=!0,this.hideHeader=!1,this.columns=["select"]}return _createClass(t,[{key:"ngOnInit",value:function(){this.dataSource.config.matPaginator=this.matPaginator,this.dataSource.config.matSort&&(this.dataSource.config.matSort.start="desc"),this.dataSource.config.delayInit||this.dataSource.init()}},{key:"ngAfterContentInit",value:function(){var t=this;this.rowDef&&this.table.addRowDef(this.rowDef),this.columnDefs.forEach((function(e){t.columns.push(e.name),t.table.addColumnDef(e)}))}},{key:"openFiltersPanel",value:function(){var t=this;if(this.filterPanelRef)this.filterPanelRef.close();else{var e=L.slice();e[0].offsetY=40,e[1].offsetY=40,this.filterPanelRef=this.overlayPanel.open(W,{origin:this.filterButton,position:e,mobilePosition:"center",data:{source:this.dataSource}}),this.filterPanelRef.afterClosed().subscribe((function(){t.filterPanelRef=null}))}}}]),t}()).\u0275fac=function(t){return new(t||Z)(a.Rb(E.a))},Z.\u0275cmp=a.Lb({type:Z,selectors:[["data-table"]],contentQueries:function(t,e,n){var i;1&t&&(a.Jb(n,s.i,!0),a.Jb(n,s.c,!1)),2&t&&(a.yc(i=a.gc())&&(e.rowDef=i.first),a.yc(i=a.gc())&&(e.columnDefs=i))},viewQuery:function(t,e){var n;1&t&&(a.Jc(s.j,!0),a.Jc(o.a,!0),a.Sc(z,!0,a.l)),2&t&&(a.yc(n=a.gc())&&(e.table=n.first),a.yc(n=a.gc())&&(e.matPaginator=n.first),a.yc(n=a.gc())&&(e.filterButton=n.first))},inputs:{dataSource:"dataSource",itemsName:"itemsName",showCheckbox:"showCheckbox",hideHeader:"hideHeader"},ngContentSelectors:et,decls:15,vars:19,consts:[["mode","indeterminate","color","accent",4,"ngIf"],[1,"data-table-panel"],["class","data-table-header",4,"ngIf"],["matSort","",3,"dataSource"],["matColumnDef","select"],[4,"matHeaderCellDef"],[4,"matCellDef"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[4,"ngIf"],[3,"pageSize","pageSizeOptions"],["mode","indeterminate","color","accent"],[1,"data-table-header"],[1,"header-inner","default"],[1,"left"],[1,"right"],[1,"input-container"],["type","text","trans-placeholder","",1,"search-input",3,"placeholder","formControl"],["svgIcon","search"],[1,"header-inner","selected"],["trans","",1,"text"],["selectedActions",""],["aria-label","Active Filters",1,"filter-chip-list"],[3,"removable","selectable","removed",4,"ngFor","ngForOf"],["mat-icon-button","",1,"filter-button",3,"click"],["filterButton",""],["svgIcon","filter-list"],[3,"removable","selectable","removed"],["matChipRemove","","svgIcon","cancel"],[3,"checked","indeterminate","change"],[3,"checked","click","change"],[1,"no-results-message-container"],["noResults",""],["primary-text","","trans",""],["secondary-text","","trans",""]],template:function(t,e){1&t&&(a.qc(J),a.Lc(0,H,1,0,"mat-progress-bar",0),a.kc(1,"async"),a.Xb(2,"div",1),a.Lc(3,U,18,9,"div",2),a.Xb(4,"mat-table",3),a.kc(5,"async"),a.Vb(6,4),a.Lc(7,Y,2,2,"mat-header-cell",5),a.Lc(8,$,2,1,"mat-cell",6),a.Ub(),a.pc(9),a.Lc(10,q,1,0,"mat-header-row",7),a.Lc(11,K,1,0,"mat-row",8),a.Wb(),a.Lc(12,G,5,1,"ng-container",9),a.kc(13,"async"),a.Sb(14,"mat-paginator",10),a.Wb()),2&t&&(a.rc("ngIf",a.lc(1,12,e.dataSource.loading$)),a.Db(3),a.rc("ngIf",!e.hideHeader),a.Db(1),a.Hb("empty",a.lc(5,14,e.dataSource.noResults$)),a.rc("dataSource",e.dataSource),a.Db(6),a.rc("matHeaderRowDef",e.columns),a.Db(1),a.rc("matRowDefColumns",e.columns),a.Db(1),a.rc("ngIf",a.lc(13,16,e.dataSource.noResults$)),a.Db(2),a.Hb("hidden",!e.dataSource.config.dataPaginator),a.rc("pageSize",15)("pageSizeOptions",a.vc(18,tt)))},directives:[g.t,s.j,j.a,s.c,s.e,s.b,s.g,s.i,o.a,M.a,p.c,f.a,p.t,p.i,b.a,N.c,g.s,m.b,N.a,N.d,s.d,A.a,s.a,s.f,s.h,F.a],pipes:[g.b],styles:["data-table{display:block;position:relative;border:1px solid var(--be-divider-default);box-shadow:none;background-color:var(--be-background);border-radius:4px}data-table .mat-progress-bar{position:absolute;top:0;left:0;width:100%}data-table .multiline-column{-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;white-space:nowrap;text-overflow:ellipsis;-webkit-box-align:start;align-items:flex-start;-webkit-box-pack:center;justify-content:center}data-table .search-input{background-color:var(--be-background)}data-table .header-inner{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;height:85px;padding:15px;border-bottom:1px solid transparent;overflow:hidden}data-table .header-inner.selected{background-color:var(--be-accent-emphasis);color:var(--be-secondary-text);font-size:1.5rem;border-color:var(--be-divider-default)}data-table .header-inner.selected .right button{margin:0 4px;border:1px solid var(--be-divider-default);border-radius:3px;padding:0 8px;vertical-align:middle}data-table .header-inner .left{-webkit-box-flex:1;flex:1 1 auto}data-table .header-inner .left .text{text-transform:capitalize}data-table .header-inner .left .title{font-size:1.8rem;color:var(--be-secondary-text);margin-left:15px;text-transform:capitalize}data-table .header-inner .left a,data-table .header-inner .left button{margin-right:5px}data-table .header-inner .right{-webkit-box-flex:1;flex:1 1 auto;display:-webkit-box;display:flex;-webkit-box-pack:end;justify-content:flex-end;-webkit-box-align:center;align-items:center;flex-wrap:wrap}data-table .header-inner .right .filter-button{margin:0 8px}data-table .header-inner .right .filter-button.active{color:var(--be-accent-default)}data-table .header-inner .right .input-container{max-width:250px;position:relative;margin-right:10px;flex-shrink:0}data-table .header-inner .right .input-container:last-of-type{margin-right:0}data-table .header-inner .right .input-container .mat-icon{position:absolute;top:10px;right:5px}data-table .mat-table{padding:0 15px;background-color:inherit}data-table .mat-table a{color:inherit}data-table .mat-table a:hover{text-decoration:underline}data-table .mat-column-avatar,data-table .mat-column-image{-webkit-box-flex:0;flex:0 0 35px;margin-right:35px}data-table .mat-column-avatar img,data-table .mat-column-image img{width:35px;height:35px;-o-object-fit:cover;object-fit:cover;border-radius:4px}data-table .mat-column-user,data-table .name-with-image{margin-right:15px}data-table .mat-column-user media-image,data-table .name-with-image media-image{flex-shrink:0}data-table .mat-column-user img,data-table .name-with-image img{width:35px;height:35px;margin-right:10px;-o-object-fit:cover;object-fit:cover;border-radius:4px;flex-shrink:0}data-table .mat-column-select{overflow:initial;-webkit-box-flex:0;flex:0 0 50px;margin-right:25px}data-table .mat-column-edit{-webkit-box-flex:0;flex:0 0 50px;color:var(--be-secondary-text);margin-left:25px}data-table .mat-column-edit.multiple-icons{-webkit-box-flex:0;flex:0 0 104px}data-table .mat-row{background-color:var(--be-background)}data-table no-results-message{padding:65px 0}data-table .mat-chip,data-table .mat-header-cell,data-table .mat-sort-header-button{text-transform:capitalize}"],encapsulation:2,changeDetection:0}),Z)},MkmW:function(t,e,n){"use strict";e.hostReportError=function(t){setTimeout((function(){throw t}),0)}},OAkW:function(t,e,n){"use strict";e.subscribeToArray=function(t){return function(e){for(var n=0,i=t.length;n<i&&!e.closed;n++)e.next(t[n]);e.complete()}}},PPfr:function(t,e,n){"use strict";n.d(e,"a",(function(){return R}));var i=n("fXoL"),r=n("3Pt+"),a=n("cuTO"),o=n("7T94"),s=n("Kj3r"),c=n("/uUt"),l=n("eIep"),u=n("JIr8"),d=n("vkgz"),h=n("STbY"),b=n("hLX6"),f=n("LRne"),p=n("U9CY"),g=n("X3Ra"),m=n("twBr"),v=n("QGXG"),y=n("wWhK"),k=n("i2dy"),_=n("bTqV"),w=n("NFeN"),x=n("ofXK"),C=n("Rd8u"),D=["input"];function S(t,e){if(1&t){var n=i.Yb();i.Xb(0,"button",10),i.fc("click",(function(t){return i.Cc(n),i.jc().showNewCannedReplyModal()})),i.Xb(1,"strong",11),i.Nc(2,"Create new canned reply"),i.Wb(),i.Wb()}}function O(t,e){if(1&t){var n=i.Yb();i.Xb(0,"button",12),i.fc("click",(function(t){i.Cc(n);var r=e.$implicit;return i.jc().selectCannedReply(r)})),i.Nc(1),i.Wb()}if(2&t){var r=e.$implicit;i.Db(1),i.Pc(" ",r.name," ")}}function I(t,e){if(1&t){var n=i.Yb();i.Xb(0,"div",13),i.fc("click",(function(t){return i.Cc(n),t.stopPropagation()})),i.Xb(1,"div"),i.Xb(2,"span",11),i.Nc(3,"No results found for"),i.Wb(),i.Xb(4,"strong"),i.Nc(5),i.Wb(),i.Wb(),i.Wb()}if(2&t){var r=i.jc();i.Db(5),i.Oc(r.searchQuery.value)}}var R=function(){var t=function(){function t(e,n,a,o,s){_classCallCheck(this,t),this.cannedRepliesService=e,this.currentUser=n,this.modal=a,this.conversation=o,this.toast=s,this.searchQuery=new r.h,this.onReplySelect=new i.o,this.loadedResultsAtLeastOnce=!1,this.cannedReplies=[]}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.searchQuery.valueChanges.pipe(Object(s.a)(250),Object(c.a)(),Object(l.a)((function(e){return t.getCannedReplies(e)})),Object(u.a)((function(){return Object(f.a)(p.a)}))).subscribe(),this.trigger.menuOpened.subscribe((function(){t.loadedResultsAtLeastOnce||t.getCannedReplies(null,!0).subscribe()}))}},{key:"selectCannedReply",value:function(t){var e=this,n=t.body.replace(/{{([\w.\-]+?)}}/,(function(t,n){return b.pick(n.toLowerCase(),{ticket:e.conversation.get()})||t}));this.onReplySelect.emit(Object.assign(Object.assign({},t),{body:n}))}},{key:"showNewCannedReplyModal",value:function(){var t=this,e=new a.a({body:this.conversation.draft.get().body,uploads:this.conversation.draft.get().uploads});this.modal.open(o.a,{cannedReply:e},{panelClass:"crupdate-canned-reply-modal-container"}).afterClosed().subscribe((function(e){e&&(t.toast.open("Canned reply created."),t.cannedReplies.unshift(e))}))}},{key:"getCannedReplies",value:function(t,e){var n=this;if(!t&&!e)return Object(f.a)(p.a);var i={query:t,user_id:this.currentUser.get("id"),per_page:20,shared:!0};return this.cannedRepliesService.getReplies(i).pipe(Object(d.a)((function(t){n.loadedResultsAtLeastOnce=!0,n.cannedReplies=t.pagination.data})))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(i.Rb(g.a),i.Rb(m.a),i.Rb(v.a),i.Rb(y.a),i.Rb(k.a))},t.\u0275cmp=i.Lb({type:t,selectors:[["canned-replies-dropdown"]],viewQuery:function(t,e){var n;1&t&&(i.Jc(h.d,!0),i.Jc(D,!0)),2&t&&(i.yc(n=i.gc())&&(e.trigger=n.first),i.yc(n=i.gc())&&(e.input=n.first))},inputs:{searchQuery:"searchQuery"},outputs:{onReplySelect:"onReplySelect"},decls:10,vars:6,consts:[["mat-icon-button","",1,"no-style","editor-button",3,"matMenuTriggerFor"],["svgIcon","comment",1,"dropdown-icon"],[1,"canned-reply-menu",3,"overlapTrigger"],["cannedReplyMenu","matMenu"],[1,"input-container",3,"click"],["type","text","mat-menu-item","",1,"canned-reply-search-input",3,"formControl"],["input",""],["class","new-canned-reply","mat-menu-item","","trans","",3,"click",4,"ngIf"],["class","canned-reply","mat-menu-item","",3,"click",4,"ngFor","ngForOf"],["class","no-results",3,"click",4,"ngIf"],["mat-menu-item","","trans","",1,"new-canned-reply",3,"click"],["trans",""],["mat-menu-item","",1,"canned-reply",3,"click"],[1,"no-results",3,"click"]],template:function(t,e){if(1&t&&(i.Xb(0,"button",0),i.Sb(1,"mat-icon",1),i.Wb(),i.Xb(2,"mat-menu",2,3),i.Xb(4,"div",4),i.fc("click",(function(t){return t.stopPropagation()})),i.Sb(5,"input",5,6),i.Wb(),i.Lc(7,S,3,0,"button",7),i.Lc(8,O,2,1,"button",8),i.Lc(9,I,6,1,"div",9),i.Wb()),2&t){var n=i.zc(3);i.rc("matMenuTriggerFor",n),i.Db(2),i.rc("overlapTrigger",!1),i.Db(3),i.rc("formControl",e.searchQuery),i.Db(2),i.rc("ngIf",!e.searchQuery.value),i.Db(1),i.rc("ngForOf",e.cannedReplies),i.Db(1),i.rc("ngIf",!e.cannedReplies.length&&e.loadedResultsAtLeastOnce&&e.searchQuery.value)}},directives:[_.b,h.d,w.a,h.e,r.c,h.b,r.t,r.i,x.t,x.s,C.a],styles:["canned-replies-dropdown{display:block}.canned-reply-menu{width:300px}.canned-reply-menu strong{font-weight:500}.canned-reply-menu .input-container{padding:0 10px 10px;border-bottom:1px solid var(--be-divider-default)}.canned-reply-menu .no-results{padding:10px 10px 0;font-size:1.6rem;text-align:center}"],encapsulation:2}),t}()},Q1FS:function(t,e,n){"use strict";var i=n("yx2s"),r=n("Xwq/"),a=n("zfKp"),o=n("9AGB"),s=n("n3uD");function c(t){if(t||(t=s.config.Promise||Promise),!t)throw new Error("no Promise impl found");return t}e.Observable=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(t,e,n){var i=this.operator,a=r.toSubscriber(t,e,n);if(a.add(i?i.call(a,this.source):this.source||s.config.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),s.config.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){s.config.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),i.canReportError(t)?t.error(e):console.warn(e)}},t.prototype.forEach=function(t,e){var n=this;return new(e=c(e))((function(e,i){var r;r=n.subscribe((function(e){try{t(e)}catch(n){i(n),r&&r.unsubscribe()}}),i,e)}))},t.prototype._subscribe=function(t){var e=this.source;return e&&e.subscribe(t)},t.prototype[a.observable]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 0===t.length?this:o.pipeFromArray(t)(this)},t.prototype.toPromise=function(t){var e=this;return new(t=c(t))((function(t,n){var i;e.subscribe((function(t){return i=t}),(function(t){return n(t)}),(function(){return t(i)}))}))},t.create=function(e){return new t(e)},t}()},UNqx:function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=n("cSoz"),o=n("Y4kR"),s=n("Vi6O"),c=n("q3Kh"),l=n("gTqA");e.mergeMap=function t(e,n,i){return void 0===i&&(i=Number.POSITIVE_INFINITY),"function"==typeof n?function(r){return r.pipe(t((function(t,i){return l.from(e(t,i)).pipe(c.map((function(e,r){return n(t,e,i,r)})))}),i))}:("number"==typeof n&&(i=n),function(t){return t.lift(new u(e,i))})};var u=function(){function t(t,e){void 0===e&&(e=Number.POSITIVE_INFINITY),this.project=t,this.concurrent=e}return t.prototype.call=function(t,e){return e.subscribe(new d(t,this.project,this.concurrent))},t}();e.MergeMapOperator=u;var d=function(t){function e(e,n,i){void 0===i&&(i=Number.POSITIVE_INFINITY);var r=t.call(this,e)||this;return r.project=n,r.concurrent=i,r.hasCompleted=!1,r.buffer=[],r.active=0,r.index=0,r}return r(e,t),e.prototype._next=function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)},e.prototype._tryNext=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(i){return void this.destination.error(i)}this.active++,this._innerSub(e,t,n)},e.prototype._innerSub=function(t,e,n){var i=new s.InnerSubscriber(this,e,n),r=this.destination;r.add(i);var o=a.subscribeToResult(this,t,void 0,void 0,i);o!==i&&r.add(o)},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},e.prototype.notifyNext=function(t,e,n,i,r){this.destination.next(e)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},e}(o.OuterSubscriber);e.MergeMapSubscriber=d},VKeD:function(t,e,n){"use strict";function i(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}e.getSymbolIterator=i,e.iterator=i(),e.$$iterator=e.iterator},Vi6O:function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});e.InnerSubscriber=function(t){function e(e,n,i){var r=t.call(this)||this;return r.parent=e,r.outerValue=n,r.outerIndex=i,r.index=0,r}return r(e,t),e.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},e.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(n("FWf1").Subscriber)},X3Ra:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var i=n("fXoL"),r=n("LRXf"),a=function(){var t=function(){function t(e){_classCallCheck(this,t),this.httpClient=e}return _createClass(t,[{key:"getReplies",value:function(t){return this.httpClient.get("canned-replies",t)}},{key:"create",value:function(t){return this.httpClient.post("canned-replies",t)}},{key:"update",value:function(t,e){return this.httpClient.put("canned-replies/"+t,e)}},{key:"delete",value:function(t){return this.httpClient.delete("canned-replies",{ids:t})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(i.bc(r.a))},t.\u0275prov=i.Nb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},XZLl:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var i=n("fXoL"),r=n("itxp"),a=n("/w9p"),o=n("kmQS"),s=n("LRXf"),c=n("jhN1"),l=n("twBr"),u=function(){var t=function(){function t(e,n,r,a,o,s){_classCallCheck(this,t),this.file=e,this.transformer=n,this.settings=r,this.http=a,this.sanitizer=o,this.currentUser=s,this.filePreviewWrapper=!0,this.download=new i.o}return _createClass(t,[{key:"getSrc",value:function(){return this.transformer(this.file)}},{key:"getSafeSrc",value:function(){return this.sanitizer.bypassSecurityTrustResourceUrl(this.getSrc())}},{key:"getContents",value:function(){return this.http.get(this.getSrc(),null,{responseType:"text"})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(i.Rb(r.a),i.Rb(a.a),i.Rb(o.a),i.Rb(s.a),i.Rb(c.b),i.Rb(l.a))},t.\u0275dir=i.Mb({type:t,hostVars:2,hostBindings:function(t,e){2&t&&i.Hb("file-preview-wrapper",e.filePreviewWrapper)}}),t}()},"Xd/8":function(t,e,n){"use strict";var i=n("2Vo4"),r=n("itXk"),a=n("VRyK"),o=n("lJxs"),s=n("pLZG"),c=n("IzEk"),l=n("Kj3r"),u=n("/uUt"),d=n("3Pt+"),h=n("0EQZ");n.d(e,"a",(function(){return b}));var b=function(){function t(e){var n=this;_classCallCheck(this,t),this.config=e,this.initiated=!1,this.pagination$=new i.a(null),this.userParamsChange$=new i.a({}),this.selectedRows=new h.c(!0,[]),this.searchControl=new d.h,this.filterForm=new d.k({}),this.nextPageLoader$=new i.a(null),this.virtualSort$=new i.a({}),this.paginationParams={},this.activeFilters$=this.filterForm.valueChanges.pipe(Object(o.a)((function(t){return Object.entries(t).filter((function(t){return null!=t[1]})).map((function(t){return n.config.filters.find((function(e){return e.column===t[0]}))}))}))),this.config.filters&&(this.config.filters.forEach((function(t){var e=new d.h(t.defaultValue||null);n.filterForm.addControl(t.column,e)})),this.applyFiltersFromQueryParams()),e.dataPaginator&&e.dontUpdateQueryParams&&(e.dataPaginator.dontUpdateQueryParams=!0)}return _createClass(t,[{key:"anyRowsSelected",value:function(){return this.selectedRows.hasValue()}},{key:"allRowsSelected",value:function(){return this.selectedRows.selected.length&&this.selectedRows.selected.length===this.pagination$.value.data.length}},{key:"toggleAllRows",value:function(){var t=this;this.allRowsSelected()?this.deselectAllItems():this.pagination$.value.data.forEach((function(e){return t.selectedRows.select(e)}))}},{key:"deselectAllItems",value:function(){this.selectedRows.clear()}},{key:"getSelectedItems",value:function(){return this.selectedRows.selected.map((function(t){return t.id}))}},{key:"setSelectedItems",value:function(t){var e;this.deselectAllItems(),(e=this.selectedRows).select.apply(e,_toConsumableArray(t))}},{key:"setData",value:function(t){this.pagination$.next(Object.assign(Object.assign({},this.pagination$.value),{data:t}))}},{key:"getData",value:function(){return this.pagination$.value?this.pagination$.value.data:[]}},{key:"removeFilter",value:function(t){this.filterForm.get(t).setValue(null)}},{key:"updateConfig",value:function(t){return this.config=Object.assign(Object.assign({},this.config),t),this}},{key:"reload",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.userParamsChange$.next(t),this.initiated||this.init()}},{key:"canLoadNextPage",value:function(){return this.pagination$.value&&this.getCurrentPage()<this.pagination$.value.last_page}},{key:"loadNextPage",value:function(){this.nextPageLoader$.next({page:this.getCurrentPage()+1})}},{key:"reset",value:function(t){this.searchControl.reset(),this.resetSort(),this.resetMatPaginator(),this.deselectAllItems(),this.reload(t)}},{key:"init",value:function(t){var e=this;if(this.initiated)return this;t&&this.updateConfig(t);var n=this.config.matSort?Object(a.a)(this.config.matSort.sortChange,this.config.matSort.initialized):this.virtualSort$,i=this.config.matPaginator?Object(a.a)(this.config.matPaginator.page,this.config.matPaginator.initialized):this.nextPageLoader$,s=this.searchControl.valueChanges.pipe(Object(l.a)(400),Object(u.a)(),Object(o.a)((function(t){return{query:t}}))),c=this.filterForm.valueChanges.pipe(Object(o.a)((function(t){return Object.keys(t).forEach((function(e){null==t[e]?delete t[e]:t[e].id&&(t[e]=t[e].id)})),t})));return Object(r.a)([n,i,s,c,this.userParamsChange$]).pipe(Object(l.a)(0),Object(o.a)((function(t){return e.transformParams(t)}))).subscribe((function(t){e.config.dataPaginator.paginate(t,e.config.uri,e.config.initialData)})),this.config.dataPaginator.pagination$.subscribe((function(t){if(e.config.matPaginator&&(e.config.matPaginator.pageIndex=t.current_page-1,e.config.matPaginator.pageSize=t.per_page,e.config.matPaginator.length=t.data.length?t.total:0),e.config.appendData&&t.current_page!==e.getCurrentPage()){var n=e.pagination$.value?e.pagination$.value.data:[];t=Object.assign(Object.assign({},t),{data:[].concat(_toConsumableArray(n),_toConsumableArray(t.data))})}e.pagination$.next(t)})),this.searchControl.setValue(null),this.filterForm.patchValue({}),this.initiated=!0,this}},{key:"getCurrentPage",value:function(){return this.pagination$.value?this.pagination$.value.current_page:void 0}},{key:"transformParams",value:function(t){var e=t.reduce((function(t,e){return Object.assign(Object.assign({},t),e)}));this.config.matPaginator&&(e.page=null!=e.pageIndex?e.pageIndex+1:void 0,e.per_page=e.pageSize),e.orderBy=e.active,e.orderDir=e.direction;var n=["pageIndex","pageSize","active","direction","previousPageIndex","length"];return Object.keys(e).forEach((function(t){(n.indexOf(t)>-1||null==e[t])&&delete e[t]})),this.paginationParams=Object.assign(Object.assign({},this.config.staticParams),e),this.paginationParams}},{key:"resetSort",value:function(){this.config.matSort&&this.config.matSort.sort({id:null,start:null,disableClear:!1})}},{key:"resetMatPaginator",value:function(){this.config.matPaginator&&(this.config.matPaginator.length=0,this.config.matPaginator._changePageSize(15),this.config.matPaginator.firstPage())}},{key:"connect",value:function(){return this.pagination$.pipe(Object(s.a)((function(t){return!!t})),Object(o.a)((function(t){return t?t.data:[]})))}},{key:"disconnect",value:function(){this.config.dataPaginator.destroy(),this.pagination$.complete()}},{key:"applyFiltersFromQueryParams",value:function(){var t=this,e=this.config.dataPaginator.currentQueryParams(),n={};Object.keys(this.filterForm.controls).forEach((function(t){var i=e[t];i&&("false"===i?i=!1:"true"===i&&(i=!0),n[t]=i)})),Object.keys(n).length&&setTimeout((function(){t.filterForm.patchValue(n)}))}},{key:"paginatedOnce$",get:function(){return this.config.dataPaginator.paginatedOnce$.pipe(Object(s.a)((function(t){return!!t})),Object(c.a)(1))}},{key:"noResults$",get:function(){return Object(r.a)([this.config.dataPaginator.noResults$,this.pagination$]).pipe(Object(o.a)((function(t){var e=_slicedToArray(t,2),n=e[0],i=e[1];return n&&i&&!i.data.length})))}},{key:"loading$",get:function(){return this.config.dataPaginator.loading$}},{key:"totalCount$",get:function(){return this.pagination$.pipe(Object(o.a)((function(t){return t?t.total:null})))}}]),t}()},XhcP:function(t,e,n){"use strict";n.d(e,"a",(function(){return z})),n.d(e,"b",(function(){return V})),n.d(e,"c",(function(){return F})),n.d(e,"d",(function(){return U}));var i=n("nLfN"),r=n("vxfF"),a=n("ofXK"),o=n("fXoL"),s=n("FKr1"),c=n("8LU1"),l=n("FtGj"),u=n("XNiG"),d=n("xgIS"),h=n("VRyK"),b=n("pLZG"),f=n("1G5W"),p=n("/uUt"),g=n("lJxs"),m=n("IzEk"),v=n("JX91"),y=n("Kj3r"),k=n("R0Ic"),_=n("R1ws"),w=n("u47x"),x=n("cH1L"),C=["*"];function D(t,e){if(1&t){var n=o.Yb();o.Xb(0,"div",2),o.fc("click",(function(t){return o.Cc(n),o.jc()._onBackdropClicked()})),o.Wb()}if(2&t){var i=o.jc();o.Hb("mat-drawer-shown",i._isShowingBackdrop())}}function S(t,e){1&t&&(o.Xb(0,"mat-drawer-content"),o.pc(1,2),o.Wb())}var O=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],I=["mat-drawer","mat-drawer-content","*"];function R(t,e){if(1&t){var n=o.Yb();o.Xb(0,"div",2),o.fc("click",(function(t){return o.Cc(n),o.jc()._onBackdropClicked()})),o.Wb()}if(2&t){var i=o.jc();o.Hb("mat-drawer-shown",i._isShowingBackdrop())}}function X(t,e){1&t&&(o.Xb(0,"mat-sidenav-content",3),o.pc(1,2),o.Wb())}var T=[[["mat-sidenav"]],[["mat-sidenav-content"]],"*"],P=["mat-sidenav","mat-sidenav-content","*"],W={transformDrawer:Object(k.n)("transform",[Object(k.k)("open, open-instant",Object(k.l)({transform:"none",visibility:"visible"})),Object(k.k)("void",Object(k.l)({"box-shadow":"none",visibility:"hidden"})),Object(k.m)("void => open-instant",Object(k.e)("0ms")),Object(k.m)("void <=> open, open-instant => void",Object(k.e)("400ms cubic-bezier(0.25, 0.8, 0.25, 1)"))])};function L(t){throw Error("A drawer was already declared for 'position=\"".concat(t,"\"'"))}var E=new o.r("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:function(){return!1}}),j=new o.r("MAT_DRAWER_CONTAINER"),M=function(){var t=function(t){function e(t,n,i,r,a){var o;return _classCallCheck(this,e),(o=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,i,r,a)))._changeDetectorRef=t,o._container=n,o}return _inherits(e,t),_createClass(e,[{key:"ngAfterContentInit",value:function(){var t=this;this._container._contentMarginChanges.subscribe((function(){t._changeDetectorRef.markForCheck()}))}}]),e}(r.a);return t.\u0275fac=function(e){return new(e||t)(o.Rb(o.h),o.Rb(Object(o.V)((function(){return A}))),o.Rb(o.l),o.Rb(r.b),o.Rb(o.A))},t.\u0275cmp=o.Lb({type:t,selectors:[["mat-drawer-content"]],hostAttrs:[1,"mat-drawer-content"],hostVars:4,hostBindings:function(t,e){2&t&&o.Kc("margin-left",e._container._contentMargins.left,"px")("margin-right",e._container._contentMargins.right,"px")},features:[o.Ab],ngContentSelectors:C,decls:1,vars:0,template:function(t,e){1&t&&(o.qc(),o.pc(0))},encapsulation:2,changeDetection:0}),t}(),N=function(){var t=function(){function t(e,n,i,r,a,s,c){var h=this;_classCallCheck(this,t),this._elementRef=e,this._focusTrapFactory=n,this._focusMonitor=i,this._platform=r,this._ngZone=a,this._doc=s,this._container=c,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position="start",this._mode="over",this._disableClose=!1,this._opened=!1,this._animationStarted=new u.a,this._animationEnd=new u.a,this._animationState="void",this.openedChange=new o.o(!0),this._destroyed=new u.a,this.onPositionChanged=new o.o,this._modeChanged=new u.a,this.openedChange.subscribe((function(t){t?(h._doc&&(h._elementFocusedBeforeDrawerWasOpened=h._doc.activeElement),h._takeFocus()):h._restoreFocus()})),this._ngZone.runOutsideAngular((function(){Object(d.a)(h._elementRef.nativeElement,"keydown").pipe(Object(b.a)((function(t){return t.keyCode===l.i&&!h.disableClose&&!Object(l.B)(t)})),Object(f.a)(h._destroyed)).subscribe((function(t){return h._ngZone.run((function(){h.close(),t.stopPropagation(),t.preventDefault()}))}))})),this._animationEnd.pipe(Object(p.a)((function(t,e){return t.fromState===e.fromState&&t.toState===e.toState}))).subscribe((function(t){var e=t.fromState,n=t.toState;(0===n.indexOf("open")&&"void"===e||"void"===n&&0===e.indexOf("open"))&&h.openedChange.emit(h._opened)}))}return _createClass(t,[{key:"_takeFocus",value:function(){var t=this;this.autoFocus&&this._focusTrap&&this._focusTrap.focusInitialElementWhenReady().then((function(e){e||"function"!=typeof t._elementRef.nativeElement.focus||t._elementRef.nativeElement.focus()}))}},{key:"_restoreFocus",value:function(){if(this.autoFocus){var t=this._doc&&this._doc.activeElement;t&&this._elementRef.nativeElement.contains(t)&&(this._elementFocusedBeforeDrawerWasOpened instanceof HTMLElement?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,this._openedVia):this._elementRef.nativeElement.blur()),this._elementFocusedBeforeDrawerWasOpened=null,this._openedVia=null}}},{key:"ngAfterContentInit",value:function(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState()}},{key:"ngAfterContentChecked",value:function(){this._platform.isBrowser&&(this._enableAnimations=!0)}},{key:"ngOnDestroy",value:function(){this._focusTrap&&this._focusTrap.destroy(),this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}},{key:"open",value:function(t){return this.toggle(!0,t)}},{key:"close",value:function(){return this.toggle(!1)}},{key:"toggle",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!this.opened,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"program";return this._opened=e,e?(this._animationState=this._enableAnimations?"open":"open-instant",this._openedVia=n):(this._animationState="void",this._restoreFocus()),this._updateFocusTrapState(),new Promise((function(e){t.openedChange.pipe(Object(m.a)(1)).subscribe((function(t){return e(t?"open":"close")}))}))}},{key:"_updateFocusTrapState",value:function(){this._focusTrap&&(this._focusTrap.enabled=this.opened&&"side"!==this.mode)}},{key:"_animationStartListener",value:function(t){this._animationStarted.next(t)}},{key:"_animationDoneListener",value:function(t){this._animationEnd.next(t)}},{key:"position",get:function(){return this._position},set:function(t){(t="end"===t?"end":"start")!=this._position&&(this._position=t,this.onPositionChanged.emit())}},{key:"mode",get:function(){return this._mode},set:function(t){this._mode=t,this._updateFocusTrapState(),this._modeChanged.next()}},{key:"disableClose",get:function(){return this._disableClose},set:function(t){this._disableClose=Object(c.c)(t)}},{key:"autoFocus",get:function(){var t=this._autoFocus;return null==t?"side"!==this.mode:t},set:function(t){this._autoFocus=Object(c.c)(t)}},{key:"opened",get:function(){return this._opened},set:function(t){this.toggle(Object(c.c)(t))}},{key:"_openedStream",get:function(){return this.openedChange.pipe(Object(b.a)((function(t){return t})),Object(g.a)((function(){})))}},{key:"openedStart",get:function(){return this._animationStarted.pipe(Object(b.a)((function(t){return t.fromState!==t.toState&&0===t.toState.indexOf("open")})),Object(g.a)((function(){})))}},{key:"_closedStream",get:function(){return this.openedChange.pipe(Object(b.a)((function(t){return!t})),Object(g.a)((function(){})))}},{key:"closedStart",get:function(){return this._animationStarted.pipe(Object(b.a)((function(t){return t.fromState!==t.toState&&"void"===t.toState})),Object(g.a)((function(){})))}},{key:"_width",get:function(){return this._elementRef.nativeElement&&this._elementRef.nativeElement.offsetWidth||0}}]),t}();return t.\u0275fac=function(e){return new(e||t)(o.Rb(o.l),o.Rb(w.i),o.Rb(w.h),o.Rb(i.a),o.Rb(o.A),o.Rb(a.e,8),o.Rb(j,8))},t.\u0275cmp=o.Lb({type:t,selectors:[["mat-drawer"]],hostAttrs:["tabIndex","-1",1,"mat-drawer"],hostVars:12,hostBindings:function(t,e){1&t&&o.Ib("@transform.start",(function(t){return e._animationStartListener(t)}))("@transform.done",(function(t){return e._animationDoneListener(t)})),2&t&&(o.Eb("align",null),o.Rc("@transform",e._animationState),o.Hb("mat-drawer-end","end"===e.position)("mat-drawer-over","over"===e.mode)("mat-drawer-push","push"===e.mode)("mat-drawer-side","side"===e.mode)("mat-drawer-opened",e.opened))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",onPositionChanged:"positionChanged",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart"},exportAs:["matDrawer"],ngContentSelectors:C,decls:2,vars:0,consts:[[1,"mat-drawer-inner-container"]],template:function(t,e){1&t&&(o.qc(),o.Xb(0,"div",0),o.pc(1),o.Wb())},encapsulation:2,data:{animation:[W.transformDrawer]},changeDetection:0}),t}(),A=function(){var t=function(){function t(e,n,i,r,a){var s=this,c=arguments.length>5&&void 0!==arguments[5]&&arguments[5],l=arguments.length>6?arguments[6]:void 0;_classCallCheck(this,t),this._dir=e,this._element=n,this._ngZone=i,this._changeDetectorRef=r,this._animationMode=l,this._drawers=new o.E,this.backdropClick=new o.o,this._destroyed=new u.a,this._doCheckSubject=new u.a,this._contentMargins={left:null,right:null},this._contentMarginChanges=new u.a,e&&e.change.pipe(Object(f.a)(this._destroyed)).subscribe((function(){s._validateDrawers(),s.updateContentMargins()})),a.change().pipe(Object(f.a)(this._destroyed)).subscribe((function(){return s.updateContentMargins()})),this._autosize=c}return _createClass(t,[{key:"ngAfterContentInit",value:function(){var t=this;this._allDrawers.changes.pipe(Object(v.a)(this._allDrawers),Object(f.a)(this._destroyed)).subscribe((function(e){t._drawers.reset(e.filter((function(e){return!e._container||e._container===t}))),t._drawers.notifyOnChanges()})),this._drawers.changes.pipe(Object(v.a)(null)).subscribe((function(){t._validateDrawers(),t._drawers.forEach((function(e){t._watchDrawerToggle(e),t._watchDrawerPosition(e),t._watchDrawerMode(e)})),(!t._drawers.length||t._isDrawerOpen(t._start)||t._isDrawerOpen(t._end))&&t.updateContentMargins(),t._changeDetectorRef.markForCheck()})),this._doCheckSubject.pipe(Object(y.a)(10),Object(f.a)(this._destroyed)).subscribe((function(){return t.updateContentMargins()}))}},{key:"ngOnDestroy",value:function(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}},{key:"open",value:function(){this._drawers.forEach((function(t){return t.open()}))}},{key:"close",value:function(){this._drawers.forEach((function(t){return t.close()}))}},{key:"updateContentMargins",value:function(){var t=this,e=0,n=0;if(this._left&&this._left.opened)if("side"==this._left.mode)e+=this._left._width;else if("push"==this._left.mode){var i=this._left._width;e+=i,n-=i}if(this._right&&this._right.opened)if("side"==this._right.mode)n+=this._right._width;else if("push"==this._right.mode){var r=this._right._width;n+=r,e-=r}n=n||null,(e=e||null)===this._contentMargins.left&&n===this._contentMargins.right||(this._contentMargins={left:e,right:n},this._ngZone.run((function(){return t._contentMarginChanges.next(t._contentMargins)})))}},{key:"ngDoCheck",value:function(){var t=this;this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular((function(){return t._doCheckSubject.next()}))}},{key:"_watchDrawerToggle",value:function(t){var e=this;t._animationStarted.pipe(Object(b.a)((function(t){return t.fromState!==t.toState})),Object(f.a)(this._drawers.changes)).subscribe((function(t){"open-instant"!==t.toState&&"NoopAnimations"!==e._animationMode&&e._element.nativeElement.classList.add("mat-drawer-transition"),e.updateContentMargins(),e._changeDetectorRef.markForCheck()})),"side"!==t.mode&&t.openedChange.pipe(Object(f.a)(this._drawers.changes)).subscribe((function(){return e._setContainerClass(t.opened)}))}},{key:"_watchDrawerPosition",value:function(t){var e=this;t&&t.onPositionChanged.pipe(Object(f.a)(this._drawers.changes)).subscribe((function(){e._ngZone.onMicrotaskEmpty.asObservable().pipe(Object(m.a)(1)).subscribe((function(){e._validateDrawers()}))}))}},{key:"_watchDrawerMode",value:function(t){var e=this;t&&t._modeChanged.pipe(Object(f.a)(Object(h.a)(this._drawers.changes,this._destroyed))).subscribe((function(){e.updateContentMargins(),e._changeDetectorRef.markForCheck()}))}},{key:"_setContainerClass",value:function(t){var e=this._element.nativeElement.classList,n="mat-drawer-container-has-open";t?e.add(n):e.remove(n)}},{key:"_validateDrawers",value:function(){var t=this;this._start=this._end=null,this._drawers.forEach((function(e){"end"==e.position?(null!=t._end&&L("end"),t._end=e):(null!=t._start&&L("start"),t._start=e)})),this._right=this._left=null,this._dir&&"rtl"===this._dir.value?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}},{key:"_isPushed",value:function(){return this._isDrawerOpen(this._start)&&"over"!=this._start.mode||this._isDrawerOpen(this._end)&&"over"!=this._end.mode}},{key:"_onBackdropClicked",value:function(){this.backdropClick.emit(),this._closeModalDrawer()}},{key:"_closeModalDrawer",value:function(){var t=this;[this._start,this._end].filter((function(e){return e&&!e.disableClose&&t._canHaveBackdrop(e)})).forEach((function(t){return t.close()}))}},{key:"_isShowingBackdrop",value:function(){return this._isDrawerOpen(this._start)&&this._canHaveBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._canHaveBackdrop(this._end)}},{key:"_canHaveBackdrop",value:function(t){return"side"!==t.mode||!!this._backdropOverride}},{key:"_isDrawerOpen",value:function(t){return null!=t&&t.opened}},{key:"start",get:function(){return this._start}},{key:"end",get:function(){return this._end}},{key:"autosize",get:function(){return this._autosize},set:function(t){this._autosize=Object(c.c)(t)}},{key:"hasBackdrop",get:function(){return null==this._backdropOverride?!this._start||"side"!==this._start.mode||!this._end||"side"!==this._end.mode:this._backdropOverride},set:function(t){this._backdropOverride=null==t?null:Object(c.c)(t)}},{key:"scrollable",get:function(){return this._userContent||this._content}}]),t}();return t.\u0275fac=function(e){return new(e||t)(o.Rb(x.c,8),o.Rb(o.l),o.Rb(o.A),o.Rb(o.h),o.Rb(r.d),o.Rb(E),o.Rb(_.a,8))},t.\u0275cmp=o.Lb({type:t,selectors:[["mat-drawer-container"]],contentQueries:function(t,e,n){var i;1&t&&(o.Jb(n,M,!0),o.Jb(n,N,!0)),2&t&&(o.yc(i=o.gc())&&(e._content=i.first),o.yc(i=o.gc())&&(e._allDrawers=i))},viewQuery:function(t,e){var n;1&t&&o.Sc(M,!0),2&t&&o.yc(n=o.gc())&&(e._userContent=n.first)},hostAttrs:[1,"mat-drawer-container"],hostVars:2,hostBindings:function(t,e){2&t&&o.Hb("mat-drawer-container-explicit-backdrop",e._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],features:[o.Cb([{provide:j,useExisting:t}])],ngContentSelectors:I,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(t,e){1&t&&(o.qc(O),o.Lc(0,D,1,2,"div",0),o.pc(1),o.pc(2,1),o.Lc(3,S,2,0,"mat-drawer-content",1)),2&t&&(o.rc("ngIf",e.hasBackdrop),o.Db(3),o.rc("ngIf",!e._content))},directives:[a.t,M],styles:[".mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}\n"],encapsulation:2,changeDetection:0}),t}(),F=function(){var t=function(t){function e(t,n,i,r,a){return _classCallCheck(this,e),_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,t,n,i,r,a))}return _inherits(e,t),e}(M);return t.\u0275fac=function(e){return new(e||t)(o.Rb(o.h),o.Rb(Object(o.V)((function(){return V}))),o.Rb(o.l),o.Rb(r.b),o.Rb(o.A))},t.\u0275cmp=o.Lb({type:t,selectors:[["mat-sidenav-content"]],hostAttrs:[1,"mat-drawer-content","mat-sidenav-content"],hostVars:4,hostBindings:function(t,e){2&t&&o.Kc("margin-left",e._container._contentMargins.left,"px")("margin-right",e._container._contentMargins.right,"px")},features:[o.Ab],ngContentSelectors:C,decls:1,vars:0,template:function(t,e){1&t&&(o.qc(),o.pc(0))},encapsulation:2,changeDetection:0}),t}(),z=function(){var t=function(t){function e(){var t;return _classCallCheck(this,e),(t=_possibleConstructorReturn(this,_getPrototypeOf(e).apply(this,arguments)))._fixedInViewport=!1,t._fixedTopGap=0,t._fixedBottomGap=0,t}return _inherits(e,t),_createClass(e,[{key:"fixedInViewport",get:function(){return this._fixedInViewport},set:function(t){this._fixedInViewport=Object(c.c)(t)}},{key:"fixedTopGap",get:function(){return this._fixedTopGap},set:function(t){this._fixedTopGap=Object(c.f)(t)}},{key:"fixedBottomGap",get:function(){return this._fixedBottomGap},set:function(t){this._fixedBottomGap=Object(c.f)(t)}}]),e}(N);return t.\u0275fac=function(e){return H(e||t)},t.\u0275cmp=o.Lb({type:t,selectors:[["mat-sidenav"]],hostAttrs:["tabIndex","-1",1,"mat-drawer","mat-sidenav"],hostVars:17,hostBindings:function(t,e){2&t&&(o.Eb("align",null),o.Kc("top",e.fixedInViewport?e.fixedTopGap:null,"px")("bottom",e.fixedInViewport?e.fixedBottomGap:null,"px"),o.Hb("mat-drawer-end","end"===e.position)("mat-drawer-over","over"===e.mode)("mat-drawer-push","push"===e.mode)("mat-drawer-side","side"===e.mode)("mat-drawer-opened",e.opened)("mat-sidenav-fixed",e.fixedInViewport))},inputs:{fixedInViewport:"fixedInViewport",fixedTopGap:"fixedTopGap",fixedBottomGap:"fixedBottomGap"},exportAs:["matSidenav"],features:[o.Ab],ngContentSelectors:C,decls:2,vars:0,consts:[[1,"mat-drawer-inner-container"]],template:function(t,e){1&t&&(o.qc(),o.Xb(0,"div",0),o.pc(1),o.Wb())},encapsulation:2,data:{animation:[W.transformDrawer]},changeDetection:0}),t}(),H=o.Zb(z),V=function(){var t=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,_getPrototypeOf(e).apply(this,arguments))}return _inherits(e,t),e}(A);return t.\u0275fac=function(e){return B(e||t)},t.\u0275cmp=o.Lb({type:t,selectors:[["mat-sidenav-container"]],contentQueries:function(t,e,n){var i;1&t&&(o.Jb(n,F,!0),o.Jb(n,z,!0)),2&t&&(o.yc(i=o.gc())&&(e._content=i.first),o.yc(i=o.gc())&&(e._allDrawers=i))},hostAttrs:[1,"mat-drawer-container","mat-sidenav-container"],hostVars:2,hostBindings:function(t,e){2&t&&o.Hb("mat-drawer-container-explicit-backdrop",e._backdropOverride)},exportAs:["matSidenavContainer"],features:[o.Cb([{provide:j,useExisting:t}]),o.Ab],ngContentSelectors:P,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],["cdkScrollable","",4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"],["cdkScrollable",""]],template:function(t,e){1&t&&(o.qc(T),o.Lc(0,R,1,2,"div",0),o.pc(1),o.pc(2,1),o.Lc(3,X,2,0,"mat-sidenav-content",1)),2&t&&(o.rc("ngIf",e.hasBackdrop),o.Db(3),o.rc("ngIf",!e._content))},directives:[a.t,F,r.a],styles:[".mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}\n"],encapsulation:2,changeDetection:0}),t}(),B=o.Zb(V),U=function(){var t=function t(){_classCallCheck(this,t)};return t.\u0275mod=o.Pb({type:t}),t.\u0275inj=o.Ob({factory:function(e){return new(e||t)},imports:[[a.c,s.i,r.c,i.b],s.i]}),t}()},"Xwq/":function(t,e,n){"use strict";var i=n("FWf1"),r=n("p//D"),a=n("GiSu");e.toSubscriber=function(t,e,n){if(t){if(t instanceof i.Subscriber)return t;if(t[r.rxSubscriber])return t[r.rxSubscriber]()}return t||e||n?new i.Subscriber(t,e,n):new i.Subscriber(a.empty)}},Y4kR:function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});e.OuterSubscriber=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.notifyNext=function(t,e,n,i,r){this.destination.next(e)},e.prototype.notifyError=function(t,e){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.destination.complete()},e}(n("FWf1").Subscriber)},YdAL:function(t,e,n){"use strict";function i(t){return getComputedStyle(t)}function r(t,e){for(var n in e){var i=e[n];"number"==typeof i&&(i+="px"),t.style[n]=i}return t}function a(t){var e=document.createElement("div");return e.className=t,e}var o="undefined"!=typeof Element&&(Element.prototype.matches||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector);function s(t,e){if(!o)throw new Error("No element matching method supported");return o.call(t,e)}function c(t){t.remove?t.remove():t.parentNode&&t.parentNode.removeChild(t)}function l(t,e){return Array.prototype.filter.call(t.children,(function(t){return s(t,e)}))}var u=function(t){return"ps__thumb-"+t},d=function(t){return"ps__rail-"+t},h=function(t){return"ps--active-"+t},b=function(t){return"ps--scrolling-"+t},f={x:null,y:null};function p(t,e){var n=t.element.classList,i=b(e);n.contains(i)?clearTimeout(f[e]):n.add(i)}function g(t,e){f[e]=setTimeout((function(){return t.isAlive&&t.element.classList.remove(b(e))}),t.settings.scrollingThreshold)}var m=function(t){this.element=t,this.handlers={}},v={isEmpty:{configurable:!0}};m.prototype.bind=function(t,e){void 0===this.handlers[t]&&(this.handlers[t]=[]),this.handlers[t].push(e),this.element.addEventListener(t,e,!1)},m.prototype.unbind=function(t,e){var n=this;this.handlers[t]=this.handlers[t].filter((function(i){return!(!e||i===e)||(n.element.removeEventListener(t,i,!1),!1)}))},m.prototype.unbindAll=function(){for(var t in this.handlers)this.unbind(t)},v.isEmpty.get=function(){var t=this;return Object.keys(this.handlers).every((function(e){return 0===t.handlers[e].length}))},Object.defineProperties(m.prototype,v);var y=function(){this.eventElements=[]};function k(t){if("function"==typeof window.CustomEvent)return new CustomEvent(t);var e=document.createEvent("CustomEvent");return e.initCustomEvent(t,!1,!1,void 0),e}function _(t,e,n,i,r){var a;if(void 0===i&&(i=!0),void 0===r&&(r=!1),"top"===e)a=["contentHeight","containerHeight","scrollTop","y","up","down"];else{if("left"!==e)throw new Error("A proper axis should be provided");a=["contentWidth","containerWidth","scrollLeft","x","left","right"]}!function(t,e,n,i,r){var a=n[0],o=n[1],s=n[2],c=n[3],l=n[4],u=n[5];void 0===i&&(i=!0),void 0===r&&(r=!1);var d=t.element;t.reach[c]=null,d[s]<1&&(t.reach[c]="start"),d[s]>t[a]-t[o]-1&&(t.reach[c]="end"),e&&(d.dispatchEvent(k("ps-scroll-"+c)),e<0?d.dispatchEvent(k("ps-scroll-"+l)):e>0&&d.dispatchEvent(k("ps-scroll-"+u)),i&&function(t,e){p(t,e),g(t,e)}(t,c)),t.reach[c]&&(e||r)&&d.dispatchEvent(k("ps-"+c+"-reach-"+t.reach[c]))}(t,n,a,i,r)}function w(t){return parseInt(t,10)||0}y.prototype.eventElement=function(t){var e=this.eventElements.filter((function(e){return e.element===t}))[0];return e||(e=new m(t),this.eventElements.push(e)),e},y.prototype.bind=function(t,e,n){this.eventElement(t).bind(e,n)},y.prototype.unbind=function(t,e,n){var i=this.eventElement(t);i.unbind(e,n),i.isEmpty&&this.eventElements.splice(this.eventElements.indexOf(i),1)},y.prototype.unbindAll=function(){this.eventElements.forEach((function(t){return t.unbindAll()})),this.eventElements=[]},y.prototype.once=function(t,e,n){var i=this.eventElement(t);i.bind(e,(function t(r){i.unbind(e,t),n(r)}))};var x={isWebKit:"undefined"!=typeof document&&"WebkitAppearance"in document.documentElement.style,supportsTouch:"undefined"!=typeof window&&("ontouchstart"in window||"maxTouchPoints"in window.navigator&&window.navigator.maxTouchPoints>0||window.DocumentTouch&&document instanceof window.DocumentTouch),supportsIePointer:"undefined"!=typeof navigator&&navigator.msMaxTouchPoints,isChrome:"undefined"!=typeof navigator&&/Chrome/i.test(navigator&&navigator.userAgent)};function C(t){var e=t.element,n=Math.floor(e.scrollTop),i=e.getBoundingClientRect();t.containerWidth=Math.ceil(i.width),t.containerHeight=Math.ceil(i.height),t.contentWidth=e.scrollWidth,t.contentHeight=e.scrollHeight,e.contains(t.scrollbarXRail)||(l(e,d("x")).forEach((function(t){return c(t)})),e.appendChild(t.scrollbarXRail)),e.contains(t.scrollbarYRail)||(l(e,d("y")).forEach((function(t){return c(t)})),e.appendChild(t.scrollbarYRail)),!t.settings.suppressScrollX&&t.containerWidth+t.settings.scrollXMarginOffset<t.contentWidth?(t.scrollbarXActive=!0,t.railXWidth=t.containerWidth-t.railXMarginWidth,t.railXRatio=t.containerWidth/t.railXWidth,t.scrollbarXWidth=D(t,w(t.railXWidth*t.containerWidth/t.contentWidth)),t.scrollbarXLeft=w((t.negativeScrollAdjustment+e.scrollLeft)*(t.railXWidth-t.scrollbarXWidth)/(t.contentWidth-t.containerWidth))):t.scrollbarXActive=!1,!t.settings.suppressScrollY&&t.containerHeight+t.settings.scrollYMarginOffset<t.contentHeight?(t.scrollbarYActive=!0,t.railYHeight=t.containerHeight-t.railYMarginHeight,t.railYRatio=t.containerHeight/t.railYHeight,t.scrollbarYHeight=D(t,w(t.railYHeight*t.containerHeight/t.contentHeight)),t.scrollbarYTop=w(n*(t.railYHeight-t.scrollbarYHeight)/(t.contentHeight-t.containerHeight))):t.scrollbarYActive=!1,t.scrollbarXLeft>=t.railXWidth-t.scrollbarXWidth&&(t.scrollbarXLeft=t.railXWidth-t.scrollbarXWidth),t.scrollbarYTop>=t.railYHeight-t.scrollbarYHeight&&(t.scrollbarYTop=t.railYHeight-t.scrollbarYHeight),function(t,e){var n={width:e.railXWidth},i=Math.floor(t.scrollTop);n.left=e.isRtl?e.negativeScrollAdjustment+t.scrollLeft+e.containerWidth-e.contentWidth:t.scrollLeft,e.isScrollbarXUsingBottom?n.bottom=e.scrollbarXBottom-i:n.top=e.scrollbarXTop+i,r(e.scrollbarXRail,n);var a={top:i,height:e.railYHeight};e.isScrollbarYUsingRight?a.right=e.isRtl?e.contentWidth-(e.negativeScrollAdjustment+t.scrollLeft)-e.scrollbarYRight-e.scrollbarYOuterWidth-9:e.scrollbarYRight-t.scrollLeft:a.left=e.isRtl?e.negativeScrollAdjustment+t.scrollLeft+2*e.containerWidth-e.contentWidth-e.scrollbarYLeft-e.scrollbarYOuterWidth:e.scrollbarYLeft+t.scrollLeft,r(e.scrollbarYRail,a),r(e.scrollbarX,{left:e.scrollbarXLeft,width:e.scrollbarXWidth-e.railBorderXWidth}),r(e.scrollbarY,{top:e.scrollbarYTop,height:e.scrollbarYHeight-e.railBorderYWidth})}(e,t),t.scrollbarXActive?e.classList.add(h("x")):(e.classList.remove(h("x")),t.scrollbarXWidth=0,t.scrollbarXLeft=0,e.scrollLeft=!0===t.isRtl?t.contentWidth:0),t.scrollbarYActive?e.classList.add(h("y")):(e.classList.remove(h("y")),t.scrollbarYHeight=0,t.scrollbarYTop=0,e.scrollTop=0)}function D(t,e){return t.settings.minScrollbarLength&&(e=Math.max(e,t.settings.minScrollbarLength)),t.settings.maxScrollbarLength&&(e=Math.min(e,t.settings.maxScrollbarLength)),e}function S(t,e){var n=e[0],i=e[1],r=e[2],a=e[3],o=e[4],s=e[5],c=e[6],l=e[7],u=e[8],d=t.element,h=null,b=null,f=null;function m(e){e.touches&&e.touches[0]&&(e[r]=e.touches[0].pageY),d[c]=h+f*(e[r]-b),p(t,l),C(t),e.stopPropagation(),e.preventDefault()}function v(){g(t,l),t[u].classList.remove("ps--clicking"),t.event.unbind(t.ownerDocument,"mousemove",m)}function y(e,o){h=d[c],o&&e.touches&&(e[r]=e.touches[0].pageY),b=e[r],f=(t[i]-t[n])/(t[a]-t[s]),o?t.event.bind(t.ownerDocument,"touchmove",m):(t.event.bind(t.ownerDocument,"mousemove",m),t.event.once(t.ownerDocument,"mouseup",v),e.preventDefault()),t[u].classList.add("ps--clicking"),e.stopPropagation()}t.event.bind(t[o],"mousedown",(function(t){y(t)})),t.event.bind(t[o],"touchstart",(function(t){y(t,!0)}))}var O={"click-rail":function(t){t.event.bind(t.scrollbarY,"mousedown",(function(t){return t.stopPropagation()})),t.event.bind(t.scrollbarYRail,"mousedown",(function(e){var n=e.pageY-window.pageYOffset-t.scrollbarYRail.getBoundingClientRect().top;t.element.scrollTop+=(n>t.scrollbarYTop?1:-1)*t.containerHeight,C(t),e.stopPropagation()})),t.event.bind(t.scrollbarX,"mousedown",(function(t){return t.stopPropagation()})),t.event.bind(t.scrollbarXRail,"mousedown",(function(e){var n=e.pageX-window.pageXOffset-t.scrollbarXRail.getBoundingClientRect().left;t.element.scrollLeft+=(n>t.scrollbarXLeft?1:-1)*t.containerWidth,C(t),e.stopPropagation()}))},"drag-thumb":function(t){S(t,["containerWidth","contentWidth","pageX","railXWidth","scrollbarX","scrollbarXWidth","scrollLeft","x","scrollbarXRail"]),S(t,["containerHeight","contentHeight","pageY","railYHeight","scrollbarY","scrollbarYHeight","scrollTop","y","scrollbarYRail"])},keyboard:function(t){var e=t.element;t.event.bind(t.ownerDocument,"keydown",(function(n){if(!(n.isDefaultPrevented&&n.isDefaultPrevented()||n.defaultPrevented)&&(s(e,":hover")||s(t.scrollbarX,":focus")||s(t.scrollbarY,":focus"))){var i,r=document.activeElement?document.activeElement:t.ownerDocument.activeElement;if(r){if("IFRAME"===r.tagName)r=r.contentDocument.activeElement;else for(;r.shadowRoot;)r=r.shadowRoot.activeElement;if(s(i=r,"input,[contenteditable]")||s(i,"select,[contenteditable]")||s(i,"textarea,[contenteditable]")||s(i,"button,[contenteditable]"))return}var a=0,o=0;switch(n.which){case 37:a=n.metaKey?-t.contentWidth:n.altKey?-t.containerWidth:-30;break;case 38:o=n.metaKey?t.contentHeight:n.altKey?t.containerHeight:30;break;case 39:a=n.metaKey?t.contentWidth:n.altKey?t.containerWidth:30;break;case 40:o=n.metaKey?-t.contentHeight:n.altKey?-t.containerHeight:-30;break;case 32:o=n.shiftKey?t.containerHeight:-t.containerHeight;break;case 33:o=t.containerHeight;break;case 34:o=-t.containerHeight;break;case 36:o=t.contentHeight;break;case 35:o=-t.contentHeight;break;default:return}t.settings.suppressScrollX&&0!==a||t.settings.suppressScrollY&&0!==o||(e.scrollTop-=o,e.scrollLeft+=a,C(t),function(n,i){var r=Math.floor(e.scrollTop);if(0===n){if(!t.scrollbarYActive)return!1;if(0===r&&i>0||r>=t.contentHeight-t.containerHeight&&i<0)return!t.settings.wheelPropagation}var a=e.scrollLeft;if(0===i){if(!t.scrollbarXActive)return!1;if(0===a&&n<0||a>=t.contentWidth-t.containerWidth&&n>0)return!t.settings.wheelPropagation}return!0}(a,o)&&n.preventDefault())}}))},wheel:function(t){var e=t.element;function n(n){var r=function(t){var e=t.deltaX,n=-1*t.deltaY;return void 0!==e&&void 0!==n||(e=-1*t.wheelDeltaX/6,n=t.wheelDeltaY/6),t.deltaMode&&1===t.deltaMode&&(e*=10,n*=10),e!=e&&n!=n&&(e=0,n=t.wheelDelta),t.shiftKey?[-n,-e]:[e,n]}(n),a=r[0],o=r[1];if(!function(t,n,r){if(!x.isWebKit&&e.querySelector("select:focus"))return!0;if(!e.contains(t))return!1;for(var a=t;a&&a!==e;){if(a.classList.contains("ps__child--consume"))return!0;var o=i(a);if(r&&o.overflowY.match(/(scroll|auto)/)){var s=a.scrollHeight-a.clientHeight;if(s>0&&(a.scrollTop>0&&r<0||a.scrollTop<s&&r>0))return!0}if(n&&o.overflowX.match(/(scroll|auto)/)){var c=a.scrollWidth-a.clientWidth;if(c>0&&(a.scrollLeft>0&&n<0||a.scrollLeft<c&&n>0))return!0}a=a.parentNode}return!1}(n.target,a,o)){var s=!1;t.settings.useBothWheelAxes?t.scrollbarYActive&&!t.scrollbarXActive?(o?e.scrollTop-=o*t.settings.wheelSpeed:e.scrollTop+=a*t.settings.wheelSpeed,s=!0):t.scrollbarXActive&&!t.scrollbarYActive&&(a?e.scrollLeft+=a*t.settings.wheelSpeed:e.scrollLeft-=o*t.settings.wheelSpeed,s=!0):(e.scrollTop-=o*t.settings.wheelSpeed,e.scrollLeft+=a*t.settings.wheelSpeed),C(t),(s=s||function(n,i){var r=Math.floor(e.scrollTop),a=0===e.scrollTop,o=r+e.offsetHeight===e.scrollHeight,s=0===e.scrollLeft,c=e.scrollLeft+e.offsetWidth===e.scrollWidth;return!(Math.abs(i)>Math.abs(n)?a||o:s||c)||!t.settings.wheelPropagation}(a,o))&&!n.ctrlKey&&(n.stopPropagation(),n.preventDefault())}}void 0!==window.onwheel?t.event.bind(e,"wheel",n):void 0!==window.onmousewheel&&t.event.bind(e,"mousewheel",n)},touch:function(t){if(x.supportsTouch||x.supportsIePointer){var e=t.element,n={},r=0,a={},o=null;x.supportsTouch?(t.event.bind(e,"touchstart",u),t.event.bind(e,"touchmove",d),t.event.bind(e,"touchend",h)):x.supportsIePointer&&(window.PointerEvent?(t.event.bind(e,"pointerdown",u),t.event.bind(e,"pointermove",d),t.event.bind(e,"pointerup",h)):window.MSPointerEvent&&(t.event.bind(e,"MSPointerDown",u),t.event.bind(e,"MSPointerMove",d),t.event.bind(e,"MSPointerUp",h)))}function s(n,i){e.scrollTop-=i,e.scrollLeft-=n,C(t)}function c(t){return t.targetTouches?t.targetTouches[0]:t}function l(t){return!(t.pointerType&&"pen"===t.pointerType&&0===t.buttons||(!t.targetTouches||1!==t.targetTouches.length)&&(!t.pointerType||"mouse"===t.pointerType||t.pointerType===t.MSPOINTER_TYPE_MOUSE))}function u(t){if(l(t)){var e=c(t);n.pageX=e.pageX,n.pageY=e.pageY,r=(new Date).getTime(),null!==o&&clearInterval(o)}}function d(o){if(l(o)){var u=c(o),d={pageX:u.pageX,pageY:u.pageY},h=d.pageX-n.pageX,b=d.pageY-n.pageY;if(function(t,n,r){if(!e.contains(t))return!1;for(var a=t;a&&a!==e;){if(a.classList.contains("ps__child--consume"))return!0;var o=i(a);if(r&&o.overflowY.match(/(scroll|auto)/)){var s=a.scrollHeight-a.clientHeight;if(s>0&&(a.scrollTop>0&&r<0||a.scrollTop<s&&r>0))return!0}if(n&&o.overflowX.match(/(scroll|auto)/)){var c=a.scrollWidth-a.clientWidth;if(c>0&&(a.scrollLeft>0&&n<0||a.scrollLeft<c&&n>0))return!0}a=a.parentNode}return!1}(o.target,h,b))return;s(h,b),n=d;var f=(new Date).getTime(),p=f-r;p>0&&(a.x=h/p,a.y=b/p,r=f),function(n,i){var r=Math.floor(e.scrollTop),a=e.scrollLeft,o=Math.abs(n),s=Math.abs(i);if(s>o){if(i<0&&r===t.contentHeight-t.containerHeight||i>0&&0===r)return 0===window.scrollY&&i>0&&x.isChrome}else if(o>s&&(n<0&&a===t.contentWidth-t.containerWidth||n>0&&0===a))return!0;return!0}(h,b)&&o.preventDefault()}}function h(){t.settings.swipeEasing&&(clearInterval(o),o=setInterval((function(){t.isInitialized?clearInterval(o):a.x||a.y?Math.abs(a.x)<.01&&Math.abs(a.y)<.01?clearInterval(o):(s(30*a.x,30*a.y),a.x*=.8,a.y*=.8):clearInterval(o)}),10))}}},I=function(t,e){var n=this;if(void 0===e&&(e={}),"string"==typeof t&&(t=document.querySelector(t)),!t||!t.nodeName)throw new Error("no element is specified to initialize PerfectScrollbar");for(var o in this.element=t,t.classList.add("ps"),this.settings={handlers:["click-rail","drag-thumb","keyboard","wheel","touch"],maxScrollbarLength:null,minScrollbarLength:null,scrollingThreshold:1e3,scrollXMarginOffset:0,scrollYMarginOffset:0,suppressScrollX:!1,suppressScrollY:!1,swipeEasing:!0,useBothWheelAxes:!1,wheelPropagation:!0,wheelSpeed:1},e)this.settings[o]=e[o];this.containerWidth=null,this.containerHeight=null,this.contentWidth=null,this.contentHeight=null;var s,c,l=function(){return t.classList.add("ps--focus")},h=function(){return t.classList.remove("ps--focus")};this.isRtl="rtl"===i(t).direction,!0===this.isRtl&&t.classList.add("ps__rtl"),this.isNegativeScroll=(c=t.scrollLeft,t.scrollLeft=-1,s=t.scrollLeft<0,t.scrollLeft=c,s),this.negativeScrollAdjustment=this.isNegativeScroll?t.scrollWidth-t.clientWidth:0,this.event=new y,this.ownerDocument=t.ownerDocument||document,this.scrollbarXRail=a(d("x")),t.appendChild(this.scrollbarXRail),this.scrollbarX=a(u("x")),this.scrollbarXRail.appendChild(this.scrollbarX),this.scrollbarX.setAttribute("tabindex",0),this.event.bind(this.scrollbarX,"focus",l),this.event.bind(this.scrollbarX,"blur",h),this.scrollbarXActive=null,this.scrollbarXWidth=null,this.scrollbarXLeft=null;var b=i(this.scrollbarXRail);this.scrollbarXBottom=parseInt(b.bottom,10),isNaN(this.scrollbarXBottom)?(this.isScrollbarXUsingBottom=!1,this.scrollbarXTop=w(b.top)):this.isScrollbarXUsingBottom=!0,this.railBorderXWidth=w(b.borderLeftWidth)+w(b.borderRightWidth),r(this.scrollbarXRail,{display:"block"}),this.railXMarginWidth=w(b.marginLeft)+w(b.marginRight),r(this.scrollbarXRail,{display:""}),this.railXWidth=null,this.railXRatio=null,this.scrollbarYRail=a(d("y")),t.appendChild(this.scrollbarYRail),this.scrollbarY=a(u("y")),this.scrollbarYRail.appendChild(this.scrollbarY),this.scrollbarY.setAttribute("tabindex",0),this.event.bind(this.scrollbarY,"focus",l),this.event.bind(this.scrollbarY,"blur",h),this.scrollbarYActive=null,this.scrollbarYHeight=null,this.scrollbarYTop=null;var f=i(this.scrollbarYRail);this.scrollbarYRight=parseInt(f.right,10),isNaN(this.scrollbarYRight)?(this.isScrollbarYUsingRight=!1,this.scrollbarYLeft=w(f.left)):this.isScrollbarYUsingRight=!0,this.scrollbarYOuterWidth=this.isRtl?function(t){var e=i(t);return w(e.width)+w(e.paddingLeft)+w(e.paddingRight)+w(e.borderLeftWidth)+w(e.borderRightWidth)}(this.scrollbarY):null,this.railBorderYWidth=w(f.borderTopWidth)+w(f.borderBottomWidth),r(this.scrollbarYRail,{display:"block"}),this.railYMarginHeight=w(f.marginTop)+w(f.marginBottom),r(this.scrollbarYRail,{display:""}),this.railYHeight=null,this.railYRatio=null,this.reach={x:t.scrollLeft<=0?"start":t.scrollLeft>=this.contentWidth-this.containerWidth?"end":null,y:t.scrollTop<=0?"start":t.scrollTop>=this.contentHeight-this.containerHeight?"end":null},this.isAlive=!0,this.settings.handlers.forEach((function(t){return O[t](n)})),this.lastScrollTop=Math.floor(t.scrollTop),this.lastScrollLeft=t.scrollLeft,this.event.bind(this.element,"scroll",(function(t){return n.onScroll(t)})),C(this)};I.prototype.update=function(){this.isAlive&&(this.negativeScrollAdjustment=this.isNegativeScroll?this.element.scrollWidth-this.element.clientWidth:0,r(this.scrollbarXRail,{display:"block"}),r(this.scrollbarYRail,{display:"block"}),this.railXMarginWidth=w(i(this.scrollbarXRail).marginLeft)+w(i(this.scrollbarXRail).marginRight),this.railYMarginHeight=w(i(this.scrollbarYRail).marginTop)+w(i(this.scrollbarYRail).marginBottom),r(this.scrollbarXRail,{display:"none"}),r(this.scrollbarYRail,{display:"none"}),C(this),_(this,"top",0,!1,!0),_(this,"left",0,!1,!0),r(this.scrollbarXRail,{display:""}),r(this.scrollbarYRail,{display:""}))},I.prototype.onScroll=function(t){this.isAlive&&(C(this),_(this,"top",this.element.scrollTop-this.lastScrollTop),_(this,"left",this.element.scrollLeft-this.lastScrollLeft),this.lastScrollTop=Math.floor(this.element.scrollTop),this.lastScrollLeft=this.element.scrollLeft)},I.prototype.destroy=function(){this.isAlive&&(this.event.unbindAll(),c(this.scrollbarX),c(this.scrollbarY),c(this.scrollbarXRail),c(this.scrollbarYRail),this.removePsClasses(),this.element=null,this.scrollbarX=null,this.scrollbarY=null,this.scrollbarXRail=null,this.scrollbarYRail=null,this.isAlive=!1)},I.prototype.removePsClasses=function(){this.element.className=this.element.className.split(" ").filter((function(t){return!t.match(/^ps([-_].+|)$/)})).join(" ")};var R=I,X=n("XNiG"),T=n("fXoL"),P=new T.r("SUPPORTS_NATIVE_SCROLLBAR_STYLING",{providedIn:"root",factory:function(){if(-1!==navigator.userAgent.indexOf("MSIE")||navigator.appVersion.indexOf("Trident/")>-1)return!1;var t=document.createElement("div");t.className="__sb-test",t.style.overflow="scroll",t.style.width="40px";var e=document.createElement("style");e.innerHTML=".__sb-test::-webkit-scrollbar { width: 0px; }",t.appendChild(e),document.body.appendChild(t);var n=40==t.scrollWidth;return document.body.removeChild(t),n}}),W=n("OnlV"),L=n("GU7r"),E=n("kmQS");n.d(e,"a",(function(){return M}));var j,M=((j=function(){function t(e,n,i,r,a,o,s){_classCallCheck(this,t),this.el=e,this.renderer=n,this.breakpoints=i,this.ngZone=r,this.mutationObserverFactory=a,this.config=o,this.supportsNativeStyling=s,this.subscriptions=[],this.minLength=100,this.suppressX=!0,this.scrollTop=0,this.native=!0,this.debouncer=new X.a}return _createClass(t,[{key:"ngAfterViewInit",value:function(){this.renderer.addClass(this.el.nativeElement,this.suppressX?"scroll-container":"scroll-container-x"),this.shouldUseNative()||(this.scrollbar=new R(this.el.nativeElement,{minScrollbarLength:this.minLength,suppressScrollX:this.suppressX,useBothWheelAxes:!this.suppressX,wheelSpeed:2}),this.native=!1,this.bindToContentChange())}},{key:"update",value:function(){this.native||this.scrollbar.update()}},{key:"setScrollTop",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.el.nativeElement.scrollTop=t,this.scrollTop=this.el.nativeElement.scrollTop,this.update()}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach((function(t){return t.unsubscribe()})),this.subscriptions=[],this.native||this.scrollbar.destroy(),this.debouncer.complete(),this.observer&&this.observer.disconnect()}},{key:"shouldUseNative",value:function(){return!this.config.get("vebto.forceCustomScrollbar")&&!/Edge/.test(navigator.userAgent)&&(!!this.breakpoints.isMobile$.value||this.supportsNativeStyling)}},{key:"bindToContentChange",value:function(){var t=this;this.observer=this.ngZone.runOutsideAngular((function(){return t.mutationObserverFactory.create((function(e){t.debouncer.next(e)}))})),this.observer.observe(this.el.nativeElement,{childList:!0,subtree:!0}),this.ngZone.runOutsideAngular((function(){t.debouncer.subscribe((function(e){return t.update()}))}))}}]),t}()).\u0275fac=function(t){return new(t||j)(T.Rb(T.l),T.Rb(T.G),T.Rb(W.a),T.Rb(T.A),T.Rb(L.c),T.Rb(E.a),T.Rb(P))},j.\u0275dir=T.Mb({type:j,selectors:[["","customScrollbar",""]],inputs:{minLength:["customScrollbarMinLength","minLength"],suppressX:"suppressX"}}),j)},Z5tI:function(t,e,n){"use strict";var i=n("MkmW");e.subscribeToPromise=function(t){return function(e){return t.then((function(t){e.closed||(e.next(t),e.complete())}),(function(t){return e.error(t)})).then(null,i.hostReportError),e}}},ZiO8:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var i=n("XZLl"),r=n("fXoL"),a=n("bTqV"),o=function(){var t=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,_getPrototypeOf(e).apply(this,arguments))}return _inherits(e,t),_createClass(e,[{key:"getMessage",value:function(){return this.message||"No file preview available."}}]),e}(i.a);return t.\u0275fac=function(e){return s(e||t)},t.\u0275cmp=r.Lb({type:t,selectors:[["default-preview"]],inputs:{message:"message"},features:[r.Ab],decls:5,vars:1,consts:[[1,"panel","preview-object"],["trans","",1,"message"],["mat-raised-button","","color","accent","trans","",3,"click"]],template:function(t,e){1&t&&(r.Xb(0,"div",0),r.Xb(1,"div",1),r.Nc(2),r.Wb(),r.Xb(3,"button",2),r.fc("click",(function(t){return e.download.emit()})),r.Nc(4,"Download"),r.Wb(),r.Wb()),2&t&&(r.Db(2),r.Oc(e.getMessage()))},directives:[a.b],styles:["[_nghost-%COMP%]{display:block;max-width:380px;max-height:150px}.panel[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center;background-color:var(--be-background);color:var(--be-text);border-radius:4px;width:100%;height:100%;margin:auto;box-shadow:0 3px 3px -2px rgba(0,0,0,.2),0 3px 4px 0 rgba(0,0,0,.14),0 1px 8px 0 rgba(0,0,0,.12)}.message[_ngcontent-%COMP%]{font-size:1.8rem;margin-bottom:15px}.mat-raised-button[_ngcontent-%COMP%]{display:block}"],changeDetection:0}),t}(),s=r.Zb(o)},aV6R:function(t,e,n){"use strict";n.d(e,"a",(function(){return m}));var i=n("KKQg"),r=n("0IaG"),a=n("h586"),o=n("fXoL"),s=n("LsVx"),c=n("Rd8u"),l=n("bTqV"),u=n("NFeN"),d=n("rG4v"),h=n("ofXK"),b=n("83jf");function f(t,e){if(1&t&&(o.Xb(0,"div",11),o.Nc(1),o.Wb()),2&t){var n=o.jc();o.Db(1),o.Oc(n.errors.body)}}function p(t,e){if(1&t&&(o.Xb(0,"div",11),o.Nc(1),o.Wb()),2&t){var n=o.jc();o.Db(1),o.Oc(n.errors.attachments)}}function g(t,e){if(1&t){var n=o.Yb();o.Xb(0,"reply-attachment-list",12),o.fc("detached",(function(t){return o.Cc(n),o.jc().removeAttachment(t)})),o.Wb()}if(2&t){var i=o.jc();o.rc("attachments",i.attachments)}}var m=function(){var t=function(){function t(e,n,i,r){_classCallCheck(this,t),this.dialogRef=e,this.data=n,this.tickets=i,this.uploadQueue=r,this.attachments=[],this.errors={},this.hydrate()}return _createClass(t,[{key:"ngAfterViewInit",value:function(){this.textEditor.focus(),this.textEditor.setContents(this.reply.body)}},{key:"hydrate",value:function(){this.reply=Object.assign({},this.data.reply),this.attachments=this.reply.uploads.slice()}},{key:"close",value:function(t){this.dialogRef.close(t),this.textEditor.destroyEditor()}},{key:"confirm",value:function(){var t=this,e={body:this.textEditor.getContents(),uploads:this.attachments.map((function(t){return t.id}))};this.tickets.updateReply(this.reply.id,e).subscribe((function(e){t.close(e.data)}),(function(e){return t.errors=e.messages}))}},{key:"uploadFiles",value:function(t){var e=this;this.uploadQueue.start(t).subscribe((function(t){e.attachments=[].concat(_toConsumableArray(e.attachments),[t.fileEntry])}))}},{key:"removeAttachment",value:function(t){for(var e=0;e<this.attachments.length;e++)this.attachments[e].id===t.id&&this.attachments.splice(e,1)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(o.Rb(r.h),o.Rb(r.a),o.Rb(s.a),o.Rb(a.a))},t.\u0275cmp=o.Lb({type:t,selectors:[["update-reply-modal"]],viewQuery:function(t,e){var n;1&t&&o.Jc(i.a,!0),2&t&&o.yc(n=o.gc())&&(e.textEditor=n.first)},features:[o.Cb([a.a])],decls:17,vars:4,consts:[[1,"modal-header"],["mat-dialog-title","","trans",""],["type","button","mat-icon-button","","tabindex","-1",1,"close-button",3,"click"],["svgIcon","close"],[1,"many-inputs"],[1,"input-container"],["inlineUploadPrefix","ticket_images",3,"minHeight","onFileUpload"],["class","error",4,"ngIf"],[3,"attachments","detached",4,"ngIf"],["type","button","mat-button","","trans","",1,"cancel-button",3,"click"],["type","submit","mat-raised-button","","color","accent","trans","",1,"submit-button",3,"click"],[1,"error"],[3,"attachments","detached"]],template:function(t,e){1&t&&(o.Xb(0,"div",0),o.Xb(1,"h2",1),o.Nc(2,"Update Reply"),o.Wb(),o.Xb(3,"button",2),o.fc("click",(function(t){return e.close()})),o.Sb(4,"mat-icon",3),o.Wb(),o.Wb(),o.Xb(5,"mat-dialog-content",4),o.Xb(6,"div",5),o.Xb(7,"text-editor",6),o.fc("onFileUpload",(function(t){return e.uploadFiles(t)})),o.Wb(),o.Sb(8,"upload-progress-bar"),o.Lc(9,f,2,1,"div",7),o.Lc(10,p,2,1,"div",7),o.Lc(11,g,1,1,"reply-attachment-list",8),o.Wb(),o.Wb(),o.Xb(12,"mat-dialog-actions"),o.Xb(13,"button",9),o.fc("click",(function(t){return e.close()})),o.Nc(14,"Cancel"),o.Wb(),o.Xb(15,"button",10),o.fc("click",(function(t){return e.confirm()})),o.Nc(16,"Update"),o.Wb(),o.Wb()),2&t&&(o.Db(7),o.rc("minHeight",300),o.Db(2),o.rc("ngIf",e.errors.body),o.Db(1),o.rc("ngIf",e.errors.attachments),o.Db(1),o.rc("ngIf",e.attachments.length))},directives:[r.i,c.a,l.b,u.a,r.f,i.a,d.a,h.t,r.c,b.a],styles:[".update-reply-modal-container{width:600px}.update-reply-modal-container reply-attachment-list{margin-top:15px}"],encapsulation:2}),t}()},apsj:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var i=n("fXoL"),r=n("LRXf"),a=function(){var t=function(){function t(e){_classCallCheck(this,t),this.httpClient=e}return _createClass(t,[{key:"attach",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i={ids:[]};return i.ids=e.map((function(t){return t.id})),n&&(i.body=n),this.httpClient.post("tickets/"+t+"/attachments",i)}},{key:"detach",value:function(t,e){return this.httpClient.post("drafts/"+t+"/uploads/"+e+"/detach")}}]),t}();return t.\u0275fac=function(e){return new(e||t)(i.bc(r.a))},t.\u0275prov=i.Nb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},b7Mq:function(t,e,n){"use strict";n.d(e,"a",(function(){return p}));var i=n("fXoL"),r=n("LsVx"),a=n("twBr"),o=n("wfim"),s=n("wWhK"),c=n("ofXK"),l=n("Qu3c"),u=n("NFeN"),d=n("zW5C");function h(t,e){if(1&t){var n=i.Yb();i.Xb(0,"button",13),i.fc("click",(function(t){i.Cc(n);var e=i.jc(2).$implicit;return i.jc().removeTag(e)})),i.Sb(1,"mat-icon",14),i.Wb()}}function b(t,e){if(1&t&&(i.Xb(0,"div",10),i.Xb(1,"span",11),i.Nc(2),i.Wb(),i.Lc(3,h,2,0,"button",12),i.Wb()),2&t){var n=i.jc().$implicit,r=i.jc();i.Db(2),i.Oc(n.name),i.Db(1),i.rc("ngIf",r.currentUser.hasPermission("tickets.update"))}}function f(t,e){1&t&&i.Lc(0,b,4,2,"div",9),2&t&&i.rc("ngIf","status"!==e.$implicit.type)}var p=function(){var t=function(){function t(e,n,i,r){_classCallCheck(this,t),this.tickets=e,this.currentUser=n,this.mailboxTags=i,this.conversation=r}return _createClass(t,[{key:"removeTag",value:function(t){var e=this;this.tickets.removeTag(t,[this.conversation.get().id]).subscribe((function(){e.conversation.get().tags=e.conversation.get().tags.filter((function(e){return e.id!==t.id})),e.mailboxTags.refresh()}))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(i.Rb(r.a),i.Rb(a.a),i.Rb(o.a),i.Rb(s.a))},t.\u0275cmp=i.Lb({type:t,selectors:[["conversation-header"]],decls:12,vars:7,consts:[[1,"title-container"],[1,"ticket-subject"],[1,"tags"],["ngFor","",3,"ngForOf"],[1,"title-meta"],[1,"ticket-created-at-date"],[1,"actions"],[1,"button","reply-button",3,"matTooltip","click"],["svgIcon","reply"],["class","tag-label",4,"ngIf"],[1,"tag-label"],[1,"tag-name"],["class","no-style remove-tag-button","type","button","title","Remove Tag",3,"click",4,"ngIf"],["type","button","title","Remove Tag",1,"no-style","remove-tag-button",3,"click"],["svgIcon","close"]],template:function(t,e){1&t&&(i.Xb(0,"div",0),i.Xb(1,"h2",1),i.Nc(2),i.Wb(),i.Xb(3,"div",2),i.Lc(4,f,1,1,"ng-template",3),i.Wb(),i.Wb(),i.Xb(5,"div",4),i.Xb(6,"div",5),i.Nc(7),i.Wb(),i.Xb(8,"div",6),i.Xb(9,"button",7),i.fc("click",(function(t){return e.conversation.openEditor()})),i.kc(10,"trans"),i.Sb(11,"mat-icon",8),i.Wb(),i.Wb(),i.Wb()),2&t&&(i.Db(2),i.Oc(e.conversation.get().subject),i.Db(2),i.rc("ngForOf",e.conversation.get().tags),i.Db(3),i.Qc("",e.conversation.get().created_at_formatted," (",e.conversation.get().created_at_month,")"),i.Db(2),i.rc("matTooltip",i.lc(10,5,"Reply (r)")))},directives:[c.s,l.a,u.a,c.t],pipes:[d.a],styles:["conversation-header{-webkit-box-flex:0;flex:none;width:100%}conversation-header,conversation-header .title-container{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}conversation-header .title-container{-webkit-box-flex:1;flex:1 1 auto;flex-wrap:wrap;padding:5px 10px 5px 25px;margin:15px 0}conversation-header .title-container h2{color:var(--be-help-center-title-text);font-weight:400;font-size:2.5rem;margin:0 15px 0 0}conversation-header .title-container .tags{display:inline-block}conversation-header .title-container .tags .tag-name{display:inline-block;max-width:50px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;vertical-align:sub}conversation-header .title-meta{-webkit-box-flex:0;flex:0 0 100px;white-space:nowrap;font-size:1.6rem;color:var(--be-secondary-text);text-align:right;padding-right:26px}conversation-header .title-meta .actions,conversation-header .title-meta .ticket-created-at-date{display:inline-block;vertical-align:middle}conversation-header .title-meta .reply-button{min-width:0;border:1px solid var(--be-divider-default);border-radius:4px;color:var(--be-secondary-text);margin-left:10px;padding:5px 12px 6px;background-color:var(--be-background-alternative);cursor:pointer}conversation-header .title-meta .reply-button mat-icon{width:19px;height:19px}@media only screen and (max-width:768px){conversation-header{margin-bottom:15px}conversation-header .title-meta .ticket-created-at-date{display:none}}"],encapsulation:2}),t}()},cSoz:function(t,e,n){"use strict";var i=n("Vi6O"),r=n("6qA3"),a=n("Q1FS");e.subscribeToResult=function(t,e,n,o,s){if(void 0===s&&(s=new i.InnerSubscriber(t,n,o)),!s.closed)return e instanceof a.Observable?e.subscribe(s):r.subscribeTo(e)(s)}},cuTO:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var i=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(var n in _classCallCheck(this,t),this.shared=!1,e)this[n]=e[n]}},ehXJ:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var i=n("fXoL"),r=n("tyNb"),a=n("i2dy"),o=n("LsVx"),s=n("kmQS"),c=n("wfim"),l=n("ahrr"),u=function(){var t=function(){function t(e,n,i,r,a,o){_classCallCheck(this,t),this.router=e,this.toast=n,this.tickets=i,this.settings=r,this.mailboxTags=a,this.localStorage=o,this.defaultAction=this.settings.get("replies.after_reply_action","next_active_ticket")}return _createClass(t,[{key:"perform",value:function(){if(this.router.url.indexOf("help-center")>-1)this.navigateToCustomerTicketsList();else{switch(this.get()){case"next_active_ticket":this.navigateToNextActiveTicket();break;case"back_to_folder":this.navigateToAgentTicketsList()}this.mailboxTags.refresh()}}},{key:"get",value:function(){return this.localStorage.get("after_reply_action",this.defaultAction)}},{key:"set",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.defaultAction=t,this.localStorage.set("after_reply_action",t)}},{key:"setTicketId",value:function(t){this.activeTicketId=t}},{key:"navigateToNextActiveTicket",value:function(){var t=this,e=this.mailboxTags.getActiveTagId();this.tickets.getLatestActiveTicket(e).subscribe((function(n){n&&n.id!==t.activeTicketId?t.router.navigate(["/mailbox/tickets/tag/",e,"ticket",n.id]):t.navigateToAgentTicketsList()}))}},{key:"navigateToAgentTicketsList",value:function(){this.router.navigate(["/mailbox/tickets/tag/"+this.mailboxTags.getActiveTagId()])}},{key:"navigateToCustomerTicketsList",value:function(t){this.router.navigate(["/help-center/tickets"]),this.toast.open(t||"Your reply was submitted successfully.")}}]),t}();return t.\u0275fac=function(e){return new(e||t)(i.bc(r.f),i.bc(a.a),i.bc(o.a),i.bc(s.a),i.bc(c.a),i.bc(l.a))},t.\u0275prov=i.Nb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},gTqA:function(t,e,n){"use strict";var i=n("Q1FS"),r=n("6qA3"),a=n("EBtg");e.from=function(t,e){return e?a.scheduled(t,e):t instanceof i.Observable?t:new i.Observable(r.subscribeTo(t))}},hD7E:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=n("fXoL"),r=function(){var t=function t(){_classCallCheck(this,t)};return t.\u0275mod=i.Pb({type:t}),t.\u0275inj=i.Ob({factory:function(e){return new(e||t)}}),t}()},i70M:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var i=n("JIr8"),r=n("5+tZ"),a=n("EY2u"),o=n("LRne"),s=n("fXoL"),c=n("tyNb"),l=n("sPnx"),u=function(){var t=function(){function t(e,n){_classCallCheck(this,t),this.router=e,this.http=n}return _createClass(t,[{key:"resolve",value:function(t){var e=this;return this.http.get("new-ticket/categories").pipe(Object(i.a)((function(){return e.router.navigateByUrl("/"),a.a})),Object(r.a)((function(t){return Object(o.a)(t.tags)})))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(s.bc(c.f),s.bc(l.a))},t.\u0275prov=s.Nb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},iB19:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var i=n("fXoL"),r=n("ofXK"),a=n("kmQS"),o=function(){var t=function(){function t(e,n){_classCallCheck(this,t),this.settings=e,this._locale=n,this.format=this.settings.get("dates.format","yyyy-MM-dd"),this.angularPipe=new r.f(n)}return _createClass(t,[{key:"transform",value:function(t,e,n,i){return t=t&&"string"==typeof t?t.replace(/-/g,"/"):t,this.angularPipe.transform(t,e||this.format,n,i)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(i.Rb(a.a),i.Rb(i.v))},t.\u0275pipe=i.Qb({name:"formattedDate",type:t,pure:!0}),t}()},itxp:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var i=new(n("fXoL").r)("CURRENT_PREVIEW_FILE")},"j/pe":function(t,e,n){"use strict";var i,r=n("qaug"),a=n("2qZP"),o=n("EzZJ"),s=n("g6kq"),c=n("STbY"),l=n("FtGj"),u=n("fXoL"),d=n("tyNb"),h=n("QGXG"),b=n("twBr"),f=n("LsVx"),p=n("wWhK"),g=n("wfim"),m=n("pLZG"),v=((i=function(){function t(e){_classCallCheck(this,t),this.router=e,this.history=[],this.limit=15}return _createClass(t,[{key:"get",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.history[t]||null}},{key:"getPrevious",value:function(){return this.get(1)}},{key:"back",value:function(){var t=this.getPrevious();return t?this.router.navigate([t.url],{queryParams:t.queryParams}):new Promise((function(t){return t(!1)}))}},{key:"addHistoryItem",value:function(t){var e=t.split("?"),n={};e[1]&&(n=this.parseQueryParams(e[1])),this.history.length>=this.limit&&this.history.splice(1,this.history.length-1),this.history.unshift({url:e[0],queryParams:n})}},{key:"parseQueryParams",value:function(t){var e=new URLSearchParams(t);return console.log(e),{}}},{key:"init",value:function(){var t=this;this.router.events.pipe(Object(m.a)((function(t){return t instanceof d.b}))).subscribe((function(e){t.addHistoryItem(e.urlAfterRedirects)}))}}]),t}()).\u0275fac=function(t){return new(t||i)(u.bc(d.f))},i.\u0275prov=u.Nb({token:i,factory:i.\u0275fac,providedIn:"root"}),i),y=n("ofXK"),k=n("Qu3c"),_=n("NFeN"),w=n("zW5C");n.d(e,"a",(function(){return T}));var x=["ticketStatusMenuTrigger"];function C(t,e){if(1&t){var n=u.Yb();u.Xb(0,"button",16),u.fc("click",(function(t){return u.Cc(n),u.jc(2).navigateToTicketsList()})),u.kc(1,"trans"),u.Sb(2,"mat-icon",17),u.Wb()}2&t&&u.rc("matTooltip",u.lc(1,1,"Back (b)"))}function D(t,e){if(1&t){var n=u.Yb();u.Xb(0,"button",18),u.fc("click",(function(t){u.Cc(n);var i=e.$implicit;return u.jc(2).changeTicketStatus(i)})),u.Nc(1),u.Wb()}if(2&t){var i=e.$implicit,r=u.jc(2);u.Hb("active",(null==r.conversation.status?null:r.conversation.status.name)===i.name),u.rc("ngClass",i.name),u.Db(1),u.Pc(" ",i.display_name||i.name," ")}}var S=function(t){return[t]};function O(t,e){if(1&t){var n=u.Yb();u.Vb(0),u.Lc(1,C,3,3,"button",5),u.Xb(2,"assign-ticket-dropdown",6),u.fc("assigned",(function(t){return u.Cc(n),u.jc().refreshMailboxTags()})),u.kc(3,"trans"),u.Wb(),u.Xb(4,"button",7),u.fc("click",(function(t){return u.Cc(n),u.jc().showNoteModal()})),u.kc(5,"trans"),u.Sb(6,"mat-icon",8),u.Wb(),u.Xb(7,"add-tag-dropdown",9),u.fc("tagAdded",(function(t){return u.Cc(n),u.jc().addTag(t)})),u.kc(8,"trans"),u.Wb(),u.Xb(9,"button",10,11),u.kc(11,"trans"),u.Sb(12,"mat-icon",12),u.Wb(),u.Xb(13,"mat-menu",13,14),u.Lc(15,D,2,4,"button",15),u.Wb(),u.pc(16),u.Ub()}if(2&t){var i=u.zc(14),r=u.jc();u.Db(1),u.rc("ngIf",!r.hideBackButton),u.Db(1),u.rc("ticket",r.conversation.get())("matTooltip",u.lc(3,10,"Assign (a)")),u.Db(2),u.rc("matTooltip",u.lc(5,12,"Note (n)")),u.Db(3),u.rc("ticketIds",u.wc(18,S,r.conversation.get().id))("matTooltip",u.lc(8,14,"Tag (t)")),u.Db(2),u.rc("matMenuTriggerFor",i)("matTooltip",u.lc(11,16,"Status (s)")),u.Db(4),u.rc("overlapTrigger",!1),u.Db(2),u.rc("ngForOf",r.mailboxTags.getStatusTags(!0))}}var I,R=function(){return["tickets.update","replies.create"]},X=["*"],T=((I=function(){function t(e,n,i,r,a,o,s,c,l,u){_classCallCheck(this,t),this.router=e,this.injector=n,this.modals=i,this.route=r,this.currentUser=a,this.tickets=o,this.conversation=s,this.browserEvents=c,this.mailboxTags=l,this.routerHistory=u,this.hideBackButton=!1,this.subscriptions=[]}return _createClass(t,[{key:"ngOnInit",value:function(){this.initKeybinds()}},{key:"changeTicketStatus",value:function(t){var e=this;t&&this.tickets.changeTicketStatus(this.conversation.get().id,t.name).subscribe((function(){e.conversation.performAfterReplyAction(),e.conversation.setStatus(t)}))}},{key:"showNoteModal",value:function(){var t=this;this.modals.open(r.a,{ticketId:this.conversation.get().id},{panelClass:"add-note-modal-container"}).afterClosed().subscribe((function(e){e&&t.addNewNote(e)}))}},{key:"addTag",value:function(t){this.conversation.addTag(t),this.refreshMailboxTags()}},{key:"addNewNote",value:function(t){t&&this.conversation.replies.add(t)}},{key:"navigateToTicketsList",value:function(){this.routerHistory.getPrevious()?this.routerHistory.back():this.router.navigate(["../../"],{relativeTo:this.route})}},{key:"refreshMailboxTags",value:function(){this.mailboxTags.refresh()}},{key:"initKeybinds",value:function(){var t=this,e=this.browserEvents.globalKeyDown$.subscribe((function(e){var n=!0;if(!(t.modals.anyDialogOpen()||s.a.userIsTyping()||e.ctrlKey)){switch(e.keyCode){case l.b:t.closeAllMenus(),t.navigateToTicketsList();break;case l.a:t.assignTicketDropdown.open();break;case l.l:t.closeAllMenus(),t.showNoteModal();break;case l.w:t.addTagDropdown.open();break;case l.t:t.ticketStatusTrigger.menuOpen?t.handleTicketStatusChangeKeybind("spam"):t.ticketStatusTrigger.openMenu();break;case l.n:t.handleTicketStatusChangeKeybind("open");break;case l.d:t.handleTicketStatusChangeKeybind("closed");break;case l.o:t.handleTicketStatusChangeKeybind("pending");break;default:n=!1}n&&(e.preventDefault(),e.stopPropagation())}}));this.subscriptions.push(e)}},{key:"closeAllMenus",value:function(){this.addTagDropdown.close(),this.assignTicketDropdown.close(),this.ticketStatusTrigger.closeMenu()}},{key:"handleTicketStatusChangeKeybind",value:function(t){this.ticketStatusTrigger.menuOpen&&(this.changeTicketStatus(this.mailboxTags.getTagByIdOrName(t)),this.ticketStatusTrigger.closeMenu())}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach((function(t){t&&t.unsubscribe()}))}}]),t}()).\u0275fac=function(t){return new(t||I)(u.Rb(d.f),u.Rb(u.s),u.Rb(h.a),u.Rb(d.a),u.Rb(b.a),u.Rb(f.a),u.Rb(p.a),u.Rb(s.a),u.Rb(g.a),u.Rb(v))},I.\u0275cmp=u.Lb({type:I,selectors:[["conversation-toolbar"]],viewQuery:function(t,e){var n;1&t&&(u.Sc(a.a,!0),u.Sc(o.a,!0),u.Sc(x,!0,c.d)),2&t&&(u.yc(n=u.gc())&&(e.assignTicketDropdown=n.first),u.yc(n=u.gc())&&(e.addTagDropdown=n.first),u.yc(n=u.gc())&&(e.ticketStatusTrigger=n.first))},inputs:{hideBackButton:"hideBackButton"},ngContentSelectors:X,decls:7,vars:5,consts:[[1,"left","toolbar-actions"],[4,"ngIf"],[1,"right","ticket-info"],[1,"ticket-number"],[1,"ticket-status",3,"ngClass"],["class","no-style action back-button",3,"matTooltip","click",4,"ngIf"],[1,"action",3,"ticket","matTooltip","assigned"],[1,"action","no-style","add-note-button",3,"matTooltip","click"],["svgIcon","note-custom"],[1,"action",3,"ticketIds","matTooltip","tagAdded"],[1,"no-style","change-ticket-status-button","action",3,"matMenuTriggerFor","matTooltip"],["ticketStatusMenuTrigger",""],["svgIcon","flag-custom"],[1,"ticket-status-menu",3,"overlapTrigger"],["ticketStatusMenu","matMenu"],["mat-menu-item","",3,"active","ngClass","click",4,"ngFor","ngForOf"],[1,"no-style","action","back-button",3,"matTooltip","click"],["svgIcon","return-custom"],["mat-menu-item","",3,"ngClass","click"]],template:function(t,e){1&t&&(u.qc(),u.Xb(0,"div",0),u.Lc(1,O,17,20,"ng-container",1),u.Wb(),u.Xb(2,"div",2),u.Xb(3,"div",3),u.Nc(4),u.Wb(),u.Xb(5,"div",4),u.Nc(6),u.Wb(),u.Wb()),2&t&&(u.Db(1),u.rc("ngIf",e.currentUser.hasPermissions(u.vc(4,R))),u.Db(3),u.Pc("#",e.conversation.get().id,""),u.Db(1),u.rc("ngClass",e.conversation.getStatus().name),u.Db(1),u.Oc(e.conversation.getStatus().display_name))},directives:[y.t,y.q,a.a,k.a,_.a,o.a,c.d,c.e,y.s,c.b],pipes:[w.a],styles:["conversation-toolbar{display:block;width:100%;border-bottom:1px solid var(--be-divider-default);height:57px;padding:0 35px 0 10px;white-space:nowrap;color:var(--be-help-center-title-text)}conversation-toolbar .left,conversation-toolbar .right{width:50%;height:100%;display:-webkit-inline-box;display:inline-flex;-webkit-box-align:center;align-items:center;padding:15px 0}conversation-toolbar .toolbar-actions .action{margin:0 15px;height:26px;width:26px;position:relative;-webkit-transition:color .2s ease-in-out;transition:color .2s ease-in-out;color:inherit}conversation-toolbar .toolbar-actions .action:hover{color:var(--be-text)}conversation-toolbar .toolbar-actions .action mat-icon{height:26px;width:26px}conversation-toolbar .ticket-info{-webkit-box-pack:end;justify-content:flex-end;vertical-align:top}conversation-toolbar .ticket-info .ticket-number{font-size:3rem}conversation-toolbar .ticket-info .ticket-status{border:1px solid var(--be-divider-default);border-radius:2px;background-color:var(--be-background-alternative);padding:4px 12px;margin-left:10px;text-transform:uppercase;font-weight:500;font-size:1.1rem;letter-spacing:.02em}conversation-toolbar .ticket-info .ticket-status.open{background-color:var(--be-accent-default);color:var(--be-accent-contrast);border-color:transparent}.ticket-status-menu .mat-menu-item{text-transform:capitalize}.ticket-status-menu .mat-menu-item.active{background-color:var(--be-accent-emphasis)}"],encapsulation:2}),I)},k3xQ:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var i=n("ofXK"),r=n("fXoL"),a=function(){var t=function t(){_classCallCheck(this,t)};return t.\u0275mod=r.Pb({type:t}),t.\u0275inj=r.Ob({factory:function(e){return new(e||t)},imports:[[i.c]]}),t}()},lxqa:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var i=n("0IaG"),r=n("fXoL"),a=n("kmQS"),o=n("Rd8u"),s=n("bTqV"),c=n("NFeN"),l=n("zW5C"),u=function(){var t=function(){function t(e,n,i){_classCallCheck(this,t),this.dialogRef=e,this.data=n,this.settings=i,this.type=this.getDisplayType(n.reply.type)}return _createClass(t,[{key:"close",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.dialogRef.close(t)}},{key:"confirm",value:function(){this.close(!0)}},{key:"getDisplayType",value:function(t){switch(t){case"replies":return"reply";case"notes":return"note";case"drafts":return"draft"}}}]),t}();return t.\u0275fac=function(e){return new(e||t)(r.Rb(i.h),r.Rb(i.a),r.Rb(a.a))},t.\u0275cmp=r.Lb({type:t,selectors:[["confirm-reply-delete-modal"]],decls:18,vars:5,consts:[[1,"modal-header",2,"margin","0"],["mat-dialog-title","","trans",""],["type","button","mat-icon-button","","tabindex","-1",1,"close-button",3,"click"],["svgIcon","close"],["trans",""],["mat-button","","type","button","trans","",1,"cancel-button",3,"click"],["type","submit","mat-raised-button","","trans","",1,"submit-button",3,"color","click"]],template:function(t,e){1&t&&(r.Xb(0,"div",0),r.Xb(1,"h2",1),r.Nc(2),r.Wb(),r.Xb(3,"button",2),r.fc("click",(function(t){return e.close()})),r.Sb(4,"mat-icon",3),r.Wb(),r.Wb(),r.Xb(5,"mat-dialog-content"),r.Xb(6,"p"),r.Xb(7,"span",4),r.Nc(8,"Are you sure you want to delete this"),r.Wb(),r.Nc(9," "),r.Xb(10,"span"),r.Nc(11),r.kc(12,"trans"),r.Wb(),r.Wb(),r.Wb(),r.Xb(13,"mat-dialog-actions"),r.Xb(14,"button",5),r.fc("click",(function(t){return e.close()})),r.Nc(15,"Close"),r.Wb(),r.Xb(16,"button",6),r.fc("click",(function(t){return e.confirm()})),r.Nc(17,"Delete"),r.Wb(),r.Wb()),2&t&&(r.Db(2),r.Pc("Delete ",e.type,""),r.Db(9),r.Pc("",r.lc(12,3,e.type),"?"),r.Db(5),r.rc("color",e.settings.get("vebto.auth.color")))},directives:[i.i,o.a,s.b,c.a,i.f,i.c],pipes:[l.a],encapsulation:2}),t}()},mbIT:function(t,e,n){"use strict";e.isArray=Array.isArray||function(t){return t&&"number"==typeof t.length}},n3uD:function(t,e,n){"use strict";var i=!1;e.config={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){var e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else i&&console.log("RxJS: Back to a better error behavior. Thank you. <3");i=t},get useDeprecatedSynchronousErrorHandling(){return i}}},n73p:function(t,e,n){"use strict";var i=n("Q1FS"),r=n("zB/H");e.schedulePromise=function(t,e){return new i.Observable((function(n){var i=new r.Subscription;return i.add(e.schedule((function(){return t.then((function(t){i.add(e.schedule((function(){n.next(t),i.add(e.schedule((function(){return n.complete()})))})))}),(function(t){i.add(e.schedule((function(){return n.error(t)})))}))}))),i}))}},nzqU:function(t,e,n){"use strict";e.isScheduler=function(t){return t&&"function"==typeof t.schedule}},ovFL:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var i=n("fXoL"),r=n("7LS1"),a=n("ofXK"),o=n("+rOU");function s(t,e){}function c(t,e){if(1&t){var n=i.Yb();i.Vb(0),i.Lc(1,s,0,0,"ng-template",1),i.fc("attached",(function(t){return i.Cc(n),i.jc().listenForDownloadClick(t)})),i.Ub()}if(2&t){var r=e.ngIf;i.Db(1),i.rc("cdkPortalOutlet",r)}}var l=function(){var t=function(){function t(e){_classCallCheck(this,t),this.previewFiles=e}return _createClass(t,[{key:"ngOnChanges",value:function(t){this.previewFiles.set(this.files,this.activeFile)}},{key:"ngOnDestroy",value:function(){this.previewFiles.destroy(),this.downloadSub&&this.downloadSub.unsubscribe()}},{key:"listenForDownloadClick",value:function(t){var e=this;this.downloadSub&&this.downloadSub.unsubscribe(),this.downloadSub=t.instance.download.subscribe((function(){e.previewFiles.download.next()}))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(i.Rb(r.a))},t.\u0275cmp=i.Lb({type:t,selectors:[["preview-container"]],inputs:{files:"files",activeFile:"activeFile"},features:[i.Bb()],decls:2,vars:3,consts:[[4,"ngIf"],[3,"cdkPortalOutlet","attached"]],template:function(t,e){1&t&&(i.Lc(0,c,2,1,"ng-container",0),i.kc(1,"async")),2&t&&i.rc("ngIf",i.lc(1,1,e.previewFiles.getPortal()))},directives:[a.t,o.c],pipes:[a.b],styles:["[_nghost-%COMP%]{display:-webkit-box;display:flex;width:100%;min-height:100%;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;position:relative;overflow:hidden}  .file-preview-wrapper{position:absolute;top:0;left:0;right:0;bottom:0;margin:auto}"],changeDetection:0}),t}()},ozli:function(t,e,n){"use strict";var i=n("zfKp");e.subscribeToObservable=function(t){return function(e){var n=t[i.observable]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(e)}}},"p//D":function(t,e,n){"use strict";e.rxSubscriber="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),e.$$rxSubscriber=e.rxSubscriber},pfRy:function(t,e,n){"use strict";var i,r=n("xgIS"),a=n("Kj3r"),o=n("fXoL"),s=((i=function(){function t(){_classCallCheck(this,t),this.threshold=50}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.zone.runOutsideAngular((function(){t.scrollSub=Object(r.a)(t.getScrollContainer(),"scroll",{capture:!0,passive:!0}).pipe(Object(a.a)(20)).subscribe((function(e){return t.onScroll(e.target)}))}))}},{key:"ngOnDestroy",value:function(){this.scrollSub&&this.scrollSub.unsubscribe()}},{key:"getScrollContainer",value:function(){return this.el?this.el.nativeElement:document}},{key:"onScroll",value:function(t){var e=this;if(t&&(!this.el||t===this.el.nativeElement)&&this.canLoadMore()&&!this.isLoading()){var n=parseInt(this.threshold);(this.el?t.scrollTop+t.offsetHeight:window.scrollY+window.innerHeight)>=(this.el?t.scrollHeight-n:document.documentElement.scrollHeight-n)&&this.zone.run((function(){e.loadMoreItems()}))}}}]),t}()).\u0275fac=function(t){return new(t||i)},i.\u0275dir=o.Mb({type:i,inputs:{threshold:"threshold"}}),i),c=n("wWhK");n.d(e,"a",(function(){return u}));var l,u=((l=function(t){function e(t,n,i){var r;return _classCallCheck(this,e),(r=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this))).el=t,r.conversation=n,r.zone=i,r}return _inherits(e,t),_createClass(e,[{key:"getScrollContainer",value:function(){return document}},{key:"loadMoreItems",value:function(){this.conversation.replies.loadMore()}},{key:"isLoading",value:function(){return this.conversation.replies.isLoading}},{key:"canLoadMore",value:function(){return this.conversation.replies.canLoadMore()}}]),e}(s)).\u0275fac=function(t){return new(t||l)(o.Rb(o.l),o.Rb(c.a),o.Rb(o.A))},l.\u0275dir=o.Mb({type:l,selectors:[["","conversationInfiniteScroll",""]],features:[o.Ab]}),l)},poJ0:function(t,e,n){"use strict";var i=n("VKeD");e.subscribeToIterable=function(t){return function(e){for(var n=t[i.iterator]();;){var r=n.next();if(r.done){e.complete();break}if(e.next(r.value),e.closed)break}return"function"==typeof n.return&&e.add((function(){n.return&&n.return()})),e}}},pshJ:function(t,e,n){"use strict";e.isFunction=function(t){return"function"==typeof t}},q3Kh:function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=n("FWf1");e.map=function(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new o(t,e))}};var o=function(){function t(t,e){this.project=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.project,this.thisArg))},t}();e.MapOperator=o;var s=function(t){function e(e,n,i){var r=t.call(this,e)||this;return r.project=n,r.count=0,r.thisArg=i||r,r}return r(e,t),e.prototype._next=function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)},e}(a.Subscriber)},"qH/R":function(t,e,n){"use strict";n.d(e,"a",(function(){return L}));var i=n("lxqa"),r=n("g6kq"),a=n("XRKU"),o=n("FtGj"),s=n("703J"),c=n("fXoL"),l=n("QGXG"),u=n("twBr"),d=n("wWhK"),h=n("wfim"),b=n("74SX"),f=n("kmQS"),p=n("ofXK"),g=n("83jf"),m=n("rG4v"),v=n("KKQg"),y=n("Qu3c"),k=n("NFeN"),_=n("bTqV"),w=n("PPfr"),x=n("STbY"),C=n("Rd8u"),D=n("zW5C"),S=["textEditor"];function O(t,e){if(1&t){var n=c.Yb();c.Xb(0,"suggested-articles-dropdown",16),c.fc("articleSelected",(function(t){return c.Cc(n),c.jc().insertArticleLink(t)})),c.Wb()}if(2&t){var i=c.jc();c.rc("category",i.conversation.getCategory())}}function I(t,e){if(1&t){var n=c.Yb();c.Xb(0,"div",17),c.Xb(1,"canned-replies-dropdown",18),c.fc("onReplySelect",(function(t){return c.Cc(n),c.jc().applyCannedReply(t)})),c.Wb(),c.Wb()}}function R(t,e){if(1&t){var n=c.Yb();c.Xb(0,"button",24),c.fc("click",(function(t){c.Cc(n);var i=e.$implicit;return c.jc(2).selectedStatus=i})),c.Nc(1),c.Wb()}if(2&t){var i=e.$implicit;c.rc("ngClass",i.name),c.Db(1),c.Oc(i.display_name)}}function X(t,e){if(1&t&&(c.Vb(0),c.Xb(1,"button",19),c.Xb(2,"span"),c.Nc(3),c.kc(4,"trans"),c.Wb(),c.Sb(5,"mat-icon",20),c.Wb(),c.Xb(6,"mat-menu",21,22),c.Lc(8,R,2,2,"button",23),c.Wb(),c.Ub()),2&t){var n=c.zc(7),i=c.jc();c.Db(1),c.rc("matMenuTriggerFor",n),c.Db(2),c.Oc(c.lc(4,4,i.selectedStatus.display_name)),c.Db(3),c.rc("overlapTrigger",!1),c.Db(2),c.rc("ngForOf",i.mailboxTags.getStatusTags(!0))}}function T(t,e){1&t&&(c.Xb(0,"span",25),c.Nc(1,"Send Reply"),c.Wb())}function P(t,e){1&t&&(c.Xb(0,"span",25),c.Nc(1,"Sending..."),c.Wb())}function W(t,e){if(1&t){var n=c.Yb();c.Vb(0),c.Xb(1,"button",26),c.Sb(2,"mat-icon",27),c.Wb(),c.Xb(3,"mat-menu",28,29),c.Xb(5,"button",30),c.fc("click",(function(t){return c.Cc(n),c.jc().conversation.afterReplyAction.set("stay_on_page")})),c.Nc(6,"Send and stay on page"),c.Wb(),c.Xb(7,"button",31),c.fc("click",(function(t){return c.Cc(n),c.jc().conversation.afterReplyAction.set("next_active_ticket")})),c.Nc(8,"Send and next ticket"),c.Wb(),c.Xb(9,"button",32),c.fc("click",(function(t){return c.Cc(n),c.jc().conversation.afterReplyAction.set("back_to_folder")})),c.Nc(10,"Send and back to folder"),c.Wb(),c.Wb(),c.Ub()}if(2&t){var i=c.zc(4),r=c.jc();c.Db(1),c.rc("disabled",r.conversation.replySaving)("matMenuTriggerFor",i),c.Db(2),c.rc("overlapTrigger",!1),c.Db(2),c.Hb("selected","stay_on_page"===r.conversation.afterReplyAction.get()),c.Db(2),c.Hb("selected","next_active_ticket"===r.conversation.afterReplyAction.get()),c.Db(2),c.Hb("selected","back_to_folder"===r.conversation.afterReplyAction.get())}}var L=function(){var t=function(){function t(e,n,i,r,a,o,c){_classCallCheck(this,t),this.modal=e,this.currentUser=n,this.conversation=i,this.browserEvents=r,this.mailboxTags=a,this.hcUrls=o,this.settings=c,this.selectedStatus=new s.a,this.subscriptions=[]}return _createClass(t,[{key:"ngOnInit",value:function(){this.setSelectedStatus(),this.initKeybinds(),this.conversation.setEditor(this.textEditor)}},{key:"submitReply",value:function(){var t=this,e={body:this.textEditor.getContents(),status:this.selectedStatus};this.conversation.submitReply(e).subscribe((function(){t.closeEditor()}),(function(){}))}},{key:"saveDraft",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.conversation.draft.save(t)}},{key:"closeEditor",value:function(){this.conversation.closeEditor(),this.conversation.draft.reset(),this.textEditor.reset()}},{key:"saveDraftAndAddToReplies",value:function(){var t=this;this.conversation.draft.isEmpty()?this.closeEditor():this.saveDraft().subscribe((function(e){t.conversation.replies.add(e.data),t.closeEditor()}))}},{key:"maybeDeleteDraft",value:function(){var t=this,e=this.conversation.draft.get();e.id?this.modal.show(i.a,{reply:e}).afterClosed().subscribe((function(e){e&&(t.conversation.draft.delete(),t.closeEditor())})):this.closeEditor()}},{key:"applyCannedReply",value:function(t){var e=this;this.textEditor.insertContents(t.body),setTimeout((function(){e.saveDraft({uploads:t.uploads.map((function(t){return t.id}))})}))}},{key:"setSelectedStatus",value:function(){var t;t=this.currentUser.hasPermission("tickets.update")?this.mailboxTags.getTagByIdOrName("closed"):this.mailboxTags.getTagByIdOrName("open"),this.selectedStatus=t}},{key:"initKeybinds",value:function(){var t=this,e=this.browserEvents.globalKeyDown$.subscribe((function(e){t.modal.anyDialogOpen()||r.a.userIsTyping()||(e.keyCode===o.r&&t.conversation.openEditor(),e.keyCode===o.u&&e.ctrlKey&&t.articleDropdown.focus())}));this.subscriptions.push(e),this.textEditor.editor.waitForEditor().then((function(e){e.shortcuts.add("ctrl+191","Search docs",(function(){t.articleDropdown.focus()}))}))}},{key:"ngOnDestroy",value:function(){this.saveDraft(),this.closeEditor(),this.subscriptions.forEach((function(t){t&&t.unsubscribe()}))}},{key:"insertArticleLink",value:function(t){var e=this.hcUrls.article(t).join("/");this.textEditor.insertLink({target:"blank",href:this.settings.getBaseUrl()+e,text:t.title})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(c.Rb(l.a),c.Rb(u.a),c.Rb(d.a),c.Rb(r.a),c.Rb(h.a),c.Rb(b.a),c.Rb(f.a))},t.\u0275cmp=c.Lb({type:t,selectors:[["conversation-text-editor"]],viewQuery:function(t,e){var n;1&t&&(c.Jc(S,!0),c.Sc(a.a,!0)),2&t&&(c.yc(n=c.gc())&&(e.textEditor=n.first),c.yc(n=c.gc())&&(e.articleDropdown=n.first))},decls:21,vars:18,consts:[[1,"text-editor-container"],["placeholder","Search docs... (ctrl + /)",3,"category","articleSelected",4,"ngIf"],[3,"attachments","detached"],["inlineUploadPrefix","ticket_images",3,"onChange","onFileUpload","onCtrlEnter"],["textEditor",""],["class","header-actions","customButtons","",4,"ngIf"],["header","",1,"header-actions","last","right"],["type","button",1,"no-style","editor-button","save-draft-button",3,"matTooltip","click"],["svgIcon","check-circle"],["type","button",1,"no-style","editor-button","delete-draft-button",3,"matTooltip","click"],["svgIcon","delete"],["footer","",1,"editor-footer"],[1,"right"],[4,"ngIf"],["type","button","mat-flat-button","","color","accent",1,"submit-button",3,"disabled","click"],["trans","",4,"ngIf"],["placeholder","Search docs... (ctrl + /)",3,"category","articleSelected"],["customButtons","",1,"header-actions"],[3,"onReplySelect"],["type","button","mat-button","",1,"change-status-button",3,"matMenuTriggerFor"],["svgIcon","keyboard-arrow-down",1,"dropdown-icon"],[1,"status-menu",3,"overlapTrigger"],["statusMenu","matMenu"],["mat-menu-item","","trans","",3,"ngClass","click",4,"ngFor","ngForOf"],["mat-menu-item","","trans","",3,"ngClass","click"],["trans",""],["mat-flat-button","","color","accent",1,"dropdown-left","submit-button-addon",3,"disabled","matMenuTriggerFor"],["svgIcon","arrow-drop-down",1,"caret","align-middle"],[1,"default-redirect-menu",3,"overlapTrigger"],["defaultRedirectMenu","matMenu"],["mat-menu-item","","trans","",1,"stay-on-page",3,"click"],["mat-menu-item","","trans","",1,"next-active-ticket",3,"click"],["mat-menu-item","","trans","",1,"back_to_folder",3,"click"]],template:function(t,e){1&t&&(c.Xb(0,"section",0),c.Lc(1,O,1,1,"suggested-articles-dropdown",1),c.Xb(2,"reply-attachment-list",2),c.fc("detached",(function(t){return e.conversation.draft.detachUpload(t)})),c.Wb(),c.Sb(3,"upload-progress-bar"),c.Xb(4,"text-editor",3,4),c.fc("onChange",(function(t){return e.conversation.draft.setBody(t)}))("onFileUpload",(function(t){return e.conversation.draft.uploadFiles(t)}))("onCtrlEnter",(function(t){return e.submitReply()})),c.Lc(6,I,2,0,"div",5),c.Xb(7,"div",6),c.Xb(8,"button",7),c.fc("click",(function(t){return e.saveDraftAndAddToReplies()})),c.kc(9,"trans"),c.Sb(10,"mat-icon",8),c.Wb(),c.Xb(11,"button",9),c.fc("click",(function(t){return e.maybeDeleteDraft()})),c.kc(12,"trans"),c.Sb(13,"mat-icon",10),c.Wb(),c.Wb(),c.Xb(14,"div",11),c.Xb(15,"div",12),c.Lc(16,X,9,6,"ng-container",13),c.Xb(17,"button",14),c.fc("click",(function(t){return e.submitReply()})),c.Lc(18,T,2,0,"span",15),c.Lc(19,P,2,0,"span",15),c.Wb(),c.Lc(20,W,11,9,"ng-container",13),c.Wb(),c.Wb(),c.Wb(),c.Wb()),2&t&&(c.Hb("hidden",!e.conversation.isEditorOpen()),c.Db(1),c.rc("ngIf",e.currentUser.hasPermission("tickets.update")),c.Db(1),c.rc("attachments",e.conversation.draft.get().uploads),c.Db(4),c.rc("ngIf",e.currentUser.hasPermission("canned_replies.view")),c.Db(2),c.Hb("success",e.conversation.draft.get().id),c.rc("matTooltip",c.lc(9,14,"Save Draft")),c.Db(3),c.rc("matTooltip",c.lc(12,16,"Discard (Esc)")),c.Db(5),c.rc("ngIf",e.currentUser.hasPermission("tickets.update")),c.Db(1),c.rc("disabled",e.conversation.replySaving),c.Db(1),c.rc("ngIf",!e.conversation.replySaving),c.Db(1),c.rc("ngIf",e.conversation.replySaving),c.Db(1),c.rc("ngIf",e.currentUser.hasPermission("settings.update")))},directives:[p.t,g.a,m.a,v.a,y.a,k.a,_.b,a.a,w.a,x.d,x.e,p.s,x.b,C.a,p.q],pipes:[D.a],styles:["conversation-text-editor{display:block;width:100%}conversation-text-editor suggested-articles-dropdown .input-container{position:relative;margin-bottom:10px}conversation-text-editor suggested-articles-dropdown .input-container .search-icon{position:absolute;right:0;top:3px;color:var(--be-secondary-text)}conversation-text-editor .text-editor-container{margin:0 25px 25px}conversation-text-editor .attachments-list{border-bottom:1px dotted var(--be-divider-default);padding-bottom:10px}conversation-text-editor .attachments-list .attachments-list-item{background-color:var(--be-background-alternative)}conversation-text-editor .editor-footer .right{height:100%;display:-webkit-box;display:flex;position:absolute;right:0;top:0}conversation-text-editor .editor-footer .right .change-status-button{height:100%;color:var(--be-secondary-text);font-weight:500;text-transform:capitalize}conversation-text-editor .editor-footer .right .change-status-button .mat-icon{width:20px;height:20px;vertical-align:text-bottom}conversation-text-editor .editor-footer .right .submit-button,conversation-text-editor .editor-footer .right .submit-button-addon{height:38px;border-radius:0;font-weight:400;position:relative;top:-1px}conversation-text-editor .editor-footer .right .submit-button-addon{border-left:1px solid var(--be-accent-emphasis);padding:0 7px;min-width:45px}.default-redirect-menu .selected{background-color:var(--be-accent-emphasis)}.status-menu .mat-menu-item{text-transform:capitalize}"],encapsulation:2}),t}()},qaug:function(t,e,n){"use strict";n.d(e,"a",(function(){return x}));var i=n("wWhK"),r=n("0IaG"),a=n("h586"),o=n("nYR2"),s=n("fXoL"),c=n("LsVx"),l=n("oVOl"),u=n("Rd8u"),d=n("bTqV"),h=n("NFeN"),b=n("3Pt+"),f=n("KKQg"),p=n("rG4v"),g=n("ofXK"),m=n("83jf"),v=["textEditor"];function y(t,e){if(1&t&&(s.Xb(0,"div",13),s.Nc(1),s.Wb()),2&t){var n=s.jc();s.Db(1),s.Oc(n.errors.body)}}function k(t,e){if(1&t&&(s.Xb(0,"div",13),s.Nc(1),s.Wb()),2&t){var n=s.jc();s.Db(1),s.Oc(n.errors.file)}}function _(t,e){if(1&t&&(s.Xb(0,"div",13),s.Nc(1),s.Wb()),2&t){var n=s.jc();s.Db(1),s.Oc(n.errors.attachments)}}function w(t,e){if(1&t){var n=s.Yb();s.Xb(0,"reply-attachment-list",14),s.fc("detached",(function(t){return s.Cc(n),s.jc().removeAttachment(t)})),s.Wb()}if(2&t){var i=s.jc();s.rc("attachments",i.attachments)}}var x=function(){var t=function(){function t(e,n,i,r,a){_classCallCheck(this,t),this.dialogRef=e,this.data=n,this.ticketService=i,this.uploads=r,this.uploadQueue=a,this.errors={},this.attachments=[],this.loading=!1}return _createClass(t,[{key:"ngOnInit",value:function(){this.textEditor.focus()}},{key:"close",value:function(t){this.textEditor.destroyEditor(),this.dialogRef.close(t)}},{key:"confirm",value:function(){var t=this;this.loading=!0;var e={body:this.textEditor.getContents(),uploads:this.attachments.map((function(t){return t.id}))};this.ticketService.addNote(this.data.ticketId,e).pipe(Object(o.a)((function(){return t.loading=!1}))).subscribe((function(e){t.close(e.data)}),(function(e){return t.errors=e.messages}))}},{key:"uploadFiles",value:function(t){var e=this;this.uploadQueue.start(t).subscribe((function(t){e.attachments=[].concat(_toConsumableArray(e.attachments),[t.fileEntry])}))}},{key:"removeAttachment",value:function(t){for(var e=0;e<this.attachments.length;e++)this.attachments[e].id===t.id&&this.attachments.splice(e,1)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(s.Rb(r.h),s.Rb(r.a),s.Rb(c.a),s.Rb(l.a),s.Rb(a.a))},t.\u0275cmp=s.Lb({type:t,selectors:[["add-note-modal"]],viewQuery:function(t,e){var n;1&t&&s.Jc(v,!0),2&t&&s.yc(n=s.gc())&&(e.textEditor=n.first)},features:[s.Cb([i.a,a.a])],decls:20,vars:6,consts:[[1,"modal-header"],["mat-dialog-title","","trans",""],["type","button","mat-icon-button","","tabindex","-1",1,"close-button",3,"click"],["svgIcon","close"],["ngNativeValidate","",3,"ngSubmit"],[1,"many-inputs"],[1,"input-container"],["inlineUploadPrefix","ticket_images",1,"text-editor",3,"minHeight","onFileUpload"],["textEditor",""],["class","error",4,"ngIf"],[3,"attachments","detached",4,"ngIf"],["type","button","mat-button","","trans","",1,"cancel-button",3,"click"],["type","submit","mat-raised-button","","color","accent","trans","",1,"submit-button",3,"disabled"],[1,"error"],[3,"attachments","detached"]],template:function(t,e){1&t&&(s.Xb(0,"div",0),s.Xb(1,"h2",1),s.Nc(2,"Add Note"),s.Wb(),s.Xb(3,"button",2),s.fc("click",(function(t){return e.close()})),s.Sb(4,"mat-icon",3),s.Wb(),s.Wb(),s.Xb(5,"form",4),s.fc("ngSubmit",(function(t){return e.confirm()})),s.Xb(6,"mat-dialog-content",5),s.Xb(7,"div",6),s.Xb(8,"text-editor",7,8),s.fc("onFileUpload",(function(t){return e.uploadFiles(t)})),s.Wb(),s.Sb(10,"upload-progress-bar"),s.Lc(11,y,2,1,"div",9),s.Lc(12,k,2,1,"div",9),s.Lc(13,_,2,1,"div",9),s.Lc(14,w,1,1,"reply-attachment-list",10),s.Wb(),s.Wb(),s.Xb(15,"mat-dialog-actions"),s.Xb(16,"button",11),s.fc("click",(function(t){return e.close()})),s.Nc(17,"Cancel"),s.Wb(),s.Xb(18,"button",12),s.Nc(19,"Add Note"),s.Wb(),s.Wb(),s.Wb()),2&t&&(s.Db(8),s.rc("minHeight",300),s.Db(3),s.rc("ngIf",e.errors.body),s.Db(1),s.rc("ngIf",e.errors.file),s.Db(1),s.rc("ngIf",e.errors.attachments),s.Db(1),s.rc("ngIf",e.attachments.length),s.Db(4),s.rc("disabled",e.loading))},directives:[r.i,u.a,d.b,h.a,b.u,b.v,r.f,f.a,p.a,g.t,r.c,m.a],styles:[".add-note-modal-container{width:600px}.add-note-modal-container reply-attachment-list{margin-top:15px}"],encapsulation:2}),t}()},rG4v:function(t,e,n){"use strict";var i=n("eNwd"),r=n("7o/Q"),a=n("D0XW");n("l7GE"),n("ZUHj");var o={leading:!0,trailing:!1},s=function(){function t(e,n,i,r){_classCallCheck(this,t),this.duration=e,this.scheduler=n,this.leading=i,this.trailing=r}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new c(t,this.duration,this.scheduler,this.leading,this.trailing))}}]),t}(),c=function(t){function e(t,n,i,r,a){var o;return _classCallCheck(this,e),(o=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,t))).duration=n,o.scheduler=i,o.leading=r,o.trailing=a,o._hasTrailingValue=!1,o._trailingValue=null,o}return _inherits(e,t),_createClass(e,[{key:"_next",value:function(t){this.throttled?this.trailing&&(this._trailingValue=t,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(l,this.duration,{subscriber:this})),this.leading?this.destination.next(t):this.trailing&&(this._trailingValue=t,this._hasTrailingValue=!0))}},{key:"_complete",value:function(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()}},{key:"clearThrottle",value:function(){var t=this.throttled;t&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),t.unsubscribe(),this.remove(t),this.throttled=null)}}]),e}(r.a);function l(t){t.subscriber.clearThrottle()}var u=n("fXoL"),d=n("h586"),h=n("bv9b");n.d(e,"a",(function(){return f}));var b,f=((b=function(){function t(e,n,r){var c=this;_classCallCheck(this,t),this.el=e,this.uploadQueue=n,this.cd=r,this.hidden=!0,this.subscription=this.uploadQueue.totalProgress().pipe(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.a,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o;return function(i){return i.lift(new s(t,e,n.leading,n.trailing))}}(260,i.a,{leading:!0,trailing:!0})).subscribe((function(t){c.progress=t,c.hidden=100===t||0===c.uploadQueue.count$.value.pending,c.cd.markForCheck()}))}return _createClass(t,[{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}}]),t}()).\u0275fac=function(t){return new(t||b)(u.Rb(u.l),u.Rb(d.a),u.Rb(u.h))},b.\u0275cmp=u.Lb({type:b,selectors:[["upload-progress-bar"]],hostVars:2,hostBindings:function(t,e){2&t&&u.Hb("hidden",e.hidden)},decls:1,vars:1,consts:[["mode","determinate","color","accent",3,"value"]],template:function(t,e){1&t&&u.Sb(0,"mat-progress-bar",0),2&t&&u.rc("value",e.progress)},directives:[h.a],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0}),b)},"tSQ/":function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return r}));var i="tickets.update",r=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(var n in _classCallCheck(this,t),e)this[n]=e[n]}},tTc1:function(t,e,n){"use strict";function i(t,e){var n=document.createElement("a");n.href=t,e&&(n.download=e),document.body.appendChild(n),n.click(),document.body.removeChild(n)}n.d(e,"a",(function(){return i}))},vUXK:function(t,e,n){"use strict";var i=n("fXoL"),r=n("2Vo4"),a=n("XZLl"),o=n("ofXK"),s=n("ZiO8");function c(t,e){1&t&&i.Sb(0,"default-preview",2)}function l(t,e){if(1&t&&(i.Xb(0,"div",3),i.Xb(1,"pre"),i.Nc(2),i.kc(3,"async"),i.Wb(),i.Wb()),2&t){var n=i.jc();i.Db(2),i.Oc(i.lc(3,1,n.content$))}}var u,d=((u=function(t){function e(){var t;return _classCallCheck(this,e),(t=_possibleConstructorReturn(this,_getPrototypeOf(e).apply(this,arguments))).content$=new r.a(""),t.fileTooLarge$=new r.a(!1),t}return _inherits(e,t),_createClass(e,[{key:"ngOnInit",value:function(){this.file.file_size>5242880?this.fileTooLarge$.next(!0):this.loadFileContents()}},{key:"loadFileContents",value:function(){var t=this;this.getContents().subscribe((function(e){t.content$.next(e)}))}}]),e}(a.a)).\u0275fac=function(t){return h(t||u)},u.\u0275cmp=i.Lb({type:u,selectors:[["text-preview"]],features:[i.Ab],decls:4,vars:4,consts:[["message","This file is too large to preview.",4,"ngIf","ngIfElse"],["textPreview",""],["message","This file is too large to preview."],[1,"text-wrapper","preview-object"]],template:function(t,e){if(1&t&&(i.Lc(0,c,1,0,"default-preview",0),i.kc(1,"async"),i.Lc(2,l,4,3,"ng-template",null,1,i.Mc)),2&t){var n=i.zc(3);i.rc("ngIf",i.lc(1,2,e.fileTooLarge$))("ngIfElse",n)}},directives:[o.t,s.a],pipes:[o.b],styles:["[_nghost-%COMP%]{display:block;width:80%;min-height:80%}@media only screen and (max-width:768px){[_nghost-%COMP%]{width:90%}}.text-wrapper[_ngcontent-%COMP%]{width:100%;height:100%;background-color:var(--be-background);box-shadow:0 3px 3px -2px rgba(0,0,0,.2),0 3px 4px 0 rgba(0,0,0,.14),0 1px 8px 0 rgba(0,0,0,.12);border-radius:4px;color:var(--be-text);padding:20px;overflow:auto}.text-wrapper[_ngcontent-%COMP%], pre[_ngcontent-%COMP%]{word-wrap:break-word}pre[_ngcontent-%COMP%]{display:block;white-space:pre-wrap;margin:0;font-size:1.4rem;font-family:inherit}default-preview[_ngcontent-%COMP%]{margin:auto;position:absolute;top:0;left:0;right:0;bottom:0}"],changeDetection:0}),u),h=i.Zb(d),b=["playerEl"];function f(t,e){1&t&&i.Sb(0,"default-preview")}var p,g=((p=function(t){function e(){var t;return _classCallCheck(this,e),(t=_possibleConstructorReturn(this,_getPrototypeOf(e).apply(this,arguments))).invalidMedia=!1,t}return _inherits(e,t),_createClass(e,[{key:"ngOnInit",value:function(){this.invalidMedia=!this.canPlayVideo(),this.invalidMedia||(this.player().src=this.getSrc(),this.player().play())}},{key:"canPlayVideo",value:function(){return!!this.player().canPlayType(this.file.mime)}},{key:"player",value:function(){return this.playerEl.nativeElement}}]),e}(a.a)).\u0275fac=function(t){return m(t||p)},p.\u0275cmp=i.Lb({type:p,selectors:[["audio-preview"]],viewQuery:function(t,e){var n;1&t&&i.Jc(b,!0),2&t&&i.yc(n=i.gc())&&(e.playerEl=n.first)},features:[i.Ab],decls:3,vars:3,consts:[["controls","controls","controlsList","nodownload noremoteplayback",1,"preview-object"],["playerEl",""],[4,"ngIf"]],template:function(t,e){1&t&&(i.Sb(0,"audio",0,1),i.Lc(2,f,1,0,"default-preview",2)),2&t&&(i.Hb("hidden",e.invalidMedia),i.Db(2),i.rc("ngIf",e.invalidMedia))},directives:[o.t,s.a],styles:["[_nghost-%COMP%]{display:block;max-width:80%;height:auto}@media only screen and (max-width:768px){[_nghost-%COMP%]{width:90%}}audio[_ngcontent-%COMP%]{display:block;max-width:100%;box-shadow:0 3px 3px -2px rgba(0,0,0,.2),0 3px 4px 0 rgba(0,0,0,.14),0 1px 8px 0 rgba(0,0,0,.12)}audio[_ngcontent-%COMP%], default-preview[_ngcontent-%COMP%]{margin:auto;position:absolute;top:0;left:0;right:0;bottom:0}"],changeDetection:0}),p),m=i.Zb(g);function v(t,e){1&t&&i.Sb(0,"default-preview")}var y,k,_,w=((y=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,_getPrototypeOf(e).apply(this,arguments))}return _inherits(e,t),e}(g)).\u0275fac=function(t){return x(t||y)},y.\u0275cmp=i.Lb({type:y,selectors:[["video-preview"]],features:[i.Ab],decls:3,vars:3,consts:[["controls","controls","controlsList","nodownload noremoteplayback",1,"preview-object"],["playerEl",""],[4,"ngIf"]],template:function(t,e){1&t&&(i.Sb(0,"video",0,1),i.Lc(2,v,1,0,"default-preview",2)),2&t&&(i.Hb("hidden",e.invalidMedia),i.Db(2),i.rc("ngIf",e.invalidMedia))},directives:[o.t,s.a],styles:["[_nghost-%COMP%]{display:block;max-width:80%;max-height:80%;height:auto}@media only screen and (max-width:768px){[_nghost-%COMP%]{width:90%}}video[_ngcontent-%COMP%]{display:block;max-width:100%;max-height:100%;height:auto;box-shadow:0 3px 3px -2px rgba(0,0,0,.2),0 3px 4px 0 rgba(0,0,0,.14),0 1px 8px 0 rgba(0,0,0,.12)}default-preview[_ngcontent-%COMP%], video[_ngcontent-%COMP%]{margin:auto;position:absolute;top:0;left:0;right:0;bottom:0}"],changeDetection:0}),y),x=i.Zb(w),C=((k=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,_getPrototypeOf(e).apply(this,arguments))}return _inherits(e,t),e}(a.a)).\u0275fac=function(t){return D(t||k)},k.\u0275cmp=i.Lb({type:k,selectors:[["image-preview"]],features:[i.Ab],decls:1,vars:1,consts:[[1,"preview-object",3,"src"]],template:function(t,e){1&t&&i.Sb(0,"img",0),2&t&&i.rc("src",e.getSafeSrc(),i.Fc)},styles:["[_nghost-%COMP%]{display:block;max-width:80%;max-height:80%;height:auto}@media only screen and (max-width:768px){[_nghost-%COMP%]{width:90%}}img[_ngcontent-%COMP%]{max-width:100%;max-height:100%;height:auto;margin:auto;box-shadow:0 3px 3px -2px rgba(0,0,0,.2),0 3px 4px 0 rgba(0,0,0,.14),0 1px 8px 0 rgba(0,0,0,.12);position:absolute;top:0;left:0;right:0;bottom:0;background-color:var(--be-background)}"],changeDetection:0}),k),D=i.Zb(C),S=((_=function(t){function e(){var t;return _classCallCheck(this,e),(t=_possibleConstructorReturn(this,_getPrototypeOf(e).apply(this,arguments))).className="preview-object",t}return _inherits(e,t),_createClass(e,[{key:"getSrc",value:function(){return _get(_getPrototypeOf(e.prototype),"getSrc",this).call(this)+"#toolbar=0"}}]),e}(a.a)).\u0275fac=function(t){return O(t||_)},_.\u0275cmp=i.Lb({type:_,selectors:[["pdf-preview"]],hostVars:2,hostBindings:function(t,e){2&t&&i.Fb(e.className)},features:[i.Ab],decls:1,vars:1,consts:[[3,"src"]],template:function(t,e){1&t&&i.Sb(0,"iframe",0),2&t&&i.rc("src",e.getSafeSrc(),i.Ec)},styles:["[_nghost-%COMP%]{display:block;margin:auto;position:absolute;top:0;left:0;right:0;bottom:0}[_nghost-%COMP%], iframe[_ngcontent-%COMP%], object[_ngcontent-%COMP%]{width:100%;height:100%}iframe[_ngcontent-%COMP%], object[_ngcontent-%COMP%]{border:none}"],changeDetection:0}),_),O=i.Zb(S),I=n("XFMS"),R=n("FBzJ"),X=["iframe"];function T(t,e){if(1&t){var n=i.Yb();i.Vb(0),i.Sb(1,"iframe",3,4),i.Xb(3,"div",5),i.fc("click",(function(t){return i.Cc(n),i.jc().openInNewWindow()})),i.Wb(),i.Ub()}}function P(t,e){1&t&&i.Sb(0,"default-preview")}var W,L=((W=function(t){function e(){var t;return _classCallCheck(this,e),(t=_possibleConstructorReturn(this,_getPrototypeOf(e).apply(this,arguments))).loading$=new r.a(!0),t.showDefaultPreview$=new r.a(!1),t}return _inherits(e,t),_createClass(e,[{key:"ngAfterViewInit",value:function(){var t=this;if(this.file.file_size>25e6)return this.showDefaultPreview();this.iframe.nativeElement.onload=function(){clearTimeout(t.timeoutRef),t.stopLoading()},this.getIframeSrc().then((function(e){t.iframe.nativeElement.src=e})).catch((function(){t.showDefaultPreview()})),this.timeoutRef=setTimeout((function(){t.showDefaultPreview()}),5e3)}},{key:"stopLoading",value:function(){this.loading$.next(!1)}},{key:"showDefaultPreview",value:function(){this.stopLoading(),this.showDefaultPreview$.next(!0)}},{key:"openInNewWindow",value:function(){window.open(window.location.href,"_blank")}},{key:"getIframeSrc",value:function(){var t=this;return new Promise((function(e,n){var i=t.getSrc();-1===i.indexOf("shareable_link")?t.http.post("uploads/".concat(t.file.id,"/add-preview-token")).subscribe((function(n){i+="?preview_token=".concat(n.preview_token),e(t.getGoogleDocsUrl(i))}),(function(){return n})):e(t.getGoogleDocsUrl(i))}))}},{key:"getGoogleDocsUrl",value:function(t){return t=Object(I.a)(t)?t:this.settings.getBaseUrl()+t,"https://docs.google.com/gview?embedded=true&url="+encodeURIComponent(t)}}]),e}(a.a)).\u0275fac=function(t){return E(t||W)},W.\u0275cmp=i.Lb({type:W,selectors:[["google-docs-viewer"]],viewQuery:function(t,e){var n;1&t&&i.Sc(X,!0),2&t&&i.yc(n=i.gc())&&(e.iframe=n.first)},features:[i.Ab],decls:6,vars:7,consts:[[4,"ngIf","ngIfElse"],["defaultPreview",""],[1,"overlay",3,"isVisible"],[1,"preview-object"],["iframe",""],[1,"pop-out-block",3,"click"]],template:function(t,e){if(1&t&&(i.Lc(0,T,4,0,"ng-container",0),i.kc(1,"async"),i.Lc(2,P,1,0,"ng-template",null,1,i.Mc),i.Sb(4,"loading-indicator",2),i.kc(5,"async")),2&t){var n=i.zc(3);i.rc("ngIf",!i.lc(1,3,e.showDefaultPreview$))("ngIfElse",n),i.Db(4),i.rc("isVisible",i.lc(5,5,e.loading$))}},directives:[o.t,R.a,s.a],pipes:[o.b],styles:["[_nghost-%COMP%]{display:block;margin:auto;position:absolute;top:0;left:0;right:0;bottom:0}[_nghost-%COMP%], iframe[_ngcontent-%COMP%]{width:100%;height:100%}iframe[_ngcontent-%COMP%]{border:none}loading-indicator.overlay[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;background-color:transparent}default-preview[_ngcontent-%COMP%]{margin:auto;position:absolute;top:0;left:0;right:0;bottom:0}.pop-out-block[_ngcontent-%COMP%]{width:40px;height:40px;position:absolute;top:12px;right:12px;cursor:pointer}"],changeDetection:0}),W),E=i.Zb(L);n.d(e,"a",(function(){return M})),n.d(e,"b",(function(){return N}));var j,M=new i.r("AVAILABLE_PREVIEWS"),N=((j=function t(){_classCallCheck(this,t),this.text=d,this.video=w,this.audio=g,this.image=C,this.pdf=S,this.spreadsheet=L,this.powerPoint=L,this.word=L}).\u0275fac=function(t){return new(t||j)},j.\u0275prov=i.Nb({token:j,factory:j.\u0275fac}),j)},w5QO:function(t,e,n){"use strict";e.noop=function(){}},wWhK:function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));var i=n("fXoL"),r=n("tSQ/"),a=n("703J"),o=n("vkgz"),s=n("1V5l"),c=n("i2dy"),l=n("LsVx"),u=n("KHpT"),d=n("ehXJ"),h=function(){var t=function(){function t(e,n,o,s,c){_classCallCheck(this,t),this.draft=e,this.toast=n,this.tickets=o,this.replies=s,this.afterReplyAction=c,this.isLoading=!1,this.model=new r.b({tags:[]}),this.status=new a.a,this.replySaving=!1,this.editorIsOpen=!1,this.afterInit=new i.o}return _createClass(t,[{key:"get",value:function(){return this.model}},{key:"getStatus",value:function(){return this.status||new a.a}},{key:"getCategory",value:function(){var t=this.model.tags.find((function(t){return"status"!==t.type}));return t&&t.categories?t.categories[0]:null}},{key:"setStatus",value:function(t){t&&(this.status=t)}},{key:"openEditor",value:function(){this.editorIsOpen=!0,this.editor&&this.editor.focus()}},{key:"closeEditor",value:function(){this.editorIsOpen=!1}},{key:"isEditorOpen",value:function(){return this.editorIsOpen}},{key:"setEditor",value:function(t){this.editor=t}},{key:"setDraft",value:function(t){this.draft.set(t),this.editor.setContents(t.body)}},{key:"addTag",value:function(t){this.model.tags.find((function(e){return t.name===e.name}))||this.model.tags.unshift(t)}},{key:"submitReply",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.replySaving=!0,this.tickets.saveReply(this.model.id,this.draft.getPayload(e)).pipe(Object(o.a)((function(n){t.replySaving=!1,t.draft.delete(),t.performAfterReplyAction(),t.setStatus(e.status),t.replies.add(n.data)}),(function(){t.toast.open("There was an issue submitting this reply."),t.replySaving=!1,t.isLoading=!1})))}},{key:"performAfterReplyAction",value:function(){this.afterReplyAction.get()&&"stay_on_page"!==this.afterReplyAction.get()&&(this.isLoading=!0),this.afterReplyAction.perform()}},{key:"init",value:function(t){t&&(this.model=t,this.status=t.tags.find((function(t){return"status"===t.type})),this.replies.init(this.model.replies,this.model.id),this.draft.setTicketId(this.model.id),this.afterReplyAction.setTicketId(this.model.id),this.isLoading=!1,this.afterInit.emit())}}]),t}();return t.\u0275fac=function(e){return new(e||t)(i.bc(s.a),i.bc(c.a),i.bc(l.a),i.bc(u.a),i.bc(d.a))},t.\u0275prov=i.Nb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},xv5E:function(t,e,n){"use strict";n.d(e,"a",(function(){return k}));var i=n("fXoL"),r=n("3Pt+"),a=n("2Vo4"),o=n("IgbF"),s=n("ofXK"),c=n("A5z7"),l=n("/1cH"),u=n("bTqV"),d=n("Rd8u"),h=n("NFeN"),b=n("FKr1");function f(t,e){if(1&t){var n=i.Yb();i.Xb(0,"form",9),i.fc("ngSubmit",(function(t){return i.Cc(n),i.jc().addTags()})),i.Sb(1,"input",10),i.Xb(2,"button",11),i.Nc(3,"Add"),i.Wb(),i.Wb()}if(2&t){var r=i.jc(),a=i.zc(8);i.Db(1),i.rc("matAutocomplete",a)("formControl",r.formControl)}}function p(t,e){1&t&&(i.Xb(0,"p",12),i.Nc(1,"Separate tags with comma."),i.Wb())}function g(t,e){if(1&t){var n=i.Yb();i.Xb(0,"mat-chip",13),i.fc("removed",(function(t){i.Cc(n);var r=e.$implicit;return i.jc().removeTag(r)})),i.Xb(1,"span"),i.Nc(2),i.Wb(),i.Sb(3,"mat-icon",14),i.Wb()}if(2&t){var r=e.$implicit,a=i.jc();i.rc("removable",!a.readonly),i.Db(2),i.Oc(r)}}function m(t,e){if(1&t){var n=i.Yb();i.Xb(0,"div",19),i.fc("click",(function(t){i.Cc(n);var r=e.$implicit;return i.jc(2).addTag(r.name)})),i.Nc(1),i.Wb()}if(2&t){var r=e.$implicit;i.Db(1),i.Oc(r.display_name)}}function v(t,e){if(1&t&&(i.Xb(0,"div",15),i.Xb(1,"p",16),i.Nc(2,"Choose from existing tags:"),i.Wb(),i.Xb(3,"div",17),i.Lc(4,m,2,1,"div",18),i.kc(5,"async"),i.Wb(),i.Wb()),2&t){var n=i.jc();i.Db(4),i.rc("ngForOf",i.lc(5,1,n.allTags$))}}function y(t,e){if(1&t&&(i.Xb(0,"mat-option",20),i.Nc(1),i.Wb()),2&t){var n=e.$implicit;i.rc("value",n.name),i.Db(1),i.Oc(n.display_name)}}var k=function(){var t=function(){function t(e){_classCallCheck(this,t),this.tagService=e,this.onChange=new i.o,this.selectedTags=[],this.readonly=!1,this.formControl=new r.h,this.allTags$=new a.a([]),this.suggestedTags$=new a.a([])}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.tagService.getTags({perPage:15}).subscribe((function(e){t.allTags$.next(e.pagination.data.filter((function(t){return"status"!==t.type})))})),this.formControl.valueChanges.subscribe((function(e){var n=e?t.allTags$.value.filter((function(t){return t.name.toLowerCase().includes(e.toLowerCase())})):[];t.suggestedTags$.next(n)}))}},{key:"getSelectedTags",value:function(){return this.selectedTags.slice()}},{key:"setSelectedTags",value:function(t){return this.selectedTags=t}},{key:"addTags",value:function(t){var e=this;(t=t||this.formControl.value)&&(t.split(",").forEach((function(t){var n=t.trim();-1===e.selectedTags.indexOf(n)&&e.selectedTags.push(n)})),this.formControl.reset(),this.onChange.emit(this.selectedTags))}},{key:"addTag",value:function(t){-1===this.selectedTags.indexOf(t)&&(this.selectedTags.push(t),this.onChange.emit(this.selectedTags))}},{key:"removeTag",value:function(t){var e=this.selectedTags.indexOf(t);this.selectedTags.splice(e,1),this.onChange.emit(this.selectedTags)}},{key:"deselectAll",value:function(){this.selectedTags=[],this.onChange.emit(this.selectedTags)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(i.Rb(o.a))},t.\u0275cmp=i.Lb({type:t,selectors:[["tags-manager"]],inputs:{selectedTags:"selectedTags",readonly:"readonly"},outputs:{onChange:"onChange"},decls:11,vars:10,consts:[["class","input-container input-group","ngNativeValidate","",3,"ngSubmit",4,"ngIf"],["class","main-info","trans","",4,"ngIf"],[1,"selected-tags"],[3,"selectable"],[3,"removable","removed",4,"ngFor","ngForOf"],["class","existing-tags",4,"ngIf"],[3,"optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["ngNativeValidate","",1,"input-container","input-group",3,"ngSubmit"],["type","text","name","tag-input","required","",1,"tags-string-model",3,"matAutocomplete","formControl"],["type","submit","mat-flat-button","","color","accent","trans","",1,"add-tags-button"],["trans","",1,"main-info"],[3,"removable","removed"],["svgIcon","cancel","matChipRemove",""],[1,"existing-tags"],["trans",""],[1,"tags-list"],["class","tag-name",3,"click",4,"ngFor","ngForOf"],[1,"tag-name",3,"click"],[3,"value"]],template:function(t,e){1&t&&(i.Lc(0,f,4,2,"form",0),i.Lc(1,p,2,0,"p",1),i.Xb(2,"div",2),i.Xb(3,"mat-chip-list",3),i.Lc(4,g,4,2,"mat-chip",4),i.Wb(),i.Wb(),i.Lc(5,v,6,3,"div",5),i.kc(6,"async"),i.Xb(7,"mat-autocomplete",6,7),i.fc("optionSelected",(function(t){return e.addTags(t.option.value)})),i.Lc(9,y,2,2,"mat-option",8),i.kc(10,"async"),i.Wb()),2&t&&(i.rc("ngIf",!e.readonly),i.Db(1),i.rc("ngIf",!e.readonly),i.Db(2),i.rc("selectable",!1),i.Db(1),i.rc("ngForOf",e.selectedTags),i.Db(1),i.rc("ngIf",!e.readonly&&i.lc(6,6,e.allTags$).length),i.Db(4),i.rc("ngForOf",i.lc(10,8,e.suggestedTags$)))},directives:[s.t,c.c,s.s,l.a,r.u,r.v,l.c,r.c,r.E,r.t,r.i,u.b,d.a,c.a,h.a,c.d,b.n],pipes:[s.b],styles:["tags-manager{display:block}tags-manager .selected-tags .tag{margin:0 10px 10px 0;display:inline-block}tags-manager .input-group{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row}tags-manager .input-group button{border-top-left-radius:0;border-bottom-left-radius:0}tags-manager .input-group input{border-right:none}tags-manager .main-info{margin-top:5px;font-size:1.3rem}tags-manager .existing-tags{margin-top:25px}tags-manager .existing-tags>p{margin-bottom:5px;font-size:1.3rem;color:var(--be-secondary-text)}tags-manager .existing-tags .tags-list{border:1px solid var(--be-divider-default);padding:8px;max-height:60px;overflow:auto}tags-manager .existing-tags .tags-list>.tag-name{display:inline-block;margin-right:6px;color:var(--be-link);text-decoration:underline;font-size:1.2rem;cursor:pointer}"],encapsulation:2,changeDetection:0}),t}()},yLOo:function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var i=n("ofXK"),r=n("3Pt+"),a=n("6rvT"),o=n("A5z7"),s=n("NFeN"),c=n("bTqV"),l=n("/1cH"),u=n("fXoL"),d=function(){var t=function t(){_classCallCheck(this,t)};return t.\u0275mod=u.Pb({type:t}),t.\u0275inj=u.Ob({factory:function(e){return new(e||t)},imports:[[i.c,r.n,r.D,a.a,o.e,s.b,c.c,l.b]]}),t}()},yRPT:function(t,e,n){"use strict";e.isArrayLike=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t}},yS8O:function(t,e,n){"use strict";n.d(e,"a",(function(){return b}));var i=n("0IaG"),r=n("fXoL"),a=n("Rd8u"),o=n("bTqV"),s=n("NFeN"),c=n("ofXK");function l(t,e){if(1&t&&(r.Xb(0,"div",11),r.Xb(1,"div",12),r.Nc(2),r.Wb(),r.Xb(3,"div",13),r.Nc(4),r.Wb(),r.Wb()),2&t){var n=e.$implicit,i=r.jc();r.Db(2),r.Oc(n),r.Db(2),r.Oc(i.originalEmail.headers[n])}}function u(t,e){1&t&&(r.Xb(0,"span",14),r.Nc(1,"Could not find original email for this reply."),r.Wb())}function d(t,e){if(1&t&&(r.Xb(0,"pre",15),r.Nc(1),r.Wb()),2&t){var n=r.jc();r.Db(1),r.Oc(n.originalEmail.body.plain)}}function h(t,e){if(1&t&&(r.Xb(0,"pre",16),r.Nc(1),r.Wb()),2&t){var n=r.jc();r.Db(1),r.Oc(n.originalEmail.body.html)}}var b=function(){var t=function(){function t(e,n){_classCallCheck(this,t),this.dialogRef=e,this.data=n,this.headerNames=[],this.hydrate()}return _createClass(t,[{key:"close",value:function(){this.dialogRef.close()}},{key:"hydrate",value:function(){this.originalEmail=this.data.original,this.originalEmail&&this.originalEmail.headers&&(this.headerNames=Object.keys(this.originalEmail.headers))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(r.Rb(i.h),r.Rb(i.a))},t.\u0275cmp=r.Lb({type:t,selectors:[["show-original-reply-modal"]],decls:15,vars:4,consts:[[1,"modal-header"],["mat-dialog-title","","trans",""],["type","button","mat-icon-button","","tabindex","-1",1,"close-button",3,"click"],["svgIcon","close"],[1,"headers"],["class","header",4,"ngFor","ngForOf"],[1,"email-content"],["trans","",4,"ngIf"],["class","body-plain",4,"ngIf"],["class","body-html",4,"ngIf"],["type","submit","mat-raised-button","","color","accent","trans","",1,"submit-button",3,"click"],[1,"header"],[1,"name"],[1,"value"],["trans",""],[1,"body-plain"],[1,"body-html"]],template:function(t,e){1&t&&(r.Xb(0,"div",0),r.Xb(1,"h2",1),r.Nc(2,"Original Message"),r.Wb(),r.Xb(3,"button",2),r.fc("click",(function(t){return e.close()})),r.Sb(4,"mat-icon",3),r.Wb(),r.Wb(),r.Xb(5,"mat-dialog-content"),r.Xb(6,"div",4),r.Lc(7,l,5,2,"div",5),r.Wb(),r.Xb(8,"div",6),r.Lc(9,u,2,0,"span",7),r.Lc(10,d,2,1,"pre",8),r.Lc(11,h,2,1,"pre",9),r.Wb(),r.Wb(),r.Xb(12,"mat-dialog-actions"),r.Xb(13,"button",10),r.fc("click",(function(t){return e.close()})),r.Nc(14,"Done"),r.Wb(),r.Wb()),2&t&&(r.Db(7),r.rc("ngForOf",e.headerNames),r.Db(2),r.rc("ngIf",!e.originalEmail),r.Db(1),r.rc("ngIf",e.originalEmail&&e.originalEmail.body.plain),r.Db(1),r.rc("ngIf",e.originalEmail&&e.originalEmail.body.html))},directives:[i.i,a.a,o.b,s.a,i.f,c.s,c.t,i.c],styles:[".show-original-reply-modal-container{width:90%;height:90%}.show-original-reply-modal-container .mat-dialog-title{margin-bottom:25px}.show-original-reply-modal-container .mat-dialog-content{max-height:none}.show-original-reply-modal-container .headers{border:1px solid var(--be-divider-default)}.show-original-reply-modal-container .headers>.header{display:-webkit-box;display:flex;padding:10px;border-bottom:1px solid var(--be-divider-default)}.show-original-reply-modal-container .headers>.header>.name{-webkit-box-flex:1;flex:1 1 30%;font-weight:500;max-width:200px}.show-original-reply-modal-container .headers>.header>.value{-webkit-box-flex:1;flex:1 1 65%;margin-left:auto}.show-original-reply-modal-container .email-content{margin-top:40px}.show-original-reply-modal-container .email-content>pre{font-size:1.4rem;font-family:Roboto,Helvetica Neue,sans-serif;word-wrap:break-word;white-space:pre-wrap}.show-original-reply-modal-container .email-content>.body-plain{margin-bottom:20px;padding-bottom:20px;border-bottom:1px solid var(--be-divider-default)}"],encapsulation:2,changeDetection:0}),t}()},yx2s:function(t,e,n){"use strict";var i=n("FWf1");e.canReportError=function(t){for(;t;){var e=t.destination;if(t.closed||t.isStopped)return!1;t=e&&e instanceof i.Subscriber?e:null}return!0}},"zB/H":function(t,e,n){"use strict";var i=n("mbIT"),r=n("GMZp"),a=n("pshJ"),o=n("LBXl");function s(t){return t.reduce((function(t,e){return t.concat(e instanceof o.UnsubscriptionError?e.errors:e)}),[])}e.Subscription=function(){function t(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}var e;return t.prototype.unsubscribe=function(){var e;if(!this.closed){var n=this._parentOrParents,c=this._unsubscribe,l=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(var u=0;u<n.length;++u)n[u].remove(this);if(a.isFunction(c))try{c.call(this)}catch(b){e=b instanceof o.UnsubscriptionError?s(b.errors):[b]}if(i.isArray(l)){u=-1;for(var d=l.length;++u<d;){var h=l[u];if(r.isObject(h))try{h.unsubscribe()}catch(b){e=e||[],b instanceof o.UnsubscriptionError?e=e.concat(s(b.errors)):e.push(b)}}}if(e)throw new o.UnsubscriptionError(e)}},t.prototype.add=function(e){var n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){var i=n;(n=new t)._subscriptions=[i]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}var r=n._parentOrParents;if(null===r)n._parentOrParents=this;else if(r instanceof t){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}var a=this._subscriptions;return null===a?this._subscriptions=[n]:a.push(n),n},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}},t.EMPTY=((e=new t).closed=!0,e),t}()},zfKp:function(t,e,n){"use strict";e.observable="function"==typeof Symbol&&Symbol.observable||"@@observable"},zzsZ:function(t,e,n){"use strict";var i=n("Q1FS"),r=n("OAkW"),a=n("2qMH");e.fromArray=function(t,e){return e?a.scheduleArray(t,e):new i.Observable(r.subscribeToArray(t))}}}]);
//# sourceMappingURL=7-es5.6b0fc75b9573abacf1f6.js.map