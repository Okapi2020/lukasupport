(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"/RwR":function(t,e,i){"use strict";i.d(e,"a",(function(){return d}));var n=i("0IaG"),r=i("fXoL"),s=i("VaLf"),o=i("kmQS"),a=i("NFeN"),c=i("ofXK"),l=i("bTqV");function u(t,e){if(1&t&&(r.Xb(0,"p",9),r.Nc(1),r.Wb()),2&t){const t=r.jc();r.Db(1),r.Oc(t.data.bodyBold)}}let d=(()=>{class t{constructor(t,e,i,n){this.dialogRef=t,this.data=e,this.i18n=i,this.settings=n}close(){this.dialogRef.close(!1)}ngOnInit(){this.data.title=this.i18n.t(this.data.title),this.data.body=this.i18n.t(this.data.body),this.data.bodyBold&&(this.data.bodyBold=this.i18n.t(this.data.bodyBold)),this.data.ok=this.i18n.t(this.data.ok?this.data.ok:"Confirm"),this.data.cancel=this.i18n.t(this.data.cancel?this.data.cancel:"Cancel")}confirm(){this.dialogRef.close(!0)}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(n.h),r.Rb(n.a),r.Rb(s.a),r.Rb(o.a))},t.\u0275cmp=r.Lb({type:t,selectors:[["confirm-modal"]],decls:14,vars:5,consts:[[1,"modal-header"],["mat-dialog-title","",1,"modal-title"],["type","button","tabindex","-1",1,"close-button","no-style",3,"click"],["svgIcon","close"],["mat-dialog-content","",1,"mat-dialog-contents"],["class","bold",4,"ngIf"],["mat-dialog-actions","",1,"buttons","right","mat-dialog-actions"],["type","button","mat-button","",1,"button","cancel","cancel-button",3,"click"],["type","submit","mat-raised-button","","color","accent","cdkFocusInitial","",1,"button","primary","submit-button",3,"click"],[1,"bold"]],template:function(t,e){1&t&&(r.Xb(0,"div",0),r.Xb(1,"h2",1),r.Nc(2),r.Wb(),r.Xb(3,"button",2),r.fc("click",(function(t){return e.close()})),r.Sb(4,"mat-icon",3),r.Wb(),r.Wb(),r.Xb(5,"div",4),r.Xb(6,"p"),r.Nc(7),r.Wb(),r.Lc(8,u,2,1,"p",5),r.Wb(),r.Xb(9,"div",6),r.Xb(10,"button",7),r.fc("click",(function(t){return e.close()})),r.Nc(11),r.Wb(),r.Xb(12,"button",8),r.fc("click",(function(t){return e.confirm()})),r.Nc(13),r.Wb(),r.Wb()),2&t&&(r.Db(2),r.Oc(e.data.title),r.Db(5),r.Oc(e.data.body),r.Db(1),r.rc("ngIf",e.data.bodyBold),r.Db(3),r.Oc(e.data.cancel),r.Db(2),r.Oc(e.data.ok))},directives:[n.i,a.a,n.f,c.t,n.c,l.b],styles:["[_nghost-%COMP%]{display:block;max-width:500px}.modal-header[_ngcontent-%COMP%]{margin-bottom:10px}.bold[_ngcontent-%COMP%]{font-weight:500}p[_ngcontent-%COMP%]{font-size:1.5rem}"],changeDetection:0}),t})()},"/w9p":function(t,e,i){"use strict";i.d(e,"a",(function(){return n}));const n=new(i("fXoL").r)("PREVIEW_URL_TRANSFORMER",{factory:()=>t=>t.url,providedIn:"root"})},"0alx":function(t,e,i){"use strict";var n=i("VKeD");e.isIterable=function(t){return t&&"function"==typeof t[n.iterator]}},"1V5l":function(t,e,i){"use strict";class n{constructor(t={}){this.type="replies";for(const e in t)this[e]=t[e]}}var r=i("LRne"),s=i("Kqap"),o=i("NJ9Y"),a=i("JIr8"),c=i("w1tV"),l=i("fXoL"),u=i("apsj"),d=i("LsVx"),h=i("h586"),b=i("i2dy");i.d(e,"a",(function(){return p}));let p=(()=>{class t{constructor(t,e,i,n){this.ticketUploads=t,this.tickets=e,this.uploadQueue=i,this.toast=n,this.reset()}get(){return this.model}set(t){this.model=t}setBody(t){this.model.body=t}setTicketId(t){this.ticketId=t}isEmpty(){return 0===this.model.body.length&&0===this.model.uploads.length}uploadFiles(t){this.uploadQueue.start(t).pipe(Object(s.a)((t,e)=>[...t,e.fileEntry],[]),Object(o.a)()).subscribe(t=>{this.model.uploads=[...this.model.uploads,...t],this.save()})}detachUpload(t){this.ticketUploads.detach(this.model.id,t.id).subscribe(()=>{const e=this.get().uploads.findIndex(e=>e.id===t.id);this.get().uploads.splice(e,1)})}save(t={}){if(this.isEmpty())return;const e=this.tickets.saveDraft(this.ticketId,this.getPayload(t),this.model.id).pipe(Object(a.a)(()=>Object(r.a)({data:this.get()})),Object(c.a)());return e.subscribe(t=>{this.set(t.data)}),e}delete(){this.model.id&&this.tickets.deleteDraft(this.model.id).subscribe(),this.reset()}getPayload(t={}){return Object.assign({},{body:this.model.body||null,uploads:this.model.uploads.map(t=>t.id)},t)}reset(){this.set(new n({uploads:[],body:""}))}}return t.\u0275fac=function(e){return new(e||t)(l.bc(u.a),l.bc(d.a),l.bc(h.a),l.bc(b.a))},t.\u0275prov=l.Nb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},"2KeD":function(t,e,i){"use strict";var n=i("Q1FS"),r=i("zB/H"),s=i("zfKp");e.scheduleObservable=function(t,e){return new n.Observable((function(i){var n=new r.Subscription;return n.add(e.schedule((function(){var r=t[s.observable]();n.add(r.subscribe({next:function(t){n.add(e.schedule((function(){return i.next(t)})))},error:function(t){n.add(e.schedule((function(){return i.error(t)})))},complete:function(){n.add(e.schedule((function(){return i.complete()})))}}))}))),n}))}},"2qMH":function(t,e,i){"use strict";var n=i("Q1FS"),r=i("zB/H");e.scheduleArray=function(t,e){return new n.Observable((function(i){var n=new r.Subscription,s=0;return n.add(e.schedule((function(){s!==t.length?(i.next(t[s++]),i.closed||n.add(this.schedule())):i.complete()}))),n}))}},"2qZP":function(t,e,i){"use strict";i.d(e,"a",(function(){return f}));var n=i("fXoL"),r=i("tSQ/"),s=i("STbY"),o=i("IzEk"),a=i("mWN8"),c=i("twBr"),l=i("LsVx"),u=i("i2dy"),d=i("NFeN"),h=i("Rd8u"),b=i("ofXK");function p(t,e){if(1&t){const t=n.Yb();n.Xb(0,"button",7),n.fc("click",(function(i){n.Cc(t);const r=e.$implicit;return n.jc().assignTicketsTo(r.id)})),n.Nc(1),n.Wb()}if(2&t){const t=e.$implicit,i=n.jc();n.Hb("active",i.ticket&&i.ticket.assigned_to==t.id),n.Db(1),n.Oc(t.email)}}let f=(()=>{class t{constructor(t,e,i,r){this.users=t,this.currentUser=e,this.tickets=i,this.toast=r,this.agents=[],this.assigned=new n.o}ngOnInit(){this.trigger.menuOpened.pipe(Object(o.a)(1)).subscribe(()=>{this.fetchAgents()})}open(){this.trigger.openMenu()}close(){this.trigger.closeMenu()}assignTicketsTo(t=null){this.tickets.assign(this.ticketIds?this.ticketIds:[this.ticket.id],t).subscribe(()=>{this.ticket&&(this.ticket.assigned_to=t),this.toast.open("Tickets assigned"),this.assigned.emit()})}fetchAgents(){this.users.getAll({permission:r.a,per_page:35}).subscribe(t=>{this.agents=t.filter(t=>t.id!==this.currentUser.get("id"))})}}return t.\u0275fac=function(e){return new(e||t)(n.Rb(a.a),n.Rb(c.a),n.Rb(l.a),n.Rb(u.a))},t.\u0275cmp=n.Lb({type:t,selectors:[["assign-ticket-dropdown"]],viewQuery:function(t,e){var i;1&t&&n.Jc(s.d,!0),2&t&&n.yc(i=n.gc())&&(e.trigger=i.first)},inputs:{ticket:"ticket",ticketIds:"ticketIds"},outputs:{assigned:"assigned"},decls:9,vars:7,consts:[[1,"no-style","toolbar-item",3,"matMenuTriggerFor"],["svgIcon","user-custom"],[1,"assign-ticket-menu",3,"overlapTrigger"],["assignTicketMenu","matMenu"],["mat-menu-item","","trans","",1,"anyone-item",3,"click"],["mat-menu-item","","trans","",1,"me-item",3,"click"],["mat-menu-item","","class","agent-item",3,"active","click",4,"ngFor","ngForOf"],["mat-menu-item","",1,"agent-item",3,"click"]],template:function(t,e){if(1&t&&(n.Xb(0,"button",0),n.Sb(1,"mat-icon",1),n.Wb(),n.Xb(2,"mat-menu",2,3),n.Xb(4,"button",4),n.fc("click",(function(t){return e.assignTicketsTo()})),n.Nc(5,"Anyone"),n.Wb(),n.Xb(6,"button",5),n.fc("click",(function(t){return e.assignTicketsTo(e.currentUser.get("id"))})),n.Nc(7,"Me"),n.Wb(),n.Lc(8,p,2,3,"button",6),n.Wb()),2&t){const t=n.zc(3);n.rc("matMenuTriggerFor",t),n.Db(2),n.rc("overlapTrigger",!1),n.Db(2),n.Hb("active",e.ticket&&!e.ticket.assigned_to),n.Db(2),n.Hb("active",e.ticket&&e.ticket.assigned_to===e.currentUser.get("id")),n.Db(2),n.rc("ngForOf",e.agents)}},directives:[s.d,d.a,s.e,s.b,h.a,b.s],styles:["assign-ticket-dropdown{position:relative;display:inline-block}.assign-ticket-menu.mat-menu-panel{max-height:500px}.assign-ticket-menu.mat-menu-panel .mat-menu-item.active{background-color:var(--be-hover)}"],encapsulation:2}),t})()},"3H9V":function(t,e,i){"use strict";i.d(e,"a",(function(){return R}));var n=i("yS8O"),r=i("aV6R"),s=i("lxqa"),o=i("wZee"),a=(i("bPOv"),i("Yhcd"),i("jpss"),i("XIHC"),i("QWvX"),i("fXoL")),c=i("QGXG"),l=i("twBr"),u=i("LsVx"),d=i("wWhK"),h=i("9C01"),b=i("ofXK"),p=i("STbY"),f=i("Rd8u"),g=i("bTqV"),m=i("NFeN"),v=i("83jf");function y(t,e){if(1&t&&a.Sb(0,"img",22),2&t){const t=a.jc(2).$implicit;a.sc("src",t.user.avatar,a.Fc),a.sc("alt",t.user.email)}}function w(t,e){1&t&&(a.Xb(0,"span",23),a.Nc(1,"You"),a.Wb())}function x(t,e){if(1&t&&(a.Xb(0,"span"),a.Nc(1),a.Wb()),2&t){const t=a.jc(2).$implicit;a.Db(1),a.Oc(t.user.display_name)}}function k(t,e){1&t&&(a.Xb(0,"span",24),a.Nc(1,"replied"),a.Wb())}function _(t,e){1&t&&(a.Xb(0,"span",24),a.Nc(1,"started the conversation"),a.Wb())}function C(t,e){1&t&&(a.Xb(0,"span",24),a.Nc(1,"left a note"),a.Wb())}function S(t,e){1&t&&(a.Xb(0,"span",24),a.Nc(1,"created a draft"),a.Wb())}function X(t,e){if(1&t){const t=a.Yb();a.Xb(0,"span",25),a.Xb(1,"button",26),a.fc("click",(function(e){a.Cc(t);const i=a.jc(2).$implicit;return a.jc().editDraft(i)})),a.Nc(2,"Edit"),a.Wb(),a.Xb(3,"button",27),a.fc("click",(function(e){a.Cc(t);const i=a.jc(2).$implicit;return a.jc().maybeDeleteReply(i)})),a.Nc(4,"Discard"),a.Wb(),a.Wb()}}function I(t,e){if(1&t&&(a.Vb(0),a.Xb(1,"button",28),a.Sb(2,"mat-icon",29),a.Wb(),a.Ub()),2&t){a.jc();const t=a.zc(19);a.Db(1),a.rc("matMenuTriggerFor",t)}}function O(t,e){if(1&t){const t=a.Yb();a.Xb(0,"reply-attachment-list",30),a.fc("detached",(function(e){a.Cc(t);const i=a.jc(2).$implicit;return a.jc().removeAttachment(i,e)})),a.Wb()}if(2&t){const t=a.jc(2).$implicit;a.rc("attachments",t.uploads)}}function W(t,e){if(1&t){const t=a.Yb();a.Xb(0,"div",3),a.Lc(1,y,1,2,"img",4),a.Xb(2,"div",5),a.Xb(3,"div",6),a.Xb(4,"div",7),a.Xb(5,"span",8),a.Lc(6,w,2,0,"span",9),a.Lc(7,x,2,1,"span",10),a.Wb(),a.Nc(8," "),a.Lc(9,k,2,0,"span",11),a.Lc(10,_,2,0,"span",11),a.Lc(11,C,2,0,"span",11),a.Lc(12,S,2,0,"span",11),a.Lc(13,X,5,0,"span",12),a.Wb(),a.Xb(14,"div",13),a.Xb(15,"span",14),a.Nc(16),a.Wb(),a.Lc(17,I,3,1,"ng-container",10),a.Xb(18,"mat-menu",15,16),a.Xb(20,"div",17),a.fc("click",(function(e){a.Cc(t);const i=a.jc().$implicit;return a.jc().update(i)})),a.Nc(21,"Edit"),a.Wb(),a.Xb(22,"div",18),a.fc("click",(function(e){a.Cc(t);const i=a.jc().$implicit;return a.jc().maybeDeleteReply(i)})),a.Nc(23,"Delete"),a.Wb(),a.Xb(24,"div",19),a.fc("click",(function(e){a.Cc(t);const i=a.jc().$implicit;return a.jc().showOriginalEmail(i)})),a.Nc(25,"Show Original"),a.Wb(),a.Wb(),a.Wb(),a.Wb(),a.Sb(26,"div",20),a.Lc(27,O,1,1,"reply-attachment-list",21),a.Wb(),a.Wb()}if(2&t){const t=a.jc(),e=t.$implicit,i=t.last,n=a.jc();a.Hb("bounce",e.animated)("my-reply",e.user_id==n.currentUser.get("id")),a.sc("ngClass",e.type),a.Db(1),a.rc("ngIf",e.user.avatar),a.Db(5),a.rc("ngIf",n.currentUser.get("id")==e.user.id),a.Db(1),a.rc("ngIf",n.currentUser.get("id")!=e.user.id),a.Db(2),a.rc("ngIf",!i&&"replies"===e.type),a.Db(1),a.rc("ngIf",i&&"replies"===e.type),a.Db(1),a.rc("ngIf","notes"==e.type),a.Db(1),a.rc("ngIf","drafts"==e.type),a.Db(1),a.rc("ngIf","drafts"===e.type),a.Db(3),a.Oc(e.created_at_formatted),a.Db(1),a.rc("ngIf",n.currentUser.hasPermission("replies.update")&&"drafts"!==e.type),a.Db(9),a.rc("innerHTML",e.body,a.Dc),a.Db(1),a.rc("ngIf",e.uploads.length)}}function D(t,e){if(1&t&&a.Lc(0,W,28,17,"div",2),2&t){const t=e.$implicit,i=a.jc();a.rc("ngIf",i.currentUser.hasPermission("replies.view")||"notes"!==t.type)}}let R=(()=>{class t{constructor(t,e,i,n,r){this.modal=t,this.currentUser=e,this.tickets=i,this.conversation=n,this.backendEvents=r}ngOnInit(){this.subscription=this.backendEvents.ticketReplyCreated.subscribe(t=>{this.conversation.get().id===t.ticket_id&&(t.animated=!0,this.conversation.replies.add(t))})}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}ngAfterViewInit(){o&&o.highlightAll()}update(t){this.modal.open(r.a,{reply:t},{panelClass:"update-reply-modal-container"}).afterClosed().subscribe(t=>{t&&this.conversation.replies.replace(t)})}maybeDeleteReply(t){this.modal.show(s.a,{reply:t}).afterClosed().subscribe(e=>{e&&this.conversation.replies.delete(t)})}editDraft(t){this.conversation.setDraft(t),this.conversation.openEditor(),this.conversation.replies.remove(t.id)}showOriginalEmail(t){const e="show-original-reply-modal-container";this.tickets.getOriginalEmailForReply(t.id).subscribe(t=>{this.modal.open(n.a,{original:t.data},{panelClass:e})},()=>{this.modal.open(n.a,null,{panelClass:e})})}removeAttachment(t,e){t.uploads=t.uploads.filter(t=>t.id!==e.id),this.tickets.updateReply(t.id,{uploads:t.uploads}).subscribe(()=>{},()=>{})}}return t.\u0275fac=function(e){return new(e||t)(a.Rb(c.a),a.Rb(l.a),a.Rb(u.a),a.Rb(d.a),a.Rb(h.a))},t.\u0275cmp=a.Lb({type:t,selectors:[["conversation-replies"]],inputs:{textEditor:"textEditor"},decls:2,vars:1,consts:[[1,"thread"],["ngFor","",3,"ngForOf"],["class","reply animated",3,"bounce","ngClass","my-reply",4,"ngIf"],[1,"reply","animated",3,"ngClass"],["class","user-avatar",3,"src","alt",4,"ngIf"],[1,"reply-body"],[1,"message-header"],[1,"customer"],[1,"customer-name"],["trans","",4,"ngIf"],[4,"ngIf"],["class","text-gray action-text","trans","",4,"ngIf"],["class","draft-actions",4,"ngIf"],[1,"meta"],[1,"date"],[1,"reply-actions-menu"],["replyActionsMenu","matMenu"],["mat-menu-item","","trans","",1,"update-reply-button",3,"click"],["mat-menu-item","","trans","",1,"delete-reply-button",3,"click"],["mat-menu-item","","trans","",1,"show-original-reply-button",3,"click"],[1,"message-body",3,"innerHTML"],[3,"attachments","detached",4,"ngIf"],[1,"user-avatar",3,"src","alt"],["trans",""],["trans","",1,"text-gray","action-text"],[1,"draft-actions"],["type","button","trans","",1,"no-style","edit-draft-button",3,"click"],["type","button","trans","",1,"no-style","delete-draft-button",3,"click"],["mat-icon-button","",3,"matMenuTriggerFor"],["svgIcon","more-vert"],[3,"attachments","detached"]],template:function(t,e){1&t&&(a.Xb(0,"div",0),a.Lc(1,D,1,1,"ng-template",1),a.Wb()),2&t&&(a.Db(1),a.rc("ngForOf",e.conversation.replies.get()))},directives:[b.s,b.t,b.q,p.e,p.b,f.a,g.b,p.d,m.a,v.a],styles:["conversation-replies{display:block;width:100%}conversation-replies .reply{display:-webkit-box;display:flex;padding:25px;border-top:1px solid var(--be-divider-default)}conversation-replies .reply.notes{background-color:#fffcea;color:#836f60;border-left:3px solid #c8bcb4}conversation-replies .reply.drafts{border-left:3px solid var(--be-accent-default)}conversation-replies .reply.drafts .customer .text-gray{color:var(--be-accent-default)}conversation-replies .reply:last-of-type{border-bottom:1px solid var(--be-divider-default)}conversation-replies .reply .user-avatar{-webkit-box-flex:0;flex:0 0 50px;display:block;width:50px;height:50px;margin-right:20px;-o-object-fit:cover;object-fit:cover;border-radius:4px}conversation-replies .reply .reply-body{-webkit-box-flex:1;flex:1 1 auto;max-width:calc(100% - 70px)}conversation-replies .reply reply-attachment-list{border-top:1px dotted var(--be-divider-default);margin:20px 0 0;padding-top:20px;display:-webkit-inline-box;display:inline-flex}conversation-replies .reply reply-attachment-list>.attachments-list-item:last-of-type{margin-right:0}conversation-replies .message-header{font-size:1.65rem;margin-bottom:15px;display:-webkit-box;display:flex}conversation-replies .message-header .customer{-webkit-box-flex:1;flex:1 1 auto}conversation-replies .message-header .customer .draft-actions{margin-left:10px;vertical-align:text-bottom}conversation-replies .message-header .customer .draft-actions button{border:1px solid var(--be-divider-default);padding:5px 8px;font-size:1.2rem;border-radius:3px;margin-right:6px}conversation-replies .message-header .customer .draft-actions button:hover{background-color:#f7f7f7}conversation-replies .message-header .meta{-webkit-box-flex:0;flex:0 0 100px;color:var(--be-secondary-text);font-size:1.2rem;font-weight:500;margin-right:5px;text-align:right;white-space:nowrap;line-height:23px}conversation-replies .message-header .customer-name{text-transform:capitalize;font-weight:500;color:var(--be-help-center-title-text)}conversation-replies .message-header .text-gray{color:var(--be-secondary-text)}conversation-replies .message-body{max-width:90%;word-wrap:break-word;overflow-x:hidden}conversation-replies .message-body a:hover{text-decoration:underline}conversation-replies .message-body img{max-width:100%}"],encapsulation:2}),t})()},"45UC":function(t,e,i){"use strict";i.d(e,"a",(function(){return f}));var n=i("wWhK"),r=i("LsVx"),s=i("1V5l"),o=i("KHpT"),a=i("ehXJ"),c=i("/RwR"),l=i("0IaG"),u=i("fXoL"),d=i("QGXG"),h=i("wfim"),b=i("tyNb");function p(t,e){if(1&t){const t=u.Yb();u.Xb(0,"button",4),u.fc("click",(function(e){return u.Cc(t),u.jc().mergeTickets()})),u.Nc(1,"Merge"),u.Wb()}}let f=(()=>{class t{constructor(t,e,i,n,r,s,o){this.dialogRef=t,this.data=e,this.tickets=i,this.modal=n,this.conversation=r,this.tags=s,this.router=o,this.hydrate()}close(t){this.dialogRef.close(t)}openTicket(){this.modal.closeAll(),this.router.navigate(["/mailbox/tickets/tag",this.conversation.getStatus().id,"ticket",this.conversation.get().id])}mergeTickets(){this.modal.show(c.a,{title:"Merge Tickets",body:"Are you sure you want merge this ticket with the original one behind the pop-ups?",bodyBold:"Merged tickets can not be unmerged.",ok:"Merge"}).afterClosed().subscribe(t=>{t&&this.tickets.merge(this.activeTicketId,this.conversation.get().id).subscribe(t=>{this.close(t),this.tags.refresh()})})}hydrate(){this.activeTicketId=this.data.activeTicketId,this.tickets.get(this.data.ticketId).subscribe(t=>{this.conversation.init(t.ticket)})}}return t.\u0275fac=function(e){return new(e||t)(u.Rb(l.h),u.Rb(l.a),u.Rb(r.a),u.Rb(d.a),u.Rb(n.a),u.Rb(h.a),u.Rb(b.f))},t.\u0275cmp=u.Lb({type:t,selectors:[["conversation-modal"]],features:[u.Cb([r.a,n.a,s.a,o.a,a.a])],decls:5,vars:3,consts:[[3,"hideSidebar","hideBackButton"],["toolbar-content","",1,"no-style","icon-button","action",3,"click"],["svgIcon","open-in-browser-custom"],["class","merge-button","mat-raised-button","","color","accent","trans","",3,"click",4,"ngIf"],["mat-raised-button","","color","accent","trans","",1,"merge-button",3,"click"]],template:function(t,e){1&t&&(u.Xb(0,"mat-dialog-content"),u.Xb(1,"conversation",0),u.Xb(2,"button",1),u.fc("click",(function(t){return e.openTicket()})),u.Sb(3,"mat-icon",2),u.Wb(),u.Wb(),u.Lc(4,p,2,0,"button",3),u.Wb()),2&t&&(u.Db(1),u.rc("hideSidebar",!0)("hideBackButton",!0),u.Db(3),u.rc("ngIf",e.activeTicketId))},styles:[".conversation-modal-container{width:80%;height:calc(100% - 50px)}.conversation-modal-container .mat-dialog-container,.conversation-modal-container .mat-dialog-content,.conversation-modal-container conversation-modal{height:100%;max-height:100%;margin:0;padding:0}.conversation-modal-container .merge-button{position:absolute;top:10px;left:300px}"],encapsulation:2}),t})()},"6SKC":function(t,e,i){"use strict";i.d(e,"a",(function(){return s}));var n=i("4Ait"),r=i("fXoL");let s=(()=>{class t{transform(t=0,e){return isNaN(parseFloat(String(t)))||!isFinite(t)?"-":Object(n.a)(t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=r.Qb({name:"formattedFileSize",type:t,pure:!0}),t})()},"6qA3":function(t,e,i){"use strict";var n=i("OAkW"),r=i("Z5tI"),s=i("poJ0"),o=i("ozli"),a=i("yRPT"),c=i("90cg"),l=i("GMZp"),u=i("VKeD"),d=i("zfKp");e.subscribeTo=function(t){if(t&&"function"==typeof t[d.observable])return o.subscribeToObservable(t);if(a.isArrayLike(t))return n.subscribeToArray(t);if(c.isPromise(t))return r.subscribeToPromise(t);if(t&&"function"==typeof t[u.iterator])return s.subscribeToIterable(t);var e=l.isObject(t)?"an invalid object":"'"+t+"'";throw new TypeError("You provided "+e+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")}},"703J":function(t,e,i){"use strict";i.d(e,"a",(function(){return n}));class n{constructor(t={}){this.type="custom";for(const e in t)this[e]=t[e]}}},"7LS1":function(t,e,i){"use strict";i.d(e,"a",(function(){return h}));var n=i("2Vo4"),r=i("XNiG"),s=i("vUXK"),o=i("+rOU"),a=i("itxp"),c=i("ZiO8"),l=i("pLZG"),u=i("/w9p"),d=i("fXoL");let h=(()=>{class t{constructor(t,e){this.availablePreviews=t,this.injector=e,this.files=[],this.portal=new n.a(null),this.meta=new n.a({}),this.previewUriTransformer=null,this.download=new r.a}pagination(){return this.meta.pipe(Object(l.a)(t=>t&&!!t.entry))}getCurrent(){return this.meta.value.entry}getAllEntries(){return this.files}getPortal(){return this.portal.asObservable()}showNext(){this.meta.value.haveNext&&(this.updateMeta("next"),this.updatePortal())}showPrevious(){this.meta.value.havePrevious&&(this.updateMeta("previous"),this.updatePortal())}updateMeta(t){let e=0;if("string"==typeof t){const i=this.meta.value.pointer;e="next"===t?i+1:i-1}else"number"==typeof t&&(e=t);this.meta.next({pointer:e,entry:this.files[e],total:this.files.length,haveNext:e+1<this.files.length,havePrevious:e-1>-1})}updatePortal(){const t=this.getCurrent();this.portal.next(new o.d(t&&this.availablePreviews[t.type]||c.a,null,this.createInjector()))}set(t,e){t&&0!==t.length&&(this.files=t.filter(t=>"folder"!==t.type),this.updateMeta(e),this.updatePortal())}createInjector(){const t=new WeakMap;return t.set(a.a,this.getCurrent()),this.previewUriTransformer&&t.set(u.a,this.previewUriTransformer),new o.g(this.injector,t)}destroy(){this.meta.next({}),this.files=null,this.portal.next(null)}setPreviewUriTransformer(t){this.previewUriTransformer=t}}return t.\u0275fac=function(e){return new(e||t)(d.bc(s.a),d.bc(d.s))},t.\u0275prov=d.Nb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},"7T94":function(t,e,i){"use strict";i.d(e,"a",(function(){return W}));var n=i("cuTO"),r=i("0IaG"),s=i("h586"),o=i("LRne"),a=i("3E0/"),c=i("IzEk"),l=i("fXoL"),u=i("X3Ra"),d=i("ofXK"),h=i("bTqV"),b=i("NFeN"),p=i("3Pt+"),f=i("Rd8u"),g=i("KKQg"),m=i("rG4v"),v=i("83jf");const y=["textEditor"];function w(t,e){1&t&&(l.Xb(0,"span",20),l.Nc(1,"Update Canned Reply"),l.Wb())}function x(t,e){1&t&&(l.Xb(0,"span",20),l.Nc(1,"New Canned Reply"),l.Wb())}function k(t,e){if(1&t&&(l.Xb(0,"div",21),l.Nc(1),l.Wb()),2&t){const t=l.jc();l.Db(1),l.Oc(t.errors.name)}}function _(t,e){if(1&t&&(l.Xb(0,"div",21),l.Nc(1),l.Wb()),2&t){const t=l.jc();l.Db(1),l.Oc(t.errors.shared)}}function C(t,e){if(1&t&&(l.Xb(0,"div",21),l.Nc(1),l.Wb()),2&t){const t=l.jc();l.Db(1),l.Oc(t.errors.body)}}function S(t,e){if(1&t&&(l.Xb(0,"div",21),l.Nc(1),l.Wb()),2&t){const t=l.jc();l.Db(1),l.Oc(t.errors.uploads)}}function X(t,e){if(1&t){const t=l.Yb();l.Xb(0,"reply-attachment-list",22),l.fc("detached",(function(e){return l.Cc(t),l.jc().removeAttachment(e)})),l.Wb()}if(2&t){const t=l.jc();l.rc("attachments",t.attachments)}}function I(t,e){1&t&&(l.Xb(0,"span",20),l.Nc(1,"Update"),l.Wb())}function O(t,e){1&t&&(l.Xb(0,"span",20),l.Nc(1,"Create"),l.Wb())}let W=(()=>{class t{constructor(t,e,i,r){this.dialogRef=t,this.data=e,this.cannedReplies=i,this.uploadQueue=r,this.attachments=[],this.model=new n.a,this.errors={},Object(o.a)(null).pipe(Object(a.a)(0),Object(c.a)(1)).subscribe(()=>this.hydrate())}close(t){this.dialogRef.close(t),this.textEditor.destroyEditor()}confirm(){let t;const e=this.getPayload();t=this.model.id?this.cannedReplies.update(this.model.id,e):this.cannedReplies.create(e),t.subscribe(t=>{this.close(t.data)},t=>this.errors=t.messages)}getPayload(){return{name:this.model.name,body:this.textEditor.getContents(),shared:this.model.shared,uploads:this.attachments.map(t=>t.id)}}setContents(t={}){t.body&&this.textEditor.setContents(t.body),t.uploads&&(this.attachments=t.uploads.slice())}hydrate(){this.data.contents&&this.setContents(this.data.contents),this.data.cannedReply&&(this.model=new n.a(this.data.cannedReply),this.setContents({body:this.model.body,uploads:this.model.uploads}))}uploadFiles(t){this.uploadQueue.start(t).subscribe(t=>{this.attachments=[...this.attachments,t.fileEntry]})}removeAttachment(t){for(let e=0;e<this.attachments.length;e++)this.attachments[e].id===t.id&&this.attachments.splice(e,1)}}return t.\u0275fac=function(e){return new(e||t)(l.Rb(r.h),l.Rb(r.a),l.Rb(u.a),l.Rb(s.a))},t.\u0275cmp=l.Lb({type:t,selectors:[["crupdate-canned-reply-modal"]],viewQuery:function(t,e){var i;1&t&&l.Jc(y,!0),2&t&&l.yc(i=l.gc())&&(e.textEditor=i.first)},features:[l.Cb([s.a])],decls:37,vars:14,consts:[[1,"modal-header"],["mat-dialog-title",""],["trans","",4,"ngIf"],["type","button","mat-icon-button","","tabindex","-1",1,"close-button",3,"click"],["svgIcon","close"],["ngNativeValidate","",3,"ngSubmit"],[1,"many-inputs"],[1,"input-container"],["for","canned-reply-name","trans",""],["type","text","id","canned-reply-name","name","canned-reply-name",3,"ngModel","ngModelChange"],["class","error",4,"ngIf"],["for","shared","trans",""],["id","shared","name","shared",3,"ngModel","ngModelChange"],["trans","",3,"ngValue"],["for","canned-body","trans",""],["id","canned-body","inlineUploadPrefix","ticket_images",3,"minHeight","onFileUpload"],["textEditor",""],[3,"attachments","detached",4,"ngIf"],["mat-button","","type","button","trans","",1,"cancel-button",3,"click"],["type","submit","mat-raised-button","","color","accent",1,"submit-button"],["trans",""],[1,"error"],[3,"attachments","detached"]],template:function(t,e){1&t&&(l.Xb(0,"div",0),l.Xb(1,"h2",1),l.Lc(2,w,2,0,"span",2),l.Lc(3,x,2,0,"span",2),l.Wb(),l.Xb(4,"button",3),l.fc("click",(function(t){return e.close()})),l.Sb(5,"mat-icon",4),l.Wb(),l.Wb(),l.Xb(6,"form",5),l.fc("ngSubmit",(function(t){return e.confirm()})),l.Xb(7,"mat-dialog-content",6),l.Xb(8,"div",7),l.Xb(9,"label",8),l.Nc(10,"Name"),l.Wb(),l.Xb(11,"input",9),l.fc("ngModelChange",(function(t){return e.model.name=t})),l.Wb(),l.Lc(12,k,2,1,"div",10),l.Wb(),l.Xb(13,"div",7),l.Xb(14,"label",11),l.Nc(15,"Shared"),l.Wb(),l.Xb(16,"select",12),l.fc("ngModelChange",(function(t){return e.model.shared=t})),l.Xb(17,"option",13),l.Nc(18,"Yes"),l.Wb(),l.Xb(19,"option",13),l.Nc(20,"No"),l.Wb(),l.Wb(),l.Lc(21,_,2,1,"div",10),l.Wb(),l.Xb(22,"div",7),l.Xb(23,"label",14),l.Nc(24,"Canned Reply Body"),l.Wb(),l.Xb(25,"text-editor",15,16),l.fc("onFileUpload",(function(t){return e.uploadFiles(t)})),l.Wb(),l.Sb(27,"upload-progress-bar"),l.Lc(28,C,2,1,"div",10),l.Lc(29,S,2,1,"div",10),l.Lc(30,X,1,1,"reply-attachment-list",17),l.Wb(),l.Wb(),l.Xb(31,"mat-dialog-actions"),l.Xb(32,"button",18),l.fc("click",(function(t){return e.close()})),l.Nc(33,"Cancel"),l.Wb(),l.Xb(34,"button",19),l.Lc(35,I,2,0,"span",2),l.Lc(36,O,2,0,"span",2),l.Wb(),l.Wb(),l.Wb()),2&t&&(l.Db(2),l.rc("ngIf",e.model.id),l.Db(1),l.rc("ngIf",!e.model.id),l.Db(8),l.rc("ngModel",e.model.name),l.Db(1),l.rc("ngIf",e.errors.name),l.Db(4),l.rc("ngModel",e.model.shared),l.Db(1),l.rc("ngValue",!0),l.Db(2),l.rc("ngValue",!1),l.Db(2),l.rc("ngIf",e.errors.shared),l.Db(4),l.rc("minHeight",300),l.Db(3),l.rc("ngIf",e.errors.body),l.Db(1),l.rc("ngIf",e.errors.uploads),l.Db(1),l.rc("ngIf",e.attachments.length),l.Db(5),l.rc("ngIf",e.model.id),l.Db(1),l.rc("ngIf",!e.model.id))},directives:[r.i,d.t,h.b,b.a,p.u,p.v,r.f,f.a,p.c,p.t,p.w,p.F,p.y,p.I,g.a,m.a,r.c,v.a],styles:[".crupdate-canned-reply-modal-container{width:580px}.crupdate-canned-reply-modal-container reply-attachment-list{margin-top:25px}"],encapsulation:2}),t})()},"83jf":function(t,e,i){"use strict";var n=i("fXoL"),r=i("nPOm"),s=i("tTc1"),o=i("ZfYz"),a=i("7LS1"),c=i("kmQS"),l=i("ofXK"),u=i("bTqV"),d=i("NFeN");function h(t,e){if(1&t){const t=n.Yb();n.Xb(0,"button",3),n.fc("click",(function(e){return n.Cc(t),n.jc().closed.emit(!0)})),n.Sb(1,"mat-icon",4),n.Wb()}}function b(t,e){if(1&t){const t=n.Yb();n.Vb(0),n.Xb(1,"div",9),n.Xb(2,"button",10),n.fc("click",(function(e){return n.Cc(t),n.jc(2).previewFiles.showPrevious()})),n.Sb(3,"mat-icon",11),n.Wb(),n.Xb(4,"span",12),n.Nc(5),n.Wb(),n.Xb(6,"button",13),n.fc("click",(function(e){return n.Cc(t),n.jc(2).previewFiles.showNext()})),n.Sb(7,"mat-icon",14),n.Wb(),n.Wb(),n.Ub()}if(2&t){const t=e.ngIf;n.Db(2),n.rc("disabled",!t.havePrevious),n.Db(3),n.Qc("",t.pointer+1," of ",t.total,""),n.Db(1),n.rc("disabled",!t.haveNext)}}function p(t,e){if(1&t){const t=n.Yb();n.Vb(0),n.Xb(1,"div",5),n.Nc(2),n.Wb(),n.Lc(3,b,8,4,"ng-container",1),n.kc(4,"async"),n.Xb(5,"div",6),n.Xb(6,"button",7),n.fc("click",(function(e){return n.Cc(t),n.jc().downloadFiles()})),n.Sb(7,"mat-icon",8),n.Wb(),n.pc(8),n.Wb(),n.Ub()}if(2&t){const t=e.ngIf,i=n.jc();n.Db(2),n.Pc(" ",t.entry.name," "),n.Db(1),n.rc("ngIf",n.lc(4,3,i.previewFiles.pagination())),n.Db(3),n.rc("disabled",i.disableDownload)}}function f(t,e){if(1&t&&n.Sb(0,"img",17),2&t){const t=n.jc(2);n.rc("src",t.settings.getBaseUrl(!0)+t.settings.get("branding.logo_light"),n.Fc)}}function g(t,e){if(1&t&&(n.Xb(0,"a",15),n.Lc(1,f,1,1,"img",16),n.Wb()),2&t){const t=n.jc();n.Db(1),n.rc("ngIf",t.showLogo&&t.settings.get("branding.logo_light"))}}const m=["*"];let v=(()=>{class t{constructor(t,e){this.previewFiles=t,this.settings=e,this.showLogo=!1,this.disableDownload=!1,this.showCloseButton=!1,this.closed=new n.o}downloadFiles(){this.previewFiles.download.next()}}return t.\u0275fac=function(e){return new(e||t)(n.Rb(a.a),n.Rb(c.a))},t.\u0275cmp=n.Lb({type:t,selectors:[["file-preview-toolbar"]],inputs:{showLogo:"showLogo",disableDownload:"disableDownload",showCloseButton:"showCloseButton"},outputs:{closed:"closed"},ngContentSelectors:m,decls:4,vars:5,consts:[["mat-icon-button","","class","back-button",3,"click",4,"ngIf"],[4,"ngIf"],["routerLink","/drive","class","logo",4,"ngIf"],["mat-icon-button","",1,"back-button",3,"click"],["svgIcon","arrow-back"],[1,"entry-name"],[1,"actions"],["mat-icon-button","",3,"disabled","click"],["svgIcon","file-download"],[1,"navigation"],["mat-icon-button","",1,"previous",3,"disabled","click"],["svgIcon","keyboard-arrow-left"],[1,"meta"],["mat-icon-button","",1,"next",3,"disabled","click"],["svgIcon","keyboard-arrow-right"],["routerLink","/drive",1,"logo"],[3,"src",4,"ngIf"],[3,"src"]],template:function(t,e){1&t&&(n.qc(),n.Lc(0,h,2,0,"button",0),n.Lc(1,p,9,5,"ng-container",1),n.kc(2,"async"),n.Lc(3,g,2,1,"a",2)),2&t&&(n.rc("ngIf",e.showCloseButton),n.Db(1),n.rc("ngIf",n.lc(2,3,e.previewFiles.pagination())),n.Db(2),n.rc("ngIf",e.showLogo&&e.settings.has("branding.logo_light")))},directives:[l.t,u.b,d.a],pipes:[l.b],styles:["file-preview-toolbar{position:fixed;top:0;left:0;display:-webkit-box;display:flex;width:100%;-webkit-box-align:center;align-items:center;color:var(--be-accent-contrast);height:60px;padding:0 15px;background:-webkit-gradient(linear,left top,left bottom,from(rgba(0,0,0,.65)),to(transparent));background:linear-gradient(180deg,rgba(0,0,0,.65) 0,transparent);z-index:10}@media only screen and (max-width:550px){file-preview-toolbar{padding:0 5px}}file-preview-toolbar .entry-name{display:block;margin-right:25px;margin-left:8px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}@media only screen and (min-width:550px){file-preview-toolbar .entry-name{max-width:calc(50% - 77.5px)}}file-preview-toolbar .entry-name file-icon{display:inline-block;vertical-align:bottom;margin-right:5px}@media only screen and (min-width:550px){file-preview-toolbar .navigation{position:absolute;left:50%;top:50%;margin-right:-50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}}@media only screen and (max-width:550px){file-preview-toolbar .navigation{position:fixed;bottom:10px;left:5px}}file-preview-toolbar .actions{margin-left:auto;white-space:nowrap}file-preview-toolbar .actions a,file-preview-toolbar .actions button{margin:0 5px}file-preview-toolbar .close-button{margin-right:25px}file-preview-toolbar .logo{position:fixed;bottom:15px;right:15px;opacity:.2;width:150px;height:auto}file-preview-toolbar .logo img{width:100%;height:auto}file-preview-toolbar .mat-icon-button[disabled][disabled]{color:#737373}"],encapsulation:2,changeDetection:0}),t})();var y=i("ovFL");const w=["previewContainer"],x=["moreOptionsButton"];let k=(()=>{class t{constructor(t,e,i,n,r){this.el=t,this.overlayRef=e,this.previewFiles=i,this.settings=n,this.data=r,this.entries=[],this.entries=r.entries}ngOnInit(){this.data.ticketEntry&&this.previewFiles.setPreviewUriTransformer(this.urlTransformer.bind(this))}ngAfterViewInit(){this.bindToDownload(),this.previewContainer.nativeElement.addEventListener("click",t=>{t.target.closest(".preview-object")||this.overlayRef.close()})}ngOnDestroy(){this.downloadSub.unsubscribe()}closeOverlay(){this.overlayRef.close()}bindToDownload(){this.downloadSub=this.previewFiles.download.subscribe(()=>{const t=this.previewFiles.getAllEntries();this.downloadFile(t)})}downloadFile(t){const e=t.map(t=>t.hash).join(",");let i=`${this.settings.getBaseUrl()}secure/uploads/download?hashes=${e}`;this.data.ticketEntry&&(i+="&ticketEntry=true"),Object(s.a)(i)}urlTransformer(t){return`${t.url}?ticketEntry=true`}}return t.\u0275fac=function(e){return new(e||t)(n.Rb(n.l),n.Rb(o.a),n.Rb(a.a),n.Rb(c.a),n.Rb(r.a))},t.\u0275cmp=n.Lb({type:t,selectors:[["file-preview-overlay"]],viewQuery:function(t,e){var i;1&t&&(n.Jc(w,!0,n.l),n.Sc(x,!0,n.l)),2&t&&(n.yc(i=n.gc())&&(e.previewContainer=i.first),n.yc(i=n.gc())&&(e.optionsButton=i.first))},decls:3,vars:2,consts:[[3,"showCloseButton","closed"],[3,"files"],["previewContainer",""]],template:function(t,e){1&t&&(n.Xb(0,"file-preview-toolbar",0),n.fc("closed",(function(t){return e.closeOverlay()})),n.Wb(),n.Sb(1,"preview-container",1,2)),2&t&&(n.rc("showCloseButton",!0),n.Db(1),n.rc("files",e.entries))},directives:[v,y.a],styles:["[_nghost-%COMP%]{display:block;width:100vw;height:100vh;background-color:rgba(0,0,0,.9);color:var(--be-accent-contrast);overflow:auto;position:relative}preview-container[_ngcontent-%COMP%]{margin:60px 0;min-height:calc(100% - 120px)}"],changeDetection:0}),t})(),_=(()=>{class t{constructor(){this.iconsMap={text:"insert-drive-file",audio:"volume-up",video:"videocam",document:"assignment",image:"image"}}getFileType(t){return t.split("/")[0]}getIconName(t){const e=this.getFileType(t);return this.iconsMap[e]||this.iconsMap.text}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=n.Nb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var C=i("dz5c"),S=i("h586"),X=i("6SKC");function I(t,e){if(1&t){const t=n.Yb();n.Xb(0,"button",6),n.fc("click",(function(e){n.Cc(t);const i=n.jc().$implicit;return n.jc().detachEntry(i),e.stopPropagation()})),n.Sb(1,"mat-icon",7),n.Wb()}}function O(t,e){if(1&t){const t=n.Yb();n.Xb(0,"div",1),n.fc("click",(function(i){n.Cc(t);const r=e.$implicit;return n.jc().showPreviewOverlay(r)})),n.Sb(1,"mat-icon",2),n.Xb(2,"div",3),n.Nc(3),n.Wb(),n.Xb(4,"div",4),n.Nc(5),n.kc(6,"formattedFileSize"),n.Wb(),n.Lc(7,I,2,0,"button",5),n.Wb()}if(2&t){const t=e.$implicit,i=n.jc();n.Db(1),n.rc("svgIcon",i.mime.getIconName(t.mime))("ngClass",i.mime.getIconName(t.mime)),n.Db(2),n.Oc(t.name),n.Db(2),n.Oc(n.lc(6,5,t.file_size)),n.Db(2),n.rc("ngIf",i.cancelButtonVisible)}}i.d(e,"a",(function(){return W}));let W=(()=>{class t{constructor(t,e,i){this.mime=t,this.overlay=e,this.uploadQueue=i,this.cancelButtonVisible=!0,this.detached=new n.o}detachEntry(t){const e=this.attachments.findIndex(e=>e.id===t.id);e>-1&&(this.attachments.splice(e,1),this.detached.emit(t))}showPreviewOverlay(t){this.overlay.open(k,{position:"center",origin:"global",data:{entries:[t],ticketEntry:!0}})}}return t.\u0275fac=function(e){return new(e||t)(n.Rb(_),n.Rb(C.a),n.Rb(S.a))},t.\u0275cmp=n.Lb({type:t,selectors:[["reply-attachment-list"]],inputs:{attachments:"attachments",cancelButtonVisible:"cancelButtonVisible"},outputs:{detached:"detached"},decls:1,vars:1,consts:[["class","attachments-list-item",3,"click",4,"ngFor","ngForOf"],[1,"attachments-list-item",3,"click"],[1,"attachment-info","type-icon",3,"svgIcon","ngClass"],[1,"attachment-info","name"],[1,"attachment-info","size"],["class","remove-attachment","type","button","mat-icon-button","",3,"click",4,"ngIf"],["type","button","mat-icon-button","",1,"remove-attachment",3,"click"],["svgIcon","close"]],template:function(t,e){1&t&&n.Lc(0,O,8,7,"div",0),2&t&&n.rc("ngForOf",e.attachments)},directives:[l.s,d.a,l.q,l.t,u.b],pipes:[X.a],styles:["reply-attachment-list{display:-webkit-box;display:flex;flex-wrap:wrap;color:var(--be-secondary-text)}reply-attachment-list .attachments-list-item{border:1px solid var(--be-divider-default);margin:0 10px 10px 0;position:relative;height:45px;line-height:45px;border-radius:3px;-webkit-box-flex:0;flex:0 1 auto;min-width:200px;padding:0 8px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer}reply-attachment-list .attachments-list-item .attachment-info{display:inline-block;vertical-align:middle}reply-attachment-list .attachments-list-item .attachment-info svg{vertical-align:top}reply-attachment-list .attachments-list-item .attachment-info.name{max-width:115px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-weight:500}reply-attachment-list .attachments-list-item .attachment-info.type-icon{margin-right:3px}reply-attachment-list .attachments-list-item .attachment-info.type-icon.image,reply-attachment-list .attachments-list-item .attachment-info.type-icon.videocam,reply-attachment-list .attachments-list-item .attachment-info.type-icon.volume-up{color:#db4437}reply-attachment-list .attachments-list-item .attachment-info.type-icon.insert-drive-file{color:#4285f4}reply-attachment-list .attachments-list-item .attachment-info.type-icon.assignment{color:#0f9d58}reply-attachment-list .attachments-list-item .size{font-size:1.1rem;margin:0 10px 0 5px}"],encapsulation:2,changeDetection:0}),t})()},"8RV8":function(t,e,i){"use strict";i.d(e,"a",(function(){return v}));var n=i("0IaG"),r=i("3Pt+"),s=i("Kj3r"),o=i("/uUt"),a=i("eIep"),c=i("JIr8"),l=i("2Vo4"),u=i("LRne"),d=i("fXoL"),h=i("mWN8"),b=i("Rd8u"),p=i("NFeN"),f=i("FBzJ"),g=i("ofXK");function m(t,e){if(1&t){const t=d.Yb();d.Xb(0,"div",9),d.fc("click",(function(i){d.Cc(t);const n=e.$implicit;return d.jc().close(n)})),d.Sb(1,"img",10),d.Xb(2,"div",11),d.Xb(3,"div",12),d.Nc(4),d.Wb(),d.Xb(5,"div",13),d.Nc(6),d.Wb(),d.Wb(),d.Wb()}if(2&t){const t=e.$implicit;d.Db(1),d.rc("src",t.avatar,d.Fc),d.Db(3),d.Oc(t.display_name),d.Db(2),d.Oc(t.email)}}let v=(()=>{class t{constructor(t,e,i){this.dialogRef=t,this.data=e,this.users=i,this.searchFormControl=new r.h,this.loading$=new l.a(!1),this.users$=new l.a([])}ngOnInit(){this.searchFormControl.valueChanges.pipe(Object(s.a)(250),Object(o.a)(),Object(a.a)(t=>this.searchUsers(t)),Object(c.a)(()=>Object(u.a)([]))).subscribe(t=>{this.users$.next(t),this.loading$.next(!1)})}searchUsers(t){return this.loading$.next(!0),t?this.users.getAll({query:t}):Object(u.a)([])}close(t){this.dialogRef.close(t)}}return t.\u0275fac=function(e){return new(e||t)(d.Rb(n.h),d.Rb(n.a),d.Rb(h.a))},t.\u0275cmp=d.Lb({type:t,selectors:[["find-user-modal"]],decls:13,vars:7,consts:[[1,"modal-header"],["mat-dialog-title","","trans",""],["type","button","tabindex","-1",1,"no-style","close-button",3,"click"],["svgIcon","close"],[1,"input-container","search-input-container"],["type","text","placeholder","Search for user by name or email...",3,"formControl"],[1,"small",3,"isVisible"],[1,"users"],["class","user",3,"click",4,"ngFor","ngForOf"],[1,"user",3,"click"],[3,"src"],[1,"meta","overflow-hidden"],[1,"name","overflow-hidden"],[1,"email","overflow-hidden"]],template:function(t,e){1&t&&(d.Xb(0,"div",0),d.Xb(1,"h2",1),d.Nc(2,"Find User"),d.Wb(),d.Xb(3,"button",2),d.fc("click",(function(t){return e.close()})),d.Sb(4,"mat-icon",3),d.Wb(),d.Wb(),d.Xb(5,"mat-dialog-content"),d.Xb(6,"div",4),d.Sb(7,"input",5),d.Sb(8,"loading-indicator",6),d.kc(9,"async"),d.Wb(),d.Xb(10,"div",7),d.Lc(11,m,7,3,"div",8),d.kc(12,"async"),d.Wb(),d.Wb()),2&t&&(d.Db(7),d.rc("formControl",e.searchFormControl),d.Db(1),d.rc("isVisible",d.lc(9,3,e.loading$)),d.Db(3),d.rc("ngForOf",d.lc(12,5,e.users$)))},directives:[n.i,b.a,p.a,n.f,r.c,r.t,r.i,f.a,g.s],pipes:[g.b],styles:["[_nghost-%COMP%]{display:block;width:500px;max-width:100%}.modal-header[_ngcontent-%COMP%]{margin-bottom:15px}.search-input-container[_ngcontent-%COMP%]{width:100%;margin-bottom:30px;position:relative}loading-indicator[_ngcontent-%COMP%]{top:12px;right:12px}.users[_ngcontent-%COMP%]{flex-wrap:wrap;-webkit-box-pack:justify;justify-content:space-between}.user[_ngcontent-%COMP%], .users[_ngcontent-%COMP%]{display:-webkit-box;display:flex}.user[_ngcontent-%COMP%]{width:calc(50% - 10px);flex-shrink:0;min-width:0;margin-bottom:20px;cursor:pointer}.user[_ngcontent-%COMP%]:hover{color:var(--be-accent-default)}.user[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50px;height:50px;flex-shrink:0;margin-right:10px;border-radius:4px;overflow:hidden}.user[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{color:var(--be-text);font-size:1.5rem;margin-bottom:5px}.user[_ngcontent-%COMP%]   .email[_ngcontent-%COMP%]{color:var(--be-secondary-text)}.overflow-hidden[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis}"],changeDetection:0}),t})()},"90cg":function(t,e,i){"use strict";e.isPromise=function(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}},"9AGB":function(t,e,i){"use strict";var n=i("w5QO");function r(t){return t?1===t.length?t[0]:function(e){return t.reduce((function(t,e){return e(t)}),e)}:n.noop}e.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return r(t)},e.pipeFromArray=r},"9VjZ":function(t,e,i){"use strict";i.d(e,"a",(function(){return y}));var n=i("fXoL"),r=i("tyNb"),s=i("oVOl"),o=i("twBr"),a=i("wWhK"),c=i("j/pe"),l=i("pfRy"),u=i("b7Mq"),d=i("qH/R"),h=i("3H9V"),b=i("ofXK"),p=i("FBzJ"),f=i("H4ap");function g(t,e){1&t&&n.Sb(0,"conversation-sidebar")}const m=[[["","toolbar-content",""]]],v=["[toolbar-content]"];let y=(()=>{class t{constructor(t,e,i,n,r){this.route=t,this.uploads=e,this.currentUser=i,this.conversation=n,this.el=r,this.hideBackButton=!1,this.hideSidebar=!1}ngOnInit(){this.route.data.subscribe(t=>{this.conversation.init(t.ticket),this.el.nativeElement.focus()})}}return t.\u0275fac=function(e){return new(e||t)(n.Rb(r.a),n.Rb(s.a),n.Rb(o.a),n.Rb(a.a),n.Rb(n.l))},t.\u0275cmp=n.Lb({type:t,selectors:[["conversation"]],inputs:{hideBackButton:"hideBackButton",hideSidebar:"hideSidebar"},ngContentSelectors:v,decls:10,vars:3,consts:[[1,"conversation-container"],[3,"hideBackButton"],["conversationInfiniteScroll","",1,"ticket-container"],[4,"ngIf"],[1,"overlay",3,"isVisible"]],template:function(t,e){1&t&&(n.qc(m),n.Vb(0),n.Xb(1,"div",0),n.Xb(2,"conversation-toolbar",1),n.pc(3),n.Wb(),n.Xb(4,"div",2),n.Sb(5,"conversation-header"),n.Sb(6,"conversation-text-editor"),n.Sb(7,"conversation-replies"),n.Wb(),n.Wb(),n.Lc(8,g,1,0,"conversation-sidebar",3),n.Ub(),n.Sb(9,"loading-indicator",4)),2&t&&(n.Db(2),n.rc("hideBackButton",e.hideBackButton),n.Db(6),n.rc("ngIf",!e.hideSidebar),n.Db(1),n.rc("isVisible",e.conversation.replies.isLoading||e.conversation.isLoading))},directives:[c.a,l.a,u.a,d.a,h.a,b.t,p.a,f.a],styles:["conversation{display:-webkit-box;display:flex;position:relative}conversation .conversation-container{-webkit-box-flex:1;flex:1 1 auto;min-width:0;height:calc(100vh - 70px);overflow:auto}conversation .conversation-container.invisible{visibility:hidden}conversation .ticket-container{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;height:calc(100% - 60px);overflow:auto}"],encapsulation:2}),t})()},A5z7:function(t,e,i){"use strict";i.d(e,"a",(function(){return C})),i.d(e,"b",(function(){return L})),i.d(e,"c",(function(){return R})),i.d(e,"d",(function(){return S})),i.d(e,"e",(function(){return E}));var n=i("FtGj"),r=i("fXoL"),s=i("FKr1"),o=i("8LU1"),a=i("XNiG"),c=i("VRyK"),l=i("IzEk"),u=i("1G5W"),d=i("JX91"),h=i("R1ws"),b=i("u47x"),p=i("0EQZ"),f=i("kmnG"),g=i("nLfN"),m=i("cH1L"),v=i("3Pt+");const y=["*"];class w{constructor(t){this._elementRef=t}}const x=Object(s.x)(Object(s.y)(Object(s.z)(w)),"primary");let k=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Mb({type:t,selectors:[["mat-chip-avatar"],["","matChipAvatar",""]],hostAttrs:[1,"mat-chip-avatar"]}),t})(),_=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Mb({type:t,selectors:[["mat-chip-trailing-icon"],["","matChipTrailingIcon",""]],hostAttrs:[1,"mat-chip-trailing-icon"]}),t})(),C=(()=>{class t extends x{constructor(t,e,i,n,o,c){super(t),this._elementRef=t,this._ngZone=e,this._changeDetectorRef=c,this._hasFocus=!1,this.chipListSelectable=!0,this._chipListMultiple=!1,this._selected=!1,this._selectable=!0,this._removable=!0,this._onFocus=new a.a,this._onBlur=new a.a,this.selectionChange=new r.o,this.destroyed=new r.o,this.removed=new r.o,this._addHostClassName(),this._chipRipple=new s.u(this,e,t,i),this._chipRipple.setupTriggerEvents(t),this.rippleConfig=n||{},this._animationsDisabled="NoopAnimations"===o}get rippleDisabled(){return this.disabled||this.disableRipple||!!this.rippleConfig.disabled}get selected(){return this._selected}set selected(t){const e=Object(o.c)(t);e!==this._selected&&(this._selected=e,this._dispatchSelectionChange())}get value(){return void 0!==this._value?this._value:this._elementRef.nativeElement.textContent}set value(t){this._value=t}get selectable(){return this._selectable&&this.chipListSelectable}set selectable(t){this._selectable=Object(o.c)(t)}get removable(){return this._removable}set removable(t){this._removable=Object(o.c)(t)}get ariaSelected(){return this.selectable&&(this._chipListMultiple||this.selected)?this.selected.toString():null}_addHostClassName(){const t=this._elementRef.nativeElement;t.hasAttribute("mat-basic-chip")||"mat-basic-chip"===t.tagName.toLowerCase()?t.classList.add("mat-basic-chip"):t.classList.add("mat-standard-chip")}ngOnDestroy(){this.destroyed.emit({chip:this}),this._chipRipple._removeTriggerEvents()}select(){this._selected||(this._selected=!0,this._dispatchSelectionChange(),this._markForCheck())}deselect(){this._selected&&(this._selected=!1,this._dispatchSelectionChange(),this._markForCheck())}selectViaInteraction(){this._selected||(this._selected=!0,this._dispatchSelectionChange(!0),this._markForCheck())}toggleSelected(t=!1){return this._selected=!this.selected,this._dispatchSelectionChange(t),this._markForCheck(),this.selected}focus(){this._hasFocus||(this._elementRef.nativeElement.focus(),this._onFocus.next({chip:this})),this._hasFocus=!0}remove(){this.removable&&this.removed.emit({chip:this})}_handleClick(t){this.disabled?t.preventDefault():t.stopPropagation()}_handleKeydown(t){if(!this.disabled)switch(t.keyCode){case n.e:case n.c:this.remove(),t.preventDefault();break;case n.v:this.selectable&&this.toggleSelected(!0),t.preventDefault()}}_blur(){this._ngZone.onStable.asObservable().pipe(Object(l.a)(1)).subscribe(()=>{this._ngZone.run(()=>{this._hasFocus=!1,this._onBlur.next({chip:this})})})}_dispatchSelectionChange(t=!1){this.selectionChange.emit({source:this,isUserInput:t,selected:this._selected})}_markForCheck(){this._changeDetectorRef&&this._changeDetectorRef.markForCheck()}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(r.l),r.Rb(r.A),r.Rb(g.a),r.Rb(s.h,8),r.Rb(h.a,8),r.Rb(r.h))},t.\u0275dir=r.Mb({type:t,selectors:[["mat-basic-chip"],["","mat-basic-chip",""],["mat-chip"],["","mat-chip",""]],contentQueries:function(t,e,i){var n;1&t&&(r.Jb(i,k,!0),r.Jb(i,_,!0),r.Jb(i,S,!0)),2&t&&(r.yc(n=r.gc())&&(e.avatar=n.first),r.yc(n=r.gc())&&(e.trailingIcon=n.first),r.yc(n=r.gc())&&(e.removeIcon=n.first))},hostAttrs:["role","option",1,"mat-chip"],hostVars:14,hostBindings:function(t,e){1&t&&r.fc("click",(function(t){return e._handleClick(t)}))("keydown",(function(t){return e._handleKeydown(t)}))("focus",(function(t){return e.focus()}))("blur",(function(t){return e._blur()})),2&t&&(r.Eb("tabindex",e.disabled?null:-1)("disabled",e.disabled||null)("aria-disabled",e.disabled.toString())("aria-selected",e.ariaSelected),r.Hb("mat-chip-selected",e.selected)("mat-chip-with-avatar",e.avatar)("mat-chip-with-trailing-icon",e.trailingIcon||e.removeIcon)("mat-chip-disabled",e.disabled)("_mat-animation-noopable",e._animationsDisabled))},inputs:{color:"color",disabled:"disabled",disableRipple:"disableRipple",selected:"selected",value:"value",selectable:"selectable",removable:"removable"},outputs:{selectionChange:"selectionChange",destroyed:"destroyed",removed:"removed"},exportAs:["matChip"],features:[r.Ab]}),t})(),S=(()=>{class t{constructor(t){this._parentChip=t}_handleClick(t){const e=this._parentChip;e.removable&&!e.disabled&&e.remove(),t.stopPropagation()}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(C))},t.\u0275dir=r.Mb({type:t,selectors:[["","matChipRemove",""]],hostAttrs:["type","button",1,"mat-chip-remove","mat-chip-trailing-icon"],hostBindings:function(t,e){1&t&&r.fc("click",(function(t){return e._handleClick(t)}))}}),t})();const X=new r.r("mat-chips-default-options");class I{constructor(t,e,i,n){this._defaultErrorStateMatcher=t,this._parentForm=e,this._parentFormGroup=i,this.ngControl=n}}const O=Object(s.A)(I);let W=0;class D{constructor(t,e){this.source=t,this.value=e}}let R=(()=>{class t extends O{constructor(t,e,i,n,s,o,c){super(o,n,s,c),this._elementRef=t,this._changeDetectorRef=e,this._dir=i,this.ngControl=c,this.controlType="mat-chip-list",this._lastDestroyedChipIndex=null,this._destroyed=new a.a,this._uid=`mat-chip-list-${W++}`,this._tabIndex=0,this._userTabIndex=null,this._onTouched=()=>{},this._onChange=()=>{},this._multiple=!1,this._compareWith=(t,e)=>t===e,this._required=!1,this._disabled=!1,this.ariaOrientation="horizontal",this._selectable=!0,this.change=new r.o,this.valueChange=new r.o,this.ngControl&&(this.ngControl.valueAccessor=this)}get selected(){return this.multiple?this._selectionModel.selected:this._selectionModel.selected[0]}get role(){return this.empty?null:"listbox"}get multiple(){return this._multiple}set multiple(t){this._multiple=Object(o.c)(t),this._syncChipsState()}get compareWith(){return this._compareWith}set compareWith(t){this._compareWith=t,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(t){this.writeValue(t),this._value=t}get id(){return this._chipInput?this._chipInput.id:this._uid}get required(){return this._required}set required(t){this._required=Object(o.c)(t),this.stateChanges.next()}get placeholder(){return this._chipInput?this._chipInput.placeholder:this._placeholder}set placeholder(t){this._placeholder=t,this.stateChanges.next()}get focused(){return this._chipInput&&this._chipInput.focused||this._hasFocusedChip()}get empty(){return(!this._chipInput||this._chipInput.empty)&&0===this.chips.length}get shouldLabelFloat(){return!this.empty||this.focused}get disabled(){return this.ngControl?!!this.ngControl.disabled:this._disabled}set disabled(t){this._disabled=Object(o.c)(t),this._syncChipsState()}get selectable(){return this._selectable}set selectable(t){this._selectable=Object(o.c)(t),this.chips&&this.chips.forEach(t=>t.chipListSelectable=this._selectable)}set tabIndex(t){this._userTabIndex=t,this._tabIndex=t}get chipSelectionChanges(){return Object(c.a)(...this.chips.map(t=>t.selectionChange))}get chipFocusChanges(){return Object(c.a)(...this.chips.map(t=>t._onFocus))}get chipBlurChanges(){return Object(c.a)(...this.chips.map(t=>t._onBlur))}get chipRemoveChanges(){return Object(c.a)(...this.chips.map(t=>t.destroyed))}ngAfterContentInit(){this._keyManager=new b.g(this.chips).withWrap().withVerticalOrientation().withHorizontalOrientation(this._dir?this._dir.value:"ltr"),this._dir&&this._dir.change.pipe(Object(u.a)(this._destroyed)).subscribe(t=>this._keyManager.withHorizontalOrientation(t)),this._keyManager.tabOut.pipe(Object(u.a)(this._destroyed)).subscribe(()=>{this._allowFocusEscape()}),this.chips.changes.pipe(Object(d.a)(null),Object(u.a)(this._destroyed)).subscribe(()=>{this.disabled&&Promise.resolve().then(()=>{this._syncChipsState()}),this._resetChips(),this._initializeSelection(),this._updateTabIndex(),this._updateFocusForDestroyedChips(),this.stateChanges.next()})}ngOnInit(){this._selectionModel=new p.c(this.multiple,void 0,!1),this.stateChanges.next()}ngDoCheck(){this.ngControl&&this.updateErrorState()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete(),this.stateChanges.complete(),this._dropSubscriptions()}registerInput(t){this._chipInput=t}setDescribedByIds(t){this._ariaDescribedby=t.join(" ")}writeValue(t){this.chips&&this._setSelectionByValue(t,!1)}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t,this.stateChanges.next()}onContainerClick(t){this._originatesFromChip(t)||this.focus()}focus(t){this.disabled||this._chipInput&&this._chipInput.focused||(this.chips.length>0?(this._keyManager.setFirstItemActive(),this.stateChanges.next()):(this._focusInput(t),this.stateChanges.next()))}_focusInput(t){this._chipInput&&this._chipInput.focus(t)}_keydown(t){const e=t.target;t.keyCode===n.c&&this._isInputEmpty(e)?(this._keyManager.setLastItemActive(),t.preventDefault()):e&&e.classList.contains("mat-chip")&&(t.keyCode===n.j?(this._keyManager.setFirstItemActive(),t.preventDefault()):t.keyCode===n.g?(this._keyManager.setLastItemActive(),t.preventDefault()):this._keyManager.onKeydown(t),this.stateChanges.next())}_updateTabIndex(){this._tabIndex=this._userTabIndex||(0===this.chips.length?-1:0)}_updateFocusForDestroyedChips(){if(null!=this._lastDestroyedChipIndex)if(this.chips.length){const t=Math.min(this._lastDestroyedChipIndex,this.chips.length-1);this._keyManager.setActiveItem(t)}else this.focus();this._lastDestroyedChipIndex=null}_isValidIndex(t){return t>=0&&t<this.chips.length}_isInputEmpty(t){return!(!t||"input"!==t.nodeName.toLowerCase()||t.value)}_setSelectionByValue(t,e=!0){if(this._clearSelection(),this.chips.forEach(t=>t.deselect()),Array.isArray(t))t.forEach(t=>this._selectValue(t,e)),this._sortValues();else{const i=this._selectValue(t,e);i&&e&&this._keyManager.setActiveItem(i)}}_selectValue(t,e=!0){const i=this.chips.find(e=>null!=e.value&&this._compareWith(e.value,t));return i&&(e?i.selectViaInteraction():i.select(),this._selectionModel.select(i)),i}_initializeSelection(){Promise.resolve().then(()=>{(this.ngControl||this._value)&&(this._setSelectionByValue(this.ngControl?this.ngControl.value:this._value,!1),this.stateChanges.next())})}_clearSelection(t){this._selectionModel.clear(),this.chips.forEach(e=>{e!==t&&e.deselect()}),this.stateChanges.next()}_sortValues(){this._multiple&&(this._selectionModel.clear(),this.chips.forEach(t=>{t.selected&&this._selectionModel.select(t)}),this.stateChanges.next())}_propagateChanges(t){let e=null;e=Array.isArray(this.selected)?this.selected.map(t=>t.value):this.selected?this.selected.value:t,this._value=e,this.change.emit(new D(this,e)),this.valueChange.emit(e),this._onChange(e),this._changeDetectorRef.markForCheck()}_blur(){this._hasFocusedChip()||this._keyManager.setActiveItem(-1),this.disabled||(this._chipInput?setTimeout(()=>{this.focused||this._markAsTouched()}):this._markAsTouched())}_markAsTouched(){this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next()}_allowFocusEscape(){-1!==this._tabIndex&&(this._tabIndex=-1,setTimeout(()=>{this._tabIndex=this._userTabIndex||0,this._changeDetectorRef.markForCheck()}))}_resetChips(){this._dropSubscriptions(),this._listenToChipsFocus(),this._listenToChipsSelection(),this._listenToChipsRemoved()}_dropSubscriptions(){this._chipFocusSubscription&&(this._chipFocusSubscription.unsubscribe(),this._chipFocusSubscription=null),this._chipBlurSubscription&&(this._chipBlurSubscription.unsubscribe(),this._chipBlurSubscription=null),this._chipSelectionSubscription&&(this._chipSelectionSubscription.unsubscribe(),this._chipSelectionSubscription=null),this._chipRemoveSubscription&&(this._chipRemoveSubscription.unsubscribe(),this._chipRemoveSubscription=null)}_listenToChipsSelection(){this._chipSelectionSubscription=this.chipSelectionChanges.subscribe(t=>{t.source.selected?this._selectionModel.select(t.source):this._selectionModel.deselect(t.source),this.multiple||this.chips.forEach(t=>{!this._selectionModel.isSelected(t)&&t.selected&&t.deselect()}),t.isUserInput&&this._propagateChanges()})}_listenToChipsFocus(){this._chipFocusSubscription=this.chipFocusChanges.subscribe(t=>{let e=this.chips.toArray().indexOf(t.chip);this._isValidIndex(e)&&this._keyManager.updateActiveItem(e),this.stateChanges.next()}),this._chipBlurSubscription=this.chipBlurChanges.subscribe(()=>{this._blur(),this.stateChanges.next()})}_listenToChipsRemoved(){this._chipRemoveSubscription=this.chipRemoveChanges.subscribe(t=>{const e=t.chip,i=this.chips.toArray().indexOf(t.chip);this._isValidIndex(i)&&e._hasFocus&&(this._lastDestroyedChipIndex=i)})}_originatesFromChip(t){let e=t.target;for(;e&&e!==this._elementRef.nativeElement;){if(e.classList.contains("mat-chip"))return!0;e=e.parentElement}return!1}_hasFocusedChip(){return this.chips.some(t=>t._hasFocus)}_syncChipsState(){this.chips&&this.chips.forEach(t=>{t.disabled=this._disabled,t._chipListMultiple=this.multiple})}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(r.l),r.Rb(r.h),r.Rb(m.c,8),r.Rb(v.v,8),r.Rb(v.l,8),r.Rb(s.d),r.Rb(v.s,10))},t.\u0275cmp=r.Lb({type:t,selectors:[["mat-chip-list"]],contentQueries:function(t,e,i){var n;1&t&&r.Jb(i,C,!0),2&t&&r.yc(n=r.gc())&&(e.chips=n)},hostAttrs:[1,"mat-chip-list"],hostVars:15,hostBindings:function(t,e){1&t&&r.fc("focus",(function(t){return e.focus()}))("blur",(function(t){return e._blur()}))("keydown",(function(t){return e._keydown(t)})),2&t&&(r.ac("id",e._uid),r.Eb("tabindex",e.disabled?null:e._tabIndex)("aria-describedby",e._ariaDescribedby||null)("aria-required",e.role?e.required:null)("aria-disabled",e.disabled.toString())("aria-invalid",e.errorState)("aria-multiselectable",e.multiple)("role",e.role)("aria-orientation",e.ariaOrientation),r.Hb("mat-chip-list-disabled",e.disabled)("mat-chip-list-invalid",e.errorState)("mat-chip-list-required",e.required))},inputs:{ariaOrientation:["aria-orientation","ariaOrientation"],multiple:"multiple",compareWith:"compareWith",value:"value",required:"required",placeholder:"placeholder",disabled:"disabled",selectable:"selectable",tabIndex:"tabIndex",errorStateMatcher:"errorStateMatcher"},outputs:{change:"change",valueChange:"valueChange"},exportAs:["matChipList"],features:[r.Cb([{provide:f.b,useExisting:t}]),r.Ab],ngContentSelectors:y,decls:2,vars:0,consts:[[1,"mat-chip-list-wrapper"]],template:function(t,e){1&t&&(r.qc(),r.Xb(0,"div",0),r.pc(1),r.Wb())},styles:['.mat-chip{position:relative;overflow:hidden;box-sizing:border-box;-webkit-tap-highlight-color:transparent;transform:translateZ(0);border:none;-webkit-appearance:none;-moz-appearance:none}.mat-standard-chip{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:inline-flex;padding:7px 12px;border-radius:16px;align-items:center;cursor:default;min-height:32px;height:1px}._mat-animation-noopable.mat-standard-chip{transition:none;animation:none}.mat-standard-chip .mat-chip-remove.mat-icon{width:18px;height:18px}.mat-standard-chip::after{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit;opacity:0;content:"";pointer-events:none;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-standard-chip:hover::after{opacity:.12}.mat-standard-chip:focus{outline:none}.mat-standard-chip:focus::after{opacity:.16}.cdk-high-contrast-active .mat-standard-chip{outline:solid 1px}.cdk-high-contrast-active .mat-standard-chip:focus{outline:dotted 2px}.mat-standard-chip.mat-chip-disabled::after{opacity:0}.mat-standard-chip.mat-chip-disabled .mat-chip-remove,.mat-standard-chip.mat-chip-disabled .mat-chip-trailing-icon{cursor:default}.mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar,.mat-standard-chip.mat-chip-with-avatar{padding-top:0;padding-bottom:0}.mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar{padding-right:8px;padding-left:0}[dir=rtl] .mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar{padding-left:8px;padding-right:0}.mat-standard-chip.mat-chip-with-trailing-icon{padding-top:7px;padding-bottom:7px;padding-right:8px;padding-left:12px}[dir=rtl] .mat-standard-chip.mat-chip-with-trailing-icon{padding-left:8px;padding-right:12px}.mat-standard-chip.mat-chip-with-avatar{padding-left:0;padding-right:12px}[dir=rtl] .mat-standard-chip.mat-chip-with-avatar{padding-right:0;padding-left:12px}.mat-standard-chip .mat-chip-avatar{width:24px;height:24px;margin-right:8px;margin-left:4px}[dir=rtl] .mat-standard-chip .mat-chip-avatar{margin-left:8px;margin-right:4px}.mat-standard-chip .mat-chip-remove,.mat-standard-chip .mat-chip-trailing-icon{width:18px;height:18px;cursor:pointer}.mat-standard-chip .mat-chip-remove,.mat-standard-chip .mat-chip-trailing-icon{margin-left:8px;margin-right:0}[dir=rtl] .mat-standard-chip .mat-chip-remove,[dir=rtl] .mat-standard-chip .mat-chip-trailing-icon{margin-right:8px;margin-left:0}.mat-chip-list-wrapper{display:flex;flex-direction:row;flex-wrap:wrap;align-items:center;margin:-4px}.mat-chip-list-wrapper input.mat-input-element,.mat-chip-list-wrapper .mat-standard-chip{margin:4px}.mat-chip-list-stacked .mat-chip-list-wrapper{flex-direction:column;align-items:flex-start}.mat-chip-list-stacked .mat-chip-list-wrapper .mat-standard-chip{width:100%}.mat-chip-avatar{border-radius:50%;justify-content:center;align-items:center;display:flex;overflow:hidden;object-fit:cover}input.mat-chip-input{width:150px;margin:4px;flex:1 0 150px}\n'],encapsulation:2,changeDetection:0}),t})(),T=0,L=(()=>{class t{constructor(t,e){this._elementRef=t,this._defaultOptions=e,this.focused=!1,this._addOnBlur=!1,this.separatorKeyCodes=this._defaultOptions.separatorKeyCodes,this.chipEnd=new r.o,this.placeholder="",this.id=`mat-chip-list-input-${T++}`,this._disabled=!1,this._inputElement=this._elementRef.nativeElement}set chipList(t){t&&(this._chipList=t,this._chipList.registerInput(this))}get addOnBlur(){return this._addOnBlur}set addOnBlur(t){this._addOnBlur=Object(o.c)(t)}get disabled(){return this._disabled||this._chipList&&this._chipList.disabled}set disabled(t){this._disabled=Object(o.c)(t)}get empty(){return!this._inputElement.value}ngOnChanges(){this._chipList.stateChanges.next()}_keydown(t){t&&t.keyCode===n.x&&!Object(n.B)(t,"shiftKey")&&this._chipList._allowFocusEscape(),this._emitChipEnd(t)}_blur(){this.addOnBlur&&this._emitChipEnd(),this.focused=!1,this._chipList.focused||this._chipList._blur(),this._chipList.stateChanges.next()}_focus(){this.focused=!0,this._chipList.stateChanges.next()}_emitChipEnd(t){!this._inputElement.value&&t&&this._chipList._keydown(t),t&&!this._isSeparatorKey(t)||(this.chipEnd.emit({input:this._inputElement,value:this._inputElement.value}),t&&t.preventDefault())}_onInput(){this._chipList.stateChanges.next()}focus(t){this._inputElement.focus(t)}_isSeparatorKey(t){if(Object(n.B)(t))return!1;const e=this.separatorKeyCodes,i=t.keyCode;return Array.isArray(e)?e.indexOf(i)>-1:e.has(i)}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(r.l),r.Rb(X))},t.\u0275dir=r.Mb({type:t,selectors:[["input","matChipInputFor",""]],hostAttrs:[1,"mat-chip-input","mat-input-element"],hostVars:5,hostBindings:function(t,e){1&t&&r.fc("keydown",(function(t){return e._keydown(t)}))("blur",(function(t){return e._blur()}))("focus",(function(t){return e._focus()}))("input",(function(t){return e._onInput()})),2&t&&(r.ac("id",e.id),r.Eb("disabled",e.disabled||null)("placeholder",e.placeholder||null)("aria-invalid",e._chipList&&e._chipList.ngControl?e._chipList.ngControl.invalid:null)("aria-required",e._chipList&&e._chipList.required||null))},inputs:{separatorKeyCodes:["matChipInputSeparatorKeyCodes","separatorKeyCodes"],placeholder:"placeholder",id:"id",chipList:["matChipInputFor","chipList"],addOnBlur:["matChipInputAddOnBlur","addOnBlur"],disabled:"disabled"},outputs:{chipEnd:"matChipInputTokenEnd"},exportAs:["matChipInput","matChipInputFor"],features:[r.Bb()]}),t})();const P={separatorKeyCodes:[n.h]};let E=(()=>{class t{}return t.\u0275mod=r.Pb({type:t}),t.\u0275inj=r.Ob({factory:function(e){return new(e||t)},providers:[s.d,{provide:X,useValue:P}]}),t})()},"Bf/s":function(t,e,i){"use strict";i.d(e,"a",(function(){return d}));var n=i("ofXK"),r=i("vUXK"),s=i("+rOU"),o=i("bTqV"),a=i("X3pI"),c=i("dz5c"),l=i("7LS1"),u=i("fXoL");let d=(()=>{class t{}return t.\u0275mod=u.Pb({type:t}),t.\u0275inj=u.Ob({factory:function(e){return new(e||t)},providers:[c.a,l.a,{provide:r.a,useClass:r.b}],imports:[[n.c,s.h,o.c,a.a]]}),t})()},"CT6/":function(t,e,i){"use strict";i.r(e);var n=i("ofXK"),r=i("3Pt+"),s=i("tyNb"),o=i("M9IT"),a=i("Dh3D"),c=i("re4b"),l=i("Xd/8"),u=i("fXoL"),d=i("twBr"),h=i("Rd8u"),b=i("bTqV"),p=i("NFeN"),f=i("+0xr"),g=i("FBzJ"),m=i("A5z7"),v=i("CH4Q"),y=i("iB19");function w(t,e){1&t&&(u.Xb(0,"a",35),u.Nc(1,"New Request"),u.Wb())}function x(t,e){1&t&&(u.Xb(0,"mat-header-cell",2),u.Nc(1,"Subject"),u.Wb())}function k(t,e){if(1&t&&(u.Xb(0,"mat-cell"),u.Nc(1),u.Wb()),2&t){const t=e.$implicit;u.Db(1),u.Oc(t.subject)}}function _(t,e){1&t&&(u.Xb(0,"mat-header-cell",36),u.Nc(1,"ID"),u.Wb())}function C(t,e){if(1&t&&(u.Xb(0,"mat-cell",37),u.Nc(1),u.Wb()),2&t){const t=e.$implicit;u.Db(1),u.Pc("#",t.id,"")}}function S(t,e){1&t&&(u.Xb(0,"mat-header-cell",38),u.Nc(1,"Created"),u.Wb())}function X(t,e){if(1&t&&(u.Xb(0,"mat-cell",37),u.Nc(1),u.kc(2,"formattedDate"),u.Wb()),2&t){const t=e.$implicit;u.Db(1),u.Oc(u.lc(2,1,t.created_at))}}function I(t,e){1&t&&(u.Xb(0,"mat-header-cell",39),u.Nc(1,"Last Updated"),u.Wb())}function O(t,e){if(1&t&&(u.Xb(0,"mat-cell"),u.Nc(1),u.Wb()),2&t){const t=e.$implicit;u.Db(1),u.Oc(t.updated_at_formatted)}}function W(t,e){1&t&&(u.Xb(0,"mat-header-cell",2),u.Nc(1,"Status"),u.Wb())}function D(t,e){if(1&t&&(u.Xb(0,"mat-chip-list",41),u.Xb(1,"mat-chip",42),u.Nc(2),u.Wb(),u.Wb()),2&t){const t=e.ngIf,i=u.jc().$implicit;u.rc("selectable",!1),u.Db(1),u.rc("color",i.closed_at?"standard":"success"),u.Db(1),u.Oc(t.display_name)}}function R(t,e){if(1&t&&(u.Xb(0,"mat-cell"),u.Lc(1,D,3,3,"mat-chip-list",40),u.Wb()),2&t){const t=e.$implicit,i=u.jc();u.Db(1),u.rc("ngIf",i.getStatus(t))}}function T(t,e){1&t&&u.Sb(0,"mat-header-row")}function L(t,e){if(1&t){const t=u.Yb();u.Xb(0,"mat-row",43),u.fc("click",(function(i){u.Cc(t);const n=e.$implicit;return u.jc().openConversation(n)})),u.Wb()}2&t&&u.Hb("open",!e.$implicit.closed_at)}function P(t,e){1&t&&(u.Xb(0,"no-results-message"),u.Xb(1,"span",44),u.Nc(2,"Could not find any requests."),u.Wb(),u.Xb(3,"span",45),u.Xb(4,"a",46),u.Nc(5,"Create a request?"),u.Wb(),u.Wb(),u.Wb())}const E=function(){return["subject","id","created-at","last-updated","status"]},j=function(){return[5,10,15,20]};let M=(()=>{class t{constructor(t,e,i,n){this.paginator=t,this.currentUser=e,this.router=i,this.route=n,this.form=new r.k({query:new r.h(this.route.snapshot.queryParams.query||""),status:new r.h(this.route.snapshot.queryParams.status||"")})}ngOnInit(){this.dataSource=new l.a({uri:"users/"+this.currentUser.get("id")+"/tickets",dataPaginator:this.paginator,matPaginator:this.matPaginator,matSort:this.matSort}).init(),this.form.valueChanges.subscribe(t=>{console.log(t),this.dataSource.reload(t)})}ngOnDestroy(){this.dataSource.disconnect()}getStatus(t){return t.tags.filter(t=>"status"===t.type)[0]}openConversation(t){this.router.navigate(["/help-center/tickets",t.id])}}return t.\u0275fac=function(e){return new(e||t)(u.Rb(c.a),u.Rb(d.a),u.Rb(s.f),u.Rb(s.a))},t.\u0275cmp=u.Lb({type:t,selectors:[["customer-tickets-list"]],viewQuery:function(t,e){var i;1&t&&(u.Jc(a.a,!0),u.Jc(o.a,!0)),2&t&&(u.yc(i=u.gc())&&(e.matSort=i.first),u.yc(i=u.gc())&&(e.matPaginator=i.first))},features:[u.Cb([c.a])],decls:50,vars:22,consts:[[1,"container"],[1,"title"],["trans",""],["routerLink","/help-center/tickets/new","mat-raised-button","","color","accent","trans","",4,"ngIf"],[1,"filter-form",3,"formGroup"],[1,"input-container"],["for","customer-ticket-search","trans","",1,"hidden"],[1,"input-with-icon"],["type","text","id","customer-ticket-search","placeholder","Search requests...","trans-placeholder","","formControlName","query",1,"filter-input"],["mat-icon-button",""],["svgIcon","search"],[1,"input-container","status-input-container"],["for","customer-ticket-status","trans","",1,"hidden"],["id","customer-ticket-status","formControlName","status",1,"filter-input"],["value","","trans",""],["value","open","trans",""],["value","closed","trans",""],["value","pending","trans",""],["matSort","",1,"responsive-material-table",3,"dataSource"],["matColumnDef","subject"],["trans","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","id"],["mat-sort-header","","trans","",4,"matHeaderCellDef"],["class","hidden-on-mobile",4,"matCellDef"],["matColumnDef","created-at"],["mat-sort-header","created_at","trans","",4,"matHeaderCellDef"],["matColumnDef","last-updated"],["mat-sort-header","updated_at","trans","",4,"matHeaderCellDef"],["matColumnDef","status"],[4,"matHeaderRowDef"],[3,"open","click",4,"matRowDef","matRowDefColumns"],[4,"ngIf"],[3,"pageSize","pageSizeOptions"],[1,"overlay",3,"isVisible"],["routerLink","/help-center/tickets/new","mat-raised-button","","color","accent","trans",""],["mat-sort-header","","trans",""],[1,"hidden-on-mobile"],["mat-sort-header","created_at","trans",""],["mat-sort-header","updated_at","trans",""],[3,"selectable",4,"ngIf"],[3,"selectable"],["selected","","trans","",3,"color"],[3,"click"],["primary-text","","trans",""],["secondary-text",""],["routerLink","/help-center/tickets/new","trans",""]],template:function(t,e){1&t&&(u.Xb(0,"div",0),u.Xb(1,"div",1),u.Xb(2,"h1",2),u.Nc(3,"My requests"),u.Wb(),u.Lc(4,w,2,0,"a",3),u.kc(5,"async"),u.Wb(),u.Xb(6,"form",4),u.Xb(7,"div",5),u.Xb(8,"label",6),u.Nc(9,"Search requests"),u.Wb(),u.Xb(10,"div",7),u.Sb(11,"input",8),u.Xb(12,"button",9),u.Sb(13,"mat-icon",10),u.Wb(),u.Wb(),u.Wb(),u.Xb(14,"div",11),u.Xb(15,"label",12),u.Nc(16,"Status"),u.Wb(),u.Xb(17,"select",13),u.Xb(18,"option",14),u.Nc(19,"All Requests"),u.Wb(),u.Xb(20,"option",15),u.Nc(21,"Open Requests"),u.Wb(),u.Xb(22,"option",16),u.Nc(23,"Closed Requests"),u.Wb(),u.Xb(24,"option",17),u.Nc(25,"Awaiting your reply"),u.Wb(),u.Wb(),u.Wb(),u.Wb(),u.Xb(26,"mat-table",18),u.Vb(27,19),u.Lc(28,x,2,0,"mat-header-cell",20),u.Lc(29,k,2,1,"mat-cell",21),u.Ub(),u.Vb(30,22),u.Lc(31,_,2,0,"mat-header-cell",23),u.Lc(32,C,2,1,"mat-cell",24),u.Ub(),u.Vb(33,25),u.Lc(34,S,2,0,"mat-header-cell",26),u.Lc(35,X,3,3,"mat-cell",24),u.Ub(),u.Vb(36,27),u.Lc(37,I,2,0,"mat-header-cell",28),u.Lc(38,O,2,1,"mat-cell",21),u.Ub(),u.Vb(39,29),u.Lc(40,W,2,0,"mat-header-cell",20),u.Lc(41,R,2,1,"mat-cell",21),u.Ub(),u.Lc(42,T,1,0,"mat-header-row",30),u.Lc(43,L,1,2,"mat-row",31),u.Wb(),u.Lc(44,P,6,0,"no-results-message",32),u.kc(45,"async"),u.Sb(46,"mat-paginator",33),u.kc(47,"async"),u.Wb(),u.Sb(48,"loading-indicator",34),u.kc(49,"async")),2&t&&(u.Db(4),u.rc("ngIf",!u.lc(5,11,e.paginator.noResults$)),u.Db(2),u.rc("formGroup",e.form),u.Db(20),u.rc("dataSource",e.dataSource),u.Db(16),u.rc("matHeaderRowDef",u.vc(19,E)),u.Db(1),u.rc("matRowDefColumns",u.vc(20,E)),u.Db(1),u.rc("ngIf",u.lc(45,13,e.paginator.noResults$)),u.Db(2),u.Hb("hidden",!u.lc(47,15,e.paginator.noResults$)),u.rc("pageSize",15)("pageSizeOptions",u.vc(21,j)),u.Db(2),u.rc("isVisible",u.lc(49,17,e.paginator.loading$)))},directives:[h.a,n.t,r.J,r.u,r.l,r.c,r.t,r.j,b.b,p.a,r.F,r.y,r.I,f.j,a.a,f.c,f.e,f.b,f.g,f.i,o.a,g.a,s.i,b.a,f.d,f.a,a.b,m.c,m.a,f.f,f.h,v.a],pipes:[n.b,y.a],styles:["[_nghost-%COMP%]{display:block;width:100%;padding:30px 0 50px}.title[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;margin-bottom:30px;padding:0 20px}.title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:3.2rem;font-weight:400;margin:0}.title[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin-left:auto;height:36px}.filter-form[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;margin-bottom:35px;padding:0 10px}.status-input-container[_ngcontent-%COMP%]{max-width:200px;margin-left:15px}.input-with-icon[_ngcontent-%COMP%]{position:relative}.input-with-icon[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-left:45px}.input-with-icon[_ngcontent-%COMP%]   .mat-icon-button[_ngcontent-%COMP%]{position:absolute;left:8px;top:6px;color:var(--be-secondary-text)}.filter-input[_ngcontent-%COMP%]{border-radius:30px;height:50px}.mat-row[_ngcontent-%COMP%]{min-height:60px;cursor:pointer}.mat-row[_ngcontent-%COMP%]:hover{background-color:var(--be-accent-emphasis)}.mat-column-subject[_ngcontent-%COMP%]{white-space:nowrap;text-overflow:ellipsis;margin-right:25px}.mat-column-id[_ngcontent-%COMP%], .mat-column-status[_ngcontent-%COMP%]{-webkit-box-flex:0;flex:0 0 110px}.mat-column-created-at[_ngcontent-%COMP%], .mat-column-last-updated[_ngcontent-%COMP%]{-webkit-box-flex:0;flex:0 0 140px}.mat-chip[_ngcontent-%COMP%]{min-width:63px;-webkit-box-pack:center;justify-content:center;text-transform:capitalize}.mat-chip.mat-success[_ngcontent-%COMP%]{background-color:#43a047;color:#fff}.no-results-message[_ngcontent-%COMP%]{margin-top:60px;margin-bottom:60px}"]}),t})();var N=i("LsVx"),F=i("KKQg"),A=i("h586"),H=i("2Vo4"),V=i("jtHE"),U=i("nYR2"),Y=i("kmQS"),B=i("oVOl"),z=i("74SX"),$=i("i2dy"),K=i("S5uz"),q=i("Kj3r"),Q=i("/uUt"),G=i("eIep"),J=i("JIr8"),Z=i("LRne"),tt=i("KHvZ"),et=i("YdAL");function it(t,e){if(1&t){const t=u.Yb();u.Xb(0,"a",8),u.fc("click",(function(e){return u.Cc(t),u.jc().updateSearchLogger()})),u.Sb(1,"mat-icon",9),u.Xb(2,"span",10),u.Nc(3),u.Wb(),u.Wb()}if(2&t){const t=e.$implicit,i=u.jc();u.rc("routerLink",i.urls.article(t)),u.Db(3),u.Oc(t.title)}}let nt=(()=>{class t{constructor(t,e,i){this.helpCenter=t,this.urls=e,this.searchLogger=i,this.inputValue=new u.o,this.searchQuery=new r.h,this.articles=[],this.searching=!1}ngOnInit(){this.searchQuery.valueChanges.pipe(Object(q.a)(400),Object(Q.a)(),Object(G.a)(t=>this.searchArticles(t)),Object(J.a)(()=>Object(Z.a)({pagination:{data:[]}}))).subscribe(t=>{this.inputValue.emit(this.searchQuery.value),this.searching=!1,this.setSearchResults(t.pagination.data)})}searchArticles(t){return t?(this.searching=!0,this.helpCenter.findArticles({query:t,per_page:4,categories:this.categories})):Object(Z.a)({pagination:{data:[]}})}setSearchResults(t){t&&t.length?this.articles=t:setTimeout(()=>{this.articles=[]},300)}updateSearchLogger(){this.searchLogger.updateSession({clickedArticle:!0})}}return t.\u0275fac=function(e){return new(e||t)(u.Rb(tt.a),u.Rb(z.a),u.Rb(K.a))},t.\u0275cmp=u.Lb({type:t,selectors:[["suggested-articles-drawer"]],inputs:{placeholder:"placeholder",categories:"categories"},outputs:{inputValue:"inputValue"},decls:9,vars:7,consts:[[1,"suggestions-container"],[1,"input-container"],["type","text",1,"search-input",3,"formControl"],["svgIcon","search",1,"search-icon","input-icon"],[1,"results-container"],["trans","",1,"results-header"],["customScrollbar","",1,"results"],["class","result","target","_blank",3,"routerLink","click",4,"ngFor","ngForOf"],["target","_blank",1,"result",3,"routerLink","click"],["svgIcon","description"],[1,"title"]],template:function(t,e){1&t&&(u.Xb(0,"div",0),u.Xb(1,"div",1),u.Sb(2,"input",2),u.Sb(3,"mat-icon",3),u.Wb(),u.Xb(4,"section",4),u.Xb(5,"div",5),u.Nc(6,"Were you looking for:"),u.Wb(),u.Xb(7,"div",6),u.Lc(8,it,4,2,"a",7),u.Wb(),u.Wb(),u.Wb()),2&t&&(u.Hb("has-results",e.articles.length),u.Db(2),u.rc("formControl",e.searchQuery),u.Eb("placeholder",e.placeholder),u.Db(1),u.Hb("searching",e.searching),u.Db(5),u.rc("ngForOf",e.articles))},directives:[r.c,r.t,r.i,p.a,h.a,et.a,n.s,s.i],styles:["suggested-articles-drawer{display:block}suggested-articles-drawer .results-container{max-height:0;-webkit-transition:all .3s ease-out;transition:all .3s ease-out;margin:0;overflow:hidden}suggested-articles-drawer .results-container>.results-header{font-size:2.1rem;font-weight:300;margin-bottom:20px}suggested-articles-drawer .results-container>.results>.result{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;margin-bottom:12px;width:100%;color:var(--be-link);cursor:pointer}suggested-articles-drawer .results-container>.results>.result:hover{text-decoration:underline}suggested-articles-drawer .results-container>.results>.result>mat-icon{margin-right:10px}suggested-articles-drawer .results-container>.results>.result>.title{color:inherit}suggested-articles-drawer .suggestions-container .input-container{position:relative;width:100%}suggested-articles-drawer .suggestions-container .input-container>.input-icon{position:absolute;visibility:hidden;top:13px;right:11px;color:var(--be-secondary-text)}suggested-articles-drawer .suggestions-container .input-container>.input-icon.searching{visibility:visible;-webkit-animation:flickerAnimation .5s infinite;animation:flickerAnimation .5s infinite}@-webkit-keyframes flickerAnimation{0%{opacity:1}50%{opacity:.4}to{opacity:1}}@keyframes flickerAnimation{0%{opacity:1}50%{opacity:.4}to{opacity:1}}suggested-articles-drawer .suggestions-container.has-results .results-container{max-height:230px;margin:20px 0;-webkit-transition:all .3s ease-in;transition:all .3s ease-in}"],encapsulation:2}),t})();var rt=i("rG4v"),st=i("83jf");function ot(t,e){if(1&t&&(u.Xb(0,"option",25),u.Nc(1),u.Wb()),2&t){const t=e.$implicit;u.rc("ngValue",t),u.Db(1),u.Oc(t.name)}}function at(t,e){if(1&t&&(u.Xb(0,"div",26),u.Nc(1),u.Wb()),2&t){const t=u.jc().ngIf;u.Db(1),u.Oc(t.category||t.purchase_code)}}function ct(t,e){if(1&t&&(u.Xb(0,"div",27),u.Nc(1),u.Wb()),2&t){const t=u.jc().ngIf;u.Db(1),u.Oc(t.subject)}}function lt(t,e){if(1&t&&(u.Xb(0,"div",28),u.Nc(1),u.Wb()),2&t){const t=u.jc().ngIf;u.Db(1),u.Oc(t.body)}}function ut(t,e){if(1&t){const t=u.Yb();u.Xb(0,"form",8),u.fc("ngSubmit",(function(e){return u.Cc(t),u.jc(2).createTicket()})),u.Xb(1,"h1"),u.Nc(2),u.Wb(),u.Xb(3,"div",9),u.Xb(4,"label",10),u.Nc(5),u.Wb(),u.Xb(6,"select",11),u.fc("ngModelChange",(function(e){return u.Cc(t),u.jc(2).ticketModel.category=e})),u.Lc(7,ot,2,2,"option",12),u.Wb(),u.Lc(8,at,2,1,"div",13),u.Wb(),u.Xb(9,"div",14),u.Xb(10,"label",15),u.Nc(11),u.Wb(),u.Xb(12,"suggested-articles-drawer",16),u.fc("inputValue",(function(e){return u.Cc(t),u.jc(2).ticketModel.subject=e})),u.Wb(),u.Lc(13,ct,2,1,"div",17),u.Wb(),u.Xb(14,"div",18),u.Xb(15,"label",19),u.Nc(16),u.Wb(),u.Xb(17,"text-editor",20),u.fc("onFileUpload",(function(e){return u.Cc(t),u.jc(2).uploadFiles(e)}))("onChange",(function(e){return u.Cc(t),u.jc(2).ticketModel.body=e})),u.Wb(),u.Sb(18,"upload-progress-bar"),u.Lc(19,lt,2,1,"div",21),u.Wb(),u.Xb(20,"reply-attachment-list",22),u.fc("detached",(function(e){return u.Cc(t),u.jc(2).removeAttachment(e)})),u.kc(21,"async"),u.Wb(),u.Xb(22,"div",23),u.Xb(23,"button",24),u.Nc(24),u.Wb(),u.Wb(),u.Wb()}if(2&t){const t=e.ngIf,i=u.jc().ngIf,n=u.jc();u.Db(2),u.Oc(i.title),u.Db(3),u.Oc(i.categoryLabel),u.Db(1),u.rc("ngModel",n.ticketModel.category),u.Db(1),u.rc("ngForOf",n.ticketCategories),u.Db(1),u.rc("ngIf",t.category||t.purchase_code),u.Db(3),u.Oc(i.subjectLabel),u.Db(1),u.rc("categories",n.getArticleCategories()),u.Db(1),u.rc("ngIf",t.subject),u.Db(3),u.Oc(i.descriptionLabel),u.Db(1),u.rc("minHeight",230),u.Db(2),u.rc("ngIf",t.body),u.Db(1),u.rc("attachments",u.lc(21,13,n.attachments$)),u.Db(4),u.Oc(i.submitButtonText)}}function dt(t,e){if(1&t&&(u.Xb(0,"div",29),u.Xb(1,"div",30),u.Nc(2),u.Wb(),u.Xb(3,"div",31),u.Nc(4),u.Wb(),u.Wb()),2&t){const t=e.$implicit;u.Db(2),u.Oc(t.title),u.Db(2),u.Oc(t.content)}}function ht(t,e){if(1&t&&(u.Vb(0),u.Xb(1,"div",2),u.Lc(2,ut,25,15,"form",3),u.kc(3,"async"),u.Wb(),u.Xb(4,"div",4),u.Xb(5,"div",5),u.Nc(6),u.Wb(),u.Xb(7,"div",6),u.Lc(8,dt,5,2,"div",7),u.Wb(),u.Wb(),u.Ub()),2&t){const t=e.ngIf,i=u.jc();u.Db(2),u.rc("ngIf",u.lc(3,3,i.errors$)),u.Db(4),u.Oc(t.sidebarTitle),u.Db(2),u.rc("ngForOf",t.sidebarTips)}}let bt=(()=>{class t{constructor(t,e,i,n,r,s,o,a,c){this.settings=t,this.tickets=e,this.uploads=i,this.router=n,this.urls=r,this.route=s,this.toast=o,this.uploadQueue=a,this.searchLogger=c,this.errors$=new H.a({}),this.loading$=new H.a(!1),this.attachments$=new H.a([]),this.ticketCategories=[],this.ticketModel={},this.content$=new V.a(1),this.settings.all$().subscribe(()=>{this.content$.next(this.settings.getJson("hc.newTicket.appearance",{}))})}ngOnInit(){this.route.data.subscribe(t=>{this.ticketCategories=t.categories,this.ticketModel.category=this.ticketCategories[0]})}ngOnDestroy(){this.textEditor.destroyEditor()}createTicket(){this.loading$.next(!0);const t={subject:this.ticketModel.subject,body:this.ticketModel.body,category:this.ticketModel.category&&this.ticketModel.category.id,uploads:this.uploadQueue.getAllCompleted().map(t=>t.id)};this.tickets.create(t).pipe(Object(U.a)(()=>{this.loading$.next(!1)})).subscribe(()=>{this.searchLogger.updateSessionAndStore({createdTicket:!0}),this.router.navigate(this.urls.customerTicketList()),this.toast.open("Your request was successfully submitted.")},t=>{this.errors$.next(t.messages)})}uploadFiles(t){this.uploadQueue.start(t).subscribe(t=>{this.attachments$.next([...this.attachments$.value,t.fileEntry])})}removeAttachment(t){const e=this.attachments$.value.slice();for(let i=0;i<e.length;i++)e[i].id===t.id&&e.splice(i,1);this.attachments$.next(e)}getArticleCategories(){return this.ticketModel.category?this.ticketModel.category.categories.map(t=>t.id):[]}}return t.\u0275fac=function(e){return new(e||t)(u.Rb(Y.a),u.Rb(N.a),u.Rb(B.a),u.Rb(s.f),u.Rb(z.a),u.Rb(s.a),u.Rb($.a),u.Rb(A.a),u.Rb(K.a))},t.\u0275cmp=u.Lb({type:t,selectors:[["new-ticket"]],viewQuery:function(t,e){var i;1&t&&u.Sc(F.a,!0),2&t&&u.yc(i=u.gc())&&(e.textEditor=i.first)},hostAttrs:["id","new-ticket"],features:[u.Cb([N.a,A.a])],decls:4,vars:6,consts:[[4,"ngIf"],[1,"overlay",3,"isVisible"],[1,"left-column"],["ngNativeValidate","",3,"ngSubmit",4,"ngIf"],[1,"right-column"],[1,"header"],[1,"tips"],["class","tip-container",4,"ngFor","ngForOf"],["ngNativeValidate","",3,"ngSubmit"],[1,"input-container","category-input-container"],["for","category-select"],["name","category","id","category-select",3,"ngModel","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],["class","errors category-error",4,"ngIf"],[1,"input-container","subject-input-container"],["for","subject"],["id","subject","trans-placeholder","",3,"categories","inputValue"],["class","errors subject-error",4,"ngIf"],[1,"input-container","description-input-container"],["for","description"],["id","description","inlineUploadPrefix","ticket_images",3,"minHeight","onFileUpload","onChange"],["class","errors body-error",4,"ngIf"],[3,"attachments","detached"],[1,"buttons"],["mat-raised-button","","color","accent","type","submit",1,"submit-button"],[3,"ngValue"],[1,"errors","category-error"],[1,"errors","subject-error"],[1,"errors","body-error"],[1,"tip-container"],[1,"title"],[1,"content"]],template:function(t,e){1&t&&(u.Lc(0,ht,9,5,"ng-container",0),u.kc(1,"async"),u.Sb(2,"loading-indicator",1),u.kc(3,"async")),2&t&&(u.rc("ngIf",u.lc(1,2,e.content$)),u.Db(2),u.rc("isVisible",u.lc(3,4,e.loading$)))},directives:[n.t,g.a,n.s,r.u,r.v,r.F,r.t,r.w,nt,h.a,F.a,rt.a,st.a,b.b,r.y,r.I],pipes:[n.b],styles:["new-ticket{display:-webkit-box;display:flex;flex-wrap:wrap-reverse;width:100%;max-width:1800px;margin:0 auto;border-top:1px solid var(--be-divider-lighter)}new-ticket .left-column{-webkit-box-flex:0;flex:0 0 70%;padding:45px 20px}new-ticket .left-column form{margin:0 auto;width:660px}new-ticket .right-column{-webkit-box-flex:0;flex:0 0 30%;border-left:1px solid var(--be-divider-lighter);padding:45px 30px}new-ticket .right-column .header{font-size:2.1rem;color:var(--be-accent-default);font-weight:500;margin-bottom:35px}new-ticket .right-column .tip-container{margin-bottom:30px;font-size:1.6rem}new-ticket .right-column .tip-container .title{font-weight:400}new-ticket .right-column .tip-container .content{font-weight:300}new-ticket .input-container{margin-bottom:25px}new-ticket .input-container .input-container{margin-bottom:0}new-ticket .input-container input,new-ticket .input-container select{height:50px}new-ticket .input-container label{font-size:1.6rem;font-weight:300;margin-bottom:5px}new-ticket .errors{margin-top:7px;color:#f44336}new-ticket h1{margin:0 0 25px;color:var(--be-help-center-title-text);font-weight:300;font-size:4rem}new-ticket .buttons{margin-bottom:15px}@media only screen and (max-width:768px){new-ticket .left-column{-webkit-box-flex:0;flex:0 0 100%;padding-top:0;padding-bottom:0}new-ticket .left-column>form{width:auto}new-ticket .right-column{-webkit-box-flex:0;flex:0 0 100%;border-bottom:1px solid var(--be-divider-lighter);margin-bottom:10px;padding:20px 30px 0}}"],encapsulation:2,changeDetection:0}),t})();var pt=i("N2vX"),ft=i("XRKU"),gt=i("owyN"),mt=i("/R+w");const vt=["class","customer-mailbox"];function yt(t,e){1&t&&u.Sb(0,"customer-footer")}let wt=(()=>{class t{constructor(t){this.settings=t}}return t.\u0275fac=function(e){return new(e||t)(u.Rb(Y.a))},t.\u0275cmp=u.Lb({type:t,selectors:[["customer-mailbox",8,"customer-mailbox"]],attrs:vt,decls:5,vars:1,consts:[["menuPosition","header",1,"hc-content-navbar"],["placeholder","Search help center...",1,"nav-searchbar"],["resource","Tickets","resourceType","static",1,"container"],[4,"ngIf"]],template:function(t,e){1&t&&(u.Xb(0,"material-navbar",0),u.Sb(1,"suggested-articles-dropdown",1),u.Wb(),u.Sb(2,"breadcrumbs",2),u.Sb(3,"router-outlet"),u.Lc(4,yt,1,0,"customer-footer",3)),2&t&&(u.Db(4),u.rc("ngIf",!e.settings.get("hc.hide_footer")))},directives:[pt.a,ft.a,gt.a,s.k,n.t,mt.a],styles:["customer-mailbox{display:block;padding-top:70px}customer-mailbox breadcrumbs.container{margin:0 auto;padding:36px;font-size:1.6rem}customer-mailbox customer-conversation,customer-mailbox customer-tickets-list,customer-mailbox new-ticket{min-height:calc(100vh - 165px)}@media screen and (max-width:768px){customer-mailbox breadcrumbs{display:none}}"],encapsulation:2}),t})();var xt=i("apsj"),kt=i("wWhK"),_t=i("wfim"),Ct=i("pfRy"),St=i("b7Mq"),Xt=i("qH/R"),It=i("3H9V");function Ot(t,e){if(1&t){const t=u.Yb();u.Xb(0,"div",4),u.Xb(1,"button",5),u.fc("click",(function(e){return u.Cc(t),u.jc().markAsSolved()})),u.Nc(2,"Mark as solved"),u.Wb(),u.Wb()}}let Wt=(()=>{class t{constructor(t,e,i,n,r,s){this.route=t,this.uploads=e,this.currentUser=i,this.conversation=n,this.tickets=r,this.tags=s}ngOnInit(){this.route.data.subscribe(t=>{this.conversation.init(t.ticket)})}markAsSolved(){const t=this.tags.getStatusTags().find(t=>"closed"===t.name);this.tickets.changeTicketStatus(this.conversation.get().id,t.name).subscribe(()=>{this.conversation.afterReplyAction.navigateToCustomerTicketsList("Ticket marked as solved."),this.conversation.setStatus(t)})}}return t.\u0275fac=function(e){return new(e||t)(u.Rb(s.a),u.Rb(B.a),u.Rb(d.a),u.Rb(kt.a),u.Rb(N.a),u.Rb(_t.a))},t.\u0275cmp=u.Lb({type:t,selectors:[["customer-conversation"]],features:[u.Cb([xt.a])],decls:7,vars:2,consts:[[1,"container"],["class","resolve-btn-container",4,"ngIf"],["conversationInfiniteScroll","",1,"ticket-container"],[1,"overlay",3,"isVisible"],[1,"resolve-btn-container"],["mat-raised-button","","color","accent","trans","",3,"click"]],template:function(t,e){1&t&&(u.Xb(0,"div",0),u.Lc(1,Ot,3,0,"div",1),u.Xb(2,"div",2),u.Sb(3,"conversation-header"),u.Sb(4,"conversation-text-editor"),u.Sb(5,"conversation-replies"),u.Wb(),u.Wb(),u.Sb(6,"loading-indicator",3)),2&t&&(u.Db(1),u.rc("ngIf",!e.conversation.get().closed_at),u.Db(5),u.rc("isVisible",e.conversation.replies.isLoading||e.conversation.isLoading))},directives:[n.t,Ct.a,St.a,Xt.a,It.a,g.a,b.b,h.a],styles:["[_nghost-%COMP%]{display:block;position:relative}.ticket-container[_ngcontent-%COMP%]{padding-bottom:50px}.resolve-btn-container[_ngcontent-%COMP%]{margin-bottom:40px;text-align:right}"]}),t})();var Dt=i("Dbf7"),Rt=i("i70M"),Tt=i("0QyJ");const Lt=s.j.forChild([{path:"",component:wt,canActivate:[Tt.a],children:[{path:"",component:M},{path:"new",component:bt,resolve:{categories:Rt.a},data:{permissions:["tickets.create","tags.view"]}},{path:":id",component:Wt,resolve:{ticket:Dt.a}}]}]);var Pt=i("xqw2"),Et=i("DldP"),jt=i("MK/P"),Mt=i("gFpt"),Nt=i("YHvm"),Ft=i("6rvT"),At=i("k3xQ"),Ht=i("X3pI"),Vt=i("Iysn"),Ut=i("hD7E"),Yt=i("JZOH"),Bt=i("V2vN"),zt=i("GSRO");i.d(e,"CustomerMailboxModule",(function(){return $t}));let $t=(()=>{class t{}return t.\u0275mod=u.Pb({type:t}),t.\u0275inj=u.Ob({factory:function(e){return new(e||t)},imports:[[n.c,r.n,r.D,s.j,Et.a,Pt.a,jt.a,Nt.a,Mt.a,Ft.a,Ht.a,Vt.a,Ut.a,Yt.a,Bt.a,zt.a,Lt,p.b,f.l,a.c,o.c,m.e,b.c,At.a]]}),t})()},Dbf7:function(t,e,i){"use strict";i.d(e,"a",(function(){return u}));var n=i("UNqx"),r=i("EY2u"),s=i("JIr8"),o=i("I65S"),a=i("fXoL"),c=i("LsVx"),l=i("tyNb");let u=(()=>{class t{constructor(t,e){this.tickets=t,this.router=e}resolve(t,e){return this.tickets.get(+(t.params.ticket_id||t.params.id)).pipe(Object(s.a)(()=>(this.router.navigate(["/help-center/tickets"]),r.a)),Object(n.mergeMap)(t=>t.ticket?Object(o.of)(t.ticket):(this.router.navigate(["/help-center/tickets"]),r.a)))}}return t.\u0275fac=function(e){return new(e||t)(a.bc(c.a),a.bc(l.f))},t.\u0275prov=a.Nb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},DldP:function(t,e,i){"use strict";var n=i("ofXK"),r=i("3Pt+"),s=i("tyNb"),o=i("j/pe"),a=i("b7Mq"),c=i("3H9V"),l=i("qH/R"),u=i("H4ap"),d=i("qaug"),h=i("45UC"),b=i("9VjZ"),p=i("aV6R"),f=i("PPfr"),g=i("lxqa"),m=i("yS8O"),v=i("X3Ra"),y=i("wWhK"),w=i("Dbf7"),x=i("2qZP"),k=i("EzZJ"),_=i("LsVx"),C=i("IgbF"),S=i("7T94"),X=i("1V5l"),I=i("KHpT"),O=i("ehXJ"),W=i("apsj"),D=i("YHvm"),R=i("Bf/s"),T=i("0IaG"),L=i("MK/P"),P=i("gFpt"),E=i("NFeN"),j=i("STbY"),M=i("bTqV"),N=i("6rvT"),F=i("k3xQ"),A=i("Qu3c"),H=i("X3pI"),V=i("JZOH"),U=i("GSRO"),Y=i("pfRy"),B=i("fXoL"),z=i("KKQg"),$=i("ovFL"),K=i("N2vX"),q=i("/zh3"),Q=i("nQeM"),G=i("Rd8u"),J=i("FBzJ"),Z=i("DB1O"),tt=i("83jf"),et=i("mrSG"),it=i("Lm4C"),nt=i("sgCb");function rt(t,e=[]){return Object(et.a)(this,void 0,void 0,(function*(){const i=yield(n=t,new Promise(t=>{n.createReader().readEntries(e=>t(e))}));var n;for(const t in i){const n=i[t];n.isDirectory?yield rt(n,e):e.push(yield st(n))}return e}))}function st(t){return new Promise(e=>{t.file(i=>{e(new nt.a(i,t.fullPath))})})}let ot=(()=>{class t{constructor(t){this.el=t,this.disableDropzoneClick=!1,this.disableDropzone=!1,this.uploadConfig={},this.filesDropped=new B.o}ngOnInit(){const t=this.el.nativeElement;t.addEventListener("dragenter",t=>this.handleDragEnter(t)),t.addEventListener("dragover",t=>this.handleDragOver(t)),t.addEventListener("dragleave",t=>this.handleDragLeave(t)),t.addEventListener("drop",t=>this.handleDrop(t)),this.disableDropzoneClick||(this.clickButton?this.clickButton.nativeElement:t).addEventListener("click",()=>this.handleClick())}ngOnDestroy(){this.removeClassesFromDropzone()}handleClick(){this.disableDropzone||Object(it.a)(this.uploadConfig).then(t=>{this.emitUploadEvent(t)})}handleDragEnter(t){this.dropzoneDisabled(t)||this.el.nativeElement.classList.add("file-over-dropzone")}handleDragOver(t){return t.preventDefault&&t.preventDefault(),t.dataTransfer.dropEffect=this.dropzoneDisabled(t)?"none":"move",!1}handleDragLeave(t){const e=document.elementFromPoint(t.clientX,t.clientY);this.el.nativeElement.contains(e)||this.removeClassesFromDropzone()}handleDrop(t){return Object(et.a)(this,void 0,void 0,(function*(){if(t.stopPropagation(),t.preventDefault(),this.removeClassesFromDropzone(),this.dropzoneDisabled(t)||!t.dataTransfer.items)return;const e=Array.from(t.dataTransfer.items).filter(t=>"file"===t.kind).map(t=>t.webkitGetAsEntry());e.length&&this.emitUploadEvent(yield function(t){return Object(et.a)(this,void 0,void 0,(function*(){let e=[];for(const i in t){const n=t[i];n.isDirectory?e=e.concat(yield rt(n)):e.push(yield st(n))}return e}))}(e))}))}emitUploadEvent(t){this.filesDropped.emit(t)}removeClassesFromDropzone(){this.el.nativeElement.classList.remove("file-over-dropzone")}dropzoneDisabled(t){const e=t.dataTransfer.types.find(t=>"files"===t.toLowerCase());return this.disableDropzone||!e}}return t.\u0275fac=function(e){return new(e||t)(B.Rb(B.l))},t.\u0275dir=B.Mb({type:t,selectors:[["","fileDropzone",""]],inputs:{disableDropzoneClick:"disableDropzoneClick",disableDropzone:"disableDropzone",clickButton:"clickButton",uploadConfig:["fileDropzone","uploadConfig"]},outputs:{filesDropped:"filesDropped"}}),t})();var at=i("DzUk"),ct=i("rG4v"),lt=i("XRKU"),ut=i("cH1L"),dt=i("zW5C"),ht=i("iB19"),bt=i("6SKC");i.d(e,"a",(function(){return pt}));let pt=(()=>{class t{}return t.\u0275mod=B.Pb({type:t}),t.\u0275inj=B.Ob({factory:function(e){return new(e||t)},providers:[v.a,y.a,I.a,_.a,W.a,w.a,C.a,X.a,O.a],imports:[[n.c,r.n,r.D,s.j,D.a,R.a,P.a,N.a,F.a,H.a,V.a,U.a,L.a,A.b,T.g,E.b,j.c,M.c]]}),t})();B.Gc(h.a,[o.a,a.a,c.a,l.a,u.a,d.a,h.a,b.a,p.a,S.a,f.a,g.a,m.a,x.a,k.a,Y.a,n.q,n.r,n.s,n.t,n.A,n.w,n.x,n.y,n.z,n.u,n.v,r.J,r.y,r.I,r.c,r.z,r.C,r.a,r.F,r.G,r.B,r.t,r.u,r.E,r.p,r.o,r.A,r.b,r.d,r.w,r.x,r.v,r.i,r.l,r.j,r.m,r.f,s.k,s.g,s.i,s.h,s.l,z.a,$.a,K.a,q.a,Q.a,G.a,J.a,Z.a,tt.a,ot,at.a,ct.a,lt.a,A.a,A.c,ut.b,T.e,T.d,T.i,T.f,T.c,E.a,j.e,j.b,j.d,j.a,M.b,M.a],[n.b,n.G,n.p,n.k,n.E,n.g,n.C,n.F,n.d,n.f,n.i,n.j,n.l,dt.a,ht.a,bt.a])},DzUk:function(t,e,i){"use strict";i.d(e,"a",(function(){return s}));var n=i("fXoL"),r=i("Lm4C");let s=(()=>{class t{constructor(t){this.el=t,this.config={},this.filesSelected=new n.o}ngOnInit(){this.el.nativeElement.addEventListener("click",t=>{t.preventDefault(),t.stopPropagation(),Object(r.a)(this.config).then(t=>{t&&t.length&&this.filesSelected.emit(t)})})}}return t.\u0275fac=function(e){return new(e||t)(n.Rb(n.l))},t.\u0275dir=n.Mb({type:t,selectors:[["","uploadButton",""]],inputs:{config:["uploadButton","config"]},outputs:{filesSelected:"filesSelected"}}),t})()},EBtg:function(t,e,i){"use strict";var n=i("2KeD"),r=i("n73p"),s=i("2qMH"),o=i("LJ/p"),a=i("HZF8"),c=i("90cg"),l=i("yRPT"),u=i("0alx");e.scheduled=function(t,e){if(null!=t){if(a.isInteropObservable(t))return n.scheduleObservable(t,e);if(c.isPromise(t))return r.schedulePromise(t,e);if(l.isArrayLike(t))return s.scheduleArray(t,e);if(u.isIterable(t)||"string"==typeof t)return o.scheduleIterable(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}},EzZJ:function(t,e,i){"use strict";i.d(e,"a",(function(){return p}));var n=i("fXoL"),r=i("3Pt+"),s=i("Kj3r"),o=i("/uUt"),a=i("STbY"),c=i("LsVx"),l=i("IgbF"),u=i("i2dy"),d=i("NFeN"),h=i("ofXK");function b(t,e){if(1&t){const t=n.Yb();n.Xb(0,"button",7),n.fc("click",(function(i){n.Cc(t);const r=e.$implicit;return n.jc().addTag(r.name)})),n.Nc(1),n.Wb()}if(2&t){const t=e.$implicit;n.Db(1),n.Oc(t.name)}}let p=(()=>{class t{constructor(t,e,i){this.tickets=t,this.tagService=e,this.toast=i,this.ticketIds=[],this.tagAdded=new n.o,this.tagQuery=new r.h,this.searchedOnce=!1,this.trackByFn=(t,e)=>e.id}ngOnInit(){this.bindTagQueryInput(),this.trigger.menuOpened.subscribe(()=>{this.searchedOnce||this.searchForTags(null,{perPage:5})}),this.trigger.menuClosed.subscribe(()=>{this.clearSearchField()})}open(){this.trigger.openMenu()}close(){this.trigger.closeMenu()}addTag(t){this.tickets.addTag(t,this.ticketIds).subscribe(t=>{this.clearSearchField(),this.toast.open("Tag added"),this.tagAdded.emit(t.data)})}clearSearchField(){this.tagQuery.value&&this.tagQuery.setValue(null)}bindTagQueryInput(){this.tagQuery.valueChanges.pipe(Object(s.a)(300),Object(o.a)()).subscribe(t=>{this.searchForTags(t)})}searchForTags(t,e={}){this.tagService.search(t,e).subscribe(t=>this.tags=t.pagination.data)}}return t.\u0275fac=function(e){return new(e||t)(n.Rb(c.a),n.Rb(l.a),n.Rb(u.a))},t.\u0275cmp=n.Lb({type:t,selectors:[["add-tag-dropdown"]],viewQuery:function(t,e){var i;1&t&&n.Jc(a.d,!0),2&t&&n.yc(i=n.gc())&&(e.trigger=i.first)},inputs:{ticketIds:"ticketIds"},outputs:{tagAdded:"tagAdded"},decls:7,vars:5,consts:[[1,"no-style","add-tag-button","toolbar-item",3,"matMenuTriggerFor"],["svgIcon","add-tag-custom"],[1,"add-tag-menu",3,"overlapTrigger"],["addTagMenu","matMenu"],[1,"input-container",3,"ngSubmit","click"],["type","text","mat-menu-item","",1,"tag-search-input",3,"formControl","keydown"],["mat-menu-item","","class","tag-item",3,"click",4,"ngFor","ngForOf","ngForTrackBy"],["mat-menu-item","",1,"tag-item",3,"click"]],template:function(t,e){if(1&t&&(n.Xb(0,"button",0),n.Sb(1,"mat-icon",1),n.Wb(),n.Xb(2,"mat-menu",2,3),n.Xb(4,"form",4),n.fc("ngSubmit",(function(t){return e.addTag(e.tagQuery.value)}))("click",(function(t){return t.stopPropagation()})),n.Xb(5,"input",5),n.fc("keydown",(function(t){return t.stopPropagation()})),n.Wb(),n.Wb(),n.Lc(6,b,2,1,"button",6),n.Wb()),2&t){const t=n.zc(3);n.rc("matMenuTriggerFor",t),n.Db(2),n.rc("overlapTrigger",!1),n.Db(3),n.rc("formControl",e.tagQuery),n.Db(1),n.rc("ngForOf",e.tags)("ngForTrackBy",e.trackByFn)}},directives:[a.d,d.a,a.e,r.J,r.u,r.v,r.c,a.b,r.t,r.i,h.s],styles:["[_nghost-%COMP%]{position:relative;display:inline-block}.input-container[_ngcontent-%COMP%]{padding:2px 10px 10px}.mat-menu-item[_ngcontent-%COMP%]:first-of-type{border-top:1px solid var(--be-divider-default)}"]}),t})()},FWf1:function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),r=i("pshJ"),s=i("GiSu"),o=i("zB/H"),a=i("p//D"),c=i("n3uD"),l=i("MkmW"),u=function(t){function e(i,n,r){var o=t.call(this)||this;switch(o.syncErrorValue=null,o.syncErrorThrown=!1,o.syncErrorThrowable=!1,o.isStopped=!1,arguments.length){case 0:o.destination=s.empty;break;case 1:if(!i){o.destination=s.empty;break}if("object"==typeof i){i instanceof e?(o.syncErrorThrowable=i.syncErrorThrowable,o.destination=i,i.add(o)):(o.syncErrorThrowable=!0,o.destination=new d(o,i));break}default:o.syncErrorThrowable=!0,o.destination=new d(o,i,n,r)}return o}return n(e,t),e.prototype[a.rxSubscriber]=function(){return this},e.create=function(t,i,n){var r=new e(t,i,n);return r.syncErrorThrowable=!1,r},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this},e}(o.Subscription);e.Subscriber=u;var d=function(t){function e(e,i,n,o){var a,c=t.call(this)||this;c._parentSubscriber=e;var l=c;return r.isFunction(i)?a=i:i&&(a=i.next,n=i.error,o=i.complete,i!==s.empty&&(l=Object.create(i),r.isFunction(l.unsubscribe)&&c.add(l.unsubscribe.bind(l)),l.unsubscribe=c.unsubscribe.bind(c))),c._context=l,c._next=a,c._error=n,c._complete=o,c}return n(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;c.config.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber,i=c.config.useDeprecatedSynchronousErrorHandling;if(this._error)i&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)i?(e.syncErrorValue=t,e.syncErrorThrown=!0):l.hostReportError(t),this.unsubscribe();else{if(this.unsubscribe(),i)throw t;l.hostReportError(t)}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var i=function(){return t._complete.call(t._context)};c.config.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,i),this.unsubscribe()):(this.__tryOrUnsub(i),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(i){if(this.unsubscribe(),c.config.useDeprecatedSynchronousErrorHandling)throw i;l.hostReportError(i)}},e.prototype.__tryOrSetError=function(t,e,i){if(!c.config.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,i)}catch(n){return c.config.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=n,t.syncErrorThrown=!0,!0):(l.hostReportError(n),!0)}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(u);e.SafeSubscriber=d},GMZp:function(t,e,i){"use strict";e.isObject=function(t){return null!==t&&"object"==typeof t}},GSRO:function(t,e,i){"use strict";i.d(e,"a",(function(){return c}));var n=i("ofXK"),r=i("bTqV"),s=i("NFeN"),o=i("bv9b"),a=i("fXoL");let c=(()=>{class t{}return t.\u0275mod=a.Pb({type:t}),t.\u0275inj=a.Ob({factory:function(e){return new(e||t)},imports:[[n.c,r.c,o.b,s.b]]}),t})()},GiSu:function(t,e,i){"use strict";var n=i("n3uD"),r=i("MkmW");e.empty={closed:!0,next:function(t){},error:function(t){if(n.config.useDeprecatedSynchronousErrorHandling)throw t;r.hostReportError(t)},complete:function(){}}},H4ap:function(t,e,i){"use strict";i.d(e,"a",(function(){return I}));var n=i("45UC"),r=i("8RV8"),s=i("fXoL"),o=i("QGXG"),a=i("LsVx"),c=i("wWhK"),l=i("tyNb"),u=i("i2dy"),d=i("ofXK"),h=i("Rd8u"),b=i("NFeN"),p=i("bTqV"),f=i("STbY"),g=i("Qu3c"),m=i("zW5C"),v=i("iB19");function y(t,e){if(1&t&&(s.Xb(0,"div",15),s.Sb(1,"mat-icon",29),s.Xb(2,"a",30),s.Nc(3),s.Wb(),s.Wb()),2&t){const t=s.jc(3);s.Db(2),s.rc("href","https://codecanyon.net/user/"+t.envatoPurchase.envato_username,s.Fc)("title",t.envatoPurchase.envato_username),s.Db(1),s.Oc(t.envatoPurchase.envato_username)}}function w(t,e){if(1&t&&(s.Xb(0,"div",31),s.kc(1,"trans"),s.Sb(2,"mat-icon",32),s.Xb(3,"span"),s.Nc(4),s.kc(5,"formattedDate"),s.Wb(),s.Wb()),2&t){const t=s.jc(3);s.rc("matTooltip",s.lc(1,2,"Supported until")),s.Db(4),s.Oc(s.lc(5,4,t.envatoPurchase.supported_until))}}function x(t,e){if(1&t&&(s.Xb(0,"div",33),s.Sb(1,"img",34),s.Xb(2,"div",35),s.Nc(3),s.Wb(),s.Wb()),2&t){const t=e.$implicit;s.Db(1),s.rc("src",t.image,s.Fc),s.Db(2),s.Oc(t.item_name)}}function k(t,e){if(1&t&&(s.Xb(0,"div",22),s.Xb(1,"div",23),s.Xb(2,"span",24),s.Nc(3,"Envato"),s.Wb(),s.Wb(),s.Lc(4,y,4,3,"div",25),s.Lc(5,w,6,6,"div",26),s.Xb(6,"div",27),s.Lc(7,x,4,2,"div",28),s.kc(8,"slice"),s.Wb(),s.Wb()),2&t){const t=s.jc(2);s.Db(4),s.rc("ngIf",t.envatoPurchase.envato_username),s.Db(1),s.rc("ngIf",t.envatoPurchase.supported_until),s.Db(2),s.rc("ngForOf",s.nc(8,3,t.requester.purchase_codes,0,5))}}const _=function(t){return["/mailbox/users",t]};function C(t,e){if(1&t){const t=s.Yb();s.Xb(0,"div",7),s.Xb(1,"a",8),s.Sb(2,"img",9),s.Wb(),s.Xb(3,"div",10),s.Xb(4,"div",11),s.Xb(5,"div",12),s.Nc(6),s.Wb(),s.Xb(7,"button",13),s.Sb(8,"mat-icon",14),s.Wb(),s.Wb(),s.Xb(9,"div",15),s.Sb(10,"mat-icon",16),s.Xb(11,"span",17),s.Nc(12),s.Wb(),s.Wb(),s.Xb(13,"mat-menu",null,18),s.Xb(15,"a",19),s.Nc(16,"Edit Profile"),s.Wb(),s.Xb(17,"button",20),s.fc("click",(function(e){return s.Cc(t),s.jc().changeCustomer()})),s.Nc(18,"Change Customer"),s.Wb(),s.Wb(),s.Lc(19,k,9,7,"div",21),s.Wb(),s.Wb()}if(2&t){const t=s.zc(14),e=s.jc();s.Db(1),s.rc("routerLink",s.wc(9,_,e.requester.id)),s.Db(1),s.rc("src",e.requester.avatar,s.Fc),s.Db(3),s.rc("title",e.requester.display_name),s.Db(1),s.Oc(e.requester.display_name),s.Db(1),s.rc("matMenuTriggerFor",t),s.Db(4),s.rc("title",e.requester.email),s.Db(1),s.Oc(e.requester.email),s.Db(3),s.rc("routerLink",s.wc(11,_,e.requester.id)),s.Db(4),s.rc("ngIf",e.envatoPurchase)}}function S(t,e){if(1&t){const t=s.Yb();s.Xb(0,"div",38),s.fc("click",(function(i){s.Cc(t);const n=e.$implicit;return s.jc(2).openTicketModal(n.id)})),s.Sb(1,"mat-icon",16),s.Xb(2,"span"),s.Nc(3),s.Wb(),s.Wb()}if(2&t){const t=e.$implicit;s.Hb("open",!t.closed_at),s.Db(3),s.Oc(t.subject)}}function X(t,e){if(1&t&&(s.Xb(0,"div",36),s.Lc(1,S,4,3,"div",37),s.Wb()),2&t){const t=s.jc();s.Db(1),s.rc("ngForOf",t.otherTickets)}}let I=(()=>{class t{constructor(t,e,i,n,r){this.modal=t,this.tickets=e,this.conversation=i,this.route=n,this.toast=r,this.previousTicketsVisible=!0}ngOnInit(){this.route.data.subscribe(t=>{this.activeTicket=t.ticket,this.loadUserData()})}openTicketModal(t){const e={ticketId:t,activeTicketId:this.conversation.get().id};this.modal.open(n.a,e,"conversation-modal-container").afterClosed().subscribe(e=>{e&&(this.otherTickets=this.otherTickets.filter(e=>e.id!==t),this.conversation.init(e))})}getUserTicketsExceptCurrent(){this.requester=this.activeTicket.user,this.requester&&this.tickets.getTickets({user_id:this.requester.id,per_page:6}).subscribe(t=>{this.otherTickets=t.pagination.data.filter(t=>t.id!==this.activeTicket.id)})}setEnvatoPurchase(){const t=this.conversation.getCategory();if(!this.requester.purchase_codes.length||!t)return;const e=t.name.toLowerCase(),i=this.requester.purchase_codes.find(t=>t.item_name.toLowerCase().indexOf(e)>-1);this.envatoPurchase=i||this.requester.purchase_codes[0]}changeCustomer(){this.modal.open(r.a).beforeClosed().subscribe(t=>{t&&this.tickets.update(this.activeTicket.id,{user_id:t.id}).subscribe(()=>{this.requester=t,this.loadUserData(),this.toast.open("Customer changed.")})})}loadUserData(){this.getUserTicketsExceptCurrent(),this.setEnvatoPurchase()}}return t.\u0275fac=function(e){return new(e||t)(s.Rb(o.a),s.Rb(a.a),s.Rb(c.a),s.Rb(l.a),s.Rb(u.a))},t.\u0275cmp=s.Lb({type:t,selectors:[["conversation-sidebar"]],decls:8,vars:4,consts:[["class","user-info",4,"ngIf"],[1,"tickets-list-container"],[1,"title",3,"click"],["trans","",1,"text"],[1,"no-style","toggle-button"],["svgIcon","keyboard-arrow-down"],["class","tickets-list toggle-container",4,"ngIf"],[1,"user-info"],[1,"avatar",3,"routerLink"],["alt","Avatar",3,"src"],[1,"user-details"],[1,"name"],[1,"text",3,"title"],["mat-icon-button","",3,"matMenuTriggerFor"],["svgIcon","settings"],[1,"info-line"],["svgIcon","mail"],[3,"title"],["editCustomerMenu","matMenu"],["mat-menu-item","","trans","",3,"routerLink"],["mat-menu-item","","trans","",3,"click"],["class","info-container",4,"ngIf"],[1,"info-container"],[1,"info-title"],["trans",""],["class","info-line",4,"ngIf"],["class","info-line",3,"matTooltip",4,"ngIf"],[1,"envato-purchases"],["class","purchase-item",4,"ngFor","ngForOf"],["svgIcon","person"],["target","_blank",3,"href","title"],[1,"info-line",3,"matTooltip"],["svgIcon","access-time"],[1,"purchase-item"],["alt","Purchase image",3,"src"],[1,"purchase-name"],[1,"tickets-list","toggle-container"],["class","ticket",3,"open","click",4,"ngFor","ngForOf"],[1,"ticket",3,"click"]],template:function(t,e){1&t&&(s.Lc(0,C,20,13,"div",0),s.Xb(1,"div",1),s.Xb(2,"div",2),s.fc("click",(function(t){return e.previousTicketsVisible=!e.previousTicketsVisible})),s.Xb(3,"span",3),s.Nc(4,"Other Conversations"),s.Wb(),s.Xb(5,"button",4),s.Sb(6,"mat-icon",5),s.Wb(),s.Wb(),s.Lc(7,X,2,1,"div",6),s.Wb()),2&t&&(s.rc("ngIf",e.requester),s.Db(1),s.Hb("tickets-visible",e.previousTicketsVisible),s.Db(6),s.rc("ngIf",e.otherTickets))},directives:[d.t,h.a,b.a,l.i,p.b,f.d,f.e,f.b,d.s,g.a],pipes:[d.E,m.a,v.a],styles:["conversation-sidebar{display:block;-webkit-box-flex:0;flex:0 0 240px;width:240px;background-color:var(--be-background-alternative);border-left:1px solid var(--be-divider-default)}@media screen and (max-width:768px){conversation-sidebar{display:none}}conversation-sidebar .user-info{margin:15px 15px 10px;border-bottom:1px solid var(--be-divider-default);padding-bottom:10px}conversation-sidebar .user-info .avatar{display:block;width:100%;text-align:center;margin-bottom:10px}conversation-sidebar .user-info .avatar img{max-width:55px;max-height:65px;margin:0 auto;border-radius:4px}conversation-sidebar .user-info .user-details{color:var(--be-secondary-text)}conversation-sidebar .user-info .user-details a{color:inherit}conversation-sidebar .user-info .user-details .name{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;font-size:1.7rem;max-height:24px}conversation-sidebar .user-info .user-details .name .text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}conversation-sidebar .user-info .user-details .name .mat-icon-button{margin-left:auto;color:var(--be-secondary-text);flex-shrink:0}conversation-sidebar .user-info .user-details .info-container{margin-top:10px;padding-top:10px;border-top:1px solid var(--be-divider-default)}conversation-sidebar .user-info .user-details .envato-purchases{margin-top:15px}conversation-sidebar .user-info .user-details .purchase-item{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;white-space:nowrap;margin-bottom:8px}conversation-sidebar .user-info .user-details .purchase-item img{width:25px;height:25px;margin-right:8px;border-radius:4px}conversation-sidebar .user-info .user-details .purchase-item .purchase-name{max-width:calc(100% - 30px);overflow:hidden;text-overflow:ellipsis}conversation-sidebar .user-info .user-details .info-title{margin-bottom:4px;font-weight:500}conversation-sidebar .user-info .user-details .info-line{padding:3px 0;overflow:hidden;text-overflow:ellipsis}conversation-sidebar .user-info .user-details .mat-icon{vertical-align:middle;width:18px;height:18px;margin-right:2px}conversation-sidebar .tickets-list-container{padding:0 15px}conversation-sidebar .tickets-list-container .title{position:relative;cursor:pointer}conversation-sidebar .tickets-list-container .title .toggle-button{position:absolute;right:0;top:-2px;color:var(--be-secondary-text)}conversation-sidebar .tickets-list-container .title .toggle-button .mat-icon{-webkit-transition:all .3s ease;transition:all .3s ease}conversation-sidebar .tickets-list-container .tickets-list{margin-top:15px;display:none}conversation-sidebar .tickets-list-container .tickets-list .ticket{color:var(--be-secondary-text);margin-bottom:15px;cursor:pointer}conversation-sidebar .tickets-list-container .tickets-list .ticket .mat-icon{color:var(--be-secondary-text);width:17px;height:17px;vertical-align:middle;margin-right:3px}conversation-sidebar .tickets-list-container .tickets-list .ticket:hover{text-decoration:underline;color:var(--be-text)}conversation-sidebar .tickets-list-container .tickets-list .ticket.open{color:var(--be-text)}conversation-sidebar .tickets-list-container.tickets-visible .tickets-list{display:block}conversation-sidebar .tickets-list-container.tickets-visible .toggle-button .mat-icon{display:inline-block;-webkit-transform:rotate(180deg);transform:rotate(180deg)}"],encapsulation:2}),t})()},HZF8:function(t,e,i){"use strict";var n=i("zfKp");e.isInteropObservable=function(t){return t&&"function"==typeof t[n.observable]}},I65S:function(t,e,i){"use strict";var n=i("nzqU"),r=i("zzsZ"),s=i("2qMH");e.of=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=t[t.length-1];return n.isScheduler(i)?(t.pop(),s.scheduleArray(t,i)):r.fromArray(t)}},IgbF:function(t,e,i){"use strict";i.d(e,"a",(function(){return s}));var n=i("fXoL"),r=i("sPnx");let s=(()=>{class t{constructor(t){this.http=t,this.baseUri="tags"}getTags(t){return this.http.getWithCache(this.baseUri,t)}createNew(t){return this.http.post(this.baseUri,t)}update(t,e){return this.http.put(this.baseUri+"/"+t,e)}deleteMultiple(t){return this.http.delete(this.baseUri+"/delete-multiple",{ids:t})}search(t,e={}){return e=Object.assign({query:t,notType:"status",perPage:10},e),this.http.get(this.baseUri,e)}}return t.\u0275fac=function(e){return new(e||t)(n.bc(r.a))},t.\u0275prov=n.Nb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},JZOH:function(t,e,i){"use strict";i.d(e,"a",(function(){return l}));var n=i("ofXK"),r=i("bTqV"),s=i("NFeN"),o=i("k3xQ"),a=i("Bf/s"),c=i("fXoL");let l=(()=>{class t{}return t.\u0275mod=c.Pb({type:t}),t.\u0275inj=c.Ob({factory:function(e){return new(e||t)},imports:[[n.c,a.a,r.c,s.b,o.a]]}),t})()},KHpT:function(t,e,i){"use strict";i.d(e,"a",(function(){return o}));var n=i("fXoL"),r=i("LsVx"),s=i("i2dy");let o=(()=>{class t{constructor(t,e){this.tickets=t,this.toast=e,this.replies=[],this.currentPage=1,this.lastPage=2,this.isLoading=!1}get(){return this.replies}add(t){t&&t.id&&(this.replies.find(e=>e.id===t.id)||this.replies.unshift(t))}replace(t){const e=this.replies.findIndex(e=>e.id===t.id);this.replies[e]=t}remove(t){this.replies=this.replies.filter(e=>e.id!==t)}delete(t){this.tickets["drafts"===t.type?"deleteDraft":"deleteReply"](t.id).subscribe(()=>{this.remove(t.id),this.toast.open("Deleted successfully")})}loadMore(){this.isLoading||(this.isLoading=!0,this.tickets.getTicketReplies(this.ticketId,this.currentPage+1).subscribe(t=>{this.replies=this.replies.concat(t.pagination.data),this.currentPage=t.pagination.current_page,this.lastPage=t.pagination.last_page,this.isLoading=!1},()=>{this.isLoading=!1}))}canLoadMore(){return this.currentPage<this.lastPage}init(t,e){this.replies=t.slice(),this.currentPage=1,this.lastPage=2,this.ticketId=e}}return t.\u0275fac=function(e){return new(e||t)(n.bc(r.a),n.bc(s.a))},t.\u0275prov=n.Nb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},KKQg:function(t,e,i){"use strict";var n=i("mrSG"),r=i("fXoL"),s=i("Lm4C"),o=i("h586"),a=i("QeDF"),c=i("JYI4"),l=i("WmcL"),u=i("3Pt+"),d=i("Kj3r"),h=i("W5HX"),b=i("kmQS"),p=i("5o4b"),f=i("OnlV"),g=i("VaLf");let m=(()=>{class t{constructor(t,e,i,n,r){this.settings=t,this.zone=e,this.lazyLoader=i,this.breakpoints=n,this.i18n=r,this.makeBootstrapPromise()}reset(){this.editorIsReady()&&(this.tinymceInstance.setContent(""),this.tinymceInstance.undoManager.clear())}focus(){this.waitForEditor().then(()=>{this.tinymceInstance.focus(!1)})}hasUndo(){return this.editorIsReady()&&this.tinymceInstance.undoManager.hasUndo()}hasRedo(){return this.editorIsReady()&&this.tinymceInstance.undoManager.hasRedo()}queryCommandState(t){return this.editorIsReady()&&this.tinymceInstance.queryCommandState(t)}execCommand(t,e=null){this.waitForEditor().then(()=>{this.zone.run(()=>{this.tinymceInstance.execCommand(t,!1,e)})})}getContents(t){return this.editorIsReady()?this.tinymceInstance.getContent(t):""}setContents(t){this.waitForEditor().then(()=>{this.tinymceInstance.undoManager&&(this.tinymceInstance.undoManager.transact(()=>{this.tinymceInstance.setContent(t)}),this.tinymceInstance.selection.setCursorLocation(),this.tinymceInstance.nodeChanged(),this.tinymceInstance.execCommand("mceResize"))})}insertContents(t){this.waitForEditor().then(()=>{this.tinymceInstance.execCommand("mceInsertContent",!1,t),setTimeout(()=>this.tinymceInstance.selection.collapse())})}insertImage(t){this.waitForEditor().then(()=>{this.insertContents('<img src="'+t+'"/>'),setTimeout(()=>this.execCommand("mceAutoResize"),500)})}waitForEditor(){return this.tinymceInstance?new Promise(t=>t(this.tinymceInstance)):this.bootstrapPromise?this.bootstrapPromise:void 0}setConfig(t){this.config=t,this.loadTinymce().then(()=>{this.initTinymce()})}editorIsReady(){return!this.bootstrapPromise&&!!this.tinymceInstance&&!!this.tinymceInstance.undoManager}loadTinymce(){return this.lazyLoader.loadAsset("js/tinymce/tinymce.min.js",{type:"js"})}initTinymce(){const t={target:this.config.textAreaEl.nativeElement,plugins:["link","codesample","paste","autoresize"],branding:!1,browser_spellcheck:!0,max_height:this.config.maxHeight,min_height:this.config.minHeight,autoresize_on_init:!1,paste_as_text:!0,elementpath:!1,statusbar:!1,menubar:!1,convert_urls:!1,forced_root_block:!1,element_format:"html",body_class:"editor-body",content_style:'html {font-size: 62.5%;}\n.editor-body {font-size: 1.4rem;font-family: "Roboto", "Helvetica Neue", sans-serif;color: rgba(0, 0, 0, .87);}\nimg {max-width: 100%}\ncode[class*=language-], pre[class*=language-] {font-size: inherit;}',content_css:["https://fonts.googleapis.com/css?family=Roboto:300,400,500,700,400italic"],default_link_target:"_blank",link_assume_external_targets:!0,target_list:!1,link_title:!1,image_dimensions:!1,image_description:!1,setup:t=>{this.tinymceInstance=t,t.on("change",()=>this.config.onChange.emit(t.getContent())),t.on("click",()=>{this.zone.run(()=>{})}),t.shortcuts.add("ctrl+13","desc",()=>{this.zone.run(()=>{this.config.onChange.emit(t.getContent()),this.config.onCtrlEnter.emit()})})},init_instance_callback:()=>{this.bootstrapPromise=!1,this.bootstrapPromiseResolve(this.tinymceInstance)}};if(this.breakpoints.isMobile$.value||(t.toolbar=!1),this.config.showAdvancedControls&&(t.plugins=t.plugins.concat(["media","hr","visualblocks","visualchars","wordcount"]),t.forced_root_block="p",t.statusbar=!0,t.autoresize_on_init=!0,t.extended_valid_elements="svg[*],use[*],iframe[src],script[src]",t.elementpath=!0,t.content_css.push(this.settings.getAssetUrl()+"css/advanced-editor-styles.css"),t.target_list=[{title:this.i18n.t("Current window"),value:""},{title:this.i18n.t("New Window"),value:"_blank"}]),"auto"===this.config.minHeight){const e=this.config.editorEl.nativeElement.parentElement.offsetHeight-74-4;t.min_height=e,t.max_height=e}tinymce.init(t)}destroyEditor(){try{this.tinymceInstance&&this.tinymceInstance.remove(),this.tinymceInstance=null,this.makeBootstrapPromise()}catch(t){}}makeBootstrapPromise(){this.bootstrapPromise=new Promise(t=>this.bootstrapPromiseResolve=t)}}return t.\u0275fac=function(e){return new(e||t)(r.bc(b.a),r.bc(r.A),r.bc(p.a),r.bc(f.a),r.bc(g.a))},t.\u0275prov=r.Nb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var v=i("twBr"),y=i("dz5c"),w=i("sJvS"),x=i("tU2R"),k=i("PCqb"),_=i("JWVf");let C=(()=>{class t extends w.a{constructor(){super(...arguments),this.DEFAULT_MAX_SIZE_MB=3}initValidations(){const t=[new x.a({maxSize:Object(k.a)(this.DEFAULT_MAX_SIZE_MB,"MB")},this.i18n),new _.a({types:["image"]},this.i18n)];this.validations.push(...t)}}return t.\u0275fac=function(e){return S(e||t)},t.\u0275prov=r.Nb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const S=r.Zb(C);var X=i("ofXK"),I=i("Qu3c"),O=i("NFeN"),W=i("STbY"),D=i("Rd8u"),R=i("zW5C");i.d(e,"a",(function(){return H}));const T=["visualArea"],L=["sourceArea"];function P(t,e){if(1&t){const t=r.Yb();r.Xb(0,"div",3),r.Xb(1,"button",4),r.fc("click",(function(e){return r.Cc(t),r.jc().openFileUploadDialog()})),r.kc(2,"trans"),r.Sb(3,"mat-icon",19),r.Wb(),r.Wb()}2&t&&(r.Db(1),r.rc("matTooltip",r.lc(2,1,"Add Attachment")))}function E(t,e){if(1&t){const t=r.Yb();r.Xb(0,"div",3),r.Xb(1,"button",4),r.fc("click",(function(e){return r.Cc(t),r.jc().execCommand("codesample")})),r.kc(2,"trans"),r.Sb(3,"mat-icon",20),r.Wb(),r.Wb()}2&t&&(r.Db(1),r.rc("matTooltip",r.lc(2,1,"Insert Code Sample")))}function j(t,e){if(1&t){const t=r.Yb();r.Xb(0,"button",23),r.fc("click",(function(e){return r.Cc(t),r.jc(2).openInsertImageModal()})),r.kc(1,"trans"),r.Sb(2,"mat-icon",24),r.Wb()}2&t&&r.rc("matTooltip",r.lc(1,1,"Insert Image"))}function M(t,e){if(1&t){const t=r.Yb();r.Xb(0,"div",3),r.Xb(1,"button",4),r.fc("click",(function(e){return r.Cc(t),r.jc().execCommand("mceLink")})),r.kc(2,"trans"),r.Sb(3,"mat-icon",21),r.Wb(),r.Lc(4,j,3,3,"button",22),r.Wb()}if(2&t){const t=r.jc();r.Db(1),r.Hb("active",t.queryCommandState("link")),r.rc("matTooltip",r.lc(2,4,"Insert Link")),r.Db(3),r.rc("ngIf",t.currentUser.hasPermission("files.create"))}}function N(t,e){if(1&t){const t=r.Yb();r.Xb(0,"div",1),r.Xb(1,"div",3),r.Xb(2,"button",25),r.Xb(3,"span",26),r.Nc(4,"Insert"),r.Wb(),r.Sb(5,"mat-icon",27),r.Wb(),r.Xb(6,"mat-menu",null,28),r.Xb(8,"div",29),r.fc("click",(function(e){return r.Cc(t),r.jc().execCommand("InsertHorizontalRule")})),r.Sb(9,"mat-icon",30),r.Xb(10,"span",26),r.Nc(11,"Horizontal Line"),r.Wb(),r.Wb(),r.Xb(12,"div",29),r.fc("click",(function(e){return r.Cc(t),r.jc().execCommand("mceLink")})),r.Sb(13,"mat-icon",21),r.Xb(14,"span",26),r.Nc(15,"Link"),r.Wb(),r.Wb(),r.Xb(16,"div",29),r.fc("click",(function(e){return r.Cc(t),r.jc().execCommand("mceMedia")})),r.Sb(17,"mat-icon",31),r.Xb(18,"span",26),r.Nc(19,"Media"),r.Wb(),r.Wb(),r.Xb(20,"div",32),r.fc("click",(function(e){return r.Cc(t),r.jc().insertInfoContainer("important")})),r.Sb(21,"mat-icon",33),r.Xb(22,"span",26),r.Nc(23,"Important"),r.Wb(),r.Wb(),r.Xb(24,"div",32),r.fc("click",(function(e){return r.Cc(t),r.jc().insertInfoContainer("warning")})),r.Sb(25,"mat-icon",34),r.Xb(26,"span",26),r.Nc(27,"Warning"),r.Wb(),r.Wb(),r.Xb(28,"div",32),r.fc("click",(function(e){return r.Cc(t),r.jc().insertInfoContainer("note")})),r.Sb(29,"mat-icon",35),r.Xb(30,"span",26),r.Nc(31,"Note"),r.Wb(),r.Wb(),r.Wb(),r.Wb(),r.Xb(32,"div",3),r.Xb(33,"button",36),r.Xb(34,"span",26),r.Nc(35,"Format"),r.Wb(),r.Sb(36,"mat-icon",27),r.Wb(),r.Xb(37,"mat-menu",37,38),r.Xb(39,"div",29),r.fc("click",(function(e){return r.Cc(t),r.jc().execCommand("FormatBlock","h1")})),r.Xb(40,"div",39),r.Nc(41,"Heading 1"),r.Wb(),r.Xb(42,"div",40),r.Nc(43,"Ctrl+Alt+1"),r.Wb(),r.Wb(),r.Xb(44,"div",29),r.fc("click",(function(e){return r.Cc(t),r.jc().execCommand("FormatBlock","h2")})),r.Xb(45,"div",39),r.Nc(46,"Heading 2"),r.Wb(),r.Xb(47,"div",40),r.Nc(48,"Ctrl+Alt+2"),r.Wb(),r.Wb(),r.Xb(49,"div",29),r.fc("click",(function(e){return r.Cc(t),r.jc().execCommand("FormatBlock","h3")})),r.Xb(50,"div",39),r.Nc(51,"Heading 3"),r.Wb(),r.Xb(52,"div",40),r.Nc(53,"Ctrl+Alt+3"),r.Wb(),r.Wb(),r.Xb(54,"div",29),r.fc("click",(function(e){return r.Cc(t),r.jc().execCommand("strikethrough")})),r.Xb(55,"div",39),r.Nc(56,"Strikethrough"),r.Wb(),r.Xb(57,"div",40),r.Nc(58,"Alt+Shift+5"),r.Wb(),r.Wb(),r.Xb(59,"div",29),r.fc("click",(function(e){return r.Cc(t),r.jc().execCommand("superscript")})),r.Xb(60,"div",39),r.Nc(61,"Superscript"),r.Wb(),r.Xb(62,"div",40),r.Nc(63,"Ctrl+."),r.Wb(),r.Wb(),r.Xb(64,"div",29),r.fc("click",(function(e){return r.Cc(t),r.jc().execCommand("subscript")})),r.Xb(65,"div",39),r.Nc(66,"Subscript"),r.Wb(),r.Xb(67,"div",40),r.Nc(68,"Ctrl+,"),r.Wb(),r.Wb(),r.Xb(69,"div",29),r.fc("click",(function(e){return r.Cc(t),r.jc().execCommand("mceBlockQuote")})),r.Xb(70,"div",39),r.Nc(71,"Blockquote"),r.Wb(),r.Xb(72,"div",40),r.Nc(73,"Ctrl+Alt+B"),r.Wb(),r.Wb(),r.Xb(74,"div",29),r.fc("click",(function(e){return r.Cc(t),r.jc().execCommand("FormatBlock","p")})),r.Xb(75,"div",39),r.Nc(76,"Paragraph"),r.Wb(),r.Xb(77,"div",40),r.Nc(78,"Ctrl+Alt+0"),r.Wb(),r.Wb(),r.Wb(),r.Wb(),r.Xb(79,"div",3),r.Xb(80,"button",41,42),r.Xb(82,"span",26),r.Nc(83,"Color"),r.Wb(),r.Sb(84,"mat-icon",27),r.Wb(),r.Xb(85,"mat-menu",43,44),r.Xb(87,"div",45),r.fc("click",(function(e){r.Cc(t);const i=r.zc(81);return r.jc().showColorPicker("ForeColor",i)})),r.Sb(88,"mat-icon",46),r.Xb(89,"span",26),r.Nc(90,"Text Color"),r.Wb(),r.Wb(),r.Xb(91,"div",47),r.fc("click",(function(e){r.Cc(t);const i=r.zc(81);return r.jc().showColorPicker("HiliteColor",i)})),r.Sb(92,"mat-icon",48),r.Xb(93,"span",26),r.Nc(94,"Background Color"),r.Wb(),r.Wb(),r.Wb(),r.Wb(),r.Xb(95,"div",3),r.Xb(96,"button",4),r.fc("click",(function(e){return r.Cc(t),r.jc().execCommand("justifyLeft")})),r.kc(97,"trans"),r.Sb(98,"mat-icon",49),r.Wb(),r.Xb(99,"button",4),r.fc("click",(function(e){return r.Cc(t),r.jc().execCommand("justifyCenter")})),r.kc(100,"trans"),r.Sb(101,"mat-icon",50),r.Wb(),r.Xb(102,"button",4),r.fc("click",(function(e){return r.Cc(t),r.jc().execCommand("justifyRight")})),r.kc(103,"trans"),r.Sb(104,"mat-icon",51),r.Wb(),r.Wb(),r.Xb(105,"div",3),r.Xb(106,"button",4),r.fc("click",(function(e){return r.Cc(t),r.jc().execCommand("Outdent")})),r.kc(107,"trans"),r.Sb(108,"mat-icon",52),r.Wb(),r.Xb(109,"button",4),r.fc("click",(function(e){return r.Cc(t),r.jc().execCommand("Indent")})),r.kc(110,"trans"),r.Sb(111,"mat-icon",53),r.Wb(),r.Wb(),r.Xb(112,"div",54),r.Xb(113,"button",55),r.fc("click",(function(e){return r.Cc(t),r.jc().showVisualEditor()})),r.Nc(114,"Visual "),r.Wb(),r.Xb(115,"button",56),r.fc("click",(function(e){return r.Cc(t),r.jc().showSourceEditor()})),r.Nc(116,"Source "),r.Wb(),r.Wb(),r.Wb()}if(2&t){const t=r.zc(7),e=r.zc(38),i=r.zc(86),n=r.jc();r.Db(2),r.rc("matMenuTriggerFor",t),r.Db(31),r.rc("matMenuTriggerFor",e),r.Db(47),r.rc("matMenuTriggerFor",i),r.Db(16),r.Hb("active",n.queryCommandState("justifyLeft")),r.rc("matTooltip",r.lc(97,18,"Align Left")),r.Db(3),r.Hb("active",n.queryCommandState("justifyCenter")),r.rc("matTooltip",r.lc(100,20,"Center")),r.Db(3),r.Hb("active",n.queryCommandState("justifyRight")),r.rc("matTooltip",r.lc(103,22,"Align Right")),r.Db(4),r.rc("matTooltip",r.lc(107,24,"Decrease Indent")),r.Db(3),r.rc("matTooltip",r.lc(110,26,"Increase Indent")),r.Db(4),r.Hb("active","visual"===n.activeEditor),r.Db(2),r.Hb("active","source"===n.activeEditor)}}const F=[[["","customButtons",""]],[["","header",""]],[["","footer",""]]],A=["[customButtons]","[header]","[footer]"];let H=(()=>{class t{constructor(t,e,i,n,s,o,a,c){this.editor=t,this.currentUser=e,this.uploadQueue=i,this.settings=n,this.renderer=s,this.el=o,this.overlayPanel=a,this.imageValidator=c,this.sourceAreaControl=new u.h,this.activeEditor="visual",this.showAdvancedControls=!1,this.basic=!1,this.minHeight=183,this.maxHeight=530,this.onChange=new r.o,this.onCtrlEnter=new r.o,this.onFileUpload=new r.o}ngAfterViewInit(){this.bootTextEditor()}ngOnDestroy(){this.destroyEditor()}reset(){this.editor.reset()}focus(){this.editor.focus()}hasUndo(){return this.editor.hasUndo()}hasRedo(){return this.editor.hasRedo()}queryCommandState(t){return this.editor.queryCommandState(t)}execCommand(t,e=null){this.editor.execCommand(t,e)}insertInfoContainer(t){this.insertContents(`<div class="widget widget-${t}"><div class="title">${Object(l.a)(t)}:</div><br></div><br>`)}showColorPicker(t,e){return Object(n.a)(this,void 0,void 0,(function*(){const{BeColorPickerModule:n}=yield i.e(1).then(i.bind(null,"0PT2"));this.overlayPanel.open(n.components.panel,{origin:new r.l(e),position:c.a}).valueChanged().pipe(Object(d.a)(50)).subscribe(e=>{this.execCommand(t,e)})}))}showVisualEditor(){this.editor.tinymceInstance.contentAreaContainer&&"visual"!==this.activeEditor&&(this.activeEditor="visual",this.renderer.setStyle(this.editor.tinymceInstance.contentAreaContainer,"display","block"),this.renderer.setStyle(this.sourceTextArea.nativeElement,"display","none"),this.editor.focus())}showSourceEditor(){this.editor.tinymceInstance.contentAreaContainer&&"source"!==this.activeEditor&&(this.activeEditor="source",this.renderer.setStyle(this.sourceTextArea.nativeElement,"height",this.editor.tinymceInstance.contentAreaContainer.offsetHeight+"px"),this.renderer.setStyle(this.sourceTextArea.nativeElement,"display","block"),this.renderer.setStyle(this.editor.tinymceInstance.contentAreaContainer,"display","none"),this.sourceAreaControl.setValue(this.editor.getContents({source_view:!0})))}openFileUploadDialog(){Object(s.a)({multiple:!0}).then(t=>{this.onFileUpload.emit(t)})}openInsertImageModal(){const t={uri:h.a.Image,validator:this.imageValidator,httpParams:{diskPrefix:this.inlineUploadPrefix}};Object(s.a)({types:[a.a.image]}).then(e=>{this.uploadQueue.start(e,t).subscribe(t=>{this.insertImage(this.settings.getBaseUrl(!0)+t.fileEntry.url)})})}getContents(){return this.editor.getContents()}setContents(t){this.editor.setContents(t)}insertContents(t){this.editor.insertContents(t)}insertImage(t){this.editor.insertImage(t)}insertLink(t){this.insertContents(`<a href="${t.href}" target="${t.target||"self"}">${t.text}</a>`)}destroyEditor(){this.editor.destroyEditor()}bootTextEditor(){this.editor.setConfig({textAreaEl:this.visualTextArea,editorEl:this.el,minHeight:this.minHeight,maxHeight:this.maxHeight,onChange:this.onChange,onCtrlEnter:this.onCtrlEnter,showAdvancedControls:this.showAdvancedControls})}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(m),r.Rb(v.a),r.Rb(o.a),r.Rb(b.a),r.Rb(r.G),r.Rb(r.l),r.Rb(y.a),r.Rb(C))},t.\u0275cmp=r.Lb({type:t,selectors:[["text-editor"]],viewQuery:function(t,e){var i;1&t&&(r.Jc(T,!0),r.Jc(L,!0)),2&t&&(r.yc(i=r.gc())&&(e.visualTextArea=i.first),r.yc(i=r.gc())&&(e.sourceTextArea=i.first))},inputs:{showAdvancedControls:"showAdvancedControls",basic:"basic",minHeight:"minHeight",maxHeight:"maxHeight",inlineUploadPrefix:"inlineUploadPrefix"},outputs:{onChange:"onChange",onCtrlEnter:"onCtrlEnter",onFileUpload:"onFileUpload"},features:[r.Cb([o.a])],ngContentSelectors:A,decls:41,vars:47,consts:[[1,"editor-header"],[1,"toolbar-row"],["class","header-actions",4,"ngIf"],[1,"header-actions"],["type","button",1,"no-style","editor-button",3,"matTooltip","click"],["svgIcon","undo"],["svgIcon","redo"],["svgIcon","format-bold"],["svgIcon","format-italic"],["svgIcon","format-underlined"],["svgIcon","format-list-bulleted"],["svgIcon","format-list-numbered"],[1,"header-actions","last"],["svgIcon","format-clear"],["class","toolbar-row",4,"ngIf"],["rows","8",1,"source-textarea",2,"display","none",3,"formControl","blur"],["sourceArea",""],["rows","8",1,"visual-textarea"],["visualArea",""],["svgIcon","attachment"],["svgIcon","code"],["svgIcon","link"],["type","button","class","no-style editor-button image-modal-button",3,"matTooltip","click",4,"ngIf"],["type","button",1,"no-style","editor-button","image-modal-button",3,"matTooltip","click"],["svgIcon","image"],["type","button",1,"no-style","editor-button","text-button","insert-button",3,"matMenuTriggerFor"],["trans",""],["svgIcon","arrow-drop-down",1,"caret"],["insertMenu",""],["mat-menu-item","",3,"click"],["svgIcon","remove"],["svgIcon","videocam"],["mat-menu-item","","trans","",3,"click"],["svgIcon","star"],["svgIcon","warning"],["svgIcon","note"],["type","button",1,"no-style","editor-button","text-button","format-button",3,"matMenuTriggerFor"],[1,"format-menu","menu-with-alt-text"],["formatMenu",""],["trans","",1,"text"],[1,"alt-text"],["type","button",1,"no-style","editor-button","text-button","color-button",3,"matMenuTriggerFor"],["colorPickerOrigin",""],[1,"color-dropdown"],["colorMenu",""],["mat-menu-item","",1,"text-color-item",3,"click"],["svgIcon","format-color-text"],["mat-menu-item","",1,"bg-color-item",3,"click"],["svgIcon","format-color-fill"],["svgIcon","format-align-left"],["svgIcon","format-align-center"],["svgIcon","format-align-right"],["svgIcon","format-indent-decrease"],["svgIcon","format-indent-increase"],[1,"header-actions","editor-toggle-buttons"],["type","button","trans","",1,"no-style","editor-button","visual-mode-button",3,"click"],["type","button","trans","",1,"no-style","editor-button","source-mode-button",3,"click"]],template:function(t,e){1&t&&(r.qc(F),r.Xb(0,"div",0),r.Xb(1,"div",1),r.Lc(2,P,4,3,"div",2),r.Lc(3,E,4,3,"div",2),r.Xb(4,"div",3),r.Xb(5,"button",4),r.fc("click",(function(t){return e.execCommand("undo")})),r.kc(6,"trans"),r.Sb(7,"mat-icon",5),r.Wb(),r.Xb(8,"button",4),r.fc("click",(function(t){return e.execCommand("redo")})),r.kc(9,"trans"),r.Sb(10,"mat-icon",6),r.Wb(),r.Wb(),r.Xb(11,"div",3),r.Xb(12,"button",4),r.fc("click",(function(t){return e.execCommand("bold")})),r.kc(13,"trans"),r.Sb(14,"mat-icon",7),r.Wb(),r.Xb(15,"button",4),r.fc("click",(function(t){return e.execCommand("italic")})),r.kc(16,"trans"),r.Sb(17,"mat-icon",8),r.Wb(),r.Xb(18,"button",4),r.fc("click",(function(t){return e.execCommand("underline")})),r.kc(19,"trans"),r.Sb(20,"mat-icon",9),r.Wb(),r.Wb(),r.Xb(21,"div",3),r.Xb(22,"button",4),r.fc("click",(function(t){return e.execCommand("insertunorderedlist")})),r.kc(23,"trans"),r.Sb(24,"mat-icon",10),r.Wb(),r.Xb(25,"button",4),r.fc("click",(function(t){return e.execCommand("insertorderedlist")})),r.kc(26,"trans"),r.Sb(27,"mat-icon",11),r.Wb(),r.Wb(),r.Lc(28,M,5,6,"div",2),r.pc(29),r.Xb(30,"div",12),r.Xb(31,"button",4),r.fc("click",(function(t){return e.execCommand("removeformat")})),r.kc(32,"trans"),r.Sb(33,"mat-icon",13),r.Wb(),r.Wb(),r.pc(34,1),r.Wb(),r.Lc(35,N,117,28,"div",14),r.Wb(),r.Xb(36,"textarea",15,16),r.fc("blur",(function(t){return e.setContents(e.sourceAreaControl.value)})),r.Wb(),r.Sb(38,"textarea",17,18),r.pc(40,2)),2&t&&(r.Db(2),r.rc("ngIf",e.inlineUploadPrefix&&e.currentUser.hasPermission("files.create")),r.Db(1),r.rc("ngIf",!e.basic),r.Db(2),r.Hb("disabled",!e.hasUndo()),r.rc("matTooltip",r.lc(6,31,"Undo")),r.Db(3),r.Hb("disabled",!e.hasRedo()),r.rc("matTooltip",r.lc(9,33,"Redo")),r.Db(4),r.Hb("active",e.queryCommandState("bold")),r.rc("matTooltip",r.lc(13,35,"Bold")),r.Db(3),r.Hb("active",e.queryCommandState("italic")),r.rc("matTooltip",r.lc(16,37,"Italic")),r.Db(3),r.Hb("active",e.queryCommandState("underline")),r.rc("matTooltip",r.lc(19,39,"Underline")),r.Db(4),r.Hb("active",e.queryCommandState("unorderedlist")),r.rc("matTooltip",r.lc(23,41,"Unordered List")),r.Db(3),r.Hb("active",e.queryCommandState("orderedlist")),r.rc("matTooltip",r.lc(26,43,"Ordered List")),r.Db(3),r.rc("ngIf",!e.basic),r.Db(3),r.rc("matTooltip",r.lc(32,45,"Remove Formatting")),r.Db(4),r.rc("ngIf",e.showAdvancedControls),r.Db(1),r.Kc("min-height",e.minHeight),r.rc("formControl",e.sourceAreaControl),r.Db(2),r.Kc("min-height",e.minHeight))},directives:[X.t,I.a,O.a,u.c,u.t,u.i,W.d,D.a,W.e,W.b],pipes:[R.a],styles:["[_nghost-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;min-height:218px;max-height:600px;position:relative;border:1px solid var(--be-divider-default);border-radius:4px;overflow:hidden}[_nghost-%COMP%]     .editor-button{color:#788593;padding:7px;width:36px;height:36px}[_nghost-%COMP%]     .editor-button .mat-icon{height:22px;width:22px}[_nghost-%COMP%]     .editor-button .caret{display:inline-block;width:20px;height:20px;vertical-align:middle}[_nghost-%COMP%]     .editor-button.text-button{display:block;font-weight:300;font-size:1.5rem;width:auto}[_nghost-%COMP%]     .editor-button.disabled{opacity:.4}[_nghost-%COMP%]     .editor-button.active{background-color:rgba(0,0,0,.04)}[_nghost-%COMP%]     .editor-button.success{color:var(--be-accent-default)}[_nghost-%COMP%]     .editor-button:hover{background-color:rgba(0,0,0,.04)}[_nghost-%COMP%]     .editor-footer{position:relative;height:37px;flex-shrink:0;background-color:var(--be-background-alternative);border-top:1px solid var(--be-divider-default)}textarea[_ngcontent-%COMP%]{border:none;outline:none;resize:none;padding:15px}.editor-header[_ngcontent-%COMP%]{clear:both;-webkit-box-flex:0;flex:0 0 37px;background-color:var(--be-background-alternative)}.toolbar-row[_ngcontent-%COMP%]{display:-webkit-box;display:flex;height:37px;border-bottom:1px solid var(--be-divider-default);overflow:hidden}  .header-actions{display:inline-block;border-right:1px solid var(--be-divider-default);height:100%;padding:0 4px}  .header-actions.right{margin-left:auto;margin-right:7px}  .header-actions.last{border-right:none}.editor-toggle-buttons[_ngcontent-%COMP%]{border-right:none;margin-left:auto;padding:0;display:-webkit-box;display:flex}.editor-toggle-buttons[_ngcontent-%COMP%]   .editor-button[_ngcontent-%COMP%]{width:auto}@media only screen and (max-width:768px){.editor-header[_ngcontent-%COMP%]{display:none}}"],changeDetection:0}),t})()},LBXl:function(t,e,i){"use strict";e.UnsubscriptionError=function(){function t(t){return Error.call(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(t,e){return e+1+") "+t.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t}()},"LJ/p":function(t,e,i){"use strict";var n=i("Q1FS"),r=i("zB/H"),s=i("VKeD");e.scheduleIterable=function(t,e){if(!t)throw new Error("Iterable cannot be null");return new n.Observable((function(i){var n,o=new r.Subscription;return o.add((function(){n&&"function"==typeof n.return&&n.return()})),o.add(e.schedule((function(){n=t[s.iterator](),o.add(e.schedule((function(){if(!i.closed){var t,e;try{var r=n.next();t=r.value,e=r.done}catch(s){return void i.error(s)}e?i.complete():(i.next(t),this.schedule())}})))}))),o}))}},MkmW:function(t,e,i){"use strict";e.hostReportError=function(t){setTimeout((function(){throw t}),0)}},OAkW:function(t,e,i){"use strict";e.subscribeToArray=function(t){return function(e){for(var i=0,n=t.length;i<n&&!e.closed;i++)e.next(t[i]);e.complete()}}},PPfr:function(t,e,i){"use strict";i.d(e,"a",(function(){return W}));var n=i("fXoL"),r=i("3Pt+"),s=i("cuTO"),o=i("7T94"),a=i("Kj3r"),c=i("/uUt"),l=i("eIep"),u=i("JIr8"),d=i("vkgz"),h=i("STbY"),b=i("hLX6"),p=i("LRne"),f=i("U9CY"),g=i("X3Ra"),m=i("twBr"),v=i("QGXG"),y=i("wWhK"),w=i("i2dy"),x=i("bTqV"),k=i("NFeN"),_=i("ofXK"),C=i("Rd8u");const S=["input"];function X(t,e){if(1&t){const t=n.Yb();n.Xb(0,"button",10),n.fc("click",(function(e){return n.Cc(t),n.jc().showNewCannedReplyModal()})),n.Xb(1,"strong",11),n.Nc(2,"Create new canned reply"),n.Wb(),n.Wb()}}function I(t,e){if(1&t){const t=n.Yb();n.Xb(0,"button",12),n.fc("click",(function(i){n.Cc(t);const r=e.$implicit;return n.jc().selectCannedReply(r)})),n.Nc(1),n.Wb()}if(2&t){const t=e.$implicit;n.Db(1),n.Pc(" ",t.name," ")}}function O(t,e){if(1&t){const t=n.Yb();n.Xb(0,"div",13),n.fc("click",(function(e){return n.Cc(t),e.stopPropagation()})),n.Xb(1,"div"),n.Xb(2,"span",11),n.Nc(3,"No results found for"),n.Wb(),n.Xb(4,"strong"),n.Nc(5),n.Wb(),n.Wb(),n.Wb()}if(2&t){const t=n.jc();n.Db(5),n.Oc(t.searchQuery.value)}}let W=(()=>{class t{constructor(t,e,i,s,o){this.cannedRepliesService=t,this.currentUser=e,this.modal=i,this.conversation=s,this.toast=o,this.searchQuery=new r.h,this.onReplySelect=new n.o,this.loadedResultsAtLeastOnce=!1,this.cannedReplies=[]}ngOnInit(){this.searchQuery.valueChanges.pipe(Object(a.a)(250),Object(c.a)(),Object(l.a)(t=>this.getCannedReplies(t)),Object(u.a)(()=>Object(p.a)(f.a))).subscribe(),this.trigger.menuOpened.subscribe(()=>{this.loadedResultsAtLeastOnce||this.getCannedReplies(null,!0).subscribe()})}selectCannedReply(t){const e=t.body.replace(/{{([\w.\-]+?)}}/,(t,e)=>b.pick(e.toLowerCase(),{ticket:this.conversation.get()})||t);this.onReplySelect.emit(Object.assign(Object.assign({},t),{body:e}))}showNewCannedReplyModal(){const t=new s.a({body:this.conversation.draft.get().body,uploads:this.conversation.draft.get().uploads});this.modal.open(o.a,{cannedReply:t},{panelClass:"crupdate-canned-reply-modal-container"}).afterClosed().subscribe(t=>{t&&(this.toast.open("Canned reply created."),this.cannedReplies.unshift(t))})}getCannedReplies(t,e){if(!t&&!e)return Object(p.a)(f.a);const i={query:t,user_id:this.currentUser.get("id"),per_page:20,shared:!0};return this.cannedRepliesService.getReplies(i).pipe(Object(d.a)(t=>{this.loadedResultsAtLeastOnce=!0,this.cannedReplies=t.pagination.data}))}}return t.\u0275fac=function(e){return new(e||t)(n.Rb(g.a),n.Rb(m.a),n.Rb(v.a),n.Rb(y.a),n.Rb(w.a))},t.\u0275cmp=n.Lb({type:t,selectors:[["canned-replies-dropdown"]],viewQuery:function(t,e){var i;1&t&&(n.Jc(h.d,!0),n.Jc(S,!0)),2&t&&(n.yc(i=n.gc())&&(e.trigger=i.first),n.yc(i=n.gc())&&(e.input=i.first))},inputs:{searchQuery:"searchQuery"},outputs:{onReplySelect:"onReplySelect"},decls:10,vars:6,consts:[["mat-icon-button","",1,"no-style","editor-button",3,"matMenuTriggerFor"],["svgIcon","comment",1,"dropdown-icon"],[1,"canned-reply-menu",3,"overlapTrigger"],["cannedReplyMenu","matMenu"],[1,"input-container",3,"click"],["type","text","mat-menu-item","",1,"canned-reply-search-input",3,"formControl"],["input",""],["class","new-canned-reply","mat-menu-item","","trans","",3,"click",4,"ngIf"],["class","canned-reply","mat-menu-item","",3,"click",4,"ngFor","ngForOf"],["class","no-results",3,"click",4,"ngIf"],["mat-menu-item","","trans","",1,"new-canned-reply",3,"click"],["trans",""],["mat-menu-item","",1,"canned-reply",3,"click"],[1,"no-results",3,"click"]],template:function(t,e){if(1&t&&(n.Xb(0,"button",0),n.Sb(1,"mat-icon",1),n.Wb(),n.Xb(2,"mat-menu",2,3),n.Xb(4,"div",4),n.fc("click",(function(t){return t.stopPropagation()})),n.Sb(5,"input",5,6),n.Wb(),n.Lc(7,X,3,0,"button",7),n.Lc(8,I,2,1,"button",8),n.Lc(9,O,6,1,"div",9),n.Wb()),2&t){const t=n.zc(3);n.rc("matMenuTriggerFor",t),n.Db(2),n.rc("overlapTrigger",!1),n.Db(3),n.rc("formControl",e.searchQuery),n.Db(2),n.rc("ngIf",!e.searchQuery.value),n.Db(1),n.rc("ngForOf",e.cannedReplies),n.Db(1),n.rc("ngIf",!e.cannedReplies.length&&e.loadedResultsAtLeastOnce&&e.searchQuery.value)}},directives:[x.b,h.d,k.a,h.e,r.c,h.b,r.t,r.i,_.t,_.s,C.a],styles:["canned-replies-dropdown{display:block}.canned-reply-menu{width:300px}.canned-reply-menu strong{font-weight:500}.canned-reply-menu .input-container{padding:0 10px 10px;border-bottom:1px solid var(--be-divider-default)}.canned-reply-menu .no-results{padding:10px 10px 0;font-size:1.6rem;text-align:center}"],encapsulation:2}),t})()},Q1FS:function(t,e,i){"use strict";var n=i("yx2s"),r=i("Xwq/"),s=i("zfKp"),o=i("9AGB"),a=i("n3uD");function c(t){if(t||(t=a.config.Promise||Promise),!t)throw new Error("no Promise impl found");return t}e.Observable=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var i=new t;return i.source=this,i.operator=e,i},t.prototype.subscribe=function(t,e,i){var n=this.operator,s=r.toSubscriber(t,e,i);if(s.add(n?n.call(s,this.source):this.source||a.config.useDeprecatedSynchronousErrorHandling&&!s.syncErrorThrowable?this._subscribe(s):this._trySubscribe(s)),a.config.useDeprecatedSynchronousErrorHandling&&s.syncErrorThrowable&&(s.syncErrorThrowable=!1,s.syncErrorThrown))throw s.syncErrorValue;return s},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){a.config.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),n.canReportError(t)?t.error(e):console.warn(e)}},t.prototype.forEach=function(t,e){var i=this;return new(e=c(e))((function(e,n){var r;r=i.subscribe((function(e){try{t(e)}catch(i){n(i),r&&r.unsubscribe()}}),n,e)}))},t.prototype._subscribe=function(t){var e=this.source;return e&&e.subscribe(t)},t.prototype[s.observable]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 0===t.length?this:o.pipeFromArray(t)(this)},t.prototype.toPromise=function(t){var e=this;return new(t=c(t))((function(t,i){var n;e.subscribe((function(t){return n=t}),(function(t){return i(t)}),(function(){return t(n)}))}))},t.create=function(e){return new t(e)},t}()},UNqx:function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),r=i("cSoz"),s=i("Y4kR"),o=i("Vi6O"),a=i("q3Kh"),c=i("gTqA");e.mergeMap=function t(e,i,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),"function"==typeof i?function(r){return r.pipe(t((function(t,n){return c.from(e(t,n)).pipe(a.map((function(e,r){return i(t,e,n,r)})))}),n))}:("number"==typeof i&&(n=i),function(t){return t.lift(new l(e,n))})};var l=function(){function t(t,e){void 0===e&&(e=Number.POSITIVE_INFINITY),this.project=t,this.concurrent=e}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.project,this.concurrent))},t}();e.MergeMapOperator=l;var u=function(t){function e(e,i,n){void 0===n&&(n=Number.POSITIVE_INFINITY);var r=t.call(this,e)||this;return r.project=i,r.concurrent=n,r.hasCompleted=!1,r.buffer=[],r.active=0,r.index=0,r}return n(e,t),e.prototype._next=function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)},e.prototype._tryNext=function(t){var e,i=this.index++;try{e=this.project(t,i)}catch(n){return void this.destination.error(n)}this.active++,this._innerSub(e,t,i)},e.prototype._innerSub=function(t,e,i){var n=new o.InnerSubscriber(this,e,i),s=this.destination;s.add(n);var a=r.subscribeToResult(this,t,void 0,void 0,n);a!==n&&s.add(a)},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},e.prototype.notifyNext=function(t,e,i,n,r){this.destination.next(e)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},e}(s.OuterSubscriber);e.MergeMapSubscriber=u},VKeD:function(t,e,i){"use strict";function n(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}e.getSymbolIterator=n,e.iterator=n(),e.$$iterator=e.iterator},Vi6O:function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();e.InnerSubscriber=function(t){function e(e,i,n){var r=t.call(this)||this;return r.parent=e,r.outerValue=i,r.outerIndex=n,r.index=0,r}return n(e,t),e.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},e.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(i("FWf1").Subscriber)},X3Ra:function(t,e,i){"use strict";i.d(e,"a",(function(){return s}));var n=i("fXoL"),r=i("LRXf");let s=(()=>{class t{constructor(t){this.httpClient=t}getReplies(t){return this.httpClient.get("canned-replies",t)}create(t){return this.httpClient.post("canned-replies",t)}update(t,e){return this.httpClient.put("canned-replies/"+t,e)}delete(t){return this.httpClient.delete("canned-replies",{ids:t})}}return t.\u0275fac=function(e){return new(e||t)(n.bc(r.a))},t.\u0275prov=n.Nb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},XZLl:function(t,e,i){"use strict";i.d(e,"a",(function(){return u}));var n=i("fXoL"),r=i("itxp"),s=i("/w9p"),o=i("kmQS"),a=i("LRXf"),c=i("jhN1"),l=i("twBr");let u=(()=>{class t{constructor(t,e,i,r,s,o){this.file=t,this.transformer=e,this.settings=i,this.http=r,this.sanitizer=s,this.currentUser=o,this.filePreviewWrapper=!0,this.download=new n.o}getSrc(){return this.transformer(this.file)}getSafeSrc(){return this.sanitizer.bypassSecurityTrustResourceUrl(this.getSrc())}getContents(){return this.http.get(this.getSrc(),null,{responseType:"text"})}}return t.\u0275fac=function(e){return new(e||t)(n.Rb(r.a),n.Rb(s.a),n.Rb(o.a),n.Rb(a.a),n.Rb(c.b),n.Rb(l.a))},t.\u0275dir=n.Mb({type:t,hostVars:2,hostBindings:function(t,e){2&t&&n.Hb("file-preview-wrapper",e.filePreviewWrapper)}}),t})()},"Xd/8":function(t,e,i){"use strict";var n=i("2Vo4"),r=i("itXk"),s=i("VRyK"),o=i("lJxs"),a=i("pLZG"),c=i("IzEk"),l=i("Kj3r"),u=i("/uUt"),d=i("3Pt+"),h=i("0EQZ");i.d(e,"a",(function(){return b}));class b{constructor(t){this.config=t,this.initiated=!1,this.pagination$=new n.a(null),this.userParamsChange$=new n.a({}),this.selectedRows=new h.c(!0,[]),this.searchControl=new d.h,this.filterForm=new d.k({}),this.nextPageLoader$=new n.a(null),this.virtualSort$=new n.a({}),this.paginationParams={},this.activeFilters$=this.filterForm.valueChanges.pipe(Object(o.a)(t=>Object.entries(t).filter(t=>null!=t[1]).map(t=>this.config.filters.find(e=>e.column===t[0])))),this.config.filters&&(this.config.filters.forEach(t=>{const e=new d.h(t.defaultValue||null);this.filterForm.addControl(t.column,e)}),this.applyFiltersFromQueryParams()),t.dataPaginator&&t.dontUpdateQueryParams&&(t.dataPaginator.dontUpdateQueryParams=!0)}get paginatedOnce$(){return this.config.dataPaginator.paginatedOnce$.pipe(Object(a.a)(t=>!!t),Object(c.a)(1))}get noResults$(){return Object(r.a)([this.config.dataPaginator.noResults$,this.pagination$]).pipe(Object(o.a)(([t,e])=>t&&e&&!e.data.length))}get loading$(){return this.config.dataPaginator.loading$}get totalCount$(){return this.pagination$.pipe(Object(o.a)(t=>t?t.total:null))}anyRowsSelected(){return this.selectedRows.hasValue()}allRowsSelected(){return this.selectedRows.selected.length&&this.selectedRows.selected.length===this.pagination$.value.data.length}toggleAllRows(){this.allRowsSelected()?this.deselectAllItems():this.pagination$.value.data.forEach(t=>this.selectedRows.select(t))}deselectAllItems(){this.selectedRows.clear()}getSelectedItems(){return this.selectedRows.selected.map(t=>t.id)}setSelectedItems(t){this.deselectAllItems(),this.selectedRows.select(...t)}setData(t){this.pagination$.next(Object.assign(Object.assign({},this.pagination$.value),{data:t}))}getData(){return this.pagination$.value?this.pagination$.value.data:[]}removeFilter(t){this.filterForm.get(t).setValue(null)}updateConfig(t){return this.config=Object.assign(Object.assign({},this.config),t),this}reload(t={}){this.userParamsChange$.next(t),this.initiated||this.init()}canLoadNextPage(){return this.pagination$.value&&this.getCurrentPage()<this.pagination$.value.last_page}loadNextPage(){this.nextPageLoader$.next({page:this.getCurrentPage()+1})}reset(t){this.searchControl.reset(),this.resetSort(),this.resetMatPaginator(),this.deselectAllItems(),this.reload(t)}init(t){if(this.initiated)return this;t&&this.updateConfig(t);const e=this.config.matSort?Object(s.a)(this.config.matSort.sortChange,this.config.matSort.initialized):this.virtualSort$,i=this.config.matPaginator?Object(s.a)(this.config.matPaginator.page,this.config.matPaginator.initialized):this.nextPageLoader$,n=this.searchControl.valueChanges.pipe(Object(l.a)(400),Object(u.a)(),Object(o.a)(t=>({query:t}))),a=this.filterForm.valueChanges.pipe(Object(o.a)(t=>(Object.keys(t).forEach(e=>{null==t[e]?delete t[e]:t[e].id&&(t[e]=t[e].id)}),t)));return Object(r.a)([e,i,n,a,this.userParamsChange$]).pipe(Object(l.a)(0),Object(o.a)(t=>this.transformParams(t))).subscribe(t=>{this.config.dataPaginator.paginate(t,this.config.uri,this.config.initialData)}),this.config.dataPaginator.pagination$.subscribe(t=>{if(this.config.matPaginator&&(this.config.matPaginator.pageIndex=t.current_page-1,this.config.matPaginator.pageSize=t.per_page,this.config.matPaginator.length=t.data.length?t.total:0),this.config.appendData&&t.current_page!==this.getCurrentPage()){const e=this.pagination$.value?this.pagination$.value.data:[];t=Object.assign(Object.assign({},t),{data:[...e,...t.data]})}this.pagination$.next(t)}),this.searchControl.setValue(null),this.filterForm.patchValue({}),this.initiated=!0,this}getCurrentPage(){return this.pagination$.value?this.pagination$.value.current_page:void 0}transformParams(t){const e=t.reduce((t,e)=>Object.assign(Object.assign({},t),e));this.config.matPaginator&&(e.page=null!=e.pageIndex?e.pageIndex+1:void 0,e.per_page=e.pageSize),e.orderBy=e.active,e.orderDir=e.direction;const i=["pageIndex","pageSize","active","direction","previousPageIndex","length"];return Object.keys(e).forEach(t=>{(i.indexOf(t)>-1||null==e[t])&&delete e[t]}),this.paginationParams=Object.assign(Object.assign({},this.config.staticParams),e),this.paginationParams}resetSort(){this.config.matSort&&this.config.matSort.sort({id:null,start:null,disableClear:!1})}resetMatPaginator(){this.config.matPaginator&&(this.config.matPaginator.length=0,this.config.matPaginator._changePageSize(15),this.config.matPaginator.firstPage())}connect(){return this.pagination$.pipe(Object(a.a)(t=>!!t),Object(o.a)(t=>t?t.data:[]))}disconnect(){this.config.dataPaginator.destroy(),this.pagination$.complete()}applyFiltersFromQueryParams(){const t=this.config.dataPaginator.currentQueryParams(),e={};Object.keys(this.filterForm.controls).forEach(i=>{let n=t[i];n&&("false"===n?n=!1:"true"===n&&(n=!0),e[i]=n)}),Object.keys(e).length&&setTimeout(()=>{this.filterForm.patchValue(e)})}}},"Xwq/":function(t,e,i){"use strict";var n=i("FWf1"),r=i("p//D"),s=i("GiSu");e.toSubscriber=function(t,e,i){if(t){if(t instanceof n.Subscriber)return t;if(t[r.rxSubscriber])return t[r.rxSubscriber]()}return t||e||i?new n.Subscriber(t,e,i):new n.Subscriber(s.empty)}},Y4kR:function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();e.OuterSubscriber=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.notifyNext=function(t,e,i,n,r){this.destination.next(e)},e.prototype.notifyError=function(t,e){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.destination.complete()},e}(i("FWf1").Subscriber)},YdAL:function(t,e,i){"use strict";function n(t){return getComputedStyle(t)}function r(t,e){for(var i in e){var n=e[i];"number"==typeof n&&(n+="px"),t.style[i]=n}return t}function s(t){var e=document.createElement("div");return e.className=t,e}var o="undefined"!=typeof Element&&(Element.prototype.matches||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector);function a(t,e){if(!o)throw new Error("No element matching method supported");return o.call(t,e)}function c(t){t.remove?t.remove():t.parentNode&&t.parentNode.removeChild(t)}function l(t,e){return Array.prototype.filter.call(t.children,(function(t){return a(t,e)}))}var u=function(t){return"ps__thumb-"+t},d=function(t){return"ps__rail-"+t},h=function(t){return"ps--active-"+t},b=function(t){return"ps--scrolling-"+t},p={x:null,y:null};function f(t,e){var i=t.element.classList,n=b(e);i.contains(n)?clearTimeout(p[e]):i.add(n)}function g(t,e){p[e]=setTimeout((function(){return t.isAlive&&t.element.classList.remove(b(e))}),t.settings.scrollingThreshold)}var m=function(t){this.element=t,this.handlers={}},v={isEmpty:{configurable:!0}};m.prototype.bind=function(t,e){void 0===this.handlers[t]&&(this.handlers[t]=[]),this.handlers[t].push(e),this.element.addEventListener(t,e,!1)},m.prototype.unbind=function(t,e){var i=this;this.handlers[t]=this.handlers[t].filter((function(n){return!(!e||n===e)||(i.element.removeEventListener(t,n,!1),!1)}))},m.prototype.unbindAll=function(){for(var t in this.handlers)this.unbind(t)},v.isEmpty.get=function(){var t=this;return Object.keys(this.handlers).every((function(e){return 0===t.handlers[e].length}))},Object.defineProperties(m.prototype,v);var y=function(){this.eventElements=[]};function w(t){if("function"==typeof window.CustomEvent)return new CustomEvent(t);var e=document.createEvent("CustomEvent");return e.initCustomEvent(t,!1,!1,void 0),e}function x(t,e,i,n,r){var s;if(void 0===n&&(n=!0),void 0===r&&(r=!1),"top"===e)s=["contentHeight","containerHeight","scrollTop","y","up","down"];else{if("left"!==e)throw new Error("A proper axis should be provided");s=["contentWidth","containerWidth","scrollLeft","x","left","right"]}!function(t,e,i,n,r){var s=i[0],o=i[1],a=i[2],c=i[3],l=i[4],u=i[5];void 0===n&&(n=!0),void 0===r&&(r=!1);var d=t.element;t.reach[c]=null,d[a]<1&&(t.reach[c]="start"),d[a]>t[s]-t[o]-1&&(t.reach[c]="end"),e&&(d.dispatchEvent(w("ps-scroll-"+c)),e<0?d.dispatchEvent(w("ps-scroll-"+l)):e>0&&d.dispatchEvent(w("ps-scroll-"+u)),n&&function(t,e){f(t,e),g(t,e)}(t,c)),t.reach[c]&&(e||r)&&d.dispatchEvent(w("ps-"+c+"-reach-"+t.reach[c]))}(t,i,s,n,r)}function k(t){return parseInt(t,10)||0}y.prototype.eventElement=function(t){var e=this.eventElements.filter((function(e){return e.element===t}))[0];return e||(e=new m(t),this.eventElements.push(e)),e},y.prototype.bind=function(t,e,i){this.eventElement(t).bind(e,i)},y.prototype.unbind=function(t,e,i){var n=this.eventElement(t);n.unbind(e,i),n.isEmpty&&this.eventElements.splice(this.eventElements.indexOf(n),1)},y.prototype.unbindAll=function(){this.eventElements.forEach((function(t){return t.unbindAll()})),this.eventElements=[]},y.prototype.once=function(t,e,i){var n=this.eventElement(t),r=function(t){n.unbind(e,r),i(t)};n.bind(e,r)};var _={isWebKit:"undefined"!=typeof document&&"WebkitAppearance"in document.documentElement.style,supportsTouch:"undefined"!=typeof window&&("ontouchstart"in window||"maxTouchPoints"in window.navigator&&window.navigator.maxTouchPoints>0||window.DocumentTouch&&document instanceof window.DocumentTouch),supportsIePointer:"undefined"!=typeof navigator&&navigator.msMaxTouchPoints,isChrome:"undefined"!=typeof navigator&&/Chrome/i.test(navigator&&navigator.userAgent)};function C(t){var e=t.element,i=Math.floor(e.scrollTop),n=e.getBoundingClientRect();t.containerWidth=Math.ceil(n.width),t.containerHeight=Math.ceil(n.height),t.contentWidth=e.scrollWidth,t.contentHeight=e.scrollHeight,e.contains(t.scrollbarXRail)||(l(e,d("x")).forEach((function(t){return c(t)})),e.appendChild(t.scrollbarXRail)),e.contains(t.scrollbarYRail)||(l(e,d("y")).forEach((function(t){return c(t)})),e.appendChild(t.scrollbarYRail)),!t.settings.suppressScrollX&&t.containerWidth+t.settings.scrollXMarginOffset<t.contentWidth?(t.scrollbarXActive=!0,t.railXWidth=t.containerWidth-t.railXMarginWidth,t.railXRatio=t.containerWidth/t.railXWidth,t.scrollbarXWidth=S(t,k(t.railXWidth*t.containerWidth/t.contentWidth)),t.scrollbarXLeft=k((t.negativeScrollAdjustment+e.scrollLeft)*(t.railXWidth-t.scrollbarXWidth)/(t.contentWidth-t.containerWidth))):t.scrollbarXActive=!1,!t.settings.suppressScrollY&&t.containerHeight+t.settings.scrollYMarginOffset<t.contentHeight?(t.scrollbarYActive=!0,t.railYHeight=t.containerHeight-t.railYMarginHeight,t.railYRatio=t.containerHeight/t.railYHeight,t.scrollbarYHeight=S(t,k(t.railYHeight*t.containerHeight/t.contentHeight)),t.scrollbarYTop=k(i*(t.railYHeight-t.scrollbarYHeight)/(t.contentHeight-t.containerHeight))):t.scrollbarYActive=!1,t.scrollbarXLeft>=t.railXWidth-t.scrollbarXWidth&&(t.scrollbarXLeft=t.railXWidth-t.scrollbarXWidth),t.scrollbarYTop>=t.railYHeight-t.scrollbarYHeight&&(t.scrollbarYTop=t.railYHeight-t.scrollbarYHeight),function(t,e){var i={width:e.railXWidth},n=Math.floor(t.scrollTop);i.left=e.isRtl?e.negativeScrollAdjustment+t.scrollLeft+e.containerWidth-e.contentWidth:t.scrollLeft,e.isScrollbarXUsingBottom?i.bottom=e.scrollbarXBottom-n:i.top=e.scrollbarXTop+n,r(e.scrollbarXRail,i);var s={top:n,height:e.railYHeight};e.isScrollbarYUsingRight?s.right=e.isRtl?e.contentWidth-(e.negativeScrollAdjustment+t.scrollLeft)-e.scrollbarYRight-e.scrollbarYOuterWidth-9:e.scrollbarYRight-t.scrollLeft:s.left=e.isRtl?e.negativeScrollAdjustment+t.scrollLeft+2*e.containerWidth-e.contentWidth-e.scrollbarYLeft-e.scrollbarYOuterWidth:e.scrollbarYLeft+t.scrollLeft,r(e.scrollbarYRail,s),r(e.scrollbarX,{left:e.scrollbarXLeft,width:e.scrollbarXWidth-e.railBorderXWidth}),r(e.scrollbarY,{top:e.scrollbarYTop,height:e.scrollbarYHeight-e.railBorderYWidth})}(e,t),t.scrollbarXActive?e.classList.add(h("x")):(e.classList.remove(h("x")),t.scrollbarXWidth=0,t.scrollbarXLeft=0,e.scrollLeft=!0===t.isRtl?t.contentWidth:0),t.scrollbarYActive?e.classList.add(h("y")):(e.classList.remove(h("y")),t.scrollbarYHeight=0,t.scrollbarYTop=0,e.scrollTop=0)}function S(t,e){return t.settings.minScrollbarLength&&(e=Math.max(e,t.settings.minScrollbarLength)),t.settings.maxScrollbarLength&&(e=Math.min(e,t.settings.maxScrollbarLength)),e}function X(t,e){var i=e[0],n=e[1],r=e[2],s=e[3],o=e[4],a=e[5],c=e[6],l=e[7],u=e[8],d=t.element,h=null,b=null,p=null;function m(e){e.touches&&e.touches[0]&&(e[r]=e.touches[0].pageY),d[c]=h+p*(e[r]-b),f(t,l),C(t),e.stopPropagation(),e.preventDefault()}function v(){g(t,l),t[u].classList.remove("ps--clicking"),t.event.unbind(t.ownerDocument,"mousemove",m)}function y(e,o){h=d[c],o&&e.touches&&(e[r]=e.touches[0].pageY),b=e[r],p=(t[n]-t[i])/(t[s]-t[a]),o?t.event.bind(t.ownerDocument,"touchmove",m):(t.event.bind(t.ownerDocument,"mousemove",m),t.event.once(t.ownerDocument,"mouseup",v),e.preventDefault()),t[u].classList.add("ps--clicking"),e.stopPropagation()}t.event.bind(t[o],"mousedown",(function(t){y(t)})),t.event.bind(t[o],"touchstart",(function(t){y(t,!0)}))}var I={"click-rail":function(t){t.event.bind(t.scrollbarY,"mousedown",(function(t){return t.stopPropagation()})),t.event.bind(t.scrollbarYRail,"mousedown",(function(e){var i=e.pageY-window.pageYOffset-t.scrollbarYRail.getBoundingClientRect().top;t.element.scrollTop+=(i>t.scrollbarYTop?1:-1)*t.containerHeight,C(t),e.stopPropagation()})),t.event.bind(t.scrollbarX,"mousedown",(function(t){return t.stopPropagation()})),t.event.bind(t.scrollbarXRail,"mousedown",(function(e){var i=e.pageX-window.pageXOffset-t.scrollbarXRail.getBoundingClientRect().left;t.element.scrollLeft+=(i>t.scrollbarXLeft?1:-1)*t.containerWidth,C(t),e.stopPropagation()}))},"drag-thumb":function(t){X(t,["containerWidth","contentWidth","pageX","railXWidth","scrollbarX","scrollbarXWidth","scrollLeft","x","scrollbarXRail"]),X(t,["containerHeight","contentHeight","pageY","railYHeight","scrollbarY","scrollbarYHeight","scrollTop","y","scrollbarYRail"])},keyboard:function(t){var e=t.element;t.event.bind(t.ownerDocument,"keydown",(function(i){if(!(i.isDefaultPrevented&&i.isDefaultPrevented()||i.defaultPrevented)&&(a(e,":hover")||a(t.scrollbarX,":focus")||a(t.scrollbarY,":focus"))){var n,r=document.activeElement?document.activeElement:t.ownerDocument.activeElement;if(r){if("IFRAME"===r.tagName)r=r.contentDocument.activeElement;else for(;r.shadowRoot;)r=r.shadowRoot.activeElement;if(a(n=r,"input,[contenteditable]")||a(n,"select,[contenteditable]")||a(n,"textarea,[contenteditable]")||a(n,"button,[contenteditable]"))return}var s=0,o=0;switch(i.which){case 37:s=i.metaKey?-t.contentWidth:i.altKey?-t.containerWidth:-30;break;case 38:o=i.metaKey?t.contentHeight:i.altKey?t.containerHeight:30;break;case 39:s=i.metaKey?t.contentWidth:i.altKey?t.containerWidth:30;break;case 40:o=i.metaKey?-t.contentHeight:i.altKey?-t.containerHeight:-30;break;case 32:o=i.shiftKey?t.containerHeight:-t.containerHeight;break;case 33:o=t.containerHeight;break;case 34:o=-t.containerHeight;break;case 36:o=t.contentHeight;break;case 35:o=-t.contentHeight;break;default:return}t.settings.suppressScrollX&&0!==s||t.settings.suppressScrollY&&0!==o||(e.scrollTop-=o,e.scrollLeft+=s,C(t),function(i,n){var r=Math.floor(e.scrollTop);if(0===i){if(!t.scrollbarYActive)return!1;if(0===r&&n>0||r>=t.contentHeight-t.containerHeight&&n<0)return!t.settings.wheelPropagation}var s=e.scrollLeft;if(0===n){if(!t.scrollbarXActive)return!1;if(0===s&&i<0||s>=t.contentWidth-t.containerWidth&&i>0)return!t.settings.wheelPropagation}return!0}(s,o)&&i.preventDefault())}}))},wheel:function(t){var e=t.element;function i(i){var r=function(t){var e=t.deltaX,i=-1*t.deltaY;return void 0!==e&&void 0!==i||(e=-1*t.wheelDeltaX/6,i=t.wheelDeltaY/6),t.deltaMode&&1===t.deltaMode&&(e*=10,i*=10),e!=e&&i!=i&&(e=0,i=t.wheelDelta),t.shiftKey?[-i,-e]:[e,i]}(i),s=r[0],o=r[1];if(!function(t,i,r){if(!_.isWebKit&&e.querySelector("select:focus"))return!0;if(!e.contains(t))return!1;for(var s=t;s&&s!==e;){if(s.classList.contains("ps__child--consume"))return!0;var o=n(s);if(r&&o.overflowY.match(/(scroll|auto)/)){var a=s.scrollHeight-s.clientHeight;if(a>0&&(s.scrollTop>0&&r<0||s.scrollTop<a&&r>0))return!0}if(i&&o.overflowX.match(/(scroll|auto)/)){var c=s.scrollWidth-s.clientWidth;if(c>0&&(s.scrollLeft>0&&i<0||s.scrollLeft<c&&i>0))return!0}s=s.parentNode}return!1}(i.target,s,o)){var a=!1;t.settings.useBothWheelAxes?t.scrollbarYActive&&!t.scrollbarXActive?(o?e.scrollTop-=o*t.settings.wheelSpeed:e.scrollTop+=s*t.settings.wheelSpeed,a=!0):t.scrollbarXActive&&!t.scrollbarYActive&&(s?e.scrollLeft+=s*t.settings.wheelSpeed:e.scrollLeft-=o*t.settings.wheelSpeed,a=!0):(e.scrollTop-=o*t.settings.wheelSpeed,e.scrollLeft+=s*t.settings.wheelSpeed),C(t),(a=a||function(i,n){var r=Math.floor(e.scrollTop),s=0===e.scrollTop,o=r+e.offsetHeight===e.scrollHeight,a=0===e.scrollLeft,c=e.scrollLeft+e.offsetWidth===e.scrollWidth;return!(Math.abs(n)>Math.abs(i)?s||o:a||c)||!t.settings.wheelPropagation}(s,o))&&!i.ctrlKey&&(i.stopPropagation(),i.preventDefault())}}void 0!==window.onwheel?t.event.bind(e,"wheel",i):void 0!==window.onmousewheel&&t.event.bind(e,"mousewheel",i)},touch:function(t){if(_.supportsTouch||_.supportsIePointer){var e=t.element,i={},r=0,s={},o=null;_.supportsTouch?(t.event.bind(e,"touchstart",u),t.event.bind(e,"touchmove",d),t.event.bind(e,"touchend",h)):_.supportsIePointer&&(window.PointerEvent?(t.event.bind(e,"pointerdown",u),t.event.bind(e,"pointermove",d),t.event.bind(e,"pointerup",h)):window.MSPointerEvent&&(t.event.bind(e,"MSPointerDown",u),t.event.bind(e,"MSPointerMove",d),t.event.bind(e,"MSPointerUp",h)))}function a(i,n){e.scrollTop-=n,e.scrollLeft-=i,C(t)}function c(t){return t.targetTouches?t.targetTouches[0]:t}function l(t){return!(t.pointerType&&"pen"===t.pointerType&&0===t.buttons||(!t.targetTouches||1!==t.targetTouches.length)&&(!t.pointerType||"mouse"===t.pointerType||t.pointerType===t.MSPOINTER_TYPE_MOUSE))}function u(t){if(l(t)){var e=c(t);i.pageX=e.pageX,i.pageY=e.pageY,r=(new Date).getTime(),null!==o&&clearInterval(o)}}function d(o){if(l(o)){var u=c(o),d={pageX:u.pageX,pageY:u.pageY},h=d.pageX-i.pageX,b=d.pageY-i.pageY;if(function(t,i,r){if(!e.contains(t))return!1;for(var s=t;s&&s!==e;){if(s.classList.contains("ps__child--consume"))return!0;var o=n(s);if(r&&o.overflowY.match(/(scroll|auto)/)){var a=s.scrollHeight-s.clientHeight;if(a>0&&(s.scrollTop>0&&r<0||s.scrollTop<a&&r>0))return!0}if(i&&o.overflowX.match(/(scroll|auto)/)){var c=s.scrollWidth-s.clientWidth;if(c>0&&(s.scrollLeft>0&&i<0||s.scrollLeft<c&&i>0))return!0}s=s.parentNode}return!1}(o.target,h,b))return;a(h,b),i=d;var p=(new Date).getTime(),f=p-r;f>0&&(s.x=h/f,s.y=b/f,r=p),function(i,n){var r=Math.floor(e.scrollTop),s=e.scrollLeft,o=Math.abs(i),a=Math.abs(n);if(a>o){if(n<0&&r===t.contentHeight-t.containerHeight||n>0&&0===r)return 0===window.scrollY&&n>0&&_.isChrome}else if(o>a&&(i<0&&s===t.contentWidth-t.containerWidth||i>0&&0===s))return!0;return!0}(h,b)&&o.preventDefault()}}function h(){t.settings.swipeEasing&&(clearInterval(o),o=setInterval((function(){t.isInitialized?clearInterval(o):s.x||s.y?Math.abs(s.x)<.01&&Math.abs(s.y)<.01?clearInterval(o):(a(30*s.x,30*s.y),s.x*=.8,s.y*=.8):clearInterval(o)}),10))}}},O=function(t,e){var i=this;if(void 0===e&&(e={}),"string"==typeof t&&(t=document.querySelector(t)),!t||!t.nodeName)throw new Error("no element is specified to initialize PerfectScrollbar");for(var o in this.element=t,t.classList.add("ps"),this.settings={handlers:["click-rail","drag-thumb","keyboard","wheel","touch"],maxScrollbarLength:null,minScrollbarLength:null,scrollingThreshold:1e3,scrollXMarginOffset:0,scrollYMarginOffset:0,suppressScrollX:!1,suppressScrollY:!1,swipeEasing:!0,useBothWheelAxes:!1,wheelPropagation:!0,wheelSpeed:1},e)this.settings[o]=e[o];this.containerWidth=null,this.containerHeight=null,this.contentWidth=null,this.contentHeight=null;var a,c,l=function(){return t.classList.add("ps--focus")},h=function(){return t.classList.remove("ps--focus")};this.isRtl="rtl"===n(t).direction,!0===this.isRtl&&t.classList.add("ps__rtl"),this.isNegativeScroll=(c=t.scrollLeft,t.scrollLeft=-1,a=t.scrollLeft<0,t.scrollLeft=c,a),this.negativeScrollAdjustment=this.isNegativeScroll?t.scrollWidth-t.clientWidth:0,this.event=new y,this.ownerDocument=t.ownerDocument||document,this.scrollbarXRail=s(d("x")),t.appendChild(this.scrollbarXRail),this.scrollbarX=s(u("x")),this.scrollbarXRail.appendChild(this.scrollbarX),this.scrollbarX.setAttribute("tabindex",0),this.event.bind(this.scrollbarX,"focus",l),this.event.bind(this.scrollbarX,"blur",h),this.scrollbarXActive=null,this.scrollbarXWidth=null,this.scrollbarXLeft=null;var b=n(this.scrollbarXRail);this.scrollbarXBottom=parseInt(b.bottom,10),isNaN(this.scrollbarXBottom)?(this.isScrollbarXUsingBottom=!1,this.scrollbarXTop=k(b.top)):this.isScrollbarXUsingBottom=!0,this.railBorderXWidth=k(b.borderLeftWidth)+k(b.borderRightWidth),r(this.scrollbarXRail,{display:"block"}),this.railXMarginWidth=k(b.marginLeft)+k(b.marginRight),r(this.scrollbarXRail,{display:""}),this.railXWidth=null,this.railXRatio=null,this.scrollbarYRail=s(d("y")),t.appendChild(this.scrollbarYRail),this.scrollbarY=s(u("y")),this.scrollbarYRail.appendChild(this.scrollbarY),this.scrollbarY.setAttribute("tabindex",0),this.event.bind(this.scrollbarY,"focus",l),this.event.bind(this.scrollbarY,"blur",h),this.scrollbarYActive=null,this.scrollbarYHeight=null,this.scrollbarYTop=null;var p=n(this.scrollbarYRail);this.scrollbarYRight=parseInt(p.right,10),isNaN(this.scrollbarYRight)?(this.isScrollbarYUsingRight=!1,this.scrollbarYLeft=k(p.left)):this.isScrollbarYUsingRight=!0,this.scrollbarYOuterWidth=this.isRtl?function(t){var e=n(t);return k(e.width)+k(e.paddingLeft)+k(e.paddingRight)+k(e.borderLeftWidth)+k(e.borderRightWidth)}(this.scrollbarY):null,this.railBorderYWidth=k(p.borderTopWidth)+k(p.borderBottomWidth),r(this.scrollbarYRail,{display:"block"}),this.railYMarginHeight=k(p.marginTop)+k(p.marginBottom),r(this.scrollbarYRail,{display:""}),this.railYHeight=null,this.railYRatio=null,this.reach={x:t.scrollLeft<=0?"start":t.scrollLeft>=this.contentWidth-this.containerWidth?"end":null,y:t.scrollTop<=0?"start":t.scrollTop>=this.contentHeight-this.containerHeight?"end":null},this.isAlive=!0,this.settings.handlers.forEach((function(t){return I[t](i)})),this.lastScrollTop=Math.floor(t.scrollTop),this.lastScrollLeft=t.scrollLeft,this.event.bind(this.element,"scroll",(function(t){return i.onScroll(t)})),C(this)};O.prototype.update=function(){this.isAlive&&(this.negativeScrollAdjustment=this.isNegativeScroll?this.element.scrollWidth-this.element.clientWidth:0,r(this.scrollbarXRail,{display:"block"}),r(this.scrollbarYRail,{display:"block"}),this.railXMarginWidth=k(n(this.scrollbarXRail).marginLeft)+k(n(this.scrollbarXRail).marginRight),this.railYMarginHeight=k(n(this.scrollbarYRail).marginTop)+k(n(this.scrollbarYRail).marginBottom),r(this.scrollbarXRail,{display:"none"}),r(this.scrollbarYRail,{display:"none"}),C(this),x(this,"top",0,!1,!0),x(this,"left",0,!1,!0),r(this.scrollbarXRail,{display:""}),r(this.scrollbarYRail,{display:""}))},O.prototype.onScroll=function(t){this.isAlive&&(C(this),x(this,"top",this.element.scrollTop-this.lastScrollTop),x(this,"left",this.element.scrollLeft-this.lastScrollLeft),this.lastScrollTop=Math.floor(this.element.scrollTop),this.lastScrollLeft=this.element.scrollLeft)},O.prototype.destroy=function(){this.isAlive&&(this.event.unbindAll(),c(this.scrollbarX),c(this.scrollbarY),c(this.scrollbarXRail),c(this.scrollbarYRail),this.removePsClasses(),this.element=null,this.scrollbarX=null,this.scrollbarY=null,this.scrollbarXRail=null,this.scrollbarYRail=null,this.isAlive=!1)},O.prototype.removePsClasses=function(){this.element.className=this.element.className.split(" ").filter((function(t){return!t.match(/^ps([-_].+|)$/)})).join(" ")};var W=O,D=i("XNiG"),R=i("fXoL");const T=new R.r("SUPPORTS_NATIVE_SCROLLBAR_STYLING",{providedIn:"root",factory:()=>{if(-1!==navigator.userAgent.indexOf("MSIE")||navigator.appVersion.indexOf("Trident/")>-1)return!1;const t=document.createElement("div");t.className="__sb-test",t.style.overflow="scroll",t.style.width="40px";const e=document.createElement("style");e.innerHTML=".__sb-test::-webkit-scrollbar { width: 0px; }",t.appendChild(e),document.body.appendChild(t);const i=40==t.scrollWidth;return document.body.removeChild(t),i}});var L=i("OnlV"),P=i("GU7r"),E=i("kmQS");i.d(e,"a",(function(){return j}));let j=(()=>{class t{constructor(t,e,i,n,r,s,o){this.el=t,this.renderer=e,this.breakpoints=i,this.ngZone=n,this.mutationObserverFactory=r,this.config=s,this.supportsNativeStyling=o,this.subscriptions=[],this.minLength=100,this.suppressX=!0,this.scrollTop=0,this.native=!0,this.debouncer=new D.a}ngAfterViewInit(){this.renderer.addClass(this.el.nativeElement,this.suppressX?"scroll-container":"scroll-container-x"),this.shouldUseNative()||(this.scrollbar=new W(this.el.nativeElement,{minScrollbarLength:this.minLength,suppressScrollX:this.suppressX,useBothWheelAxes:!this.suppressX,wheelSpeed:2}),this.native=!1,this.bindToContentChange())}update(){this.native||this.scrollbar.update()}setScrollTop(t=0){this.el.nativeElement.scrollTop=t,this.scrollTop=this.el.nativeElement.scrollTop,this.update()}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe()),this.subscriptions=[],this.native||this.scrollbar.destroy(),this.debouncer.complete(),this.observer&&this.observer.disconnect()}shouldUseNative(){return!this.config.get("vebto.forceCustomScrollbar")&&!/Edge/.test(navigator.userAgent)&&(!!this.breakpoints.isMobile$.value||this.supportsNativeStyling)}bindToContentChange(){this.observer=this.ngZone.runOutsideAngular(()=>this.mutationObserverFactory.create(t=>{this.debouncer.next(t)})),this.observer.observe(this.el.nativeElement,{childList:!0,subtree:!0}),this.ngZone.runOutsideAngular(()=>{this.debouncer.subscribe(t=>this.update())})}}return t.\u0275fac=function(e){return new(e||t)(R.Rb(R.l),R.Rb(R.G),R.Rb(L.a),R.Rb(R.A),R.Rb(P.c),R.Rb(E.a),R.Rb(T))},t.\u0275dir=R.Mb({type:t,selectors:[["","customScrollbar",""]],inputs:{minLength:["customScrollbarMinLength","minLength"],suppressX:"suppressX"}}),t})()},Z5tI:function(t,e,i){"use strict";var n=i("MkmW");e.subscribeToPromise=function(t){return function(e){return t.then((function(t){e.closed||(e.next(t),e.complete())}),(function(t){return e.error(t)})).then(null,n.hostReportError),e}}},ZiO8:function(t,e,i){"use strict";i.d(e,"a",(function(){return o}));var n=i("XZLl"),r=i("fXoL"),s=i("bTqV");let o=(()=>{class t extends n.a{getMessage(){return this.message||"No file preview available."}}return t.\u0275fac=function(e){return a(e||t)},t.\u0275cmp=r.Lb({type:t,selectors:[["default-preview"]],inputs:{message:"message"},features:[r.Ab],decls:5,vars:1,consts:[[1,"panel","preview-object"],["trans","",1,"message"],["mat-raised-button","","color","accent","trans","",3,"click"]],template:function(t,e){1&t&&(r.Xb(0,"div",0),r.Xb(1,"div",1),r.Nc(2),r.Wb(),r.Xb(3,"button",2),r.fc("click",(function(t){return e.download.emit()})),r.Nc(4,"Download"),r.Wb(),r.Wb()),2&t&&(r.Db(2),r.Oc(e.getMessage()))},directives:[s.b],styles:["[_nghost-%COMP%]{display:block;max-width:380px;max-height:150px}.panel[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center;background-color:var(--be-background);color:var(--be-text);border-radius:4px;width:100%;height:100%;margin:auto;box-shadow:0 3px 3px -2px rgba(0,0,0,.2),0 3px 4px 0 rgba(0,0,0,.14),0 1px 8px 0 rgba(0,0,0,.12)}.message[_ngcontent-%COMP%]{font-size:1.8rem;margin-bottom:15px}.mat-raised-button[_ngcontent-%COMP%]{display:block}"],changeDetection:0}),t})();const a=r.Zb(o)},aV6R:function(t,e,i){"use strict";i.d(e,"a",(function(){return m}));var n=i("KKQg"),r=i("0IaG"),s=i("h586"),o=i("fXoL"),a=i("LsVx"),c=i("Rd8u"),l=i("bTqV"),u=i("NFeN"),d=i("rG4v"),h=i("ofXK"),b=i("83jf");function p(t,e){if(1&t&&(o.Xb(0,"div",11),o.Nc(1),o.Wb()),2&t){const t=o.jc();o.Db(1),o.Oc(t.errors.body)}}function f(t,e){if(1&t&&(o.Xb(0,"div",11),o.Nc(1),o.Wb()),2&t){const t=o.jc();o.Db(1),o.Oc(t.errors.attachments)}}function g(t,e){if(1&t){const t=o.Yb();o.Xb(0,"reply-attachment-list",12),o.fc("detached",(function(e){return o.Cc(t),o.jc().removeAttachment(e)})),o.Wb()}if(2&t){const t=o.jc();o.rc("attachments",t.attachments)}}let m=(()=>{class t{constructor(t,e,i,n){this.dialogRef=t,this.data=e,this.tickets=i,this.uploadQueue=n,this.attachments=[],this.errors={},this.hydrate()}ngAfterViewInit(){this.textEditor.focus(),this.textEditor.setContents(this.reply.body)}hydrate(){this.reply=Object.assign({},this.data.reply),this.attachments=this.reply.uploads.slice()}close(t){this.dialogRef.close(t),this.textEditor.destroyEditor()}confirm(){const t={body:this.textEditor.getContents(),uploads:this.attachments.map(t=>t.id)};this.tickets.updateReply(this.reply.id,t).subscribe(t=>{this.close(t.data)},t=>this.errors=t.messages)}uploadFiles(t){this.uploadQueue.start(t).subscribe(t=>{this.attachments=[...this.attachments,t.fileEntry]})}removeAttachment(t){for(let e=0;e<this.attachments.length;e++)this.attachments[e].id===t.id&&this.attachments.splice(e,1)}}return t.\u0275fac=function(e){return new(e||t)(o.Rb(r.h),o.Rb(r.a),o.Rb(a.a),o.Rb(s.a))},t.\u0275cmp=o.Lb({type:t,selectors:[["update-reply-modal"]],viewQuery:function(t,e){var i;1&t&&o.Jc(n.a,!0),2&t&&o.yc(i=o.gc())&&(e.textEditor=i.first)},features:[o.Cb([s.a])],decls:17,vars:4,consts:[[1,"modal-header"],["mat-dialog-title","","trans",""],["type","button","mat-icon-button","","tabindex","-1",1,"close-button",3,"click"],["svgIcon","close"],[1,"many-inputs"],[1,"input-container"],["inlineUploadPrefix","ticket_images",3,"minHeight","onFileUpload"],["class","error",4,"ngIf"],[3,"attachments","detached",4,"ngIf"],["type","button","mat-button","","trans","",1,"cancel-button",3,"click"],["type","submit","mat-raised-button","","color","accent","trans","",1,"submit-button",3,"click"],[1,"error"],[3,"attachments","detached"]],template:function(t,e){1&t&&(o.Xb(0,"div",0),o.Xb(1,"h2",1),o.Nc(2,"Update Reply"),o.Wb(),o.Xb(3,"button",2),o.fc("click",(function(t){return e.close()})),o.Sb(4,"mat-icon",3),o.Wb(),o.Wb(),o.Xb(5,"mat-dialog-content",4),o.Xb(6,"div",5),o.Xb(7,"text-editor",6),o.fc("onFileUpload",(function(t){return e.uploadFiles(t)})),o.Wb(),o.Sb(8,"upload-progress-bar"),o.Lc(9,p,2,1,"div",7),o.Lc(10,f,2,1,"div",7),o.Lc(11,g,1,1,"reply-attachment-list",8),o.Wb(),o.Wb(),o.Xb(12,"mat-dialog-actions"),o.Xb(13,"button",9),o.fc("click",(function(t){return e.close()})),o.Nc(14,"Cancel"),o.Wb(),o.Xb(15,"button",10),o.fc("click",(function(t){return e.confirm()})),o.Nc(16,"Update"),o.Wb(),o.Wb()),2&t&&(o.Db(7),o.rc("minHeight",300),o.Db(2),o.rc("ngIf",e.errors.body),o.Db(1),o.rc("ngIf",e.errors.attachments),o.Db(1),o.rc("ngIf",e.attachments.length))},directives:[r.i,c.a,l.b,u.a,r.f,n.a,d.a,h.t,r.c,b.a],styles:[".update-reply-modal-container{width:600px}.update-reply-modal-container reply-attachment-list{margin-top:15px}"],encapsulation:2}),t})()},apsj:function(t,e,i){"use strict";i.d(e,"a",(function(){return s}));var n=i("fXoL"),r=i("LRXf");let s=(()=>{class t{constructor(t){this.httpClient=t}attach(t,e=[],i=null){const n={ids:[]};return n.ids=e.map(t=>t.id),i&&(n.body=i),this.httpClient.post("tickets/"+t+"/attachments",n)}detach(t,e){return this.httpClient.post("drafts/"+t+"/uploads/"+e+"/detach")}}return t.\u0275fac=function(e){return new(e||t)(n.bc(r.a))},t.\u0275prov=n.Nb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},b7Mq:function(t,e,i){"use strict";i.d(e,"a",(function(){return f}));var n=i("fXoL"),r=i("LsVx"),s=i("twBr"),o=i("wfim"),a=i("wWhK"),c=i("ofXK"),l=i("Qu3c"),u=i("NFeN"),d=i("zW5C");function h(t,e){if(1&t){const t=n.Yb();n.Xb(0,"button",13),n.fc("click",(function(e){n.Cc(t);const i=n.jc(2).$implicit;return n.jc().removeTag(i)})),n.Sb(1,"mat-icon",14),n.Wb()}}function b(t,e){if(1&t&&(n.Xb(0,"div",10),n.Xb(1,"span",11),n.Nc(2),n.Wb(),n.Lc(3,h,2,0,"button",12),n.Wb()),2&t){const t=n.jc().$implicit,e=n.jc();n.Db(2),n.Oc(t.name),n.Db(1),n.rc("ngIf",e.currentUser.hasPermission("tickets.update"))}}function p(t,e){1&t&&n.Lc(0,b,4,2,"div",9),2&t&&n.rc("ngIf","status"!==e.$implicit.type)}let f=(()=>{class t{constructor(t,e,i,n){this.tickets=t,this.currentUser=e,this.mailboxTags=i,this.conversation=n}removeTag(t){this.tickets.removeTag(t,[this.conversation.get().id]).subscribe(()=>{this.conversation.get().tags=this.conversation.get().tags.filter(e=>e.id!==t.id),this.mailboxTags.refresh()})}}return t.\u0275fac=function(e){return new(e||t)(n.Rb(r.a),n.Rb(s.a),n.Rb(o.a),n.Rb(a.a))},t.\u0275cmp=n.Lb({type:t,selectors:[["conversation-header"]],decls:12,vars:7,consts:[[1,"title-container"],[1,"ticket-subject"],[1,"tags"],["ngFor","",3,"ngForOf"],[1,"title-meta"],[1,"ticket-created-at-date"],[1,"actions"],[1,"button","reply-button",3,"matTooltip","click"],["svgIcon","reply"],["class","tag-label",4,"ngIf"],[1,"tag-label"],[1,"tag-name"],["class","no-style remove-tag-button","type","button","title","Remove Tag",3,"click",4,"ngIf"],["type","button","title","Remove Tag",1,"no-style","remove-tag-button",3,"click"],["svgIcon","close"]],template:function(t,e){1&t&&(n.Xb(0,"div",0),n.Xb(1,"h2",1),n.Nc(2),n.Wb(),n.Xb(3,"div",2),n.Lc(4,p,1,1,"ng-template",3),n.Wb(),n.Wb(),n.Xb(5,"div",4),n.Xb(6,"div",5),n.Nc(7),n.Wb(),n.Xb(8,"div",6),n.Xb(9,"button",7),n.fc("click",(function(t){return e.conversation.openEditor()})),n.kc(10,"trans"),n.Sb(11,"mat-icon",8),n.Wb(),n.Wb(),n.Wb()),2&t&&(n.Db(2),n.Oc(e.conversation.get().subject),n.Db(2),n.rc("ngForOf",e.conversation.get().tags),n.Db(3),n.Qc("",e.conversation.get().created_at_formatted," (",e.conversation.get().created_at_month,")"),n.Db(2),n.rc("matTooltip",n.lc(10,5,"Reply (r)")))},directives:[c.s,l.a,u.a,c.t],pipes:[d.a],styles:["conversation-header{-webkit-box-flex:0;flex:none;width:100%}conversation-header,conversation-header .title-container{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}conversation-header .title-container{-webkit-box-flex:1;flex:1 1 auto;flex-wrap:wrap;padding:5px 10px 5px 25px;margin:15px 0}conversation-header .title-container h2{color:var(--be-help-center-title-text);font-weight:400;font-size:2.5rem;margin:0 15px 0 0}conversation-header .title-container .tags{display:inline-block}conversation-header .title-container .tags .tag-name{display:inline-block;max-width:50px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;vertical-align:sub}conversation-header .title-meta{-webkit-box-flex:0;flex:0 0 100px;white-space:nowrap;font-size:1.6rem;color:var(--be-secondary-text);text-align:right;padding-right:26px}conversation-header .title-meta .actions,conversation-header .title-meta .ticket-created-at-date{display:inline-block;vertical-align:middle}conversation-header .title-meta .reply-button{min-width:0;border:1px solid var(--be-divider-default);border-radius:4px;color:var(--be-secondary-text);margin-left:10px;padding:5px 12px 6px;background-color:var(--be-background-alternative);cursor:pointer}conversation-header .title-meta .reply-button mat-icon{width:19px;height:19px}@media only screen and (max-width:768px){conversation-header{margin-bottom:15px}conversation-header .title-meta .ticket-created-at-date{display:none}}"],encapsulation:2}),t})()},cSoz:function(t,e,i){"use strict";var n=i("Vi6O"),r=i("6qA3"),s=i("Q1FS");e.subscribeToResult=function(t,e,i,o,a){if(void 0===a&&(a=new n.InnerSubscriber(t,i,o)),!a.closed)return e instanceof s.Observable?e.subscribe(a):r.subscribeTo(e)(a)}},cuTO:function(t,e,i){"use strict";i.d(e,"a",(function(){return n}));class n{constructor(t={}){this.shared=!1;for(const e in t)this[e]=t[e]}}},ehXJ:function(t,e,i){"use strict";i.d(e,"a",(function(){return u}));var n=i("fXoL"),r=i("tyNb"),s=i("i2dy"),o=i("LsVx"),a=i("kmQS"),c=i("wfim"),l=i("ahrr");let u=(()=>{class t{constructor(t,e,i,n,r,s){this.router=t,this.toast=e,this.tickets=i,this.settings=n,this.mailboxTags=r,this.localStorage=s,this.defaultAction=this.settings.get("replies.after_reply_action","next_active_ticket")}perform(){if(this.router.url.indexOf("help-center")>-1)this.navigateToCustomerTicketsList();else{switch(this.get()){case"next_active_ticket":this.navigateToNextActiveTicket();break;case"back_to_folder":this.navigateToAgentTicketsList()}this.mailboxTags.refresh()}}get(){return this.localStorage.get("after_reply_action",this.defaultAction)}set(t=null){this.defaultAction=t,this.localStorage.set("after_reply_action",t)}setTicketId(t){this.activeTicketId=t}navigateToNextActiveTicket(){const t=this.mailboxTags.getActiveTagId();this.tickets.getLatestActiveTicket(t).subscribe(e=>{e&&e.id!==this.activeTicketId?this.router.navigate(["/mailbox/tickets/tag/",t,"ticket",e.id]):this.navigateToAgentTicketsList()})}navigateToAgentTicketsList(){this.router.navigate(["/mailbox/tickets/tag/"+this.mailboxTags.getActiveTagId()])}navigateToCustomerTicketsList(t){this.router.navigate(["/help-center/tickets"]),this.toast.open(t||"Your reply was submitted successfully.")}}return t.\u0275fac=function(e){return new(e||t)(n.bc(r.f),n.bc(s.a),n.bc(o.a),n.bc(a.a),n.bc(c.a),n.bc(l.a))},t.\u0275prov=n.Nb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},gTqA:function(t,e,i){"use strict";var n=i("Q1FS"),r=i("6qA3"),s=i("EBtg");e.from=function(t,e){return e?s.scheduled(t,e):t instanceof n.Observable?t:new n.Observable(r.subscribeTo(t))}},hD7E:function(t,e,i){"use strict";i.d(e,"a",(function(){return r}));var n=i("fXoL");let r=(()=>{class t{}return t.\u0275mod=n.Pb({type:t}),t.\u0275inj=n.Ob({factory:function(e){return new(e||t)}}),t})()},i70M:function(t,e,i){"use strict";i.d(e,"a",(function(){return u}));var n=i("JIr8"),r=i("5+tZ"),s=i("EY2u"),o=i("LRne"),a=i("fXoL"),c=i("tyNb"),l=i("sPnx");let u=(()=>{class t{constructor(t,e){this.router=t,this.http=e}resolve(t){return this.http.get("new-ticket/categories").pipe(Object(n.a)(()=>(this.router.navigateByUrl("/"),s.a)),Object(r.a)(t=>Object(o.a)(t.tags)))}}return t.\u0275fac=function(e){return new(e||t)(a.bc(c.f),a.bc(l.a))},t.\u0275prov=a.Nb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},iB19:function(t,e,i){"use strict";i.d(e,"a",(function(){return o}));var n=i("fXoL"),r=i("ofXK"),s=i("kmQS");let o=(()=>{class t{constructor(t,e){this.settings=t,this._locale=e,this.format=this.settings.get("dates.format","yyyy-MM-dd"),this.angularPipe=new r.f(e)}transform(t,e,i,n){return t=t&&"string"==typeof t?t.replace(/-/g,"/"):t,this.angularPipe.transform(t,e||this.format,i,n)}}return t.\u0275fac=function(e){return new(e||t)(n.Rb(s.a),n.Rb(n.v))},t.\u0275pipe=n.Qb({name:"formattedDate",type:t,pure:!0}),t})()},itxp:function(t,e,i){"use strict";i.d(e,"a",(function(){return n}));const n=new(i("fXoL").r)("CURRENT_PREVIEW_FILE")},"j/pe":function(t,e,i){"use strict";var n=i("qaug"),r=i("2qZP"),s=i("EzZJ"),o=i("g6kq"),a=i("STbY"),c=i("FtGj"),l=i("fXoL"),u=i("tyNb"),d=i("QGXG"),h=i("twBr"),b=i("LsVx"),p=i("wWhK"),f=i("wfim"),g=i("pLZG");let m=(()=>{class t{constructor(t){this.router=t,this.history=[],this.limit=15}get(t=0){return this.history[t]||null}getPrevious(){return this.get(1)}back(){const t=this.getPrevious();return t?this.router.navigate([t.url],{queryParams:t.queryParams}):new Promise(t=>t(!1))}addHistoryItem(t){const e=t.split("?");let i={};e[1]&&(i=this.parseQueryParams(e[1])),this.history.length>=this.limit&&this.history.splice(1,this.history.length-1),this.history.unshift({url:e[0],queryParams:i})}parseQueryParams(t){const e=new URLSearchParams(t);return console.log(e),{}}init(){this.router.events.pipe(Object(g.a)(t=>t instanceof u.b)).subscribe(t=>{this.addHistoryItem(t.urlAfterRedirects)})}}return t.\u0275fac=function(e){return new(e||t)(l.bc(u.f))},t.\u0275prov=l.Nb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var v=i("ofXK"),y=i("Qu3c"),w=i("NFeN"),x=i("zW5C");i.d(e,"a",(function(){return W}));const k=["ticketStatusMenuTrigger"];function _(t,e){if(1&t){const t=l.Yb();l.Xb(0,"button",16),l.fc("click",(function(e){return l.Cc(t),l.jc(2).navigateToTicketsList()})),l.kc(1,"trans"),l.Sb(2,"mat-icon",17),l.Wb()}2&t&&l.rc("matTooltip",l.lc(1,1,"Back (b)"))}function C(t,e){if(1&t){const t=l.Yb();l.Xb(0,"button",18),l.fc("click",(function(i){l.Cc(t);const n=e.$implicit;return l.jc(2).changeTicketStatus(n)})),l.Nc(1),l.Wb()}if(2&t){const t=e.$implicit,i=l.jc(2);l.Hb("active",(null==i.conversation.status?null:i.conversation.status.name)===t.name),l.rc("ngClass",t.name),l.Db(1),l.Pc(" ",t.display_name||t.name," ")}}const S=function(t){return[t]};function X(t,e){if(1&t){const t=l.Yb();l.Vb(0),l.Lc(1,_,3,3,"button",5),l.Xb(2,"assign-ticket-dropdown",6),l.fc("assigned",(function(e){return l.Cc(t),l.jc().refreshMailboxTags()})),l.kc(3,"trans"),l.Wb(),l.Xb(4,"button",7),l.fc("click",(function(e){return l.Cc(t),l.jc().showNoteModal()})),l.kc(5,"trans"),l.Sb(6,"mat-icon",8),l.Wb(),l.Xb(7,"add-tag-dropdown",9),l.fc("tagAdded",(function(e){return l.Cc(t),l.jc().addTag(e)})),l.kc(8,"trans"),l.Wb(),l.Xb(9,"button",10,11),l.kc(11,"trans"),l.Sb(12,"mat-icon",12),l.Wb(),l.Xb(13,"mat-menu",13,14),l.Lc(15,C,2,4,"button",15),l.Wb(),l.pc(16),l.Ub()}if(2&t){const t=l.zc(14),e=l.jc();l.Db(1),l.rc("ngIf",!e.hideBackButton),l.Db(1),l.rc("ticket",e.conversation.get())("matTooltip",l.lc(3,10,"Assign (a)")),l.Db(2),l.rc("matTooltip",l.lc(5,12,"Note (n)")),l.Db(3),l.rc("ticketIds",l.wc(18,S,e.conversation.get().id))("matTooltip",l.lc(8,14,"Tag (t)")),l.Db(2),l.rc("matMenuTriggerFor",t)("matTooltip",l.lc(11,16,"Status (s)")),l.Db(4),l.rc("overlapTrigger",!1),l.Db(2),l.rc("ngForOf",e.mailboxTags.getStatusTags(!0))}}const I=function(){return["tickets.update","replies.create"]},O=["*"];let W=(()=>{class t{constructor(t,e,i,n,r,s,o,a,c,l){this.router=t,this.injector=e,this.modals=i,this.route=n,this.currentUser=r,this.tickets=s,this.conversation=o,this.browserEvents=a,this.mailboxTags=c,this.routerHistory=l,this.hideBackButton=!1,this.subscriptions=[]}ngOnInit(){this.initKeybinds()}changeTicketStatus(t){t&&this.tickets.changeTicketStatus(this.conversation.get().id,t.name).subscribe(()=>{this.conversation.performAfterReplyAction(),this.conversation.setStatus(t)})}showNoteModal(){this.modals.open(n.a,{ticketId:this.conversation.get().id},{panelClass:"add-note-modal-container"}).afterClosed().subscribe(t=>{t&&this.addNewNote(t)})}addTag(t){this.conversation.addTag(t),this.refreshMailboxTags()}addNewNote(t){t&&this.conversation.replies.add(t)}navigateToTicketsList(){this.routerHistory.getPrevious()?this.routerHistory.back():this.router.navigate(["../../"],{relativeTo:this.route})}refreshMailboxTags(){this.mailboxTags.refresh()}initKeybinds(){const t=this.browserEvents.globalKeyDown$.subscribe(t=>{let e=!0;if(!(this.modals.anyDialogOpen()||o.a.userIsTyping()||t.ctrlKey)){switch(t.keyCode){case c.b:this.closeAllMenus(),this.navigateToTicketsList();break;case c.a:this.assignTicketDropdown.open();break;case c.l:this.closeAllMenus(),this.showNoteModal();break;case c.w:this.addTagDropdown.open();break;case c.t:this.ticketStatusTrigger.menuOpen?this.handleTicketStatusChangeKeybind("spam"):this.ticketStatusTrigger.openMenu();break;case c.n:this.handleTicketStatusChangeKeybind("open");break;case c.d:this.handleTicketStatusChangeKeybind("closed");break;case c.o:this.handleTicketStatusChangeKeybind("pending");break;default:e=!1}e&&(t.preventDefault(),t.stopPropagation())}});this.subscriptions.push(t)}closeAllMenus(){this.addTagDropdown.close(),this.assignTicketDropdown.close(),this.ticketStatusTrigger.closeMenu()}handleTicketStatusChangeKeybind(t){this.ticketStatusTrigger.menuOpen&&(this.changeTicketStatus(this.mailboxTags.getTagByIdOrName(t)),this.ticketStatusTrigger.closeMenu())}ngOnDestroy(){this.subscriptions.forEach(t=>{t&&t.unsubscribe()})}}return t.\u0275fac=function(e){return new(e||t)(l.Rb(u.f),l.Rb(l.s),l.Rb(d.a),l.Rb(u.a),l.Rb(h.a),l.Rb(b.a),l.Rb(p.a),l.Rb(o.a),l.Rb(f.a),l.Rb(m))},t.\u0275cmp=l.Lb({type:t,selectors:[["conversation-toolbar"]],viewQuery:function(t,e){var i;1&t&&(l.Sc(r.a,!0),l.Sc(s.a,!0),l.Sc(k,!0,a.d)),2&t&&(l.yc(i=l.gc())&&(e.assignTicketDropdown=i.first),l.yc(i=l.gc())&&(e.addTagDropdown=i.first),l.yc(i=l.gc())&&(e.ticketStatusTrigger=i.first))},inputs:{hideBackButton:"hideBackButton"},ngContentSelectors:O,decls:7,vars:5,consts:[[1,"left","toolbar-actions"],[4,"ngIf"],[1,"right","ticket-info"],[1,"ticket-number"],[1,"ticket-status",3,"ngClass"],["class","no-style action back-button",3,"matTooltip","click",4,"ngIf"],[1,"action",3,"ticket","matTooltip","assigned"],[1,"action","no-style","add-note-button",3,"matTooltip","click"],["svgIcon","note-custom"],[1,"action",3,"ticketIds","matTooltip","tagAdded"],[1,"no-style","change-ticket-status-button","action",3,"matMenuTriggerFor","matTooltip"],["ticketStatusMenuTrigger",""],["svgIcon","flag-custom"],[1,"ticket-status-menu",3,"overlapTrigger"],["ticketStatusMenu","matMenu"],["mat-menu-item","",3,"active","ngClass","click",4,"ngFor","ngForOf"],[1,"no-style","action","back-button",3,"matTooltip","click"],["svgIcon","return-custom"],["mat-menu-item","",3,"ngClass","click"]],template:function(t,e){1&t&&(l.qc(),l.Xb(0,"div",0),l.Lc(1,X,17,20,"ng-container",1),l.Wb(),l.Xb(2,"div",2),l.Xb(3,"div",3),l.Nc(4),l.Wb(),l.Xb(5,"div",4),l.Nc(6),l.Wb(),l.Wb()),2&t&&(l.Db(1),l.rc("ngIf",e.currentUser.hasPermissions(l.vc(4,I))),l.Db(3),l.Pc("#",e.conversation.get().id,""),l.Db(1),l.rc("ngClass",e.conversation.getStatus().name),l.Db(1),l.Oc(e.conversation.getStatus().display_name))},directives:[v.t,v.q,r.a,y.a,w.a,s.a,a.d,a.e,v.s,a.b],pipes:[x.a],styles:["conversation-toolbar{display:block;width:100%;border-bottom:1px solid var(--be-divider-default);height:57px;padding:0 35px 0 10px;white-space:nowrap;color:var(--be-help-center-title-text)}conversation-toolbar .left,conversation-toolbar .right{width:50%;height:100%;display:-webkit-inline-box;display:inline-flex;-webkit-box-align:center;align-items:center;padding:15px 0}conversation-toolbar .toolbar-actions .action{margin:0 15px;height:26px;width:26px;position:relative;-webkit-transition:color .2s ease-in-out;transition:color .2s ease-in-out;color:inherit}conversation-toolbar .toolbar-actions .action:hover{color:var(--be-text)}conversation-toolbar .toolbar-actions .action mat-icon{height:26px;width:26px}conversation-toolbar .ticket-info{-webkit-box-pack:end;justify-content:flex-end;vertical-align:top}conversation-toolbar .ticket-info .ticket-number{font-size:3rem}conversation-toolbar .ticket-info .ticket-status{border:1px solid var(--be-divider-default);border-radius:2px;background-color:var(--be-background-alternative);padding:4px 12px;margin-left:10px;text-transform:uppercase;font-weight:500;font-size:1.1rem;letter-spacing:.02em}conversation-toolbar .ticket-info .ticket-status.open{background-color:var(--be-accent-default);color:var(--be-accent-contrast);border-color:transparent}.ticket-status-menu .mat-menu-item{text-transform:capitalize}.ticket-status-menu .mat-menu-item.active{background-color:var(--be-accent-emphasis)}"],encapsulation:2}),t})()},k3xQ:function(t,e,i){"use strict";i.d(e,"a",(function(){return s}));var n=i("ofXK"),r=i("fXoL");let s=(()=>{class t{}return t.\u0275mod=r.Pb({type:t}),t.\u0275inj=r.Ob({factory:function(e){return new(e||t)},imports:[[n.c]]}),t})()},lxqa:function(t,e,i){"use strict";i.d(e,"a",(function(){return u}));var n=i("0IaG"),r=i("fXoL"),s=i("kmQS"),o=i("Rd8u"),a=i("bTqV"),c=i("NFeN"),l=i("zW5C");let u=(()=>{class t{constructor(t,e,i){this.dialogRef=t,this.data=e,this.settings=i,this.type=this.getDisplayType(e.reply.type)}close(t=!1){this.dialogRef.close(t)}confirm(){this.close(!0)}getDisplayType(t){switch(t){case"replies":return"reply";case"notes":return"note";case"drafts":return"draft"}}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(n.h),r.Rb(n.a),r.Rb(s.a))},t.\u0275cmp=r.Lb({type:t,selectors:[["confirm-reply-delete-modal"]],decls:18,vars:5,consts:[[1,"modal-header",2,"margin","0"],["mat-dialog-title","","trans",""],["type","button","mat-icon-button","","tabindex","-1",1,"close-button",3,"click"],["svgIcon","close"],["trans",""],["mat-button","","type","button","trans","",1,"cancel-button",3,"click"],["type","submit","mat-raised-button","","trans","",1,"submit-button",3,"color","click"]],template:function(t,e){1&t&&(r.Xb(0,"div",0),r.Xb(1,"h2",1),r.Nc(2),r.Wb(),r.Xb(3,"button",2),r.fc("click",(function(t){return e.close()})),r.Sb(4,"mat-icon",3),r.Wb(),r.Wb(),r.Xb(5,"mat-dialog-content"),r.Xb(6,"p"),r.Xb(7,"span",4),r.Nc(8,"Are you sure you want to delete this"),r.Wb(),r.Nc(9," "),r.Xb(10,"span"),r.Nc(11),r.kc(12,"trans"),r.Wb(),r.Wb(),r.Wb(),r.Xb(13,"mat-dialog-actions"),r.Xb(14,"button",5),r.fc("click",(function(t){return e.close()})),r.Nc(15,"Close"),r.Wb(),r.Xb(16,"button",6),r.fc("click",(function(t){return e.confirm()})),r.Nc(17,"Delete"),r.Wb(),r.Wb()),2&t&&(r.Db(2),r.Pc("Delete ",e.type,""),r.Db(9),r.Pc("",r.lc(12,3,e.type),"?"),r.Db(5),r.rc("color",e.settings.get("vebto.auth.color")))},directives:[n.i,o.a,a.b,c.a,n.f,n.c],pipes:[l.a],encapsulation:2}),t})()},mbIT:function(t,e,i){"use strict";e.isArray=function(){return Array.isArray||function(t){return t&&"number"==typeof t.length}}()},n3uD:function(t,e,i){"use strict";var n=!1;e.config={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){var e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else n&&console.log("RxJS: Back to a better error behavior. Thank you. <3");n=t},get useDeprecatedSynchronousErrorHandling(){return n}}},n73p:function(t,e,i){"use strict";var n=i("Q1FS"),r=i("zB/H");e.schedulePromise=function(t,e){return new n.Observable((function(i){var n=new r.Subscription;return n.add(e.schedule((function(){return t.then((function(t){n.add(e.schedule((function(){i.next(t),n.add(e.schedule((function(){return i.complete()})))})))}),(function(t){n.add(e.schedule((function(){return i.error(t)})))}))}))),n}))}},nzqU:function(t,e,i){"use strict";e.isScheduler=function(t){return t&&"function"==typeof t.schedule}},ovFL:function(t,e,i){"use strict";i.d(e,"a",(function(){return l}));var n=i("fXoL"),r=i("7LS1"),s=i("ofXK"),o=i("+rOU");function a(t,e){}function c(t,e){if(1&t){const t=n.Yb();n.Vb(0),n.Lc(1,a,0,0,"ng-template",1),n.fc("attached",(function(e){return n.Cc(t),n.jc().listenForDownloadClick(e)})),n.Ub()}if(2&t){const t=e.ngIf;n.Db(1),n.rc("cdkPortalOutlet",t)}}let l=(()=>{class t{constructor(t){this.previewFiles=t}ngOnChanges(t){this.previewFiles.set(this.files,this.activeFile)}ngOnDestroy(){this.previewFiles.destroy(),this.downloadSub&&this.downloadSub.unsubscribe()}listenForDownloadClick(t){this.downloadSub&&this.downloadSub.unsubscribe(),this.downloadSub=t.instance.download.subscribe(()=>{this.previewFiles.download.next()})}}return t.\u0275fac=function(e){return new(e||t)(n.Rb(r.a))},t.\u0275cmp=n.Lb({type:t,selectors:[["preview-container"]],inputs:{files:"files",activeFile:"activeFile"},features:[n.Bb()],decls:2,vars:3,consts:[[4,"ngIf"],[3,"cdkPortalOutlet","attached"]],template:function(t,e){1&t&&(n.Lc(0,c,2,1,"ng-container",0),n.kc(1,"async")),2&t&&n.rc("ngIf",n.lc(1,1,e.previewFiles.getPortal()))},directives:[s.t,o.c],pipes:[s.b],styles:["[_nghost-%COMP%]{display:-webkit-box;display:flex;width:100%;min-height:100%;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;position:relative;overflow:hidden}  .file-preview-wrapper{position:absolute;top:0;left:0;right:0;bottom:0;margin:auto}"],changeDetection:0}),t})()},ozli:function(t,e,i){"use strict";var n=i("zfKp");e.subscribeToObservable=function(t){return function(e){var i=t[n.observable]();if("function"!=typeof i.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return i.subscribe(e)}}},"p//D":function(t,e,i){"use strict";e.rxSubscriber=function(){return"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),e.$$rxSubscriber=e.rxSubscriber},pfRy:function(t,e,i){"use strict";var n=i("xgIS"),r=i("Kj3r"),s=i("fXoL");let o=(()=>{class t{constructor(){this.threshold=50}ngOnInit(){this.zone.runOutsideAngular(()=>{this.scrollSub=Object(n.a)(this.getScrollContainer(),"scroll",{capture:!0,passive:!0}).pipe(Object(r.a)(20)).subscribe(t=>this.onScroll(t.target))})}ngOnDestroy(){this.scrollSub&&this.scrollSub.unsubscribe()}getScrollContainer(){return this.el?this.el.nativeElement:document}onScroll(t){if(!t||this.el&&t!==this.el.nativeElement||!this.canLoadMore()||this.isLoading())return;const e=parseInt(this.threshold);(this.el?t.scrollTop+t.offsetHeight:window.scrollY+window.innerHeight)>=(this.el?t.scrollHeight-e:document.documentElement.scrollHeight-e)&&this.zone.run(()=>{this.loadMoreItems()})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=s.Mb({type:t,inputs:{threshold:"threshold"}}),t})();var a=i("wWhK");i.d(e,"a",(function(){return c}));let c=(()=>{class t extends o{constructor(t,e,i){super(),this.el=t,this.conversation=e,this.zone=i}getScrollContainer(){return document}loadMoreItems(){this.conversation.replies.loadMore()}isLoading(){return this.conversation.replies.isLoading}canLoadMore(){return this.conversation.replies.canLoadMore()}}return t.\u0275fac=function(e){return new(e||t)(s.Rb(s.l),s.Rb(a.a),s.Rb(s.A))},t.\u0275dir=s.Mb({type:t,selectors:[["","conversationInfiniteScroll",""]],features:[s.Ab]}),t})()},poJ0:function(t,e,i){"use strict";var n=i("VKeD");e.subscribeToIterable=function(t){return function(e){for(var i=t[n.iterator]();;){var r=i.next();if(r.done){e.complete();break}if(e.next(r.value),e.closed)break}return"function"==typeof i.return&&e.add((function(){i.return&&i.return()})),e}}},pshJ:function(t,e,i){"use strict";e.isFunction=function(t){return"function"==typeof t}},q3Kh:function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),r=i("FWf1");e.map=function(t,e){return function(i){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return i.lift(new s(t,e))}};var s=function(){function t(t,e){this.project=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new o(t,this.project,this.thisArg))},t}();e.MapOperator=s;var o=function(t){function e(e,i,n){var r=t.call(this,e)||this;return r.project=i,r.count=0,r.thisArg=n||r,r}return n(e,t),e.prototype._next=function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(i){return void this.destination.error(i)}this.destination.next(e)},e}(r.Subscriber)},"qH/R":function(t,e,i){"use strict";i.d(e,"a",(function(){return P}));var n=i("lxqa"),r=i("g6kq"),s=i("XRKU"),o=i("FtGj"),a=i("703J"),c=i("fXoL"),l=i("QGXG"),u=i("twBr"),d=i("wWhK"),h=i("wfim"),b=i("74SX"),p=i("kmQS"),f=i("ofXK"),g=i("83jf"),m=i("rG4v"),v=i("KKQg"),y=i("Qu3c"),w=i("NFeN"),x=i("bTqV"),k=i("PPfr"),_=i("STbY"),C=i("Rd8u"),S=i("zW5C");const X=["textEditor"];function I(t,e){if(1&t){const t=c.Yb();c.Xb(0,"suggested-articles-dropdown",16),c.fc("articleSelected",(function(e){return c.Cc(t),c.jc().insertArticleLink(e)})),c.Wb()}if(2&t){const t=c.jc();c.rc("category",t.conversation.getCategory())}}function O(t,e){if(1&t){const t=c.Yb();c.Xb(0,"div",17),c.Xb(1,"canned-replies-dropdown",18),c.fc("onReplySelect",(function(e){return c.Cc(t),c.jc().applyCannedReply(e)})),c.Wb(),c.Wb()}}function W(t,e){if(1&t){const t=c.Yb();c.Xb(0,"button",24),c.fc("click",(function(i){c.Cc(t);const n=e.$implicit;return c.jc(2).selectedStatus=n})),c.Nc(1),c.Wb()}if(2&t){const t=e.$implicit;c.rc("ngClass",t.name),c.Db(1),c.Oc(t.display_name)}}function D(t,e){if(1&t&&(c.Vb(0),c.Xb(1,"button",19),c.Xb(2,"span"),c.Nc(3),c.kc(4,"trans"),c.Wb(),c.Sb(5,"mat-icon",20),c.Wb(),c.Xb(6,"mat-menu",21,22),c.Lc(8,W,2,2,"button",23),c.Wb(),c.Ub()),2&t){const t=c.zc(7),e=c.jc();c.Db(1),c.rc("matMenuTriggerFor",t),c.Db(2),c.Oc(c.lc(4,4,e.selectedStatus.display_name)),c.Db(3),c.rc("overlapTrigger",!1),c.Db(2),c.rc("ngForOf",e.mailboxTags.getStatusTags(!0))}}function R(t,e){1&t&&(c.Xb(0,"span",25),c.Nc(1,"Send Reply"),c.Wb())}function T(t,e){1&t&&(c.Xb(0,"span",25),c.Nc(1,"Sending..."),c.Wb())}function L(t,e){if(1&t){const t=c.Yb();c.Vb(0),c.Xb(1,"button",26),c.Sb(2,"mat-icon",27),c.Wb(),c.Xb(3,"mat-menu",28,29),c.Xb(5,"button",30),c.fc("click",(function(e){return c.Cc(t),c.jc().conversation.afterReplyAction.set("stay_on_page")})),c.Nc(6,"Send and stay on page"),c.Wb(),c.Xb(7,"button",31),c.fc("click",(function(e){return c.Cc(t),c.jc().conversation.afterReplyAction.set("next_active_ticket")})),c.Nc(8,"Send and next ticket"),c.Wb(),c.Xb(9,"button",32),c.fc("click",(function(e){return c.Cc(t),c.jc().conversation.afterReplyAction.set("back_to_folder")})),c.Nc(10,"Send and back to folder"),c.Wb(),c.Wb(),c.Ub()}if(2&t){const t=c.zc(4),e=c.jc();c.Db(1),c.rc("disabled",e.conversation.replySaving)("matMenuTriggerFor",t),c.Db(2),c.rc("overlapTrigger",!1),c.Db(2),c.Hb("selected","stay_on_page"===e.conversation.afterReplyAction.get()),c.Db(2),c.Hb("selected","next_active_ticket"===e.conversation.afterReplyAction.get()),c.Db(2),c.Hb("selected","back_to_folder"===e.conversation.afterReplyAction.get())}}let P=(()=>{class t{constructor(t,e,i,n,r,s,o){this.modal=t,this.currentUser=e,this.conversation=i,this.browserEvents=n,this.mailboxTags=r,this.hcUrls=s,this.settings=o,this.selectedStatus=new a.a,this.subscriptions=[]}ngOnInit(){this.setSelectedStatus(),this.initKeybinds(),this.conversation.setEditor(this.textEditor)}submitReply(){const t={body:this.textEditor.getContents(),status:this.selectedStatus};this.conversation.submitReply(t).subscribe(()=>{this.closeEditor()},()=>{})}saveDraft(t={}){return this.conversation.draft.save(t)}closeEditor(){this.conversation.closeEditor(),this.conversation.draft.reset(),this.textEditor.reset()}saveDraftAndAddToReplies(){this.conversation.draft.isEmpty()?this.closeEditor():this.saveDraft().subscribe(t=>{this.conversation.replies.add(t.data),this.closeEditor()})}maybeDeleteDraft(){const t=this.conversation.draft.get();t.id?this.modal.show(n.a,{reply:t}).afterClosed().subscribe(t=>{t&&(this.conversation.draft.delete(),this.closeEditor())}):this.closeEditor()}applyCannedReply(t){this.textEditor.insertContents(t.body),setTimeout(()=>{this.saveDraft({uploads:t.uploads.map(t=>t.id)})})}setSelectedStatus(){let t;t=this.currentUser.hasPermission("tickets.update")?this.mailboxTags.getTagByIdOrName("closed"):this.mailboxTags.getTagByIdOrName("open"),this.selectedStatus=t}initKeybinds(){const t=this.browserEvents.globalKeyDown$.subscribe(t=>{this.modal.anyDialogOpen()||r.a.userIsTyping()||(t.keyCode===o.r&&this.conversation.openEditor(),t.keyCode===o.u&&t.ctrlKey&&this.articleDropdown.focus())});this.subscriptions.push(t),this.textEditor.editor.waitForEditor().then(t=>{t.shortcuts.add("ctrl+191","Search docs",()=>{this.articleDropdown.focus()})})}ngOnDestroy(){this.saveDraft(),this.closeEditor(),this.subscriptions.forEach(t=>{t&&t.unsubscribe()})}insertArticleLink(t){const e=this.hcUrls.article(t).join("/");this.textEditor.insertLink({target:"blank",href:this.settings.getBaseUrl()+e,text:t.title})}}return t.\u0275fac=function(e){return new(e||t)(c.Rb(l.a),c.Rb(u.a),c.Rb(d.a),c.Rb(r.a),c.Rb(h.a),c.Rb(b.a),c.Rb(p.a))},t.\u0275cmp=c.Lb({type:t,selectors:[["conversation-text-editor"]],viewQuery:function(t,e){var i;1&t&&(c.Jc(X,!0),c.Sc(s.a,!0)),2&t&&(c.yc(i=c.gc())&&(e.textEditor=i.first),c.yc(i=c.gc())&&(e.articleDropdown=i.first))},decls:21,vars:18,consts:[[1,"text-editor-container"],["placeholder","Search docs... (ctrl + /)",3,"category","articleSelected",4,"ngIf"],[3,"attachments","detached"],["inlineUploadPrefix","ticket_images",3,"onChange","onFileUpload","onCtrlEnter"],["textEditor",""],["class","header-actions","customButtons","",4,"ngIf"],["header","",1,"header-actions","last","right"],["type","button",1,"no-style","editor-button","save-draft-button",3,"matTooltip","click"],["svgIcon","check-circle"],["type","button",1,"no-style","editor-button","delete-draft-button",3,"matTooltip","click"],["svgIcon","delete"],["footer","",1,"editor-footer"],[1,"right"],[4,"ngIf"],["type","button","mat-flat-button","","color","accent",1,"submit-button",3,"disabled","click"],["trans","",4,"ngIf"],["placeholder","Search docs... (ctrl + /)",3,"category","articleSelected"],["customButtons","",1,"header-actions"],[3,"onReplySelect"],["type","button","mat-button","",1,"change-status-button",3,"matMenuTriggerFor"],["svgIcon","keyboard-arrow-down",1,"dropdown-icon"],[1,"status-menu",3,"overlapTrigger"],["statusMenu","matMenu"],["mat-menu-item","","trans","",3,"ngClass","click",4,"ngFor","ngForOf"],["mat-menu-item","","trans","",3,"ngClass","click"],["trans",""],["mat-flat-button","","color","accent",1,"dropdown-left","submit-button-addon",3,"disabled","matMenuTriggerFor"],["svgIcon","arrow-drop-down",1,"caret","align-middle"],[1,"default-redirect-menu",3,"overlapTrigger"],["defaultRedirectMenu","matMenu"],["mat-menu-item","","trans","",1,"stay-on-page",3,"click"],["mat-menu-item","","trans","",1,"next-active-ticket",3,"click"],["mat-menu-item","","trans","",1,"back_to_folder",3,"click"]],template:function(t,e){1&t&&(c.Xb(0,"section",0),c.Lc(1,I,1,1,"suggested-articles-dropdown",1),c.Xb(2,"reply-attachment-list",2),c.fc("detached",(function(t){return e.conversation.draft.detachUpload(t)})),c.Wb(),c.Sb(3,"upload-progress-bar"),c.Xb(4,"text-editor",3,4),c.fc("onChange",(function(t){return e.conversation.draft.setBody(t)}))("onFileUpload",(function(t){return e.conversation.draft.uploadFiles(t)}))("onCtrlEnter",(function(t){return e.submitReply()})),c.Lc(6,O,2,0,"div",5),c.Xb(7,"div",6),c.Xb(8,"button",7),c.fc("click",(function(t){return e.saveDraftAndAddToReplies()})),c.kc(9,"trans"),c.Sb(10,"mat-icon",8),c.Wb(),c.Xb(11,"button",9),c.fc("click",(function(t){return e.maybeDeleteDraft()})),c.kc(12,"trans"),c.Sb(13,"mat-icon",10),c.Wb(),c.Wb(),c.Xb(14,"div",11),c.Xb(15,"div",12),c.Lc(16,D,9,6,"ng-container",13),c.Xb(17,"button",14),c.fc("click",(function(t){return e.submitReply()})),c.Lc(18,R,2,0,"span",15),c.Lc(19,T,2,0,"span",15),c.Wb(),c.Lc(20,L,11,9,"ng-container",13),c.Wb(),c.Wb(),c.Wb(),c.Wb()),2&t&&(c.Hb("hidden",!e.conversation.isEditorOpen()),c.Db(1),c.rc("ngIf",e.currentUser.hasPermission("tickets.update")),c.Db(1),c.rc("attachments",e.conversation.draft.get().uploads),c.Db(4),c.rc("ngIf",e.currentUser.hasPermission("canned_replies.view")),c.Db(2),c.Hb("success",e.conversation.draft.get().id),c.rc("matTooltip",c.lc(9,14,"Save Draft")),c.Db(3),c.rc("matTooltip",c.lc(12,16,"Discard (Esc)")),c.Db(5),c.rc("ngIf",e.currentUser.hasPermission("tickets.update")),c.Db(1),c.rc("disabled",e.conversation.replySaving),c.Db(1),c.rc("ngIf",!e.conversation.replySaving),c.Db(1),c.rc("ngIf",e.conversation.replySaving),c.Db(1),c.rc("ngIf",e.currentUser.hasPermission("settings.update")))},directives:[f.t,g.a,m.a,v.a,y.a,w.a,x.b,s.a,k.a,_.d,_.e,f.s,_.b,C.a,f.q],pipes:[S.a],styles:["conversation-text-editor{display:block;width:100%}conversation-text-editor suggested-articles-dropdown .input-container{position:relative;margin-bottom:10px}conversation-text-editor suggested-articles-dropdown .input-container .search-icon{position:absolute;right:0;top:3px;color:var(--be-secondary-text)}conversation-text-editor .text-editor-container{margin:0 25px 25px}conversation-text-editor .attachments-list{border-bottom:1px dotted var(--be-divider-default);padding-bottom:10px}conversation-text-editor .attachments-list .attachments-list-item{background-color:var(--be-background-alternative)}conversation-text-editor .editor-footer .right{height:100%;display:-webkit-box;display:flex;position:absolute;right:0;top:0}conversation-text-editor .editor-footer .right .change-status-button{height:100%;color:var(--be-secondary-text);font-weight:500;text-transform:capitalize}conversation-text-editor .editor-footer .right .change-status-button .mat-icon{width:20px;height:20px;vertical-align:text-bottom}conversation-text-editor .editor-footer .right .submit-button,conversation-text-editor .editor-footer .right .submit-button-addon{height:38px;border-radius:0;font-weight:400;position:relative;top:-1px}conversation-text-editor .editor-footer .right .submit-button-addon{border-left:1px solid var(--be-accent-emphasis);padding:0 7px;min-width:45px}.default-redirect-menu .selected{background-color:var(--be-accent-emphasis)}.status-menu .mat-menu-item{text-transform:capitalize}"],encapsulation:2}),t})()},qaug:function(t,e,i){"use strict";i.d(e,"a",(function(){return _}));var n=i("wWhK"),r=i("0IaG"),s=i("h586"),o=i("nYR2"),a=i("fXoL"),c=i("LsVx"),l=i("oVOl"),u=i("Rd8u"),d=i("bTqV"),h=i("NFeN"),b=i("3Pt+"),p=i("KKQg"),f=i("rG4v"),g=i("ofXK"),m=i("83jf");const v=["textEditor"];function y(t,e){if(1&t&&(a.Xb(0,"div",13),a.Nc(1),a.Wb()),2&t){const t=a.jc();a.Db(1),a.Oc(t.errors.body)}}function w(t,e){if(1&t&&(a.Xb(0,"div",13),a.Nc(1),a.Wb()),2&t){const t=a.jc();a.Db(1),a.Oc(t.errors.file)}}function x(t,e){if(1&t&&(a.Xb(0,"div",13),a.Nc(1),a.Wb()),2&t){const t=a.jc();a.Db(1),a.Oc(t.errors.attachments)}}function k(t,e){if(1&t){const t=a.Yb();a.Xb(0,"reply-attachment-list",14),a.fc("detached",(function(e){return a.Cc(t),a.jc().removeAttachment(e)})),a.Wb()}if(2&t){const t=a.jc();a.rc("attachments",t.attachments)}}let _=(()=>{class t{constructor(t,e,i,n,r){this.dialogRef=t,this.data=e,this.ticketService=i,this.uploads=n,this.uploadQueue=r,this.errors={},this.attachments=[],this.loading=!1}ngOnInit(){this.textEditor.focus()}close(t){this.textEditor.destroyEditor(),this.dialogRef.close(t)}confirm(){this.loading=!0;const t={body:this.textEditor.getContents(),uploads:this.attachments.map(t=>t.id)};this.ticketService.addNote(this.data.ticketId,t).pipe(Object(o.a)(()=>this.loading=!1)).subscribe(t=>{this.close(t.data)},t=>this.errors=t.messages)}uploadFiles(t){this.uploadQueue.start(t).subscribe(t=>{this.attachments=[...this.attachments,t.fileEntry]})}removeAttachment(t){for(let e=0;e<this.attachments.length;e++)this.attachments[e].id===t.id&&this.attachments.splice(e,1)}}return t.\u0275fac=function(e){return new(e||t)(a.Rb(r.h),a.Rb(r.a),a.Rb(c.a),a.Rb(l.a),a.Rb(s.a))},t.\u0275cmp=a.Lb({type:t,selectors:[["add-note-modal"]],viewQuery:function(t,e){var i;1&t&&a.Jc(v,!0),2&t&&a.yc(i=a.gc())&&(e.textEditor=i.first)},features:[a.Cb([n.a,s.a])],decls:20,vars:6,consts:[[1,"modal-header"],["mat-dialog-title","","trans",""],["type","button","mat-icon-button","","tabindex","-1",1,"close-button",3,"click"],["svgIcon","close"],["ngNativeValidate","",3,"ngSubmit"],[1,"many-inputs"],[1,"input-container"],["inlineUploadPrefix","ticket_images",1,"text-editor",3,"minHeight","onFileUpload"],["textEditor",""],["class","error",4,"ngIf"],[3,"attachments","detached",4,"ngIf"],["type","button","mat-button","","trans","",1,"cancel-button",3,"click"],["type","submit","mat-raised-button","","color","accent","trans","",1,"submit-button",3,"disabled"],[1,"error"],[3,"attachments","detached"]],template:function(t,e){1&t&&(a.Xb(0,"div",0),a.Xb(1,"h2",1),a.Nc(2,"Add Note"),a.Wb(),a.Xb(3,"button",2),a.fc("click",(function(t){return e.close()})),a.Sb(4,"mat-icon",3),a.Wb(),a.Wb(),a.Xb(5,"form",4),a.fc("ngSubmit",(function(t){return e.confirm()})),a.Xb(6,"mat-dialog-content",5),a.Xb(7,"div",6),a.Xb(8,"text-editor",7,8),a.fc("onFileUpload",(function(t){return e.uploadFiles(t)})),a.Wb(),a.Sb(10,"upload-progress-bar"),a.Lc(11,y,2,1,"div",9),a.Lc(12,w,2,1,"div",9),a.Lc(13,x,2,1,"div",9),a.Lc(14,k,1,1,"reply-attachment-list",10),a.Wb(),a.Wb(),a.Xb(15,"mat-dialog-actions"),a.Xb(16,"button",11),a.fc("click",(function(t){return e.close()})),a.Nc(17,"Cancel"),a.Wb(),a.Xb(18,"button",12),a.Nc(19,"Add Note"),a.Wb(),a.Wb(),a.Wb()),2&t&&(a.Db(8),a.rc("minHeight",300),a.Db(3),a.rc("ngIf",e.errors.body),a.Db(1),a.rc("ngIf",e.errors.file),a.Db(1),a.rc("ngIf",e.errors.attachments),a.Db(1),a.rc("ngIf",e.attachments.length),a.Db(4),a.rc("disabled",e.loading))},directives:[r.i,u.a,d.b,h.a,b.u,b.v,r.f,p.a,f.a,g.t,r.c,m.a],styles:[".add-note-modal-container{width:600px}.add-note-modal-container reply-attachment-list{margin-top:15px}"],encapsulation:2}),t})()},rG4v:function(t,e,i){"use strict";var n=i("eNwd"),r=i("7o/Q"),s=i("D0XW");i("l7GE"),i("ZUHj");const o={leading:!0,trailing:!1};class a{constructor(t,e,i,n){this.duration=t,this.scheduler=e,this.leading=i,this.trailing=n}call(t,e){return e.subscribe(new c(t,this.duration,this.scheduler,this.leading,this.trailing))}}class c extends r.a{constructor(t,e,i,n,r){super(t),this.duration=e,this.scheduler=i,this.leading=n,this.trailing=r,this._hasTrailingValue=!1,this._trailingValue=null}_next(t){this.throttled?this.trailing&&(this._trailingValue=t,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(l,this.duration,{subscriber:this})),this.leading?this.destination.next(t):this.trailing&&(this._trailingValue=t,this._hasTrailingValue=!0))}_complete(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()}clearThrottle(){const t=this.throttled;t&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),t.unsubscribe(),this.remove(t),this.throttled=null)}}function l(t){const{subscriber:e}=t;e.clearThrottle()}var u=i("fXoL"),d=i("h586"),h=i("bv9b");i.d(e,"a",(function(){return b}));let b=(()=>{class t{constructor(t,e,i){this.el=t,this.uploadQueue=e,this.cd=i,this.hidden=!0,this.subscription=this.uploadQueue.totalProgress().pipe(function(t,e=s.a,i=o){return n=>n.lift(new a(t,e,i.leading,i.trailing))}(260,n.a,{leading:!0,trailing:!0})).subscribe(t=>{this.progress=t,this.hidden=100===t||0===this.uploadQueue.count$.value.pending,this.cd.markForCheck()})}ngOnDestroy(){this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(u.Rb(u.l),u.Rb(d.a),u.Rb(u.h))},t.\u0275cmp=u.Lb({type:t,selectors:[["upload-progress-bar"]],hostVars:2,hostBindings:function(t,e){2&t&&u.Hb("hidden",e.hidden)},decls:1,vars:1,consts:[["mode","determinate","color","accent",3,"value"]],template:function(t,e){1&t&&u.Sb(0,"mat-progress-bar",0),2&t&&u.rc("value",e.progress)},directives:[h.a],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0}),t})()},"tSQ/":function(t,e,i){"use strict";i.d(e,"a",(function(){return n})),i.d(e,"b",(function(){return r}));const n="tickets.update";class r{constructor(t={}){for(const e in t)this[e]=t[e]}}},tTc1:function(t,e,i){"use strict";function n(t,e){const i=document.createElement("a");i.href=t,e&&(i.download=e),document.body.appendChild(i),i.click(),document.body.removeChild(i)}i.d(e,"a",(function(){return n}))},vUXK:function(t,e,i){"use strict";var n=i("fXoL"),r=i("2Vo4"),s=i("XZLl"),o=i("ofXK"),a=i("ZiO8");function c(t,e){1&t&&n.Sb(0,"default-preview",2)}function l(t,e){if(1&t&&(n.Xb(0,"div",3),n.Xb(1,"pre"),n.Nc(2),n.kc(3,"async"),n.Wb(),n.Wb()),2&t){const t=n.jc();n.Db(2),n.Oc(n.lc(3,1,t.content$))}}let u=(()=>{class t extends s.a{constructor(){super(...arguments),this.content$=new r.a(""),this.fileTooLarge$=new r.a(!1)}ngOnInit(){this.file.file_size>5242880?this.fileTooLarge$.next(!0):this.loadFileContents()}loadFileContents(){this.getContents().subscribe(t=>{this.content$.next(t)})}}return t.\u0275fac=function(e){return d(e||t)},t.\u0275cmp=n.Lb({type:t,selectors:[["text-preview"]],features:[n.Ab],decls:4,vars:4,consts:[["message","This file is too large to preview.",4,"ngIf","ngIfElse"],["textPreview",""],["message","This file is too large to preview."],[1,"text-wrapper","preview-object"]],template:function(t,e){if(1&t&&(n.Lc(0,c,1,0,"default-preview",0),n.kc(1,"async"),n.Lc(2,l,4,3,"ng-template",null,1,n.Mc)),2&t){const t=n.zc(3);n.rc("ngIf",n.lc(1,2,e.fileTooLarge$))("ngIfElse",t)}},directives:[o.t,a.a],pipes:[o.b],styles:["[_nghost-%COMP%]{display:block;width:80%;min-height:80%}@media only screen and (max-width:768px){[_nghost-%COMP%]{width:90%}}.text-wrapper[_ngcontent-%COMP%]{width:100%;height:100%;background-color:var(--be-background);box-shadow:0 3px 3px -2px rgba(0,0,0,.2),0 3px 4px 0 rgba(0,0,0,.14),0 1px 8px 0 rgba(0,0,0,.12);border-radius:4px;color:var(--be-text);padding:20px;overflow:auto}.text-wrapper[_ngcontent-%COMP%], pre[_ngcontent-%COMP%]{word-wrap:break-word}pre[_ngcontent-%COMP%]{display:block;white-space:pre-wrap;margin:0;font-size:1.4rem;font-family:inherit}default-preview[_ngcontent-%COMP%]{margin:auto;position:absolute;top:0;left:0;right:0;bottom:0}"],changeDetection:0}),t})();const d=n.Zb(u),h=["playerEl"];function b(t,e){1&t&&n.Sb(0,"default-preview")}let p=(()=>{class t extends s.a{constructor(){super(...arguments),this.invalidMedia=!1}ngOnInit(){this.invalidMedia=!this.canPlayVideo(),this.invalidMedia||(this.player().src=this.getSrc(),this.player().play())}canPlayVideo(){return!!this.player().canPlayType(this.file.mime)}player(){return this.playerEl.nativeElement}}return t.\u0275fac=function(e){return f(e||t)},t.\u0275cmp=n.Lb({type:t,selectors:[["audio-preview"]],viewQuery:function(t,e){var i;1&t&&n.Jc(h,!0),2&t&&n.yc(i=n.gc())&&(e.playerEl=i.first)},features:[n.Ab],decls:3,vars:3,consts:[["controls","controls","controlsList","nodownload noremoteplayback",1,"preview-object"],["playerEl",""],[4,"ngIf"]],template:function(t,e){1&t&&(n.Sb(0,"audio",0,1),n.Lc(2,b,1,0,"default-preview",2)),2&t&&(n.Hb("hidden",e.invalidMedia),n.Db(2),n.rc("ngIf",e.invalidMedia))},directives:[o.t,a.a],styles:["[_nghost-%COMP%]{display:block;max-width:80%;height:auto}@media only screen and (max-width:768px){[_nghost-%COMP%]{width:90%}}audio[_ngcontent-%COMP%]{display:block;max-width:100%;box-shadow:0 3px 3px -2px rgba(0,0,0,.2),0 3px 4px 0 rgba(0,0,0,.14),0 1px 8px 0 rgba(0,0,0,.12)}audio[_ngcontent-%COMP%], default-preview[_ngcontent-%COMP%]{margin:auto;position:absolute;top:0;left:0;right:0;bottom:0}"],changeDetection:0}),t})();const f=n.Zb(p);function g(t,e){1&t&&n.Sb(0,"default-preview")}let m=(()=>{class t extends p{}return t.\u0275fac=function(e){return v(e||t)},t.\u0275cmp=n.Lb({type:t,selectors:[["video-preview"]],features:[n.Ab],decls:3,vars:3,consts:[["controls","controls","controlsList","nodownload noremoteplayback",1,"preview-object"],["playerEl",""],[4,"ngIf"]],template:function(t,e){1&t&&(n.Sb(0,"video",0,1),n.Lc(2,g,1,0,"default-preview",2)),2&t&&(n.Hb("hidden",e.invalidMedia),n.Db(2),n.rc("ngIf",e.invalidMedia))},directives:[o.t,a.a],styles:["[_nghost-%COMP%]{display:block;max-width:80%;max-height:80%;height:auto}@media only screen and (max-width:768px){[_nghost-%COMP%]{width:90%}}video[_ngcontent-%COMP%]{display:block;max-width:100%;max-height:100%;height:auto;box-shadow:0 3px 3px -2px rgba(0,0,0,.2),0 3px 4px 0 rgba(0,0,0,.14),0 1px 8px 0 rgba(0,0,0,.12)}default-preview[_ngcontent-%COMP%], video[_ngcontent-%COMP%]{margin:auto;position:absolute;top:0;left:0;right:0;bottom:0}"],changeDetection:0}),t})();const v=n.Zb(m);let y=(()=>{class t extends s.a{}return t.\u0275fac=function(e){return w(e||t)},t.\u0275cmp=n.Lb({type:t,selectors:[["image-preview"]],features:[n.Ab],decls:1,vars:1,consts:[[1,"preview-object",3,"src"]],template:function(t,e){1&t&&n.Sb(0,"img",0),2&t&&n.rc("src",e.getSafeSrc(),n.Fc)},styles:["[_nghost-%COMP%]{display:block;max-width:80%;max-height:80%;height:auto}@media only screen and (max-width:768px){[_nghost-%COMP%]{width:90%}}img[_ngcontent-%COMP%]{max-width:100%;max-height:100%;height:auto;margin:auto;box-shadow:0 3px 3px -2px rgba(0,0,0,.2),0 3px 4px 0 rgba(0,0,0,.14),0 1px 8px 0 rgba(0,0,0,.12);position:absolute;top:0;left:0;right:0;bottom:0;background-color:var(--be-background)}"],changeDetection:0}),t})();const w=n.Zb(y);let x=(()=>{class t extends s.a{constructor(){super(...arguments),this.className="preview-object"}getSrc(){return super.getSrc()+"#toolbar=0"}}return t.\u0275fac=function(e){return k(e||t)},t.\u0275cmp=n.Lb({type:t,selectors:[["pdf-preview"]],hostVars:2,hostBindings:function(t,e){2&t&&n.Fb(e.className)},features:[n.Ab],decls:1,vars:1,consts:[[3,"src"]],template:function(t,e){1&t&&n.Sb(0,"iframe",0),2&t&&n.rc("src",e.getSafeSrc(),n.Ec)},styles:["[_nghost-%COMP%]{display:block;margin:auto;position:absolute;top:0;left:0;right:0;bottom:0}[_nghost-%COMP%], iframe[_ngcontent-%COMP%], object[_ngcontent-%COMP%]{width:100%;height:100%}iframe[_ngcontent-%COMP%], object[_ngcontent-%COMP%]{border:none}"],changeDetection:0}),t})();const k=n.Zb(x);var _=i("XFMS"),C=i("FBzJ");const S=["iframe"];function X(t,e){if(1&t){const t=n.Yb();n.Vb(0),n.Sb(1,"iframe",3,4),n.Xb(3,"div",5),n.fc("click",(function(e){return n.Cc(t),n.jc().openInNewWindow()})),n.Wb(),n.Ub()}}function I(t,e){1&t&&n.Sb(0,"default-preview")}let O=(()=>{class t extends s.a{constructor(){super(...arguments),this.loading$=new r.a(!0),this.showDefaultPreview$=new r.a(!1)}ngAfterViewInit(){if(this.file.file_size>25e6)return this.showDefaultPreview();this.iframe.nativeElement.onload=()=>{clearTimeout(this.timeoutRef),this.stopLoading()},this.getIframeSrc().then(t=>{this.iframe.nativeElement.src=t}).catch(()=>{this.showDefaultPreview()}),this.timeoutRef=setTimeout(()=>{this.showDefaultPreview()},5e3)}stopLoading(){this.loading$.next(!1)}showDefaultPreview(){this.stopLoading(),this.showDefaultPreview$.next(!0)}openInNewWindow(){window.open(window.location.href,"_blank")}getIframeSrc(){return new Promise((t,e)=>{let i=this.getSrc();-1===i.indexOf("shareable_link")?this.http.post(`uploads/${this.file.id}/add-preview-token`).subscribe(e=>{i+=`?preview_token=${e.preview_token}`,t(this.getGoogleDocsUrl(i))},()=>e):t(this.getGoogleDocsUrl(i))})}getGoogleDocsUrl(t){return t=Object(_.a)(t)?t:this.settings.getBaseUrl()+t,"https://docs.google.com/gview?embedded=true&url="+encodeURIComponent(t)}}return t.\u0275fac=function(e){return W(e||t)},t.\u0275cmp=n.Lb({type:t,selectors:[["google-docs-viewer"]],viewQuery:function(t,e){var i;1&t&&n.Sc(S,!0),2&t&&n.yc(i=n.gc())&&(e.iframe=i.first)},features:[n.Ab],decls:6,vars:7,consts:[[4,"ngIf","ngIfElse"],["defaultPreview",""],[1,"overlay",3,"isVisible"],[1,"preview-object"],["iframe",""],[1,"pop-out-block",3,"click"]],template:function(t,e){if(1&t&&(n.Lc(0,X,4,0,"ng-container",0),n.kc(1,"async"),n.Lc(2,I,1,0,"ng-template",null,1,n.Mc),n.Sb(4,"loading-indicator",2),n.kc(5,"async")),2&t){const t=n.zc(3);n.rc("ngIf",!n.lc(1,3,e.showDefaultPreview$))("ngIfElse",t),n.Db(4),n.rc("isVisible",n.lc(5,5,e.loading$))}},directives:[o.t,C.a,a.a],pipes:[o.b],styles:["[_nghost-%COMP%]{display:block;margin:auto;position:absolute;top:0;left:0;right:0;bottom:0}[_nghost-%COMP%], iframe[_ngcontent-%COMP%]{width:100%;height:100%}iframe[_ngcontent-%COMP%]{border:none}loading-indicator.overlay[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;background-color:transparent}default-preview[_ngcontent-%COMP%]{margin:auto;position:absolute;top:0;left:0;right:0;bottom:0}.pop-out-block[_ngcontent-%COMP%]{width:40px;height:40px;position:absolute;top:12px;right:12px;cursor:pointer}"],changeDetection:0}),t})();const W=n.Zb(O);i.d(e,"a",(function(){return D})),i.d(e,"b",(function(){return R}));const D=new n.r("AVAILABLE_PREVIEWS");let R=(()=>{class t{constructor(){this.text=u,this.video=m,this.audio=p,this.image=y,this.pdf=x,this.spreadsheet=O,this.powerPoint=O,this.word=O}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=n.Nb({token:t,factory:t.\u0275fac}),t})()},w5QO:function(t,e,i){"use strict";e.noop=function(){}},wWhK:function(t,e,i){"use strict";i.d(e,"a",(function(){return h}));var n=i("fXoL"),r=i("tSQ/"),s=i("703J"),o=i("vkgz"),a=i("1V5l"),c=i("i2dy"),l=i("LsVx"),u=i("KHpT"),d=i("ehXJ");let h=(()=>{class t{constructor(t,e,i,o,a){this.draft=t,this.toast=e,this.tickets=i,this.replies=o,this.afterReplyAction=a,this.isLoading=!1,this.model=new r.b({tags:[]}),this.status=new s.a,this.replySaving=!1,this.editorIsOpen=!1,this.afterInit=new n.o}get(){return this.model}getStatus(){return this.status||new s.a}getCategory(){const t=this.model.tags.find(t=>"status"!==t.type);return t&&t.categories?t.categories[0]:null}setStatus(t){t&&(this.status=t)}openEditor(){this.editorIsOpen=!0,this.editor&&this.editor.focus()}closeEditor(){this.editorIsOpen=!1}isEditorOpen(){return this.editorIsOpen}setEditor(t){this.editor=t}setDraft(t){this.draft.set(t),this.editor.setContents(t.body)}addTag(t){this.model.tags.find(e=>t.name===e.name)||this.model.tags.unshift(t)}submitReply(t={}){return this.replySaving=!0,this.tickets.saveReply(this.model.id,this.draft.getPayload(t)).pipe(Object(o.a)(e=>{this.replySaving=!1,this.draft.delete(),this.performAfterReplyAction(),this.setStatus(t.status),this.replies.add(e.data)},()=>{this.toast.open("There was an issue submitting this reply."),this.replySaving=!1,this.isLoading=!1}))}performAfterReplyAction(){this.afterReplyAction.get()&&"stay_on_page"!==this.afterReplyAction.get()&&(this.isLoading=!0),this.afterReplyAction.perform()}init(t){t&&(this.model=t,this.status=t.tags.find(t=>"status"===t.type),this.replies.init(this.model.replies,this.model.id),this.draft.setTicketId(this.model.id),this.afterReplyAction.setTicketId(this.model.id),this.isLoading=!1,this.afterInit.emit())}}return t.\u0275fac=function(e){return new(e||t)(n.bc(a.a),n.bc(c.a),n.bc(l.a),n.bc(u.a),n.bc(d.a))},t.\u0275prov=n.Nb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},yRPT:function(t,e,i){"use strict";e.isArrayLike=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t}},yS8O:function(t,e,i){"use strict";i.d(e,"a",(function(){return b}));var n=i("0IaG"),r=i("fXoL"),s=i("Rd8u"),o=i("bTqV"),a=i("NFeN"),c=i("ofXK");function l(t,e){if(1&t&&(r.Xb(0,"div",11),r.Xb(1,"div",12),r.Nc(2),r.Wb(),r.Xb(3,"div",13),r.Nc(4),r.Wb(),r.Wb()),2&t){const t=e.$implicit,i=r.jc();r.Db(2),r.Oc(t),r.Db(2),r.Oc(i.originalEmail.headers[t])}}function u(t,e){1&t&&(r.Xb(0,"span",14),r.Nc(1,"Could not find original email for this reply."),r.Wb())}function d(t,e){if(1&t&&(r.Xb(0,"pre",15),r.Nc(1),r.Wb()),2&t){const t=r.jc();r.Db(1),r.Oc(t.originalEmail.body.plain)}}function h(t,e){if(1&t&&(r.Xb(0,"pre",16),r.Nc(1),r.Wb()),2&t){const t=r.jc();r.Db(1),r.Oc(t.originalEmail.body.html)}}let b=(()=>{class t{constructor(t,e){this.dialogRef=t,this.data=e,this.headerNames=[],this.hydrate()}close(){this.dialogRef.close()}hydrate(){this.originalEmail=this.data.original,this.originalEmail&&this.originalEmail.headers&&(this.headerNames=Object.keys(this.originalEmail.headers))}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(n.h),r.Rb(n.a))},t.\u0275cmp=r.Lb({type:t,selectors:[["show-original-reply-modal"]],decls:15,vars:4,consts:[[1,"modal-header"],["mat-dialog-title","","trans",""],["type","button","mat-icon-button","","tabindex","-1",1,"close-button",3,"click"],["svgIcon","close"],[1,"headers"],["class","header",4,"ngFor","ngForOf"],[1,"email-content"],["trans","",4,"ngIf"],["class","body-plain",4,"ngIf"],["class","body-html",4,"ngIf"],["type","submit","mat-raised-button","","color","accent","trans","",1,"submit-button",3,"click"],[1,"header"],[1,"name"],[1,"value"],["trans",""],[1,"body-plain"],[1,"body-html"]],template:function(t,e){1&t&&(r.Xb(0,"div",0),r.Xb(1,"h2",1),r.Nc(2,"Original Message"),r.Wb(),r.Xb(3,"button",2),r.fc("click",(function(t){return e.close()})),r.Sb(4,"mat-icon",3),r.Wb(),r.Wb(),r.Xb(5,"mat-dialog-content"),r.Xb(6,"div",4),r.Lc(7,l,5,2,"div",5),r.Wb(),r.Xb(8,"div",6),r.Lc(9,u,2,0,"span",7),r.Lc(10,d,2,1,"pre",8),r.Lc(11,h,2,1,"pre",9),r.Wb(),r.Wb(),r.Xb(12,"mat-dialog-actions"),r.Xb(13,"button",10),r.fc("click",(function(t){return e.close()})),r.Nc(14,"Done"),r.Wb(),r.Wb()),2&t&&(r.Db(7),r.rc("ngForOf",e.headerNames),r.Db(2),r.rc("ngIf",!e.originalEmail),r.Db(1),r.rc("ngIf",e.originalEmail&&e.originalEmail.body.plain),r.Db(1),r.rc("ngIf",e.originalEmail&&e.originalEmail.body.html))},directives:[n.i,s.a,o.b,a.a,n.f,c.s,c.t,n.c],styles:[".show-original-reply-modal-container{width:90%;height:90%}.show-original-reply-modal-container .mat-dialog-title{margin-bottom:25px}.show-original-reply-modal-container .mat-dialog-content{max-height:none}.show-original-reply-modal-container .headers{border:1px solid var(--be-divider-default)}.show-original-reply-modal-container .headers>.header{display:-webkit-box;display:flex;padding:10px;border-bottom:1px solid var(--be-divider-default)}.show-original-reply-modal-container .headers>.header>.name{-webkit-box-flex:1;flex:1 1 30%;font-weight:500;max-width:200px}.show-original-reply-modal-container .headers>.header>.value{-webkit-box-flex:1;flex:1 1 65%;margin-left:auto}.show-original-reply-modal-container .email-content{margin-top:40px}.show-original-reply-modal-container .email-content>pre{font-size:1.4rem;font-family:Roboto,Helvetica Neue,sans-serif;word-wrap:break-word;white-space:pre-wrap}.show-original-reply-modal-container .email-content>.body-plain{margin-bottom:20px;padding-bottom:20px;border-bottom:1px solid var(--be-divider-default)}"],encapsulation:2,changeDetection:0}),t})()},yx2s:function(t,e,i){"use strict";var n=i("FWf1");e.canReportError=function(t){for(;t;){var e=t.destination;if(t.closed||t.isStopped)return!1;t=e&&e instanceof n.Subscriber?e:null}return!0}},"zB/H":function(t,e,i){"use strict";var n=i("mbIT"),r=i("GMZp"),s=i("pshJ"),o=i("LBXl");function a(t){return t.reduce((function(t,e){return t.concat(e instanceof o.UnsubscriptionError?e.errors:e)}),[])}e.Subscription=function(){function t(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}var e;return t.prototype.unsubscribe=function(){var e;if(!this.closed){var i=this._parentOrParents,c=this._unsubscribe,l=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,i instanceof t)i.remove(this);else if(null!==i)for(var u=0;u<i.length;++u)i[u].remove(this);if(s.isFunction(c))try{c.call(this)}catch(b){e=b instanceof o.UnsubscriptionError?a(b.errors):[b]}if(n.isArray(l)){u=-1;for(var d=l.length;++u<d;){var h=l[u];if(r.isObject(h))try{h.unsubscribe()}catch(b){e=e||[],b instanceof o.UnsubscriptionError?e=e.concat(a(b.errors)):e.push(b)}}}if(e)throw new o.UnsubscriptionError(e)}},t.prototype.add=function(e){var i=e;if(!e)return t.EMPTY;switch(typeof e){case"function":i=new t(e);case"object":if(i===this||i.closed||"function"!=typeof i.unsubscribe)return i;if(this.closed)return i.unsubscribe(),i;if(!(i instanceof t)){var n=i;(i=new t)._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}var r=i._parentOrParents;if(null===r)i._parentOrParents=this;else if(r instanceof t){if(r===this)return i;i._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return i;r.push(this)}var s=this._subscriptions;return null===s?this._subscriptions=[i]:s.push(i),i},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var i=e.indexOf(t);-1!==i&&e.splice(i,1)}},t.EMPTY=((e=new t).closed=!0,e),t}()},zfKp:function(t,e,i){"use strict";e.observable=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}()},zzsZ:function(t,e,i){"use strict";var n=i("Q1FS"),r=i("OAkW"),s=i("2qMH");e.fromArray=function(t,e){return e?s.scheduleArray(t,e):new n.Observable(r.subscribeToArray(t))}}}]);
//# sourceMappingURL=8-es2015.a360ca3a6552474f73a6.js.map